
/*
 * Auto redirect to https to prevent CORS exceptions
 */
if (window.location.protocol == 'http:' &&
    window.location.port != '3000' &&
    window.location.host != 'localhost') {
  var restOfUrl = window.location.href.substr(5);
  /** @type {Location} */
  window.location = 'https:' + restOfUrl;
}

/*! jQuery v2.2.4 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="2.2.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){var b;if("object"!==n.type(a)||a.nodeType||n.isWindow(a))return!1;if(a.constructor&&!k.call(a,"constructor")&&!k.call(a.constructor.prototype||{},"isPrototypeOf"))return!1;for(b in a);return void 0===b||k.call(a,b)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=d.createElement("script"),b.text=a,d.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:h.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(d=e.call(arguments,2),f=function(){return a.apply(b||this,d.concat(e.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){c&&!(e=R.exec(h))||(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return h.call(b,a)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?void 0!==c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?h.call(n(a),this[0]):h.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||n.uniqueSort(e),D.test(a)&&e.reverse()),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.removeEventListener("DOMContentLoaded",J),a.removeEventListener("load",J),n.ready()}n.ready.promise=function(b){return I||(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(n.ready):(d.addEventListener("DOMContentLoaded",J),a.addEventListener("load",J))),I.promise(b)},n.ready.promise();var K=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)K(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},L=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function M(){this.expando=n.expando+M.uid++}M.uid=1,M.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!L(a))return{};var b=a[this.expando];return b||(b={},L(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(G)||[])),c=d.length;while(c--)delete f[d[c]]}(void 0===b||n.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!n.isEmptyObject(b)}};var N=new M,O=new M,P=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function R(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Q,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:P.test(c)?n.parseJSON(c):c;
}catch(e){}O.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return O.hasData(a)||N.hasData(a)},data:function(a,b,c){return O.access(a,b,c)},removeData:function(a,b){O.remove(a,b)},_data:function(a,b,c){return N.access(a,b,c)},_removeData:function(a,b){N.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=O.get(f),1===f.nodeType&&!N.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),R(f,d,e[d])));N.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){O.set(this,a)}):K(this,function(b){var c,d;if(f&&void 0===b){if(c=O.get(f,a)||O.get(f,a.replace(Q,"-$&").toLowerCase()),void 0!==c)return c;if(d=n.camelCase(a),c=O.get(f,d),void 0!==c)return c;if(c=R(f,d,void 0),void 0!==c)return c}else d=n.camelCase(a),this.each(function(){var c=O.get(this,d);O.set(this,d,b),a.indexOf("-")>-1&&void 0!==c&&O.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){O.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=N.get(a,b),c&&(!d||n.isArray(c)?d=N.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return N.get(a,c)||N.access(a,c,{empty:n.Callbacks("once memory").add(function(){N.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=N.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function W(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&T.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,$={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$.optgroup=$.option,$.tbody=$.tfoot=$.colgroup=$.caption=$.thead,$.th=$.td;function _(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function aa(a,b){for(var c=0,d=a.length;d>c;c++)N.set(a[c],"globalEval",!b||N.get(b[c],"globalEval"))}var ba=/<|&#?\w+;/;function ca(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],o=0,p=a.length;p>o;o++)if(f=a[o],f||0===f)if("object"===n.type(f))n.merge(m,f.nodeType?[f]:f);else if(ba.test(f)){g=g||l.appendChild(b.createElement("div")),h=(Y.exec(f)||["",""])[1].toLowerCase(),i=$[h]||$._default,g.innerHTML=i[1]+n.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;n.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",o=0;while(f=m[o++])if(d&&n.inArray(f,d)>-1)e&&e.push(f);else if(j=n.contains(f.ownerDocument,f),g=_(l.appendChild(f),"script"),j&&aa(g),c){k=0;while(f=g[k++])Z.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var da=/^key/,ea=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,fa=/^([^.]*)(?:\.(.+)|)/;function ga(){return!0}function ha(){return!1}function ia(){try{return d.activeElement}catch(a){}}function ja(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ja(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=ha;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return"undefined"!=typeof n&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(G)||[""],j=b.length;while(j--)h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.hasData(a)&&N.get(a);if(r&&(i=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&N.remove(a,"handle events")}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(N.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())a.rnamespace&&!a.rnamespace.test(g.namespace)||(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||d,e=c.documentElement,f=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ea.test(f)?this.mouseHooks:da.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=d),3===a.target.nodeType&&(a.target=a.target.parentNode),h.filter?h.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ia()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ia()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ga:ha):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:ha,isPropagationStopped:ha,isImmediatePropagationStopped:ha,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ga,a&&!this.isSimulated&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ga,a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ga,a&&!this.isSimulated&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||n.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),n.fn.extend({on:function(a,b,c,d){return ja(this,a,b,c,d)},one:function(a,b,c,d){return ja(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return b!==!1&&"function"!=typeof b||(c=b,b=void 0),c===!1&&(c=ha),this.each(function(){n.event.remove(this,a,c,b)})}});var ka=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,la=/<script|<style|<link/i,ma=/checked\s*(?:[^=]|=\s*.checked.)/i,na=/^true\/(.*)/,oa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pa(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function qa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function ra(a){var b=na.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function sa(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(N.hasData(a)&&(f=N.access(a),g=N.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}O.hasData(a)&&(h=O.access(a),i=n.extend({},h),O.set(b,i))}}function ta(a,b){var c=b.nodeName.toLowerCase();"input"===c&&X.test(a.type)?b.checked=a.checked:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}function ua(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&ma.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),ua(f,b,c,d)});if(o&&(e=ca(b,a[0].ownerDocument,!1,a,d),g=e.firstChild,1===e.childNodes.length&&(e=g),g||d)){for(h=n.map(_(e,"script"),qa),i=h.length;o>m;m++)j=e,m!==p&&(j=n.clone(j,!0,!0),i&&n.merge(h,_(j,"script"))),c.call(a[m],j,m);if(i)for(k=h[h.length-1].ownerDocument,n.map(h,ra),m=0;i>m;m++)j=h[m],Z.test(j.type||"")&&!N.access(j,"globalEval")&&n.contains(k,j)&&(j.src?n._evalUrl&&n._evalUrl(j.src):n.globalEval(j.textContent.replace(oa,"")))}return a}function va(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(_(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&aa(_(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(ka,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=_(h),f=_(a),d=0,e=f.length;e>d;d++)ta(f[d],g[d]);if(b)if(c)for(f=f||_(a),g=g||_(h),d=0,e=f.length;e>d;d++)sa(f[d],g[d]);else sa(a,h);return g=_(h,"script"),g.length>0&&aa(g,!i&&_(a,"script")),h},cleanData:function(a){for(var b,c,d,e=n.event.special,f=0;void 0!==(c=a[f]);f++)if(L(c)){if(b=c[N.expando]){if(b.events)for(d in b.events)e[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);c[N.expando]=void 0}c[O.expando]&&(c[O.expando]=void 0)}}}),n.fn.extend({domManip:ua,detach:function(a){return va(this,a,!0)},remove:function(a){return va(this,a)},text:function(a){return K(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=a)})},null,a,arguments.length)},append:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.appendChild(a)}})},prepend:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(_(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return K(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!la.test(a)&&!$[(Y.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(_(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return ua(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(_(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),f=e.length-1,h=0;f>=h;h++)c=h===f?this:this.clone(!0),n(e[h])[b](c),g.apply(d,c.get());return this.pushStack(d)}});var wa,xa={HTML:"block",BODY:"block"};function ya(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function za(a){var b=d,c=xa[a];return c||(c=ya(a,b),"none"!==c&&c||(wa=(wa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=wa[0].contentDocument,b.write(),b.close(),c=ya(a,b),wa.detach()),xa[a]=c),c}var Aa=/^margin/,Ba=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ca=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Ea=d.documentElement;!function(){var b,c,e,f,g=d.createElement("div"),h=d.createElement("div");if(h.style){h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h);function i(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ea.appendChild(g);var d=a.getComputedStyle(h);b="1%"!==d.top,f="2px"===d.marginLeft,c="4px"===d.width,h.style.marginRight="50%",e="4px"===d.marginRight,Ea.removeChild(g)}n.extend(l,{pixelPosition:function(){return i(),b},boxSizingReliable:function(){return null==c&&i(),c},pixelMarginRight:function(){return null==c&&i(),e},reliableMarginLeft:function(){return null==c&&i(),f},reliableMarginRight:function(){var b,c=h.appendChild(d.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",Ea.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),Ea.removeChild(g),h.removeChild(c),b}})}}();function Fa(a,b,c){var d,e,f,g,h=a.style;return c=c||Ca(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Ba.test(g)&&Aa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function Ga(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Ha=/^(none|table(?!-c[ea]).+)/,Ia={position:"absolute",visibility:"hidden",display:"block"},Ja={letterSpacing:"0",fontWeight:"400"},Ka=["Webkit","O","Moz","ms"],La=d.createElement("div").style;function Ma(a){if(a in La)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ka.length;while(c--)if(a=Ka[c]+b,a in La)return a}function Na(a,b,c){var d=T.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Oa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Pa(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ca(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Fa(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ba.test(e))return e;d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Oa(a,b,c||(g?"border":"content"),d,f)+"px"}function Qa(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=N.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=N.access(d,"olddisplay",za(d.nodeName)))):(e=V(d),"none"===c&&e||N.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Fa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=T.exec(c))&&e[1]&&(c=W(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Fa(a,b,d)),"normal"===e&&b in Ja&&(e=Ja[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Ha.test(n.css(a,"display"))&&0===a.offsetWidth?Da(a,Ia,function(){return Pa(a,b,d)}):Pa(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Ca(a),g=d&&Oa(a,b,d,"border-box"===n.css(a,"boxSizing",!1,f),f);return g&&(e=T.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=n.css(a,b)),Na(a,c,g)}}}),n.cssHooks.marginLeft=Ga(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Fa(a,"marginLeft"))||a.getBoundingClientRect().left-Da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),n.cssHooks.marginRight=Ga(l.reliableMarginRight,function(a,b){return b?Da(a,{display:"inline-block"},Fa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Aa.test(a)||(n.cssHooks[a+b].set=Na)}),n.fn.extend({css:function(a,b){return K(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ca(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Qa(this,!0)},hide:function(){return Qa(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function Ra(a,b,c,d,e){return new Ra.prototype.init(a,b,c,d,e)}n.Tween=Ra,Ra.prototype={constructor:Ra,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ra.propHooks[this.prop];return a&&a.get?a.get(this):Ra.propHooks._default.get(this)},run:function(a){var b,c=Ra.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ra.propHooks._default.set(this),this}},Ra.prototype.init.prototype=Ra.prototype,Ra.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},Ra.propHooks.scrollTop=Ra.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=Ra.prototype.init,n.fx.step={};var Sa,Ta,Ua=/^(?:toggle|show|hide)$/,Va=/queueHooks$/;function Wa(){return a.setTimeout(function(){Sa=void 0}),Sa=n.now()}function Xa(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=U[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ya(a,b,c){for(var d,e=(_a.tweeners[b]||[]).concat(_a.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Za(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&V(a),q=N.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?N.get(a,"olddisplay")||za(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Ua.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?za(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=N.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;N.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ya(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function $a(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function _a(a,b,c){var d,e,f=0,g=_a.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Sa||Wa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:Sa||Wa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for($a(k,j.opts.specialEasing);g>f;f++)if(d=_a.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,Ya,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(_a,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return W(c.elem,a,T.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],_a.tweeners[c]=_a.tweeners[c]||[],_a.tweeners[c].unshift(b)},prefilters:[Za],prefilter:function(a,b){b?_a.prefilters.unshift(a):_a.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=_a(this,n.extend({},a),f);(e||N.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=N.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Va.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));!b&&c||n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=N.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Xa(b,!0),a,d,e)}}),n.each({slideDown:Xa("show"),slideUp:Xa("hide"),slideToggle:Xa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Sa=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Sa=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ta||(Ta=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(Ta),Ta=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=d.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var ab,bb=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return K(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ab:void 0)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ab={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=bb[b]||n.find.attr;bb[b]=function(a,b,d){var e,f;return d||(f=bb[b],bb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,bb[b]=f),e}});var cb=/^(?:input|select|textarea|button)$/i,db=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return K(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,e=n.propHooks[b]),
void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):cb.test(a.nodeName)||db.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var eb=/[\t\r\n\f]/g;function fb(a){return a.getAttribute&&a.getAttribute("class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,fb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,fb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,fb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else void 0!==a&&"boolean"!==c||(b=fb(this),b&&N.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":N.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+fb(c)+" ").replace(eb," ").indexOf(b)>-1)return!0;return!1}});var gb=/\r/g,hb=/[\x20\t\r\n\f]+/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(gb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a)).replace(hb," ")}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(n.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var ib=/^(?:focusinfocus|focusoutblur)$/;n.extend(n.event,{trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!ib.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),l=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},f||!o.trigger||o.trigger.apply(e,c)!==!1)){if(!f&&!o.noBubble&&!n.isWindow(e)){for(j=o.delegateType||q,ib.test(j+q)||(h=h.parentNode);h;h=h.parentNode)p.push(h),i=h;i===(e.ownerDocument||d)&&p.push(i.defaultView||i.parentWindow||a)}g=0;while((h=p[g++])&&!b.isPropagationStopped())b.type=g>1?j:o.bindType||q,m=(N.get(h,"events")||{})[b.type]&&N.get(h,"handle"),m&&m.apply(h,c),m=l&&h[l],m&&m.apply&&L(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=q,f||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!L(e)||l&&n.isFunction(e[q])&&!n.isWindow(e)&&(i=e[l],i&&(e[l]=null),n.event.triggered=q,e[q](),n.event.triggered=void 0,i&&(e[l]=i)),b.result}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b)}}),n.fn.extend({trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),l.focusin="onfocusin"in a,l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=N.access(d,b);e||d.addEventListener(a,c,!0),N.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=N.access(d,b)-1;e?N.access(d,b,e):(d.removeEventListener(a,c,!0),N.remove(d,b))}}});var jb=a.location,kb=n.now(),lb=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return c&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var mb=/#.*$/,nb=/([?&])_=[^&]*/,ob=/^(.*?):[ \t]*([^\r\n]*)$/gm,pb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qb=/^(?:GET|HEAD)$/,rb=/^\/\//,sb={},tb={},ub="*/".concat("*"),vb=d.createElement("a");vb.href=jb.href;function wb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function xb(a,b,c,d){var e={},f=a===tb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function yb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function zb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Ab(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:jb.href,type:"GET",isLocal:pb.test(jb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?yb(yb(a,n.ajaxSettings),b):yb(n.ajaxSettings,a)},ajaxPrefilter:wb(sb),ajaxTransport:wb(tb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=n.ajaxSetup({},c),o=m.context||m,p=m.context&&(o.nodeType||o.jquery)?n(o):n.event,q=n.Deferred(),r=n.Callbacks("once memory"),s=m.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(2===v){if(!h){h={};while(b=ob.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===v?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return v||(a=u[c]=u[c]||a,t[a]=b),this},overrideMimeType:function(a){return v||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>v)for(b in a)s[b]=[s[b],a[b]];else x.always(a[x.status]);return this},abort:function(a){var b=a||w;return e&&e.abort(b),z(0,b),this}};if(q.promise(x).complete=r.add,x.success=x.done,x.error=x.fail,m.url=((b||m.url||jb.href)+"").replace(mb,"").replace(rb,jb.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=n.trim(m.dataType||"*").toLowerCase().match(G)||[""],null==m.crossDomain){j=d.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=vb.protocol+"//"+vb.host!=j.protocol+"//"+j.host}catch(y){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=n.param(m.data,m.traditional)),xb(sb,m,c,x),2===v)return x;k=n.event&&m.global,k&&0===n.active++&&n.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!qb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(lb.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=nb.test(f)?f.replace(nb,"$1_="+kb++):f+(lb.test(f)?"&":"?")+"_="+kb++)),m.ifModified&&(n.lastModified[f]&&x.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&x.setRequestHeader("If-None-Match",n.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+ub+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)x.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(o,x,m)===!1||2===v))return x.abort();w="abort";for(l in{success:1,error:1,complete:1})x[l](m[l]);if(e=xb(tb,m,c,x)){if(x.readyState=1,k&&p.trigger("ajaxSend",[x,m]),2===v)return x;m.async&&m.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},m.timeout));try{v=1,e.send(t,z)}catch(y){if(!(2>v))throw y;z(-1,y)}}else z(-1,"No Transport");function z(b,c,d,h){var j,l,t,u,w,y=c;2!==v&&(v=2,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=zb(m,x,d)),u=Ab(m,u,x,j),j?(m.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(n.lastModified[f]=w),w=x.getResponseHeader("etag"),w&&(n.etag[f]=w)),204===b||"HEAD"===m.type?y="nocontent":304===b?y="notmodified":(y=u.state,l=u.data,t=u.error,j=!t)):(t=y,!b&&y||(y="error",0>b&&(b=0))),x.status=b,x.statusText=(c||y)+"",j?q.resolveWith(o,[l,y,x]):q.rejectWith(o,[x,y,t]),x.statusCode(s),s=void 0,k&&p.trigger(j?"ajaxSuccess":"ajaxError",[x,m,j?l:t]),r.fireWith(o,[x,y]),k&&(p.trigger("ajaxComplete",[x,m]),--n.active||n.event.trigger("ajaxStop")))}return x},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return!n.expr.filters.visible(a)},n.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Bb=/%20/g,Cb=/\[\]$/,Db=/\r?\n/g,Eb=/^(?:submit|button|image|reset|file)$/i,Fb=/^(?:input|select|textarea|keygen)/i;function Gb(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Cb.test(a)?d(a,e):Gb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Gb(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Gb(c,a[c],b,e);return d.join("&").replace(Bb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Fb.test(this.nodeName)&&!Eb.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Db,"\r\n")}}):{name:b.name,value:c.replace(Db,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Hb={0:200,1223:204},Ib=n.ajaxSettings.xhr();l.cors=!!Ib&&"withCredentials"in Ib,l.ajax=Ib=!!Ib,n.ajaxTransport(function(b){var c,d;return l.cors||Ib&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Hb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=n("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Jb=[],Kb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Jb.pop()||n.expando+"_"+kb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Kb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Kb,"$1"+e):b.jsonp!==!1&&(b.url+=(lb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Jb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||d;var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ca([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var Lb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Lb)return Lb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(this,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function Mb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(e=d.getBoundingClientRect(),c=Mb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ea})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;n.fn[a]=function(d){return K(this,function(a,d,e){var f=Mb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ga(l.pixelPosition,function(a,c){return c?(c=Fa(a,b),Ba.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return K(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Nb=a.jQuery,Ob=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Ob),b&&a.jQuery===n&&(a.jQuery=Nb),n},b||(a.jQuery=a.$=n),n});

/*
 AngularJS v1.5.8
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(C){'use strict';function N(a){return function(){var b=arguments[0],d;d="["+(a?a+":":"")+b+"] http://errors.angularjs.org/1.5.8/"+(a?a+"/":"")+b;for(b=1;b<arguments.length;b++){d=d+(1==b?"?":"&")+"p"+(b-1)+"=";var c=encodeURIComponent,e;e=arguments[b];e="function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e;d+=c(e)}return Error(d)}}function ta(a){if(null==a||Va(a))return!1;if(L(a)||G(a)||F&&a instanceof F)return!0;
var b="length"in Object(a)&&a.length;return T(b)&&(0<=b&&(b-1 in a||a instanceof Array)||"function"==typeof a.item)}function q(a,b,d){var c,e;if(a)if(z(a))for(c in a)"prototype"==c||"length"==c||"name"==c||a.hasOwnProperty&&!a.hasOwnProperty(c)||b.call(d,a[c],c,a);else if(L(a)||ta(a)){var f="object"!==typeof a;c=0;for(e=a.length;c<e;c++)(f||c in a)&&b.call(d,a[c],c,a)}else if(a.forEach&&a.forEach!==q)a.forEach(b,d,a);else if(sc(a))for(c in a)b.call(d,a[c],c,a);else if("function"===typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&
b.call(d,a[c],c,a);else for(c in a)ua.call(a,c)&&b.call(d,a[c],c,a);return a}function tc(a,b,d){for(var c=Object.keys(a).sort(),e=0;e<c.length;e++)b.call(d,a[c[e]],c[e]);return c}function uc(a){return function(b,d){a(d,b)}}function Yd(){return++pb}function Pb(a,b,d){for(var c=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];if(D(g)||z(g))for(var h=Object.keys(g),k=0,l=h.length;k<l;k++){var m=h[k],n=g[m];d&&D(n)?da(n)?a[m]=new Date(n.valueOf()):Wa(n)?a[m]=new RegExp(n):n.nodeName?a[m]=n.cloneNode(!0):
Qb(n)?a[m]=n.clone():(D(a[m])||(a[m]=L(n)?[]:{}),Pb(a[m],[n],!0)):a[m]=n}}c?a.$$hashKey=c:delete a.$$hashKey;return a}function S(a){return Pb(a,va.call(arguments,1),!1)}function Zd(a){return Pb(a,va.call(arguments,1),!0)}function Z(a){return parseInt(a,10)}function Rb(a,b){return S(Object.create(a),b)}function A(){}function Xa(a){return a}function ha(a){return function(){return a}}function vc(a){return z(a.toString)&&a.toString!==ma}function y(a){return"undefined"===typeof a}function w(a){return"undefined"!==
typeof a}function D(a){return null!==a&&"object"===typeof a}function sc(a){return null!==a&&"object"===typeof a&&!wc(a)}function G(a){return"string"===typeof a}function T(a){return"number"===typeof a}function da(a){return"[object Date]"===ma.call(a)}function z(a){return"function"===typeof a}function Wa(a){return"[object RegExp]"===ma.call(a)}function Va(a){return a&&a.window===a}function Ya(a){return a&&a.$evalAsync&&a.$watch}function Ga(a){return"boolean"===typeof a}function $d(a){return a&&T(a.length)&&
ae.test(ma.call(a))}function Qb(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function be(a){var b={};a=a.split(",");var d;for(d=0;d<a.length;d++)b[a[d]]=!0;return b}function wa(a){return Q(a.nodeName||a[0]&&a[0].nodeName)}function Za(a,b){var d=a.indexOf(b);0<=d&&a.splice(d,1);return d}function pa(a,b){function d(a,b){var d=b.$$hashKey,e;if(L(a)){e=0;for(var f=a.length;e<f;e++)b.push(c(a[e]))}else if(sc(a))for(e in a)b[e]=c(a[e]);else if(a&&"function"===typeof a.hasOwnProperty)for(e in a)a.hasOwnProperty(e)&&
(b[e]=c(a[e]));else for(e in a)ua.call(a,e)&&(b[e]=c(a[e]));d?b.$$hashKey=d:delete b.$$hashKey;return b}function c(a){if(!D(a))return a;var b=f.indexOf(a);if(-1!==b)return g[b];if(Va(a)||Ya(a))throw xa("cpws");var b=!1,c=e(a);void 0===c&&(c=L(a)?[]:Object.create(wc(a)),b=!0);f.push(a);g.push(c);return b?d(a,c):c}function e(a){switch(ma.call(a)){case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Float32Array]":case "[object Float64Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return new a.constructor(c(a.buffer),
a.byteOffset,a.length);case "[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);(new Uint8Array(b)).set(new Uint8Array(a));return b}return a.slice(0);case "[object Boolean]":case "[object Number]":case "[object String]":case "[object Date]":return new a.constructor(a.valueOf());case "[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex,b;case "[object Blob]":return new a.constructor([a],{type:a.type})}if(z(a.cloneNode))return a.cloneNode(!0)}
var f=[],g=[];if(b){if($d(b)||"[object ArrayBuffer]"===ma.call(b))throw xa("cpta");if(a===b)throw xa("cpi");L(b)?b.length=0:q(b,function(a,d){"$$hashKey"!==d&&delete b[d]});f.push(a);g.push(b);return d(a,b)}return c(a)}function na(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d=typeof a,c;if(d==typeof b&&"object"==d)if(L(a)){if(!L(b))return!1;if((d=a.length)==b.length){for(c=0;c<d;c++)if(!na(a[c],b[c]))return!1;return!0}}else{if(da(a))return da(b)?na(a.getTime(),
b.getTime()):!1;if(Wa(a))return Wa(b)?a.toString()==b.toString():!1;if(Ya(a)||Ya(b)||Va(a)||Va(b)||L(b)||da(b)||Wa(b))return!1;d=U();for(c in a)if("$"!==c.charAt(0)&&!z(a[c])){if(!na(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&"$"!==c.charAt(0)&&w(b[c])&&!z(b[c]))return!1;return!0}return!1}function $a(a,b,d){return a.concat(va.call(b,d))}function ab(a,b){var d=2<arguments.length?va.call(arguments,2):[];return!z(b)||b instanceof RegExp?b:d.length?function(){return arguments.length?b.apply(a,
$a(d,arguments,0)):b.apply(a,d)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function ce(a,b){var d=b;"string"===typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?d=void 0:Va(b)?d="$WINDOW":b&&C.document===b?d="$DOCUMENT":Ya(b)&&(d="$SCOPE");return d}function bb(a,b){if(!y(a))return T(b)||(b=b?2:null),JSON.stringify(a,ce,b)}function xc(a){return G(a)?JSON.parse(a):a}function yc(a,b){a=a.replace(de,"");var d=Date.parse("Jan 01, 1970 00:00:00 "+a)/6E4;return isNaN(d)?b:d}function Sb(a,
b,d){d=d?-1:1;var c=a.getTimezoneOffset();b=yc(b,c);d*=b-c;a=new Date(a.getTime());a.setMinutes(a.getMinutes()+d);return a}function ya(a){a=F(a).clone();try{a.empty()}catch(b){}var d=F("<div>").append(a).html();try{return a[0].nodeType===Ma?Q(d):d.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Q(b)})}catch(c){return Q(d)}}function zc(a){try{return decodeURIComponent(a)}catch(b){}}function Ac(a){var b={};q((a||"").split("&"),function(a){var c,e,f;a&&(e=a=a.replace(/\+/g,"%20"),
c=a.indexOf("="),-1!==c&&(e=a.substring(0,c),f=a.substring(c+1)),e=zc(e),w(e)&&(f=w(f)?zc(f):!0,ua.call(b,e)?L(b[e])?b[e].push(f):b[e]=[b[e],f]:b[e]=f))});return b}function Tb(a){var b=[];q(a,function(a,c){L(a)?q(a,function(a){b.push(ea(c,!0)+(!0===a?"":"="+ea(a,!0)))}):b.push(ea(c,!0)+(!0===a?"":"="+ea(a,!0)))});return b.length?b.join("&"):""}function qb(a){return ea(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ea(a,b){return encodeURIComponent(a).replace(/%40/gi,
"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function ee(a,b){var d,c,e=Na.length;for(c=0;c<e;++c)if(d=Na[c]+b,G(d=a.getAttribute(d)))return d;return null}function fe(a,b){var d,c,e={};q(Na,function(b){b+="app";!d&&a.hasAttribute&&a.hasAttribute(b)&&(d=a,c=a.getAttribute(b))});q(Na,function(b){b+="app";var e;!d&&(e=a.querySelector("["+b.replace(":","\\:")+"]"))&&(d=e,c=e.getAttribute(b))});d&&(e.strictDi=null!==ee(d,"strict-di"),
b(d,c?[c]:[],e))}function Bc(a,b,d){D(d)||(d={});d=S({strictDi:!1},d);var c=function(){a=F(a);if(a.injector()){var c=a[0]===C.document?"document":ya(a);throw xa("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"));}b=b||[];b.unshift(["$provide",function(b){b.value("$rootElement",a)}]);d.debugInfoEnabled&&b.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]);b.unshift("ng");c=cb(b,d.strictDi);c.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",
d);c(b)(a)})}]);return c},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;C&&e.test(C.name)&&(d.debugInfoEnabled=!0,C.name=C.name.replace(e,""));if(C&&!f.test(C.name))return c();C.name=C.name.replace(f,"");ca.resumeBootstrap=function(a){q(a,function(a){b.push(a)});return c()};z(ca.resumeDeferredBootstrap)&&ca.resumeDeferredBootstrap()}function ge(){C.name="NG_ENABLE_DEBUG_INFO!"+C.name;C.location.reload()}function he(a){a=ca.element(a).injector();if(!a)throw xa("test");return a.get("$$testability")}
function Cc(a,b){b=b||"_";return a.replace(ie,function(a,c){return(c?b:"")+a.toLowerCase()})}function je(){var a;if(!Dc){var b=rb();(qa=y(b)?C.jQuery:b?C[b]:void 0)&&qa.fn.on?(F=qa,S(qa.fn,{scope:Oa.scope,isolateScope:Oa.isolateScope,controller:Oa.controller,injector:Oa.injector,inheritedData:Oa.inheritedData}),a=qa.cleanData,qa.cleanData=function(b){for(var c,e=0,f;null!=(f=b[e]);e++)(c=qa._data(f,"events"))&&c.$destroy&&qa(f).triggerHandler("$destroy");a(b)}):F=O;ca.element=F;Dc=!0}}function sb(a,
b,d){if(!a)throw xa("areq",b||"?",d||"required");return a}function Pa(a,b,d){d&&L(a)&&(a=a[a.length-1]);sb(z(a),b,"not a function, got "+(a&&"object"===typeof a?a.constructor.name||"Object":typeof a));return a}function Qa(a,b){if("hasOwnProperty"===a)throw xa("badname",b);}function Ec(a,b,d){if(!b)return a;b=b.split(".");for(var c,e=a,f=b.length,g=0;g<f;g++)c=b[g],a&&(a=(e=a)[c]);return!d&&z(a)?ab(e,a):a}function tb(a){for(var b=a[0],d=a[a.length-1],c,e=1;b!==d&&(b=b.nextSibling);e++)if(c||a[e]!==
b)c||(c=F(va.call(a,0,e))),c.push(b);return c||a}function U(){return Object.create(null)}function ke(a){function b(a,b,c){return a[b]||(a[b]=c())}var d=N("$injector"),c=N("ng");a=b(a,"angular",Object);a.$$minErr=a.$$minErr||N;return b(a,"module",function(){var a={};return function(f,g,h){if("hasOwnProperty"===f)throw c("badname","module");g&&a.hasOwnProperty(f)&&(a[f]=null);return b(a,f,function(){function a(b,d,e,f){f||(f=c);return function(){f[e||"push"]([b,d,arguments]);return R}}function b(a,
d){return function(b,e){e&&z(e)&&(e.$$moduleName=f);c.push([a,d,arguments]);return R}}if(!g)throw d("nomod",f);var c=[],e=[],p=[],u=a("$injector","invoke","push",e),R={_invokeQueue:c,_configBlocks:e,_runBlocks:p,requires:g,name:f,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator"),animation:b("$animateProvider","register"),filter:b("$filterProvider",
"register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),component:b("$compileProvider","component"),config:u,run:function(a){p.push(a);return this}};h&&u(h);return R})}})}function ia(a,b){if(L(a)){b=b||[];for(var d=0,c=a.length;d<c;d++)b[d]=a[d]}else if(D(a))for(d in b=b||{},a)if("$"!==d.charAt(0)||"$"!==d.charAt(1))b[d]=a[d];return b||a}function le(a){S(a,{bootstrap:Bc,copy:pa,extend:S,merge:Zd,equals:na,element:F,forEach:q,injector:cb,noop:A,bind:ab,
toJson:bb,fromJson:xc,identity:Xa,isUndefined:y,isDefined:w,isString:G,isFunction:z,isObject:D,isNumber:T,isElement:Qb,isArray:L,version:me,isDate:da,lowercase:Q,uppercase:ub,callbacks:{$$counter:0},getTestability:he,$$minErr:N,$$csp:Ba,reloadWithDebugInfo:ge});Ub=ke(C);Ub("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:ne});a.provider("$compile",Fc).directive({a:oe,input:Gc,textarea:Gc,form:pe,script:qe,select:re,style:se,option:te,ngBind:ue,ngBindHtml:ve,ngBindTemplate:we,ngClass:xe,
ngClassEven:ye,ngClassOdd:ze,ngCloak:Ae,ngController:Be,ngForm:Ce,ngHide:De,ngIf:Ee,ngInclude:Fe,ngInit:Ge,ngNonBindable:He,ngPluralize:Ie,ngRepeat:Je,ngShow:Ke,ngStyle:Le,ngSwitch:Me,ngSwitchWhen:Ne,ngSwitchDefault:Oe,ngOptions:Pe,ngTransclude:Qe,ngModel:Re,ngList:Se,ngChange:Te,pattern:Hc,ngPattern:Hc,required:Ic,ngRequired:Ic,minlength:Jc,ngMinlength:Jc,maxlength:Kc,ngMaxlength:Kc,ngValue:Ue,ngModelOptions:Ve}).directive({ngInclude:We}).directive(vb).directive(Lc);a.provider({$anchorScroll:Xe,
$animate:Ye,$animateCss:Ze,$$animateJs:$e,$$animateQueue:af,$$AnimateRunner:bf,$$animateAsyncRun:cf,$browser:df,$cacheFactory:ef,$controller:ff,$document:gf,$exceptionHandler:hf,$filter:Mc,$$forceReflow:jf,$interpolate:kf,$interval:lf,$http:mf,$httpParamSerializer:nf,$httpParamSerializerJQLike:of,$httpBackend:pf,$xhrFactory:qf,$jsonpCallbacks:rf,$location:sf,$log:tf,$parse:uf,$rootScope:vf,$q:wf,$$q:xf,$sce:yf,$sceDelegate:zf,$sniffer:Af,$templateCache:Bf,$templateRequest:Cf,$$testability:Df,$timeout:Ef,
$window:Ff,$$rAF:Gf,$$jqLite:Hf,$$HashMap:If,$$cookieReader:Jf})}])}function db(a){return a.replace(Kf,function(a,d,c,e){return e?c.toUpperCase():c}).replace(Lf,"Moz$1")}function Nc(a){a=a.nodeType;return 1===a||!a||9===a}function Oc(a,b){var d,c,e=b.createDocumentFragment(),f=[];if(Vb.test(a)){d=e.appendChild(b.createElement("div"));c=(Mf.exec(a)||["",""])[1].toLowerCase();c=ja[c]||ja._default;d.innerHTML=c[1]+a.replace(Nf,"<$1></$2>")+c[2];for(c=c[0];c--;)d=d.lastChild;f=$a(f,d.childNodes);d=e.firstChild;
d.textContent=""}else f.push(b.createTextNode(a));e.textContent="";e.innerHTML="";q(f,function(a){e.appendChild(a)});return e}function Pc(a,b){var d=a.parentNode;d&&d.replaceChild(b,a);b.appendChild(a)}function O(a){if(a instanceof O)return a;var b;G(a)&&(a=W(a),b=!0);if(!(this instanceof O)){if(b&&"<"!=a.charAt(0))throw Wb("nosel");return new O(a)}if(b){b=C.document;var d;a=(d=Of.exec(a))?[b.createElement(d[1])]:(d=Oc(a,b))?d.childNodes:[]}Qc(this,a)}function Xb(a){return a.cloneNode(!0)}function wb(a,
b){b||eb(a);if(a.querySelectorAll)for(var d=a.querySelectorAll("*"),c=0,e=d.length;c<e;c++)eb(d[c])}function Rc(a,b,d,c){if(w(c))throw Wb("offargs");var e=(c=xb(a))&&c.events,f=c&&c.handle;if(f)if(b){var g=function(b){var c=e[b];w(d)&&Za(c||[],d);w(d)&&c&&0<c.length||(a.removeEventListener(b,f,!1),delete e[b])};q(b.split(" "),function(a){g(a);yb[a]&&g(yb[a])})}else for(b in e)"$destroy"!==b&&a.removeEventListener(b,f,!1),delete e[b]}function eb(a,b){var d=a.ng339,c=d&&fb[d];c&&(b?delete c.data[b]:
(c.handle&&(c.events.$destroy&&c.handle({},"$destroy"),Rc(a)),delete fb[d],a.ng339=void 0))}function xb(a,b){var d=a.ng339,d=d&&fb[d];b&&!d&&(a.ng339=d=++Pf,d=fb[d]={events:{},data:{},handle:void 0});return d}function Yb(a,b,d){if(Nc(a)){var c=w(d),e=!c&&b&&!D(b),f=!b;a=(a=xb(a,!e))&&a.data;if(c)a[b]=d;else{if(f)return a;if(e)return a&&a[b];S(a,b)}}}function zb(a,b){return a.getAttribute?-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" "):!1}function Ab(a,b){b&&a.setAttribute&&
q(b.split(" "),function(b){a.setAttribute("class",W((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+W(b)+" "," ")))})}function Bb(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");q(b.split(" "),function(a){a=W(a);-1===d.indexOf(" "+a+" ")&&(d+=a+" ")});a.setAttribute("class",W(d))}}function Qc(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var d=b.length;if("number"===typeof d&&b.window!==b){if(d)for(var c=0;c<d;c++)a[a.length++]=
b[c]}else a[a.length++]=b}}function Sc(a,b){return Cb(a,"$"+(b||"ngController")+"Controller")}function Cb(a,b,d){9==a.nodeType&&(a=a.documentElement);for(b=L(b)?b:[b];a;){for(var c=0,e=b.length;c<e;c++)if(w(d=F.data(a,b[c])))return d;a=a.parentNode||11===a.nodeType&&a.host}}function Tc(a){for(wb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Db(a,b){b||wb(a);var d=a.parentNode;d&&d.removeChild(a)}function Qf(a,b){b=b||C;if("complete"===b.document.readyState)b.setTimeout(a);else F(b).on("load",
a)}function Uc(a,b){var d=Eb[b.toLowerCase()];return d&&Vc[wa(a)]&&d}function Rf(a,b){var d=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=b[d||c.type],g=f?f.length:0;if(g){if(y(c.immediatePropagationStopped)){var h=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();h&&h.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};var k=f.specialHandlerWrapper||
Sf;1<g&&(f=ia(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||k(a,c,f[l])}};d.elem=a;return d}function Sf(a,b,d){d.call(a,b)}function Tf(a,b,d){var c=b.relatedTarget;c&&(c===a||Uf.call(a,c))||d.call(a,b)}function Hf(){this.$get=function(){return S(O,{hasClass:function(a,b){a.attr&&(a=a[0]);return zb(a,b)},addClass:function(a,b){a.attr&&(a=a[0]);return Bb(a,b)},removeClass:function(a,b){a.attr&&(a=a[0]);return Ab(a,b)}})}}function Ca(a,b){var d=a&&a.$$hashKey;if(d)return"function"===typeof d&&
(d=a.$$hashKey()),d;d=typeof a;return d="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||Yd)():d+":"+a}function Ra(a,b){if(b){var d=0;this.nextUid=function(){return++d}}q(a,this.put,this)}function Wc(a){a=(Function.prototype.toString.call(a)+" ").replace(Vf,"");return a.match(Wf)||a.match(Xf)}function Yf(a){return(a=Wc(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function cb(a,b){function d(a){return function(b,c){if(D(b))q(b,uc(a));else return a(b,c)}}function c(a,b){Qa(a,
"service");if(z(b)||L(b))b=p.instantiate(b);if(!b.$get)throw Ha("pget",a);return n[a+"Provider"]=b}function e(a,b){return function(){var c=B.invoke(b,this);if(y(c))throw Ha("undef",a);return c}}function f(a,b,d){return c(a,{$get:!1!==d?e(a,b):b})}function g(a){sb(y(a)||L(a),"modulesToLoad","not an array");var b=[],c;q(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=p.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.put(a,!0);try{G(a)?(c=Ub(a),b=b.concat(g(c.requires)).concat(c._runBlocks),
d(c._invokeQueue),d(c._configBlocks)):z(a)?b.push(p.invoke(a)):L(a)?b.push(p.invoke(a)):Pa(a,"module")}catch(e){throw L(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ha("modulerr",a,e.stack||e.message||e);}}});return b}function h(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===k)throw Ha("cdep",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=k,a[b]=c(b,e)}catch(f){throw a[b]===k&&delete a[b],f;}finally{l.shift()}}function e(a,
c,f){var g=[];a=cb.$$annotate(a,b,f);for(var h=0,k=a.length;h<k;h++){var l=a[h];if("string"!==typeof l)throw Ha("itkn",l);g.push(c&&c.hasOwnProperty(l)?c[l]:d(l,f))}return g}return{invoke:function(a,b,c,d){"string"===typeof c&&(d=c,c=null);c=e(a,c,d);L(a)&&(a=a[a.length-1]);d=11>=Ea?!1:"function"===typeof a&&/^(?:class\b|constructor\()/.test(Function.prototype.toString.call(a)+" ");return d?(c.unshift(null),new (Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=
L(a)?a[a.length-1]:a;a=e(a,b,c);a.unshift(null);return new (Function.prototype.bind.apply(d,a))},get:d,annotate:cb.$$annotate,has:function(b){return n.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var k={},l=[],m=new Ra([],!0),n={$provide:{provider:d(c),factory:d(f),service:d(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return f(a,ha(b),!1)}),constant:d(function(a,b){Qa(a,"constant");n[a]=b;u[a]=b}),decorator:function(a,b){var c=
p.get(a+"Provider"),d=c.$get;c.$get=function(){var a=B.invoke(d,c);return B.invoke(b,null,{$delegate:a})}}}},p=n.$injector=h(n,function(a,b){ca.isString(b)&&l.push(b);throw Ha("unpr",l.join(" <- "));}),u={},R=h(u,function(a,b){var c=p.get(a+"Provider",b);return B.invoke(c.$get,c,void 0,a)}),B=R;n.$injectorProvider={$get:ha(R)};var r=g(a),B=R.get("$injector");B.strictDi=b;q(r,function(a){a&&B.invoke(a)});return B}function Xe(){var a=!0;this.disableAutoScrolling=function(){a=!1};this.$get=["$window",
"$location","$rootScope",function(b,d,c){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===wa(a))return b=a,!0});return b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset;z(c)?c=c():Qb(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):T(c)||(c=0);c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=G(a)?a:d.hash();var b;a?(b=h.getElementById(a))?f(b):(b=e(h.getElementsByName(a)))?f(b):"top"===
a&&f(null):f(null)}var h=b.document;a&&c.$watch(function(){return d.hash()},function(a,b){a===b&&""===a||Qf(function(){c.$evalAsync(g)})});return g}]}function gb(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;L(a)&&(a=a.join(" "));L(b)&&(b=b.join(" "));return a+" "+b}function Zf(a){G(a)&&(a=a.split(" "));var b=U();q(a,function(a){a.length&&(b[a]=!0)});return b}function Ia(a){return D(a)?a:{}}function $f(a,b,d,c){function e(a){try{a.apply(null,va.call(arguments,1))}finally{if(R--,0===R)for(;B.length;)try{B.pop()()}catch(b){d.error(b)}}}
function f(){t=null;g();h()}function g(){r=K();r=y(r)?null:r;na(r,E)&&(r=E);E=r}function h(){if(v!==k.url()||J!==r)v=k.url(),J=r,q(M,function(a){a(k.url(),r)})}var k=this,l=a.location,m=a.history,n=a.setTimeout,p=a.clearTimeout,u={};k.isMock=!1;var R=0,B=[];k.$$completeOutstandingRequest=e;k.$$incOutstandingRequestCount=function(){R++};k.notifyWhenNoOutstandingRequests=function(a){0===R?a():B.push(a)};var r,J,v=l.href,fa=b.find("base"),t=null,K=c.history?function(){try{return m.state}catch(a){}}:
A;g();J=r;k.url=function(b,d,e){y(e)&&(e=null);l!==a.location&&(l=a.location);m!==a.history&&(m=a.history);if(b){var f=J===e;if(v===b&&(!c.history||f))return k;var h=v&&Ja(v)===Ja(b);v=b;J=e;!c.history||h&&f?(h||(t=b),d?l.replace(b):h?(d=l,e=b.indexOf("#"),e=-1===e?"":b.substr(e),d.hash=e):l.href=b,l.href!==b&&(t=b)):(m[d?"replaceState":"pushState"](e,"",b),g(),J=r);t&&(t=b);return k}return t||l.href.replace(/%27/g,"'")};k.state=function(){return r};var M=[],H=!1,E=null;k.onUrlChange=function(b){if(!H){if(c.history)F(a).on("popstate",
f);F(a).on("hashchange",f);H=!0}M.push(b);return b};k.$$applicationDestroyed=function(){F(a).off("hashchange popstate",f)};k.$$checkUrlChange=h;k.baseHref=function(){var a=fa.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};k.defer=function(a,b){var c;R++;c=n(function(){delete u[c];e(a)},b||0);u[c]=!0;return c};k.defer.cancel=function(a){return u[a]?(delete u[a],p(a),e(A),!0):!1}}function df(){this.$get=["$window","$log","$sniffer","$document",function(a,b,d,c){return new $f(a,c,b,
d)}]}function ef(){this.$get=function(){function a(a,c){function e(a){a!=n&&(p?p==a&&(p=a.n):p=a,f(a.n,a.p),f(a,n),n=a,n.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw N("$cacheFactory")("iid",a);var g=0,h=S({},c,{id:a}),k=U(),l=c&&c.capacity||Number.MAX_VALUE,m=U(),n=null,p=null;return b[a]={put:function(a,b){if(!y(b)){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c)}a in k||g++;k[a]=b;g>l&&this.remove(p.key);return b}},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];
if(!b)return;e(b)}return k[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b==n&&(n=b.p);b==p&&(p=b.n);f(b.n,b.p);delete m[a]}a in k&&(delete k[a],g--)},removeAll:function(){k=U();g=0;m=U();n=p=null},destroy:function(){m=h=k=null;delete b[a]},info:function(){return S({},h,{size:g})}}}var b={};a.info=function(){var a={};q(b,function(b,e){a[e]=b.info()});return a};a.get=function(a){return b[a]};return a}}function Bf(){this.$get=["$cacheFactory",function(a){return a("templates")}]}
function Fc(a,b){function d(a,b,c){var d=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,e=U();q(a,function(a,f){if(a in n)e[f]=n[a];else{var g=a.match(d);if(!g)throw ga("iscp",b,f,a,c?"controller bindings definition":"isolate scope definition");e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f};g[4]&&(n[a]=e[f])}});return e}function c(a){var b=a.charAt(0);if(!b||b!==Q(b))throw ga("baddir",a);if(a!==a.trim())throw ga("baddir",a);}function e(a){var b=a.require||a.controller&&a.name;
!L(b)&&D(b)&&q(b,function(a,c){var d=a.match(l);a.substring(d[0].length)||(b[c]=d[0]+c)});return b}var f={},g=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,h=/(([\w\-]+)(?:\:([^;]+))?;?)/,k=be("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,m=/^(on[a-z]+|formaction)$/,n=U();this.directive=function B(b,d){Qa(b,"directive");G(b)?(c(b),sb(d,"directiveFactory"),f.hasOwnProperty(b)||(f[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,c){var d=[];q(f[b],function(f,g){try{var h=
a.invoke(f);z(h)?h={compile:ha(h)}:!h.compile&&h.link&&(h.compile=ha(h.link));h.priority=h.priority||0;h.index=g;h.name=h.name||b;h.require=e(h);h.restrict=h.restrict||"EA";h.$$moduleName=f.$$moduleName;d.push(h)}catch(k){c(k)}});return d}])),f[b].push(d)):q(b,uc(B));return this};this.component=function(a,b){function c(a){function e(b){return z(b)||L(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"",g={controller:d,controllerAs:Xc(b.controller)||
b.controllerAs||"$ctrl",template:e(f),templateUrl:e(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};q(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)});return g}var d=b.controller||function(){};q(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,z(d)&&(d[b]=a))});c.$inject=["$injector"];return this.directive(a,c)};this.aHrefSanitizationWhitelist=function(a){return w(a)?(b.aHrefSanitizationWhitelist(a),this):b.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=
function(a){return w(a)?(b.imgSrcSanitizationWhitelist(a),this):b.imgSrcSanitizationWhitelist()};var p=!0;this.debugInfoEnabled=function(a){return w(a)?(p=a,this):p};var u=10;this.onChangesTtl=function(a){return arguments.length?(u=a,this):u};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(a,b,c,e,n,t,K,M,H,E){function I(){try{if(!--qa)throw Y=void 0,ga("infchng",u);K.$apply(function(){for(var a=
[],b=0,c=Y.length;b<c;++b)try{Y[b]()}catch(d){a.push(d)}Y=void 0;if(a.length)throw a;})}finally{qa++}}function Da(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a}function P(a,b,c){pa.innerHTML="<span "+b+">";b=pa.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name);d.value=c;a.attributes.setNamedItem(d)}function x(a,b){try{a.addClass(b)}catch(c){}}function aa(a,b,c,d,e){a instanceof F||(a=F(a));for(var f=/\S+/,g=0,h=a.length;g<
h;g++){var k=a[g];k.nodeType===Ma&&k.nodeValue.match(f)&&Pc(k,a[g]=C.document.createElement("span"))}var l=s(a,b,a,c,d,e);aa.$$addScopeClass(a);var m=null;return function(b,c,d){sb(b,"scope");e&&e.needsNewScope&&(b=b.$parent.$new());d=d||{};var f=d.parentBoundTranscludeFn,g=d.transcludeControllers;d=d.futureParentElement;f&&f.$$boundTransclude&&(f=f.$$boundTransclude);m||(m=(d=d&&d[0])?"foreignobject"!==wa(d)&&ma.call(d).match(/SVG/)?"svg":"html":"html");d="html"!==m?F(da(m,F("<div>").append(a).html())):
c?Oa.clone.call(a):a;if(g)for(var h in g)d.data("$"+h+"Controller",g[h].instance);aa.$$addScopeInfo(d,b);c&&c(d,b);l&&l(b,d,d,f);return d}}function s(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,m,p,r,v;if(n)for(v=Array(c.length),m=0;m<h.length;m+=3)f=h[m],v[f]=c[f];else v=c;m=0;for(p=h.length;m<p;)k=v[h[m++]],c=h[m++],f=h[m++],c?(c.scope?(l=a.$new(),aa.$$addScopeInfo(F(k),l)):l=a,r=c.transcludeOnThisElement?za(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?za(a,b):null,c(f,l,k,d,r)):f&&f(a,
k.childNodes,void 0,e)}for(var h=[],k,l,m,p,n,r=0;r<a.length;r++){k=new Da;l=$b(a[r],[],k,0===r?d:void 0,e);(f=l.length?oa(l,a[r],k,b,c,null,[],[],f):null)&&f.scope&&aa.$$addScopeClass(k.$$element);k=f&&f.terminal||!(m=a[r].childNodes)||!m.length?null:s(m,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||k)h.push(r,f,k),p=!0,n=n||f;f=null}return p?g:null}function za(a,b,c){function d(e,f,g,h,k){e||(e=a.$new(!1,k),e.$$transcluded=!0);return b(e,f,{parentBoundTranscludeFn:c,
transcludeControllers:g,futureParentElement:h})}var e=d.$$slots=U(),f;for(f in b.$$slots)e[f]=b.$$slots[f]?za(a,b.$$slots[f],c):null;return d}function $b(a,b,c,d,e){var f=c.$attr;switch(a.nodeType){case 1:O(b,Aa(wa(a)),"E",d,e);for(var g,k,l,m,p=a.attributes,n=0,r=p&&p.length;n<r;n++){var v=!1,u=!1;g=p[n];k=g.name;l=W(g.value);g=Aa(k);if(m=Ba.test(g))k=k.replace(Yc,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()});(g=g.match(Ca))&&V(g[1])&&(v=k,u=k.substr(0,k.length-5)+"end",k=
k.substr(0,k.length-6));g=Aa(k.toLowerCase());f[g]=k;if(m||!c.hasOwnProperty(g))c[g]=l,Uc(a,g)&&(c[g]=!0);ia(a,b,l,g,m);O(b,g,"A",d,e,v,u)}f=a.className;D(f)&&(f=f.animVal);if(G(f)&&""!==f)for(;a=h.exec(f);)g=Aa(a[2]),O(b,g,"C",d,e)&&(c[g]=W(a[3])),f=f.substr(a.index+a[0].length);break;case Ma:if(11===Ea)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===Ma;)a.nodeValue+=a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);ca(b,a.nodeValue);break;case 8:hb(a,b,c,d,e)}b.sort(Z);
return b}function hb(a,b,c,d,e){try{var f=g.exec(a.nodeValue);if(f){var h=Aa(f[1]);O(b,h,"M",d,e)&&(c[h]=W(f[2]))}}catch(k){}}function N(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ga("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<e)}else d.push(a);return F(d)}function Zc(a,b,c){return function(d,e,f,g,h){e=N(e[0],b,c);return a(d,e,f,g,h)}}function ac(a,b,c,d,e,f){var g;return a?aa(b,c,d,e,f):function(){g||
(g=aa(b,c,d,e,f),b=c=f=null);return g.apply(this,arguments)}}function oa(a,b,d,e,f,g,h,k,l){function m(a,b,c,d){if(a){c&&(a=Zc(a,c,d));a.require=x.require;a.directiveName=I;if(u===x||x.$$isolateScope)a=ja(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=Zc(b,c,d));b.require=x.require;b.directiveName=I;if(u===x||x.$$isolateScope)b=ja(b,{isolateScope:!0});k.push(b)}}function p(a,e,f,g,l){function m(a,b,c,d){var e;Ya(a)||(d=c,c=b,b=a,a=void 0);fa&&(e=t);c||(c=fa?I.parent():I);if(d){var f=l.$$slots[d];if(f)return f(a,
b,e,c,s);if(y(f))throw ga("noslot",d,ya(I));}else return l(a,b,e,c,s)}var n,E,x,M,B,t,P,I;b===f?(g=d,I=d.$$element):(I=F(f),g=new Da(I,d));B=e;u?M=e.$new(!0):r&&(B=e.$parent);l&&(P=m,P.$$boundTransclude=l,P.isSlotFilled=function(a){return!!l.$$slots[a]});v&&(t=ag(I,g,P,v,M,e,u));u&&(aa.$$addScopeInfo(I,M,!0,!(H&&(H===u||H===u.$$originalDirective))),aa.$$addScopeClass(I,!0),M.$$isolateBindings=u.$$isolateBindings,E=ka(e,g,M,M.$$isolateBindings,u),E.removeWatches&&M.$on("$destroy",E.removeWatches));
for(n in t){E=v[n];x=t[n];var Zb=E.$$bindings.bindToController;x.bindingInfo=x.identifier&&Zb?ka(B,g,x.instance,Zb,E):{};var K=x();K!==x.instance&&(x.instance=K,I.data("$"+E.name+"Controller",K),x.bindingInfo.removeWatches&&x.bindingInfo.removeWatches(),x.bindingInfo=ka(B,g,x.instance,Zb,E))}q(v,function(a,b){var c=a.require;a.bindToController&&!L(c)&&D(c)&&S(t[b].instance,ib(b,c,I,t))});q(t,function(a){var b=a.instance;if(z(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(d){c(d)}if(z(b.$onInit))try{b.$onInit()}catch(e){c(e)}z(b.$doCheck)&&
(B.$watch(function(){b.$doCheck()}),b.$doCheck());z(b.$onDestroy)&&B.$on("$destroy",function(){b.$onDestroy()})});n=0;for(E=h.length;n<E;n++)x=h[n],la(x,x.isolateScope?M:e,I,g,x.require&&ib(x.directiveName,x.require,I,t),P);var s=e;u&&(u.template||null===u.templateUrl)&&(s=M);a&&a(s,f.childNodes,void 0,l);for(n=k.length-1;0<=n;n--)x=k[n],la(x,x.isolateScope?M:e,I,g,x.require&&ib(x.directiveName,x.require,I,t),P);q(t,function(a){a=a.instance;z(a.$postLink)&&a.$postLink()})}l=l||{};for(var n=-Number.MAX_VALUE,
r=l.newScopeDirective,v=l.controllerDirectives,u=l.newIsolateScopeDirective,H=l.templateDirective,E=l.nonTlbTranscludeDirective,M=!1,B=!1,fa=l.hasElementTranscludeDirective,t=d.$$element=F(b),x,I,P,K=e,s,Fa=!1,za=!1,w,A=0,C=a.length;A<C;A++){x=a[A];var G=x.$$start,hb=x.$$end;G&&(t=N(b,G,hb));P=void 0;if(n>x.priority)break;if(w=x.scope)x.templateUrl||(D(w)?(X("new/isolated scope",u||r,x,t),u=x):X("new/isolated scope",u,x,t)),r=r||x;I=x.name;if(!Fa&&(x.replace&&(x.templateUrl||x.template)||x.transclude&&
!x.$$tlb)){for(w=A+1;Fa=a[w++];)if(Fa.transclude&&!Fa.$$tlb||Fa.replace&&(Fa.templateUrl||Fa.template)){za=!0;break}Fa=!0}!x.templateUrl&&x.controller&&(w=x.controller,v=v||U(),X("'"+I+"' controller",v[I],x,t),v[I]=x);if(w=x.transclude)if(M=!0,x.$$tlb||(X("transclusion",E,x,t),E=x),"element"==w)fa=!0,n=x.priority,P=t,t=d.$$element=F(aa.$$createComment(I,d[I])),b=t[0],ea(f,va.call(P,0),b),P[0].$$parentNode=P[0].parentNode,K=ac(za,P,e,n,g&&g.name,{nonTlbTranscludeDirective:E});else{var oa=U();P=F(Xb(b)).contents();
if(D(w)){P=[];var Q=U(),O=U();q(w,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a;Q[a]=b;oa[b]=null;O[b]=c});q(t.contents(),function(a){var b=Q[Aa(wa(a))];b?(O[b]=!0,oa[b]=oa[b]||[],oa[b].push(a)):P.push(a)});q(O,function(a,b){if(!a)throw ga("reqslot",b);});for(var V in oa)oa[V]&&(oa[V]=ac(za,oa[V],e))}t.empty();K=ac(za,P,e,void 0,void 0,{needsNewScope:x.$$isolateScope||x.$$newScope});K.$$slots=oa}if(x.template)if(B=!0,X("template",H,x,t),H=x,w=z(x.template)?x.template(t,d):x.template,
w=xa(w),x.replace){g=x;P=Vb.test(w)?$c(da(x.templateNamespace,W(w))):[];b=P[0];if(1!=P.length||1!==b.nodeType)throw ga("tplrt",I,"");ea(f,t,b);C={$attr:{}};w=$b(b,[],C);var Z=a.splice(A+1,a.length-(A+1));(u||r)&&T(w,u,r);a=a.concat(w).concat(Z);$(d,C);C=a.length}else t.html(w);if(x.templateUrl)B=!0,X("template",H,x,t),H=x,x.replace&&(g=x),p=ba(a.splice(A,a.length-A),t,d,f,M&&K,h,k,{controllerDirectives:v,newScopeDirective:r!==x&&r,newIsolateScopeDirective:u,templateDirective:H,nonTlbTranscludeDirective:E}),
C=a.length;else if(x.compile)try{s=x.compile(t,d,K);var Y=x.$$originalDirective||x;z(s)?m(null,ab(Y,s),G,hb):s&&m(ab(Y,s.pre),ab(Y,s.post),G,hb)}catch(ca){c(ca,ya(t))}x.terminal&&(p.terminal=!0,n=Math.max(n,x.priority))}p.scope=r&&!0===r.scope;p.transcludeOnThisElement=M;p.templateOnThisElement=B;p.transclude=K;l.hasElementTranscludeDirective=fa;return p}function ib(a,b,c,d){var e;if(G(b)){var f=b.match(l);b=b.substring(f[0].length);var g=f[1]||f[3],f="?"===f[2];"^^"===g?c=c.parent():e=(e=d&&d[b])&&
e.instance;if(!e){var h="$"+b+"Controller";e=g?c.inheritedData(h):c.data(h)}if(!e&&!f)throw ga("ctreq",b,a);}else if(L(b))for(e=[],g=0,f=b.length;g<f;g++)e[g]=ib(a,b[g],c,d);else D(b)&&(e={},q(b,function(b,f){e[f]=ib(a,b,c,d)}));return e||null}function ag(a,b,c,d,e,f,g){var h=U(),k;for(k in d){var l=d[k],m={$scope:l===g||l.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},p=l.controller;"@"==p&&(p=b[l.name]);m=t(p,m,!0,l.controllerAs);h[l.name]=m;a.data("$"+l.name+"Controller",m.instance)}return h}
function T(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=Rb(a[d],{$$isolateScope:b,$$newScope:c})}function O(b,e,g,h,k,l,m){if(e===k)return null;k=null;if(f.hasOwnProperty(e)){var p;e=a.get(e+"Directive");for(var n=0,r=e.length;n<r;n++)try{if(p=e[n],(y(h)||h>p.priority)&&-1!=p.restrict.indexOf(g)){l&&(p=Rb(p,{$$start:l,$$end:m}));if(!p.$$bindings){var u=p,v=p,x=p.name,H={isolateScope:null,bindToController:null};D(v.scope)&&(!0===v.bindToController?(H.bindToController=d(v.scope,x,!0),H.isolateScope={}):
H.isolateScope=d(v.scope,x,!1));D(v.bindToController)&&(H.bindToController=d(v.bindToController,x,!0));if(D(H.bindToController)){var E=v.controller,M=v.controllerAs;if(!E)throw ga("noctrl",x);if(!Xc(E,M))throw ga("noident",x);}var t=u.$$bindings=H;D(t.isolateScope)&&(p.$$isolateBindings=t.isolateScope)}b.push(p);k=p}}catch(I){c(I)}}return k}function V(b){if(f.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,e=c.length;d<e;d++)if(b=c[d],b.multiElement)return!0;return!1}function $(a,b){var c=b.$attr,
d=a.$attr;q(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});q(b,function(b,e){a.hasOwnProperty(e)||"$"===e.charAt(0)||(a[e]=b,"class"!==e&&"style"!==e&&(d[e]=c[e]))})}function ba(a,b,c,d,f,g,h,k){var l=[],m,p,n=b[0],r=a.shift(),u=Rb(r,{templateUrl:null,transclude:null,replace:null,$$originalDirective:r}),H=z(r.templateUrl)?r.templateUrl(b,c):r.templateUrl,E=r.templateNamespace;b.empty();e(H).then(function(e){var v,M;e=xa(e);if(r.replace){e=
Vb.test(e)?$c(da(E,W(e))):[];v=e[0];if(1!=e.length||1!==v.nodeType)throw ga("tplrt",r.name,H);e={$attr:{}};ea(d,b,v);var B=$b(v,[],e);D(r.scope)&&T(B,!0);a=B.concat(a);$(c,e)}else v=n,b.html(e);a.unshift(u);m=oa(a,v,c,f,b,r,g,h,k);q(d,function(a,c){a==v&&(d[c]=b[0])});for(p=s(b[0].childNodes,f);l.length;){e=l.shift();M=l.shift();var t=l.shift(),I=l.shift(),B=b[0];if(!e.$$destroyed){if(M!==n){var P=M.className;k.hasElementTranscludeDirective&&r.replace||(B=Xb(v));ea(t,F(M),B);x(F(B),P)}M=m.transcludeOnThisElement?
za(e,m.transclude,I):I;m(p,e,B,d,M)}}l=null});return function(a,b,c,d,e){a=e;b.$$destroyed||(l?l.push(b,c,d,a):(m.transcludeOnThisElement&&(a=za(b,m.transclude,e)),m(p,b,c,d,a)))}}function Z(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function X(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw ga("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,ya(d));}function ca(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=
a.parent();var b=!!a.length;b&&aa.$$addBindingClass(a);return function(a,c){var e=c.parent();b||aa.$$addBindingClass(e);aa.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a})}}})}function da(a,b){a=Q(a||"html");switch(a){case "svg":case "math":var c=C.document.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function ha(a,b){if("srcdoc"==b)return M.HTML;var c=wa(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=
c&&("src"==b||"ngSrc"==b))return M.RESOURCE_URL}function ia(a,c,d,e,f){var g=ha(a,e);f=k[e]||f;var h=b(d,!0,g,f);if(h){if("multiple"===e&&"select"===wa(a))throw ga("selmulti",ya(a));c.push({priority:100,compile:function(){return{pre:function(a,c,k){c=k.$$observers||(k.$$observers=U());if(m.test(e))throw ga("nodomevents");var l=k[e];l!==d&&(h=l&&b(l,!0,g,f),d=l);h&&(k[e]=h(a),(c[e]||(c[e]=[])).$$inter=!0,(k.$$observers&&k.$$observers[e].$$scope||a).$watch(h,function(a,b){"class"===e&&a!=b?k.$updateClass(a,
b):k.$set(e,a)}))}}}})}}function ea(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]==d){a[g++]=c;h=g+e-1;for(var k=a.length;g<k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;a.context===d&&(a.context=c);break}f&&f.replaceChild(c,d);a=C.document.createDocumentFragment();for(g=0;g<e;g++)a.appendChild(b[g]);F.hasData(d)&&(F.data(c,F.data(d)),F(d).off("$destroy"));F.cleanData(a.querySelectorAll("*"));for(g=1;g<e;g++)delete b[g];b[0]=c;b.length=1}function ja(a,
b){return S(function(){return a.apply(null,arguments)},a,b)}function la(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,ya(d))}}function ka(a,c,d,e,f){function g(b,c,e){z(d.$onChanges)&&c!==e&&(Y||(a.$$postDigest(I),Y=[]),m||(m={},Y.push(h)),m[b]&&(e=m[b].previousValue),m[b]=new Fb(e,c))}function h(){d.$onChanges(m);m=void 0}var k=[],l={},m;q(e,function(e,h){var m=e.attrName,p=e.optional,v,u,x,H;switch(e.mode){case "@":p||ua.call(c,m)||(d[h]=c[m]=void 0);c.$observe(m,function(a){if(G(a)||Ga(a))g(h,a,d[h]),
d[h]=a});c.$$observers[m].$$scope=a;v=c[m];G(v)?d[h]=b(v)(a):Ga(v)&&(d[h]=v);l[h]=new Fb(bc,d[h]);break;case "=":if(!ua.call(c,m)){if(p)break;c[m]=void 0}if(p&&!c[m])break;u=n(c[m]);H=u.literal?na:function(a,b){return a===b||a!==a&&b!==b};x=u.assign||function(){v=d[h]=u(a);throw ga("nonassign",c[m],m,f.name);};v=d[h]=u(a);p=function(b){H(b,d[h])||(H(b,v)?x(a,b=d[h]):d[h]=b);return v=b};p.$stateful=!0;p=e.collection?a.$watchCollection(c[m],p):a.$watch(n(c[m],p),null,u.literal);k.push(p);break;case "<":if(!ua.call(c,
m)){if(p)break;c[m]=void 0}if(p&&!c[m])break;u=n(c[m]);var E=d[h]=u(a);l[h]=new Fb(bc,d[h]);p=a.$watch(u,function(a,b){if(b===a){if(b===E)return;b=E}g(h,a,b);d[h]=a},u.literal);k.push(p);break;case "&":u=c.hasOwnProperty(m)?n(c[m]):A;if(u===A&&p)break;d[h]=function(b){return u(a,b)}}});return{initialChanges:l,removeWatches:k.length&&function(){for(var a=0,b=k.length;a<b;++a)k[a]()}}}var ta=/^\w/,pa=C.document.createElement("div"),qa=u,Y;Da.prototype={$normalize:Aa,$addClass:function(a){a&&0<a.length&&
H.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&H.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=ad(a,b);c&&c.length&&H.addClass(this.$$element,c);(c=ad(b,a))&&c.length&&H.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=Uc(this.$$element[0],a),g=bd[a],h=a;f?(this.$$element.prop(a,b),e=f):g&&(this[g]=b,h=g);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Cc(a,"-"));f=wa(this.$$element);if("a"===f&&("href"===a||"xlinkHref"===a)||"img"===
f&&"src"===a)this[a]=b=E(b,"src"===a);else if("img"===f&&"srcset"===a&&w(b)){for(var f="",g=W(b),k=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,k=/\s/.test(g)?k:/(,)/,g=g.split(k),k=Math.floor(g.length/2),l=0;l<k;l++)var m=2*l,f=f+E(W(g[m]),!0),f=f+(" "+W(g[m+1]));g=W(g[2*l]).split(/\s/);f+=E(W(g[0]),!0);2===g.length&&(f+=" "+W(g[1]));this[a]=b=f}!1!==d&&(null===b||y(b)?this.$$element.removeAttr(e):ta.test(e)?this.$$element.attr(e,b):P(this.$$element[0],e,b));(a=this.$$observers)&&q(a[h],function(a){try{a(b)}catch(d){c(d)}})},
$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=U()),e=d[a]||(d[a]=[]);e.push(b);K.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||y(c[a])||b(c[a])});return function(){Za(e,b)}}};var ra=b.startSymbol(),sa=b.endSymbol(),xa="{{"==ra&&"}}"==sa?Xa:function(a){return a.replace(/\{\{/g,ra).replace(/}}/g,sa)},Ba=/^ngAttr[A-Z]/,Ca=/^(.+)Start$/;aa.$$addBindingInfo=p?function(a,b){var c=a.data("$binding")||[];L(b)?c=c.concat(b):c.push(b);a.data("$binding",c)}:A;aa.$$addBindingClass=
p?function(a){x(a,"ng-binding")}:A;aa.$$addScopeInfo=p?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:A;aa.$$addScopeClass=p?function(a,b){x(a,b?"ng-isolate-scope":"ng-scope")}:A;aa.$$createComment=function(a,b){var c="";p&&(c=" "+(a||"")+": ",b&&(c+=b+" "));return C.document.createComment(c)};return aa}]}function Fb(a,b){this.previousValue=a;this.currentValue=b}function Aa(a){return db(a.replace(Yc,""))}function ad(a,b){var d="",c=a.split(/\s+/),e=b.split(/\s+/),
f=0;a:for(;f<c.length;f++){for(var g=c[f],h=0;h<e.length;h++)if(g==e[h])continue a;d+=(0<d.length?" ":"")+g}return d}function $c(a){a=F(a);var b=a.length;if(1>=b)return a;for(;b--;)8===a[b].nodeType&&bg.call(a,b,1);return a}function Xc(a,b){if(b&&G(b))return b;if(G(a)){var d=cd.exec(a);if(d)return d[3]}}function ff(){var a={},b=!1;this.has=function(b){return a.hasOwnProperty(b)};this.register=function(b,c){Qa(b,"controller");D(b)?S(a,b):a[b]=c};this.allowGlobals=function(){b=!0};this.$get=["$injector",
"$window",function(d,c){function e(a,b,c,d){if(!a||!D(a.$scope))throw N("$controller")("noscp",d,b);a.$scope[b]=c}return function(f,g,h,k){var l,m,n;h=!0===h;k&&G(k)&&(n=k);if(G(f)){k=f.match(cd);if(!k)throw cg("ctrlfmt",f);m=k[1];n=n||k[3];f=a.hasOwnProperty(m)?a[m]:Ec(g.$scope,m,!0)||(b?Ec(c,m,!0):void 0);Pa(f,m,!0)}if(h)return h=(L(f)?f[f.length-1]:f).prototype,l=Object.create(h||null),n&&e(g,n,l,m||f.name),S(function(){var a=d.invoke(f,l,g,m);a!==l&&(D(a)||z(a))&&(l=a,n&&e(g,n,l,m||f.name));return l},
{instance:l,identifier:n});l=d.instantiate(f,g,m);n&&e(g,n,l,m||f.name);return l}}]}function gf(){this.$get=["$window",function(a){return F(a.document)}]}function hf(){this.$get=["$log",function(a){return function(b,d){a.error.apply(a,arguments)}}]}function cc(a){return D(a)?da(a)?a.toISOString():bb(a):a}function nf(){this.$get=function(){return function(a){if(!a)return"";var b=[];tc(a,function(a,c){null===a||y(a)||(L(a)?q(a,function(a){b.push(ea(c)+"="+ea(cc(a)))}):b.push(ea(c)+"="+ea(cc(a))))});
return b.join("&")}}}function of(){this.$get=function(){return function(a){function b(a,e,f){null===a||y(a)||(L(a)?q(a,function(a,c){b(a,e+"["+(D(a)?c:"")+"]")}):D(a)&&!da(a)?tc(a,function(a,c){b(a,e+(f?"":"[")+c+(f?"":"]"))}):d.push(ea(e)+"="+ea(cc(a))))}if(!a)return"";var d=[];b(a,"",!0);return d.join("&")}}}function dc(a,b){if(G(a)){var d=a.replace(dg,"").trim();if(d){var c=b("Content-Type");(c=c&&0===c.indexOf(dd))||(c=(c=d.match(eg))&&fg[c[0]].test(d));c&&(a=xc(d))}}return a}function ed(a){var b=
U(),d;G(a)?q(a.split("\n"),function(a){d=a.indexOf(":");var e=Q(W(a.substr(0,d)));a=W(a.substr(d+1));e&&(b[e]=b[e]?b[e]+", "+a:a)}):D(a)&&q(a,function(a,d){var f=Q(d),g=W(a);f&&(b[f]=b[f]?b[f]+", "+g:g)});return b}function fd(a){var b;return function(d){b||(b=ed(a));return d?(d=b[Q(d)],void 0===d&&(d=null),d):b}}function gd(a,b,d,c){if(z(c))return c(a,b,d);q(c,function(c){a=c(a,b,d)});return a}function mf(){var a=this.defaults={transformResponse:[dc],transformRequest:[function(a){return D(a)&&"[object File]"!==
ma.call(a)&&"[object Blob]"!==ma.call(a)&&"[object FormData]"!==ma.call(a)?bb(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ia(ec),put:ia(ec),patch:ia(ec)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},b=!1;this.useApplyAsync=function(a){return w(a)?(b=!!a,this):b};var d=!0;this.useLegacyPromiseExtensions=function(a){return w(a)?(d=!!a,this):d};var c=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory",
"$rootScope","$q","$injector",function(e,f,g,h,k,l){function m(b){function c(a,b){for(var d=0,e=b.length;d<e;){var f=b[d++],g=b[d++];a=a.then(f,g)}b.length=0;return a}function e(a,b){var c,d={};q(a,function(a,e){z(a)?(c=a(b),null!=c&&(d[e]=c)):d[e]=a});return d}function f(a){var b=S({},a);b.data=gd(a.data,a.headers,a.status,g.transformResponse);a=a.status;return 200<=a&&300>a?b:k.reject(b)}if(!D(b))throw N("$http")("badreq",b);if(!G(b.url))throw N("$http")("badreq",b.url);var g=S({method:"get",transformRequest:a.transformRequest,
transformResponse:a.transformResponse,paramSerializer:a.paramSerializer},b);g.headers=function(b){var c=a.headers,d=S({},b.headers),f,g,h,c=S({},c.common,c[Q(b.method)]);a:for(f in c){g=Q(f);for(h in d)if(Q(h)===g)continue a;d[f]=c[f]}return e(d,ia(b))}(b);g.method=ub(g.method);g.paramSerializer=G(g.paramSerializer)?l.get(g.paramSerializer):g.paramSerializer;var h=[],m=[],p=k.when(g);q(R,function(a){(a.request||a.requestError)&&h.unshift(a.request,a.requestError);(a.response||a.responseError)&&m.push(a.response,
a.responseError)});p=c(p,h);p=p.then(function(b){var c=b.headers,d=gd(b.data,fd(c),void 0,b.transformRequest);y(d)&&q(c,function(a,b){"content-type"===Q(b)&&delete c[b]});y(b.withCredentials)&&!y(a.withCredentials)&&(b.withCredentials=a.withCredentials);return n(b,d).then(f,f)});p=c(p,m);d?(p.success=function(a){Pa(a,"fn");p.then(function(b){a(b.data,b.status,b.headers,g)});return p},p.error=function(a){Pa(a,"fn");p.then(null,function(b){a(b.data,b.status,b.headers,g)});return p}):(p.success=hd("success"),
p.error=hd("error"));return p}function n(c,d){function g(a){if(a){var c={};q(a,function(a,d){c[d]=function(c){function d(){a(c)}b?h.$applyAsync(d):h.$$phase?d():h.$apply(d)}});return c}}function l(a,c,d,e){function f(){n(c,a,d,e)}E&&(200<=a&&300>a?E.put(P,[a,c,ed(d),e]):E.remove(P));b?h.$applyAsync(f):(f(),h.$$phase||h.$apply())}function n(a,b,d,e){b=-1<=b?b:0;(200<=b&&300>b?M.resolve:M.reject)({data:a,status:b,headers:fd(d),config:c,statusText:e})}function t(a){n(a.data,a.status,ia(a.headers()),
a.statusText)}function R(){var a=m.pendingRequests.indexOf(c);-1!==a&&m.pendingRequests.splice(a,1)}var M=k.defer(),H=M.promise,E,I,Da=c.headers,P=p(c.url,c.paramSerializer(c.params));m.pendingRequests.push(c);H.then(R,R);!c.cache&&!a.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(E=D(c.cache)?c.cache:D(a.cache)?a.cache:u);E&&(I=E.get(P),w(I)?I&&z(I.then)?I.then(t,t):L(I)?n(I[1],I[0],ia(I[2]),I[3]):n(I,200,{},"OK"):E.put(P,H));y(I)&&((I=id(c.url)?f()[c.xsrfCookieName||a.xsrfCookieName]:
void 0)&&(Da[c.xsrfHeaderName||a.xsrfHeaderName]=I),e(c.method,P,d,l,Da,c.timeout,c.withCredentials,c.responseType,g(c.eventHandlers),g(c.uploadEventHandlers)));return H}function p(a,b){0<b.length&&(a+=(-1==a.indexOf("?")?"?":"&")+b);return a}var u=g("$http");a.paramSerializer=G(a.paramSerializer)?l.get(a.paramSerializer):a.paramSerializer;var R=[];q(c,function(a){R.unshift(G(a)?l.get(a):l.invoke(a))});m.pendingRequests=[];(function(a){q(arguments,function(a){m[a]=function(b,c){return m(S({},c||{},
{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){q(arguments,function(a){m[a]=function(b,c,d){return m(S({},d||{},{method:a,url:b,data:c}))}})})("post","put","patch");m.defaults=a;return m}]}function qf(){this.$get=function(){return function(){return new C.XMLHttpRequest}}}function pf(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,d,c){return gg(a,c,a.defer,b,d[0])}]}function gg(a,b,d,c,e){function f(a,b,d){a=a.replace("JSON_CALLBACK",b);var f=
e.createElement("script"),m=null;f.type="text/javascript";f.src=a;f.async=!0;m=function(a){f.removeEventListener("load",m,!1);f.removeEventListener("error",m,!1);e.body.removeChild(f);f=null;var g=-1,u="unknown";a&&("load"!==a.type||c.wasCalled(b)||(a={type:"error"}),u=a.type,g="error"===a.type?404:200);d&&d(g,u)};f.addEventListener("load",m,!1);f.addEventListener("error",m,!1);e.body.appendChild(f);return m}return function(e,h,k,l,m,n,p,u,R,B){function r(){fa&&fa();t&&t.abort()}function J(b,c,e,
f,g){w(M)&&d.cancel(M);fa=t=null;b(c,e,f,g);a.$$completeOutstandingRequest(A)}a.$$incOutstandingRequestCount();h=h||a.url();if("jsonp"===Q(e))var v=c.createCallback(h),fa=f(h,v,function(a,b){var d=200===a&&c.getResponse(v);J(l,a,d,"",b);c.removeCallback(v)});else{var t=b(e,h);t.open(e,h,!0);q(m,function(a,b){w(a)&&t.setRequestHeader(b,a)});t.onload=function(){var a=t.statusText||"",b="response"in t?t.response:t.responseText,c=1223===t.status?204:t.status;0===c&&(c=b?200:"file"==Y(h).protocol?404:
0);J(l,c,b,t.getAllResponseHeaders(),a)};e=function(){J(l,-1,null,null,"")};t.onerror=e;t.onabort=e;q(R,function(a,b){t.addEventListener(b,a)});q(B,function(a,b){t.upload.addEventListener(b,a)});p&&(t.withCredentials=!0);if(u)try{t.responseType=u}catch(K){if("json"!==u)throw K;}t.send(y(k)?null:k)}if(0<n)var M=d(r,n);else n&&z(n.then)&&n.then(r)}}function kf(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a};this.endSymbol=function(a){return a?(b=a,this):b};this.$get=["$parse",
"$exceptionHandler","$sce",function(d,c,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(n,a).replace(p,b)}function h(a,b,c,d){var e;return e=a.$watch(function(a){e();return d(a)},b,c)}function k(f,k,p,n){function J(a){try{var b=a;a=p?e.getTrusted(p,b):e.valueOf(b);var d;if(n&&!w(a))d=a;else if(null==a)d="";else{switch(typeof a){case "string":break;case "number":a=""+a;break;default:a=bb(a)}d=a}return d}catch(g){c(Ka.interr(f,g))}}if(!f.length||-1===f.indexOf(a)){var v;k||(k=g(f),
v=ha(k),v.exp=f,v.expressions=[],v.$$watchDelegate=h);return v}n=!!n;var q,t,K=0,M=[],H=[];v=f.length;for(var E=[],I=[];K<v;)if(-1!=(q=f.indexOf(a,K))&&-1!=(t=f.indexOf(b,q+l)))K!==q&&E.push(g(f.substring(K,q))),K=f.substring(q+l,t),M.push(K),H.push(d(K,J)),K=t+m,I.push(E.length),E.push("");else{K!==v&&E.push(g(f.substring(K)));break}p&&1<E.length&&Ka.throwNoconcat(f);if(!k||M.length){var Da=function(a){for(var b=0,c=M.length;b<c;b++){if(n&&y(a[b]))return;E[I[b]]=a[b]}return E.join("")};return S(function(a){var b=
0,d=M.length,e=Array(d);try{for(;b<d;b++)e[b]=H[b](a);return Da(e)}catch(g){c(Ka.interr(f,g))}},{exp:f,expressions:M,$$watchDelegate:function(a,b){var c;return a.$watchGroup(H,function(d,e){var f=Da(d);z(b)&&b.call(this,f,d!==e?c:f,a);c=f})}})}}var l=a.length,m=b.length,n=new RegExp(a.replace(/./g,f),"g"),p=new RegExp(b.replace(/./g,f),"g");k.startSymbol=function(){return a};k.endSymbol=function(){return b};return k}]}function lf(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,
b,d,c,e){function f(f,k,l,m){function n(){p?f.apply(null,u):f(r)}var p=4<arguments.length,u=p?va.call(arguments,4):[],R=b.setInterval,q=b.clearInterval,r=0,J=w(m)&&!m,v=(J?c:d).defer(),fa=v.promise;l=w(l)?l:0;fa.$$intervalId=R(function(){J?e.defer(n):a.$evalAsync(n);v.notify(r++);0<l&&r>=l&&(v.resolve(r),q(fa.$$intervalId),delete g[fa.$$intervalId]);J||a.$apply()},k);g[fa.$$intervalId]=v;return fa}var g={};f.cancel=function(a){return a&&a.$$intervalId in g?(g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),
delete g[a.$$intervalId],!0):!1};return f}]}function fc(a){a=a.split("/");for(var b=a.length;b--;)a[b]=qb(a[b]);return a.join("/")}function jd(a,b){var d=Y(a);b.$$protocol=d.protocol;b.$$host=d.hostname;b.$$port=Z(d.port)||hg[d.protocol]||null}function kd(a,b){var d="/"!==a.charAt(0);d&&(a="/"+a);var c=Y(a);b.$$path=decodeURIComponent(d&&"/"===c.pathname.charAt(0)?c.pathname.substring(1):c.pathname);b.$$search=Ac(c.search);b.$$hash=decodeURIComponent(c.hash);b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path=
"/"+b.$$path)}function ka(a,b){if(0===b.lastIndexOf(a,0))return b.substr(a.length)}function Ja(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function jb(a){return a.replace(/(#.+)|#$/,"$1")}function gc(a,b,d){this.$$html5=!0;d=d||"";jd(a,this);this.$$parse=function(a){var d=ka(b,a);if(!G(d))throw Gb("ipthprfx",a,b);kd(d,this);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Tb(this.$$search),d=this.$$hash?"#"+qb(this.$$hash):"";this.$$url=fc(this.$$path)+(a?"?"+
a:"")+d;this.$$absUrl=b+this.$$url.substr(1)};this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;w(f=ka(a,c))?(g=f,g=w(f=ka(d,f))?b+(ka("/",f)||f):a+g):w(f=ka(b,c))?g=b+f:b==c+"/"&&(g=b);g&&this.$$parse(g);return!!g}}function hc(a,b,d){jd(a,this);this.$$parse=function(c){var e=ka(a,c)||ka(b,c),f;y(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",y(e)&&(a=c,this.replace())):(f=ka(d,e),y(f)&&(f=e));kd(f,this);c=this.$$path;var e=a,g=/^\/[A-Z]:(\/.*)/;0===f.lastIndexOf(e,
0)&&(f=f.replace(e,""));g.exec(f)||(c=(f=g.exec(c))?f[1]:c);this.$$path=c;this.$$compose()};this.$$compose=function(){var b=Tb(this.$$search),e=this.$$hash?"#"+qb(this.$$hash):"";this.$$url=fc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+(this.$$url?d+this.$$url:"")};this.$$parseLinkUrl=function(b,d){return Ja(a)==Ja(b)?(this.$$parse(b),!0):!1}}function ld(a,b,d){this.$$html5=!0;hc.apply(this,arguments);this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;a==Ja(c)?
f=c:(g=ka(b,c))?f=a+d+g:b===c+"/"&&(f=b);f&&this.$$parse(f);return!!f};this.$$compose=function(){var b=Tb(this.$$search),e=this.$$hash?"#"+qb(this.$$hash):"";this.$$url=fc(this.$$path)+(b?"?"+b:"")+e;this.$$absUrl=a+d+this.$$url}}function Hb(a){return function(){return this[a]}}function md(a,b){return function(d){if(y(d))return this[a];this[a]=b(d);this.$$compose();return this}}function sf(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return w(b)?(a=b,this):
a};this.html5Mode=function(a){return Ga(a)?(b.enabled=a,this):D(a)?(Ga(a.enabled)&&(b.enabled=a.enabled),Ga(a.requireBase)&&(b.requireBase=a.requireBase),Ga(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(d,c,e,f,g){function h(a,b,d){var e=l.url(),f=l.$$state;try{c.url(a,b,d),l.$$state=c.state()}catch(g){throw l.url(e),l.$$state=f,g;}}function k(a,b){d.$broadcast("$locationChangeSuccess",l.absUrl(),a,l.$$state,
b)}var l,m;m=c.baseHref();var n=c.url(),p;if(b.enabled){if(!m&&b.requireBase)throw Gb("nobase");p=n.substring(0,n.indexOf("/",n.indexOf("//")+2))+(m||"/");m=e.history?gc:ld}else p=Ja(n),m=hc;var u=p.substr(0,Ja(p).lastIndexOf("/")+1);l=new m(p,u,"#"+a);l.$$parseLinkUrl(n,n);l.$$state=c.state();var R=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=F(a.target);"a"!==wa(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;
var h=e.prop("href"),k=e.attr("href")||e.attr("xlink:href");D(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=Y(h.animVal).href);R.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||!l.$$parseLinkUrl(h,k)||(a.preventDefault(),l.absUrl()!=c.url()&&(d.$apply(),g.angular["ff-684208-preventDefault"]=!0))}});jb(l.absUrl())!=jb(n)&&c.url(l.absUrl(),!0);var q=!0;c.onUrlChange(function(a,b){y(ka(u,a))?g.location.href=a:(d.$evalAsync(function(){var c=l.absUrl(),e=l.$$state,f;a=jb(a);l.$$parse(a);l.$$state=
b;f=d.$broadcast("$locationChangeStart",a,c,b,e).defaultPrevented;l.absUrl()===a&&(f?(l.$$parse(c),l.$$state=e,h(c,!1,e)):(q=!1,k(c,e)))}),d.$$phase||d.$digest())});d.$watch(function(){var a=jb(c.url()),b=jb(l.absUrl()),f=c.state(),g=l.$$replace,m=a!==b||l.$$html5&&e.history&&f!==l.$$state;if(q||m)q=!1,d.$evalAsync(function(){var b=l.absUrl(),c=d.$broadcast("$locationChangeStart",b,a,l.$$state,f).defaultPrevented;l.absUrl()===b&&(c?(l.$$parse(a),l.$$state=f):(m&&h(b,g,f===l.$$state?null:l.$$state),
k(a,f)))});l.$$replace=!1});return l}]}function tf(){var a=!0,b=this;this.debugEnabled=function(b){return w(b)?(a=b,this):a};this.$get=["$window",function(d){function c(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=d.console||{},e=b[a]||b.log||A;a=!1;try{a=!!e.apply}catch(k){}return a?function(){var a=[];q(arguments,function(b){a.push(c(b))});
return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Sa(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw X("isecfld",b);return a}function ig(a){return a+""}function ra(a,b){if(a){if(a.constructor===a)throw X("isecfn",b);if(a.window===a)throw X("isecwindow",b);if(a.children&&
(a.nodeName||a.prop&&a.attr&&a.find))throw X("isecdom",b);if(a===Object)throw X("isecobj",b);}return a}function nd(a,b){if(a){if(a.constructor===a)throw X("isecfn",b);if(a===jg||a===kg||a===lg)throw X("isecff",b);}}function Ib(a,b){if(a&&(a===(0).constructor||a===(!1).constructor||a==="".constructor||a==={}.constructor||a===[].constructor||a===Function.constructor))throw X("isecaf",b);}function mg(a,b){return"undefined"!==typeof a?a:b}function od(a,b){return"undefined"===typeof a?b:"undefined"===
typeof b?a:a+b}function V(a,b){var d,c;switch(a.type){case s.Program:d=!0;q(a.body,function(a){V(a.expression,b);d=d&&a.expression.constant});a.constant=d;break;case s.Literal:a.constant=!0;a.toWatch=[];break;case s.UnaryExpression:V(a.argument,b);a.constant=a.argument.constant;a.toWatch=a.argument.toWatch;break;case s.BinaryExpression:V(a.left,b);V(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case s.LogicalExpression:V(a.left,b);V(a.right,
b);a.constant=a.left.constant&&a.right.constant;a.toWatch=a.constant?[]:[a];break;case s.ConditionalExpression:V(a.test,b);V(a.alternate,b);V(a.consequent,b);a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant;a.toWatch=a.constant?[]:[a];break;case s.Identifier:a.constant=!1;a.toWatch=[a];break;case s.MemberExpression:V(a.object,b);a.computed&&V(a.property,b);a.constant=a.object.constant&&(!a.computed||a.property.constant);a.toWatch=[a];break;case s.CallExpression:d=a.filter?!b(a.callee.name).$stateful:
!1;c=[];q(a.arguments,function(a){V(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});a.constant=d;a.toWatch=a.filter&&!b(a.callee.name).$stateful?c:[a];break;case s.AssignmentExpression:V(a.left,b);V(a.right,b);a.constant=a.left.constant&&a.right.constant;a.toWatch=[a];break;case s.ArrayExpression:d=!0;c=[];q(a.elements,function(a){V(a,b);d=d&&a.constant;a.constant||c.push.apply(c,a.toWatch)});a.constant=d;a.toWatch=c;break;case s.ObjectExpression:d=!0;c=[];q(a.properties,function(a){V(a.value,
b);d=d&&a.value.constant&&!a.computed;a.value.constant||c.push.apply(c,a.value.toWatch)});a.constant=d;a.toWatch=c;break;case s.ThisExpression:a.constant=!1;a.toWatch=[];break;case s.LocalsExpression:a.constant=!1,a.toWatch=[]}}function pd(a){if(1==a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function qd(a){return a.type===s.Identifier||a.type===s.MemberExpression}function rd(a){if(1===a.body.length&&qd(a.body[0].expression))return{type:s.AssignmentExpression,
left:a.body[0].expression,right:{type:s.NGValueParameter},operator:"="}}function sd(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===s.Literal||a.body[0].expression.type===s.ArrayExpression||a.body[0].expression.type===s.ObjectExpression)}function td(a,b){this.astBuilder=a;this.$filter=b}function ud(a,b){this.astBuilder=a;this.$filter=b}function Jb(a){return"constructor"==a}function ic(a){return z(a.valueOf)?a.valueOf():ng.call(a)}function uf(){var a=U(),b=U(),d={"true":!0,
"false":!1,"null":null,undefined:void 0},c,e;this.addLiteral=function(a,b){d[a]=b};this.setIdentifierFns=function(a,b){c=a;e=b;return this};this.$get=["$filter",function(f){function g(c,d,e){var g,k,H;e=e||J;switch(typeof c){case "string":H=c=c.trim();var E=e?b:a;g=E[H];if(!g){":"===c.charAt(0)&&":"===c.charAt(1)&&(k=!0,c=c.substring(2));g=e?r:B;var q=new jc(g);g=(new kc(q,f,g)).parse(c);g.constant?g.$$watchDelegate=p:k?g.$$watchDelegate=g.literal?n:m:g.inputs&&(g.$$watchDelegate=l);e&&(g=h(g));E[H]=
g}return u(g,d);case "function":return u(c,d);default:return u(A,d)}}function h(a){function b(c,d,e,f){var g=J;J=!0;try{return a(c,d,e,f)}finally{J=g}}if(!a)return a;b.$$watchDelegate=a.$$watchDelegate;b.assign=h(a.assign);b.constant=a.constant;b.literal=a.literal;for(var c=0;a.inputs&&c<a.inputs.length;++c)a.inputs[c]=h(a.inputs[c]);b.inputs=a.inputs;return b}function k(a,b){return null==a||null==b?a===b:"object"===typeof a&&(a=ic(a),"object"===typeof a)?!1:a===b||a!==a&&b!==b}function l(a,b,c,d,
e){var f=d.inputs,g;if(1===f.length){var h=k,f=f[0];return a.$watch(function(a){var b=f(a);k(b,h)||(g=d(a,void 0,void 0,[b]),h=b&&ic(b));return g},b,c,e)}for(var l=[],m=[],p=0,n=f.length;p<n;p++)l[p]=k,m[p]=null;return a.$watch(function(a){for(var b=!1,c=0,e=f.length;c<e;c++){var h=f[c](a);if(b||(b=!k(h,l[c])))m[c]=h,l[c]=h&&ic(h)}b&&(g=d(a,void 0,void 0,m));return g},b,c,e)}function m(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a;z(b)&&b.apply(this,arguments);w(a)&&
d.$$postDigest(function(){w(f)&&e()})},c)}function n(a,b,c,d){function e(a){var b=!0;q(a,function(a){w(a)||(b=!1)});return b}var f,g;return f=a.$watch(function(a){return d(a)},function(a,c,d){g=a;z(b)&&b.call(this,a,c,d);e(a)&&d.$$postDigest(function(){e(g)&&f()})},c)}function p(a,b,c,d){var e;return e=a.$watch(function(a){e();return d(a)},b,c)}function u(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,c=c!==n&&c!==m?function(c,e,f,g){f=d&&g?g[0]:a(c,e,f,g);return b(f,c,e)}:function(c,d,e,f){e=a(c,
d,e,f);c=b(e,c,d);return w(e)?c:e};a.$$watchDelegate&&a.$$watchDelegate!==l?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=l,d=!a.inputs,c.inputs=a.inputs?a.inputs:[a]);return c}var R=Ba().noUnsafeEval,B={csp:R,expensiveChecks:!1,literals:pa(d),isIdentifierStart:z(c)&&c,isIdentifierContinue:z(e)&&e},r={csp:R,expensiveChecks:!0,literals:pa(d),isIdentifierStart:z(c)&&c,isIdentifierContinue:z(e)&&e},J=!1;g.$$runningExpensiveChecks=function(){return J};return g}]}function wf(){this.$get=
["$rootScope","$exceptionHandler",function(a,b){return vd(function(b){a.$evalAsync(b)},b)}]}function xf(){this.$get=["$browser","$exceptionHandler",function(a,b){return vd(function(b){a.defer(b)},b)}]}function vd(a,b){function d(){this.$$state={status:0}}function c(a,b){return function(c){b.call(a,c)}}function e(c){!c.processScheduled&&c.pending&&(c.processScheduled=!0,a(function(){var a,d,e;e=c.pending;c.processScheduled=!1;c.pending=void 0;for(var f=0,g=e.length;f<g;++f){d=e[f][0];a=e[f][c.status];
try{z(a)?d.resolve(a(c.value)):1===c.status?d.resolve(c.value):d.reject(c.value)}catch(h){d.reject(h),b(h)}}}))}function f(){this.promise=new d}var g=N("$q",TypeError),h=function(){var a=new f;a.resolve=c(a,a.resolve);a.reject=c(a,a.reject);a.notify=c(a,a.notify);return a};S(d.prototype,{then:function(a,b,c){if(y(a)&&y(b)&&y(c))return this;var d=new f;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&e(this.$$state);return d.promise},"catch":function(a){return this.then(null,
a)},"finally":function(a,b){return this.then(function(b){return l(b,!0,a)},function(b){return l(b,!1,a)},b)}});S(f.prototype,{resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(g("qcycle",a)):this.$$resolve(a))},$$resolve:function(a){function d(a){k||(k=!0,h.$$resolve(a))}function f(a){k||(k=!0,h.$$reject(a))}var g,h=this,k=!1;try{if(D(a)||z(a))g=a&&a.then;z(g)?(this.promise.$$state.status=-1,g.call(a,d,f,c(this,this.notify))):(this.promise.$$state.value=a,this.promise.$$state.status=
1,e(this.promise.$$state))}catch(l){f(l),b(l)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;e(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;0>=this.promise.$$state.status&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;f<g;f++){e=d[f][0];a=d[f][3];try{e.notify(z(a)?a(c):c)}catch(h){b(h)}}})}});var k=function(a,b){var c=new f;b?c.resolve(a):c.reject(a);return c.promise},
l=function(a,b,c){var d=null;try{z(c)&&(d=c())}catch(e){return k(e,!1)}return d&&z(d.then)?d.then(function(){return k(a,b)},function(a){return k(a,!1)}):k(a,b)},m=function(a,b,c,d){var e=new f;e.resolve(a);return e.promise.then(b,c,d)},n=function(a){if(!z(a))throw g("norslvr",a);var b=new f;a(function(a){b.resolve(a)},function(a){b.reject(a)});return b.promise};n.prototype=d.prototype;n.defer=h;n.reject=function(a){var b=new f;b.reject(a);return b.promise};n.when=m;n.resolve=m;n.all=function(a){var b=
new f,c=0,d=L(a)?[]:{};q(a,function(a,e){c++;m(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise};n.race=function(a){var b=h();q(a,function(a){m(a).then(b.resolve,b.reject)});return b.promise};return n}function Gf(){this.$get=["$window","$timeout",function(a,b){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,
e=!!d,f=e?function(a){var b=d(a);return function(){c(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};f.supported=e;return f}]}function vf(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=++pb;this.$$ChildScope=null}b.prototype=a;return b}var b=10,d=N("$rootScope"),c=null,e=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=
["$exceptionHandler","$parse","$browser",function(f,g,h){function k(a){a.currentScope.$$destroyed=!0}function l(a){9===Ea&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling));a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function m(){this.$id=++pb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount=
{};this.$$watchersCount=0;this.$$isolateBindings=null}function n(a){if(J.$$phase)throw d("inprog",J.$$phase);J.$$phase=a}function p(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function u(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function s(){}function B(){for(;t.length;)try{t.shift()()}catch(a){f(a)}e=null}function r(){null===e&&(e=h.defer(function(){J.$apply(B)}))}m.prototype={constructor:m,$new:function(b,c){var d;c=c||this;b?
(d=new m,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope);d.$parent=c;d.$$prevSibling=c.$$childTail;c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d;(b||c!=this)&&d.$on("$destroy",k);return d},$watch:function(a,b,d,e){var f=g(a);if(f.$$watchDelegate)return f.$$watchDelegate(this,b,d,f,a);var h=this,k=h.$$watchers,l={fn:b,last:s,get:f,exp:e||a,eq:!!d};c=null;z(b)||(l.fn=A);k||(k=h.$$watchers=[]);k.unshift(l);p(this,
1);return function(){0<=Za(k,l)&&p(h,-1);c=null}},$watchGroup:function(a,b){function c(){h=!1;k?(k=!1,b(e,e,g)):b(e,d,g)}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g)});return function(){l=!1}}if(1===a.length)return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f)});q(a,function(a,b){var k=g.$watch(a,function(a,f){e[b]=a;d[b]=f;h||(h=!0,g.$evalAsync(c))});f.push(k)});return function(){for(;f.length;)f.shift()()}},
$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(!y(e)){if(D(e))if(ta(e))for(f!==n&&(f=n,u=f.length=0,l++),a=e.length,u!==a&&(l++,f.length=u=a),b=0;b<a;b++)h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);else{f!==p&&(f=p={},u=0,l++);a=0;for(b in e)ua.call(e,b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(u++,f[b]=g,l++));if(u>a)for(b in l++,f)ua.call(e,b)||(u--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$stateful=!0;var d=this,e,f,h,k=1<b.length,l=0,m=
g(a,c),n=[],p={},r=!0,u=0;return this.$watch(m,function(){r?(r=!1,b(e,e,d)):b(e,h,d);if(k)if(D(e))if(ta(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)ua.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,g,k,l,m,p,u,r,q=b,t,y=[],A,C;n("$digest");h.$$checkUrlChange();this===J&&null!==e&&(h.defer.cancel(e),B());c=null;do{r=!1;t=this;for(p=0;p<v.length;p++){try{C=v[p],C.scope.$eval(C.expression,C.locals)}catch(F){f(F)}c=null}v.length=0;a:do{if(p=t.$$watchers)for(u=
p.length;u--;)try{if(a=p[u])if(m=a.get,(g=m(t))!==(k=a.last)&&!(a.eq?na(g,k):"number"===typeof g&&"number"===typeof k&&isNaN(g)&&isNaN(k)))r=!0,c=a,a.last=a.eq?pa(g,null):g,l=a.fn,l(g,k===s?g:k,t),5>q&&(A=4-q,y[A]||(y[A]=[]),y[A].push({msg:z(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:g,oldVal:k}));else if(a===c){r=!1;break a}}catch(G){f(G)}if(!(p=t.$$watchersCount&&t.$$childHead||t!==this&&t.$$nextSibling))for(;t!==this&&!(p=t.$$nextSibling);)t=t.$parent}while(t=p);if((r||v.length)&&
!q--)throw J.$$phase=null,d("infdig",b,y);}while(r||v.length);for(J.$$phase=null;K<w.length;)try{w[K++]()}catch(D){f(D)}w.length=K=0},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this===J&&h.$$applicationDestroyed();p(this,-this.$$watchersCount);for(var b in this.$$listenerCount)u(this,this.$$listenerCount[b],b);a&&a.$$childHead==this&&(a.$$childHead=this.$$nextSibling);a&&a.$$childTail==this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&
(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=A;this.$on=this.$watch=this.$watchGroup=function(){return A};this.$$listeners={};this.$$nextSibling=null;l(this)}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){J.$$phase||v.length||h.defer(function(){v.length&&J.$digest()});v.push({scope:this,expression:g(a),locals:b})},$$postDigest:function(a){w.push(a)},
$apply:function(a){try{n("$apply");try{return this.$eval(a)}finally{J.$$phase=null}}catch(b){f(b)}finally{try{J.$digest()}catch(c){throw f(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&t.push(b);a=g(a);r()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,u(e,1,a))}},$emit:function(a,
b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=$a([h],arguments,1),l,m;do{d=e.$$listeners[a]||c;h.currentScope=e;l=0;for(m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,k)}catch(n){f(n)}else d.splice(l,1),l--,m--;if(g)return h.currentScope=null,h;e=e.$parent}while(e);h.currentScope=null;return h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=
!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var g=$a([e],arguments,1),h,k;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){f(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}e.currentScope=null;return e}};var J=new m,v=J.$$asyncQueue=[],w=J.$$postDigestQueue=[],t=J.$$applyAsyncQueue=[],K=0;return J}]}function ne(){var a=
/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return w(b)?(a=b,this):a};this.imgSrcSanitizationWhitelist=function(a){return w(a)?(b=a,this):b};this.$get=function(){return function(d,c){var e=c?b:a,f;f=Y(d).href;return""===f||f.match(e)?d:"unsafe:"+f}}}function og(a){if("self"===a)return a;if(G(a)){if(-1<a.indexOf("***"))throw sa("iwcard",a);a=wd(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return new RegExp("^"+
a+"$")}if(Wa(a))return new RegExp("^"+a.source+"$");throw sa("imatcher");}function xd(a){var b=[];w(a)&&q(a,function(a){b.push(og(a))});return b}function zf(){this.SCE_CONTEXTS=la;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){arguments.length&&(a=xd(b));return a};this.resourceUrlBlacklist=function(a){arguments.length&&(b=xd(a));return b};this.$get=["$injector",function(d){function c(a,b){return"self"===a?id(b):!!a.exec(b.href)}function e(a){var b=function(a){this.$$unwrapTrustedValue=
function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var f=function(a){throw sa("unsafe");};d.has("$sanitize")&&(f=d.get("$sanitize"));var g=e(),h={};h[la.HTML]=e(g);h[la.CSS]=e(g);h[la.URL]=e(g);h[la.JS]=e(g);h[la.RESOURCE_URL]=e(h[la.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw sa("icontext",a,b);if(null===b||y(b)||
""===b)return b;if("string"!==typeof b)throw sa("itype",a);return new c(b)},getTrusted:function(d,e){if(null===e||y(e)||""===e)return e;var g=h.hasOwnProperty(d)?h[d]:null;if(g&&e instanceof g)return e.$$unwrapTrustedValue();if(d===la.RESOURCE_URL){var g=Y(e.toString()),n,p,u=!1;n=0;for(p=a.length;n<p;n++)if(c(a[n],g)){u=!0;break}if(u)for(n=0,p=b.length;n<p;n++)if(c(b[n],g)){u=!1;break}if(u)return e;throw sa("insecurl",e.toString());}if(d===la.HTML)return f(e);throw sa("unsafe");},valueOf:function(a){return a instanceof
g?a.$$unwrapTrustedValue():a}}}]}function yf(){var a=!0;this.enabled=function(b){arguments.length&&(a=!!b);return a};this.$get=["$parse","$sceDelegate",function(b,d){if(a&&8>Ea)throw sa("iequirks");var c=ia(la);c.isEnabled=function(){return a};c.trustAs=d.trustAs;c.getTrusted=d.getTrusted;c.valueOf=d.valueOf;a||(c.trustAs=c.getTrusted=function(a,b){return b},c.valueOf=Xa);c.parseAs=function(a,d){var e=b(d);return e.literal&&e.constant?e:b(d,function(b){return c.getTrusted(a,b)})};var e=c.parseAs,
f=c.getTrusted,g=c.trustAs;q(la,function(a,b){var d=Q(b);c[db("parse_as_"+d)]=function(b){return e(a,b)};c[db("get_trusted_"+d)]=function(b){return f(a,b)};c[db("trust_as_"+d)]=function(b){return g(a,b)}});return c}]}function Af(){this.$get=["$window","$document",function(a,b){var d={},c=!(a.chrome&&a.chrome.app&&a.chrome.app.runtime)&&a.history&&a.history.pushState,e=Z((/android (\d+)/.exec(Q((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},h,k=/^(Moz|webkit|ms)(?=[A-Z])/,
l=g.body&&g.body.style,m=!1,n=!1;if(l){for(var p in l)if(m=k.exec(p)){h=m[0];h=h[0].toUpperCase()+h.substr(1);break}h||(h="WebkitOpacity"in l&&"webkit");m=!!("transition"in l||h+"Transition"in l);n=!!("animation"in l||h+"Animation"in l);!e||m&&n||(m=G(l.webkitTransition),n=G(l.webkitAnimation))}return{history:!(!c||4>e||f),hasEvent:function(a){if("input"===a&&11>=Ea)return!1;if(y(d[a])){var b=g.createElement("div");d[a]="on"+a in b}return d[a]},csp:Ba(),vendorPrefix:h,transitions:m,animations:n,android:e}}]}
function Cf(){var a;this.httpOptions=function(b){return b?(a=b,this):a};this.$get=["$templateCache","$http","$q","$sce",function(b,d,c,e){function f(g,h){f.totalPendingRequests++;if(!G(g)||y(b.get(g)))g=e.getTrustedResourceUrl(g);var k=d.defaults&&d.defaults.transformResponse;L(k)?k=k.filter(function(a){return a!==dc}):k===dc&&(k=null);return d.get(g,S({cache:b,transformResponse:k},a))["finally"](function(){f.totalPendingRequests--}).then(function(a){b.put(g,a.data);return a.data},function(a){if(!h)throw pg("tpload",
g,a.status,a.statusText);return c.reject(a)})}f.totalPendingRequests=0;return f}]}function Df(){this.$get=["$rootScope","$browser","$location",function(a,b,d){return{findBindings:function(a,b,d){a=a.getElementsByClassName("ng-binding");var g=[];q(a,function(a){var c=ca.element(a).data("$binding");c&&q(c,function(c){d?(new RegExp("(^|\\s)"+wd(b)+"(\\s|\\||$)")).test(c)&&g.push(a):-1!=c.indexOf(b)&&g.push(a)})});return g},findModels:function(a,b,d){for(var g=["ng-","data-ng-","ng\\:"],h=0;h<g.length;++h){var k=
a.querySelectorAll("["+g[h]+"model"+(d?"=":"*=")+'"'+b+'"]');if(k.length)return k}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function Ef(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,d,c,e){function f(f,k,l){z(f)||(l=k,k=f,f=A);var m=va.call(arguments,3),n=w(l)&&!l,p=(n?c:d).defer(),u=p.promise,q;q=b.defer(function(){try{p.resolve(f.apply(null,
m))}catch(b){p.reject(b),e(b)}finally{delete g[u.$$timeoutId]}n||a.$apply()},k);u.$$timeoutId=q;g[q]=p;return u}var g={};f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1};return f}]}function Y(a){Ea&&($.setAttribute("href",a),a=$.href);$.setAttribute("href",a);return{href:$.href,protocol:$.protocol?$.protocol.replace(/:$/,""):"",host:$.host,search:$.search?$.search.replace(/^\?/,""):"",hash:$.hash?$.hash.replace(/^#/,
""):"",hostname:$.hostname,port:$.port,pathname:"/"===$.pathname.charAt(0)?$.pathname:"/"+$.pathname}}function id(a){a=G(a)?Y(a):a;return a.protocol===yd.protocol&&a.host===yd.host}function Ff(){this.$get=ha(C)}function zd(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var d=a[0]||{},c={},e="";return function(){var a,g,h,k,l;a=d.cookie||"";if(a!==e)for(e=a,a=e.split("; "),c={},h=0;h<a.length;h++)g=a[h],k=g.indexOf("="),0<k&&(l=b(g.substring(0,k)),y(c[l])&&(c[l]=b(g.substring(k+
1))));return c}}function Jf(){this.$get=zd}function Mc(a){function b(d,c){if(D(d)){var e={};q(d,function(a,c){e[c]=b(c,a)});return e}return a.factory(d+"Filter",c)}this.register=b;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}];b("currency",Ad);b("date",Bd);b("filter",qg);b("json",rg);b("limitTo",sg);b("lowercase",tg);b("number",Cd);b("orderBy",Dd);b("uppercase",ug)}function qg(){return function(a,b,d,c){if(!ta(a)){if(null==a)return a;throw N("filter")("notarray",
a);}c=c||"$";var e;switch(lc(b)){case "function":break;case "boolean":case "null":case "number":case "string":e=!0;case "object":b=vg(b,d,c,e);break;default:return a}return Array.prototype.filter.call(a,b)}}function vg(a,b,d,c){var e=D(a)&&d in a;!0===b?b=na:z(b)||(b=function(a,b){if(y(a))return!1;if(null===a||null===b)return a===b;if(D(b)||D(a)&&!vc(a))return!1;a=Q(""+a);b=Q(""+b);return-1!==a.indexOf(b)});return function(f){return e&&!D(f)?La(f,a[d],b,d,!1):La(f,a,b,d,c)}}function La(a,b,d,c,e,
f){var g=lc(a),h=lc(b);if("string"===h&&"!"===b.charAt(0))return!La(a,b.substring(1),d,c,e);if(L(a))return a.some(function(a){return La(a,b,d,c,e)});switch(g){case "object":var k;if(e){for(k in a)if("$"!==k.charAt(0)&&La(a[k],b,d,c,!0))return!0;return f?!1:La(a,b,d,c,!1)}if("object"===h){for(k in b)if(f=b[k],!z(f)&&!y(f)&&(g=k===c,!La(g?a:a[k],f,d,c,g,g)))return!1;return!0}return d(a,b);case "function":return!1;default:return d(a,b)}}function lc(a){return null===a?"null":typeof a}function Ad(a){var b=
a.NUMBER_FORMATS;return function(a,c,e){y(c)&&(c=b.CURRENCY_SYM);y(e)&&(e=b.PATTERNS[1].maxFrac);return null==a?a:Ed(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,e).replace(/\u00A4/g,c)}}function Cd(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Ed(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function wg(a){var b=0,d,c,e,f,g;-1<(c=a.indexOf(Fd))&&(a=a.replace(Fd,""));0<(e=a.search(/e/i))?(0>c&&(c=e),c+=+a.slice(e+1),a=a.substring(0,e)):0>c&&(c=a.length);for(e=0;a.charAt(e)==mc;e++);
if(e==(g=a.length))d=[0],c=1;else{for(g--;a.charAt(g)==mc;)g--;c-=e;d=[];for(f=0;e<=g;e++,f++)d[f]=+a.charAt(e)}c>Gd&&(d=d.splice(0,Gd-1),b=c-1,c=1);return{d:d,e:b,i:c}}function xg(a,b,d,c){var e=a.d,f=e.length-a.i;b=y(b)?Math.min(Math.max(d,f),c):+b;d=b+a.i;c=e[d];if(0<d){e.splice(Math.max(a.i,d));for(var g=d;g<e.length;g++)e[g]=0}else for(f=Math.max(0,f),a.i=1,e.length=Math.max(1,d=b+1),e[0]=0,g=1;g<d;g++)e[g]=0;if(5<=c)if(0>d-1){for(c=0;c>d;c--)e.unshift(0),a.i++;e.unshift(1);a.i++}else e[d-1]++;
for(;f<Math.max(0,b);f++)e.push(0);if(b=e.reduceRight(function(a,b,c,d){b+=a;d[c]=b%10;return Math.floor(b/10)},0))e.unshift(b),a.i++}function Ed(a,b,d,c,e){if(!G(a)&&!T(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,h=Math.abs(a)+"",k="";if(f)k="\u221e";else{g=wg(h);xg(g,e,b.minFrac,b.maxFrac);k=g.d;h=g.i;e=g.e;f=[];for(g=k.reduce(function(a,b){return a&&!b},!0);0>h;)k.unshift(0),h++;0<h?f=k.splice(h,k.length):(f=k,k=[0]);h=[];for(k.length>=b.lgSize&&h.unshift(k.splice(-b.lgSize,k.length).join(""));k.length>
b.gSize;)h.unshift(k.splice(-b.gSize,k.length).join(""));k.length&&h.unshift(k.join(""));k=h.join(d);f.length&&(k+=c+f.join(""));e&&(k+="e+"+e)}return 0>a&&!g?b.negPre+k+b.negSuf:b.posPre+k+b.posSuf}function Kb(a,b,d,c){var e="";if(0>a||c&&0>=a)c?a=-a+1:(a=-a,e="-");for(a=""+a;a.length<b;)a=mc+a;d&&(a=a.substr(a.length-b));return e+a}function ba(a,b,d,c,e){d=d||0;return function(f){f=f["get"+a]();if(0<d||f>-d)f+=d;0===f&&-12==d&&(f=12);return Kb(f,b,c,e)}}function kb(a,b,d){return function(c,e){var f=
c["get"+a](),g=ub((d?"STANDALONE":"")+(b?"SHORT":"")+a);return e[g][f]}}function Hd(a){var b=(new Date(a,0,1)).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Id(a){return function(b){var d=Hd(b.getFullYear());b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+d;b=1+Math.round(b/6048E5);return Kb(b,a)}}function nc(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Bd(a){function b(a){var b;if(b=a.match(d)){a=new Date(0);var f=0,g=0,h=b[8]?a.setUTCFullYear:a.setFullYear,
k=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=Z(b[9]+b[10]),g=Z(b[9]+b[11]));h.call(a,Z(b[1]),Z(b[2])-1,Z(b[3]));f=Z(b[4]||0)-f;g=Z(b[5]||0)-g;h=Z(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));k.call(a,f,g,h,b)}return a}var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,f){var g="",h=[],k,l;d=d||"mediumDate";d=a.DATETIME_FORMATS[d]||d;G(c)&&(c=yg.test(c)?Z(c):b(c));T(c)&&(c=new Date(c));if(!da(c)||!isFinite(c.getTime()))return c;
for(;d;)(l=zg.exec(d))?(h=$a(h,l,1),d=h.pop()):(h.push(d),d=null);var m=c.getTimezoneOffset();f&&(m=yc(f,m),c=Sb(c,f,!0));q(h,function(b){k=Ag[b];g+=k?k(c,a.DATETIME_FORMATS,m):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return g}}function rg(){return function(a,b){y(b)&&(b=2);return bb(a,b)}}function sg(){return function(a,b,d){b=Infinity===Math.abs(Number(b))?Number(b):Z(b);if(isNaN(b))return a;T(a)&&(a=a.toString());if(!ta(a))return a;d=!d||isNaN(d)?0:Z(d);d=0>d?Math.max(0,a.length+
d):d;return 0<=b?oc(a,d,d+b):0===d?oc(a,b,a.length):oc(a,Math.max(0,d+b),d)}}function oc(a,b,d){return G(a)?a.slice(b,d):va.call(a,b,d)}function Dd(a){function b(b){return b.map(function(b){var c=1,d=Xa;if(z(b))d=b;else if(G(b)){if("+"==b.charAt(0)||"-"==b.charAt(0))c="-"==b.charAt(0)?-1:1,b=b.substring(1);if(""!==b&&(d=a(b),d.constant))var e=d(),d=function(a){return a[e]}}return{get:d,descending:c}})}function d(a){switch(typeof a){case "number":case "boolean":case "string":return!0;default:return!1}}
function c(a,b){var c=0,d=a.type,k=b.type;if(d===k){var k=a.value,l=b.value;"string"===d?(k=k.toLowerCase(),l=l.toLowerCase()):"object"===d&&(D(k)&&(k=a.index),D(l)&&(l=b.index));k!==l&&(c=k<l?-1:1)}else c=d<k?-1:1;return c}return function(a,f,g,h){if(null==a)return a;if(!ta(a))throw N("orderBy")("notarray",a);L(f)||(f=[f]);0===f.length&&(f=["+"]);var k=b(f),l=g?-1:1,m=z(h)?h:c;a=Array.prototype.map.call(a,function(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:k.map(function(c){var e=
c.get(a);c=typeof e;if(null===e)c="string",e="null";else if("object"===c)a:{if(z(e.valueOf)&&(e=e.valueOf(),d(e)))break a;vc(e)&&(e=e.toString(),d(e))}return{value:e,type:c,index:b}})}});a.sort(function(a,b){for(var c=0,d=k.length;c<d;c++){var e=m(a.predicateValues[c],b.predicateValues[c]);if(e)return e*k[c].descending*l}return m(a.tieBreaker,b.tieBreaker)*l});return a=a.map(function(a){return a.value})}}function Ta(a){z(a)&&(a={link:a});a.restrict=a.restrict||"AC";return ha(a)}function Jd(a,b,d,
c,e){var f=this,g=[];f.$error={};f.$$success={};f.$pending=void 0;f.$name=e(b.name||b.ngForm||"")(d);f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;f.$submitted=!1;f.$$parentForm=Lb;f.$rollbackViewValue=function(){q(g,function(a){a.$rollbackViewValue()})};f.$commitViewValue=function(){q(g,function(a){a.$commitViewValue()})};f.$addControl=function(a){Qa(a.$name,"input");g.push(a);a.$name&&(f[a.$name]=a);a.$$parentForm=f};f.$$renameControl=function(a,b){var c=a.$name;f[c]===a&&delete f[c];f[b]=
a;a.$name=b};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];q(f.$pending,function(b,c){f.$setValidity(c,null,a)});q(f.$error,function(b,c){f.$setValidity(c,null,a)});q(f.$$success,function(b,c){f.$setValidity(c,null,a)});Za(g,a);a.$$parentForm=Lb};Kd({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(Za(d,c),0===d.length&&delete a[b])},$animate:c});f.$setDirty=function(){c.removeClass(a,Ua);c.addClass(a,
Mb);f.$dirty=!0;f.$pristine=!1;f.$$parentForm.$setDirty()};f.$setPristine=function(){c.setClass(a,Ua,Mb+" ng-submitted");f.$dirty=!1;f.$pristine=!0;f.$submitted=!1;q(g,function(a){a.$setPristine()})};f.$setUntouched=function(){q(g,function(a){a.$setUntouched()})};f.$setSubmitted=function(){c.addClass(a,"ng-submitted");f.$submitted=!0;f.$$parentForm.$setSubmitted()}}function pc(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function lb(a,b,d,c,e,f){var g=Q(b[0].type);if(!e.android){var h=
!1;b.on("compositionstart",function(){h=!0});b.on("compositionend",function(){h=!1;l()})}var k,l=function(a){k&&(f.defer.cancel(k),k=null);if(!h){var e=b.val();a=a&&a.type;"password"===g||d.ngTrim&&"false"===d.ngTrim||(e=W(e));(c.$viewValue!==e||""===e&&c.$$hasNativeValidators)&&c.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",l);else{var m=function(a,b,c){k||(k=f.defer(function(){k=null;b&&b.value===c||l(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||
m(a,this,this.value)});if(e.hasEvent("paste"))b.on("paste cut",m)}b.on("change",l);if(Ld[g]&&c.$$hasNativeValidators&&g===d.type)b.on("keydown wheel mousedown",function(a){if(!k){var b=this.validity,c=b.badInput,d=b.typeMismatch;k=f.defer(function(){k=null;b.badInput===c&&b.typeMismatch===d||l(a)})}});c.$render=function(){var a=c.$isEmpty(c.$viewValue)?"":c.$viewValue;b.val()!==a&&b.val(a)}}function Nb(a,b){return function(d,c){var e,f;if(da(d))return d;if(G(d)){'"'==d.charAt(0)&&'"'==d.charAt(d.length-
1)&&(d=d.substring(1,d.length-1));if(Bg.test(d))return new Date(d);a.lastIndex=0;if(e=a.exec(d))return e.shift(),f=c?{yyyy:c.getFullYear(),MM:c.getMonth()+1,dd:c.getDate(),HH:c.getHours(),mm:c.getMinutes(),ss:c.getSeconds(),sss:c.getMilliseconds()/1E3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},q(e,function(a,c){c<b.length&&(f[b[c]]=+a)}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1E3*f.sss||0)}return NaN}}function mb(a,b,d,c){return function(e,f,g,h,k,l,m){function n(a){return a&&!(a.getTime&&
a.getTime()!==a.getTime())}function p(a){return w(a)&&!da(a)?d(a)||void 0:a}Md(e,f,g,h);lb(e,f,g,h,k,l);var u=h&&h.$options&&h.$options.timezone,q;h.$$parserName=a;h.$parsers.push(function(a){if(h.$isEmpty(a))return null;if(b.test(a))return a=d(a,q),u&&(a=Sb(a,u)),a});h.$formatters.push(function(a){if(a&&!da(a))throw nb("datefmt",a);if(n(a))return(q=a)&&u&&(q=Sb(q,u,!0)),m("date")(a,c,u);q=null;return""});if(w(g.min)||g.ngMin){var s;h.$validators.min=function(a){return!n(a)||y(s)||d(a)>=s};g.$observe("min",
function(a){s=p(a);h.$validate()})}if(w(g.max)||g.ngMax){var r;h.$validators.max=function(a){return!n(a)||y(r)||d(a)<=r};g.$observe("max",function(a){r=p(a);h.$validate()})}}}function Md(a,b,d,c){(c.$$hasNativeValidators=D(b[0].validity))&&c.$parsers.push(function(a){var c=b.prop("validity")||{};return c.badInput||c.typeMismatch?void 0:a})}function Nd(a,b,d,c,e){if(w(c)){a=a(c);if(!a.constant)throw nb("constexpr",d,c);return a(b)}return e}function qc(a,b){a="ngClass"+a;return["$animate",function(d){function c(a,
b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e==b[m])continue a;c.push(e)}return c}function e(a){var b=[];return L(a)?(q(a,function(a){b=b.concat(e(a))}),b):G(a)?a.split(" "):D(a)?(q(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",link:function(f,g,h){function k(a){a=l(a,1);h.$addClass(a)}function l(a,b){var c=g.data("$classCounts")||U(),d=[];q(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a)});g.data("$classCounts",c);return d.join(" ")}
function m(a,b){var e=c(b,a),f=c(a,b),e=l(e,1),f=l(f,-1);e&&e.length&&d.addClass(g,e);f&&f.length&&d.removeClass(g,f)}function n(a){if(!0===b||(f.$index&1)===b){var c=e(a||[]);if(!p)k(c);else if(!na(a,p)){var d=e(p);m(d,c)}}p=L(a)?a.map(function(a){return ia(a)}):ia(a)}var p;f.$watch(h[a],n,!0);h.$observe("class",function(b){n(f.$eval(h[a]))});"ngClass"!==a&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var m=e(f.$eval(h[a]));g===b?k(m):(g=l(m,-1),h.$removeClass(g))}})}}}]}function Kd(a){function b(a,
b){b&&!f[a]?(k.addClass(e,a),f[a]=!0):!b&&f[a]&&(k.removeClass(e,a),f[a]=!1)}function d(a,c){a=a?"-"+Cc(a,"-"):"";b(ob+a,!0===c);b(Od+a,!1===c)}var c=a.ctrl,e=a.$element,f={},g=a.set,h=a.unset,k=a.$animate;f[Od]=!(f[ob]=e.hasClass(ob));c.$setValidity=function(a,e,f){y(e)?(c.$pending||(c.$pending={}),g(c.$pending,a,f)):(c.$pending&&h(c.$pending,a,f),Pd(c.$pending)&&(c.$pending=void 0));Ga(e)?e?(h(c.$error,a,f),g(c.$$success,a,f)):(g(c.$error,a,f),h(c.$$success,a,f)):(h(c.$error,a,f),h(c.$$success,
a,f));c.$pending?(b(Qd,!0),c.$valid=c.$invalid=void 0,d("",null)):(b(Qd,!1),c.$valid=Pd(c.$error),c.$invalid=!c.$valid,d("",c.$valid));e=c.$pending&&c.$pending[a]?void 0:c.$error[a]?!1:c.$$success[a]?!0:null;d(a,e);c.$$parentForm.$setValidity(a,e,c)}}function Pd(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var Cg=/^\/(.+)\/([a-z]*)$/,ua=Object.prototype.hasOwnProperty,Q=function(a){return G(a)?a.toLowerCase():a},ub=function(a){return G(a)?a.toUpperCase():a},Ea,F,qa,va=[].slice,
bg=[].splice,Dg=[].push,ma=Object.prototype.toString,wc=Object.getPrototypeOf,xa=N("ng"),ca=C.angular||(C.angular={}),Ub,pb=0;Ea=C.document.documentMode;A.$inject=[];Xa.$inject=[];var L=Array.isArray,ae=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,W=function(a){return G(a)?a.trim():a},wd=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Ba=function(){if(!w(Ba.rules)){var a=C.document.querySelector("[ng-csp]")||
C.document.querySelector("[data-ng-csp]");if(a){var b=a.getAttribute("ng-csp")||a.getAttribute("data-ng-csp");Ba.rules={noUnsafeEval:!b||-1!==b.indexOf("no-unsafe-eval"),noInlineStyle:!b||-1!==b.indexOf("no-inline-style")}}else{a=Ba;try{new Function(""),b=!1}catch(d){b=!0}a.rules={noUnsafeEval:b,noInlineStyle:!1}}}return Ba.rules},rb=function(){if(w(rb.name_))return rb.name_;var a,b,d=Na.length,c,e;for(b=0;b<d;++b)if(c=Na[b],a=C.document.querySelector("["+c.replace(":","\\:")+"jq]")){e=a.getAttribute(c+
"jq");break}return rb.name_=e},de=/:/g,Na=["ng-","data-ng-","ng:","x-ng-"],ie=/[A-Z]/g,Dc=!1,Ma=3,me={full:"1.5.8",major:1,minor:5,dot:8,codeName:"arbitrary-fallbacks"};O.expando="ng339";var fb=O.cache={},Pf=1;O._data=function(a){return this.cache[a[this.expando]]||{}};var Kf=/([\:\-\_]+(.))/g,Lf=/^moz([A-Z])/,yb={mouseleave:"mouseout",mouseenter:"mouseover"},Wb=N("jqLite"),Of=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Vb=/<|&#?\w+;/,Mf=/<([\w:-]+)/,Nf=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,
ja={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ja.optgroup=ja.option;ja.tbody=ja.tfoot=ja.colgroup=ja.caption=ja.thead;ja.th=ja.td;var Uf=C.Node.prototype.contains||function(a){return!!(this.compareDocumentPosition(a)&16)},Oa=O.prototype={ready:function(a){function b(){d||(d=!0,a())}var d=!1;"complete"===
C.document.readyState?C.setTimeout(b):(this.on("DOMContentLoaded",b),O(C).on("load",b))},toString:function(){var a=[];q(this,function(b){a.push(""+b)});return"["+a.join(", ")+"]"},eq:function(a){return 0<=a?F(this[a]):F(this[this.length+a])},length:0,push:Dg,sort:[].sort,splice:[].splice},Eb={};q("multiple selected checked disabled readOnly required open".split(" "),function(a){Eb[Q(a)]=a});var Vc={};q("input select option textarea button form details".split(" "),function(a){Vc[a]=!0});var bd={ngMinlength:"minlength",
ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};q({data:Yb,removeData:eb,hasData:function(a){for(var b in fb[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,d=a.length;b<d;b++)eb(a[b])}},function(a,b){O[b]=a});q({data:Yb,inheritedData:Cb,scope:function(a){return F.data(a,"$scope")||Cb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return F.data(a,"$isolateScope")||F.data(a,"$isolateScopeNoTemplate")},controller:Sc,injector:function(a){return Cb(a,
"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:zb,css:function(a,b,d){b=db(b);if(w(d))a.style[b]=d;else return a.style[b]},attr:function(a,b,d){var c=a.nodeType;if(c!==Ma&&2!==c&&8!==c)if(c=Q(b),Eb[c])if(w(d))d?(a[b]=!0,a.setAttribute(b,c)):(a[b]=!1,a.removeAttribute(c));else return a[b]||(a.attributes.getNamedItem(b)||A).specified?c:void 0;else if(w(d))a.setAttribute(b,d);else if(a.getAttribute)return a=a.getAttribute(b,2),null===a?void 0:a},prop:function(a,b,d){if(w(d))a[b]=
d;else return a[b]},text:function(){function a(a,d){if(y(d)){var c=a.nodeType;return 1===c||c===Ma?a.textContent:""}a.textContent=d}a.$dv="";return a}(),val:function(a,b){if(y(b)){if(a.multiple&&"select"===wa(a)){var d=[];q(a.options,function(a){a.selected&&d.push(a.value||a.text)});return 0===d.length?null:d}return a.value}a.value=b},html:function(a,b){if(y(b))return a.innerHTML;wb(a,!0);a.innerHTML=b},empty:Tc},function(a,b){O.prototype[b]=function(b,c){var e,f,g=this.length;if(a!==Tc&&y(2==a.length&&
a!==zb&&a!==Sc?b:c)){if(D(b)){for(e=0;e<g;e++)if(a===Yb)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}e=a.$dv;g=y(e)?Math.min(g,1):g;for(f=0;f<g;f++){var h=a(this[f],b,c);e=e?e+h:h}return e}for(e=0;e<g;e++)a(this[e],b,c);return this}});q({removeData:eb,on:function(a,b,d,c){if(w(c))throw Wb("onargs");if(Nc(a)){c=xb(a,!0);var e=c.events,f=c.handle;f||(f=c.handle=Rf(a,e));c=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=c.length,h=function(b,c,g){var h=e[b];h||(h=e[b]=[],h.specialHandlerWrapper=
c,"$destroy"===b||g||a.addEventListener(b,f,!1));h.push(d)};g--;)b=c[g],yb[b]?(h(yb[b],Tf),h(b,void 0,!0)):h(b)}},off:Rc,one:function(a,b,d){a=F(a);a.on(b,function e(){a.off(b,d);a.off(b,e)});a.on(b,d)},replaceWith:function(a,b){var d,c=a.parentNode;wb(a);q(new O(b),function(b){d?c.insertBefore(b,d.nextSibling):c.replaceChild(b,a);d=b})},children:function(a){var b=[];q(a.childNodes,function(a){1===a.nodeType&&b.push(a)});return b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,
b){var d=a.nodeType;if(1===d||11===d){b=new O(b);for(var d=0,c=b.length;d<c;d++)a.appendChild(b[d])}},prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;q(new O(b),function(b){a.insertBefore(b,d)})}},wrap:function(a,b){Pc(a,F(b).eq(0).clone()[0])},remove:Db,detach:function(a){Db(a,!0)},after:function(a,b){var d=a,c=a.parentNode;b=new O(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];c.insertBefore(g,d.nextSibling);d=g}},addClass:Bb,removeClass:Ab,toggleClass:function(a,b,d){b&&q(b.split(" "),
function(b){var e=d;y(e)&&(e=!zb(a,b));(e?Bb:Ab)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:Xb,triggerHandler:function(a,b,d){var c,e,f=b.type||b,g=xb(a);if(g=(g=g&&g.events)&&g[f])c={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=
!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:A,type:f,target:a},b.type&&(c=S(c,b)),b=ia(g),e=d?[c].concat(d):[c],q(b,function(b){c.isImmediatePropagationStopped()||b.apply(a,e)})}},function(a,b){O.prototype[b]=function(b,c,e){for(var f,g=0,h=this.length;g<h;g++)y(f)?(f=a(this[g],b,c,e),w(f)&&(f=F(f))):Qc(f,a(this[g],b,c,e));return w(f)?f:this};O.prototype.bind=O.prototype.on;O.prototype.unbind=O.prototype.off});Ra.prototype={put:function(a,
b){this[Ca(a,this.nextUid)]=b},get:function(a){return this[Ca(a,this.nextUid)]},remove:function(a){var b=this[a=Ca(a,this.nextUid)];delete this[a];return b}};var If=[function(){this.$get=[function(){return Ra}]}],Wf=/^([^\(]+?)=>/,Xf=/^[^\(]*\(\s*([^\)]*)\)/m,Eg=/,/,Fg=/^\s*(_?)(\S+?)\1\s*$/,Vf=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ha=N("$injector");cb.$$annotate=function(a,b,d){var c;if("function"===typeof a){if(!(c=a.$inject)){c=[];if(a.length){if(b)throw G(d)&&d||(d=a.name||Yf(a)),Ha("strictdi",d);
b=Wc(a);q(b[1].split(Eg),function(a){a.replace(Fg,function(a,b,d){c.push(d)})})}a.$inject=c}}else L(a)?(b=a.length-1,Pa(a[b],"fn"),c=a.slice(0,b)):Pa(a,"fn",!0);return c};var Rd=N("$animate"),$e=function(){this.$get=A},af=function(){var a=new Ra,b=[];this.$get=["$$AnimateRunner","$rootScope",function(d,c){function e(a,b,c){var d=!1;b&&(b=G(b)?b.split(" "):L(b)?b:[],q(b,function(b){b&&(d=!0,a[b]=c)}));return d}function f(){q(b,function(b){var c=a.get(b);if(c){var d=Zf(b.attr("class")),e="",f="";q(c,
function(a,b){a!==!!d[b]&&(a?e+=(e.length?" ":"")+b:f+=(f.length?" ":"")+b)});q(b,function(a){e&&Bb(a,e);f&&Ab(a,f)});a.remove(b)}});b.length=0}return{enabled:A,on:A,off:A,pin:A,push:function(g,h,k,l){l&&l();k=k||{};k.from&&g.css(k.from);k.to&&g.css(k.to);if(k.addClass||k.removeClass)if(h=k.addClass,l=k.removeClass,k=a.get(g)||{},h=e(k,h,!0),l=e(k,l,!1),h||l)a.put(g,k),b.push(g),1===b.length&&c.$$postDigest(f);g=new d;g.complete();return g}}}]},Ye=["$provide",function(a){var b=this;this.$$registeredAnimations=
Object.create(null);this.register=function(d,c){if(d&&"."!==d.charAt(0))throw Rd("notcsel",d);var e=d+"-animation";b.$$registeredAnimations[d.substr(1)]=e;a.factory(e,c)};this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw Rd("nongcls","ng-animate");return this.$$classNameFilter};this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var h;a:{for(h=0;h<d.length;h++){var k=
d[h];if(1===k.nodeType){h=k;break a}}h=void 0}!h||h.parentNode||h.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(e,f,g,h){f=f&&F(f);g=g&&F(g);f=f||g.parent();b(e,f,g);return a.push(e,"enter",Ia(h))},move:function(e,f,g,h){f=f&&F(f);g=g&&F(g);f=f||g.parent();b(e,f,g);return a.push(e,"move",Ia(h))},leave:function(b,c){return a.push(b,"leave",Ia(c),function(){b.remove()})},addClass:function(b,
c,g){g=Ia(g);g.addClass=gb(g.addclass,c);return a.push(b,"addClass",g)},removeClass:function(b,c,g){g=Ia(g);g.removeClass=gb(g.removeClass,c);return a.push(b,"removeClass",g)},setClass:function(b,c,g,h){h=Ia(h);h.addClass=gb(h.addClass,c);h.removeClass=gb(h.removeClass,g);return a.push(b,"setClass",h)},animate:function(b,c,g,h,k){k=Ia(k);k.from=k.from?S(k.from,c):c;k.to=k.to?S(k.to,g):g;k.tempClasses=gb(k.tempClasses,h||"ng-inline-animate");return a.push(b,"animate",k)}}}]}],cf=function(){this.$get=
["$$rAF",function(a){function b(b){d.push(b);1<d.length||a(function(){for(var a=0;a<d.length;a++)d[a]();d=[]})}var d=[];return function(){var a=!1;b(function(){a=!0});return function(d){a?d():b(d)}}}]},bf=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(a,b,d,c,e){function f(a){this.setHost(a);var b=d();this._doneCallbacks=[];this._tick=function(a){var d=c[0];d&&d.hidden?e(a,0,!1):b(a)};this._state=0}f.chain=function(a,b){function c(){if(d===a.length)b(!0);
else a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()};f.all=function(a,b){function c(f){e=e&&f;++d===a.length&&b(e)}var d=0,e=!0;q(a,function(a){a.done(c)})};f.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:A,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},"catch":function(a){return this.getPromise()["catch"](a)},
"finally":function(a){return this.getPromise()["finally"](a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end();this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel();this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(q(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=
0,this._state=2)}};return f}]},Ze=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,d){return function(b,e){function f(){a(function(){g.addClass&&(b.addClass(g.addClass),g.addClass=null);g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null);g.to&&(b.css(g.to),g.to=null);h||k.complete();h=!0});return k}var g=e||{};g.$$prepared||(g=pa(g));g.cleanupStyles&&(g.from=g.to=null);g.from&&(b.css(g.from),g.from=null);var h,k=new d;return{start:f,end:f}}}]},ga=N("$compile"),bc=new function(){};
Fc.$inject=["$provide","$$sanitizeUriProvider"];Fb.prototype.isFirstChange=function(){return this.previousValue===bc};var Yc=/^((?:x|data)[\:\-_])/i,cg=N("$controller"),cd=/^(\S+)(\s+as\s+([\w$]+))?$/,jf=function(){this.$get=["$document",function(a){return function(b){b?!b.nodeType&&b instanceof F&&(b=b[0]):b=a[0].body;return b.offsetWidth+1}}]},dd="application/json",ec={"Content-Type":dd+";charset=utf-8"},eg=/^\[|^\{(?!\{)/,fg={"[":/]$/,"{":/}$/},dg=/^\)\]\}',?\n/,Gg=N("$http"),hd=function(a){return function(){throw Gg("legacy",
a);}},Ka=ca.$interpolateMinErr=N("$interpolate");Ka.throwNoconcat=function(a){throw Ka("noconcat",a);};Ka.interr=function(a,b){return Ka("interr",a,b.toString())};var rf=function(){this.$get=["$window",function(a){function b(a){var b=function(a){b.data=a;b.called=!0};b.id=a;return b}var d=a.angular.callbacks,c={};return{createCallback:function(a){a="_"+(d.$$counter++).toString(36);var f="angular.callbacks."+a,g=b(a);c[f]=d[a]=g;return f},wasCalled:function(a){return c[a].called},getResponse:function(a){return c[a].data},
removeCallback:function(a){delete d[c[a].id];delete c[a]}}}]},Hg=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,hg={http:80,https:443,ftp:21},Gb=N("$location"),Ig={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:Hb("$$absUrl"),url:function(a){if(y(a))return this.$$url;var b=Hg.exec(a);(b[1]||""===a)&&this.path(decodeURIComponent(b[1]));(b[2]||b[1]||""===a)&&this.search(b[3]||"");this.hash(b[5]||"");return this},protocol:Hb("$$protocol"),host:Hb("$$host"),port:Hb("$$port"),path:md("$$path",function(a){a=null!==a?a.toString():
"";return"/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(G(a)||T(a))a=a.toString(),this.$$search=Ac(a);else if(D(a))a=pa(a,{}),q(a,function(b,c){null==b&&delete a[c]}),this.$$search=a;else throw Gb("isrcharg");break;default:y(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}this.$$compose();return this},hash:md("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){this.$$replace=!0;return this}};q([ld,hc,gc],
function(a){a.prototype=Object.create(Ig);a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==gc||!this.$$html5)throw Gb("nostate");this.$$state=y(b)?null:b;return this}});var X=N("$parse"),jg=Function.prototype.call,kg=Function.prototype.apply,lg=Function.prototype.bind,Ob=U();q("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Ob[a]=!0});var Jg={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},jc=function(a){this.options=a};jc.prototype={constructor:jc,
lex:function(a){this.text=a;this.index=0;for(this.tokens=[];this.index<this.text.length;)if(a=this.text.charAt(this.index),'"'===a||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),d=b+this.peek(2),c=Ob[b],e=Ob[d];Ob[a]||
c||e?(a=e?d:c?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a&&"string"===typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?
this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):
(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var d=a.charCodeAt(0),c=b.charCodeAt(0);return 55296<=d&&56319>=d&&56320<=c&&57343>=c?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,d){d=d||this.index;b=w(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,d)+"]":" "+d;throw X("lexerr",a,b,this.text);},readNumber:function(){for(var a="",b=this.index;this.index<
this.text.length;){var d=Q(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var c=this.peek();if("e"==d&&this.isExpOperator(c))a+=d;else if(this.isExpOperator(d)&&c&&this.isNumber(c)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||c&&this.isNumber(c)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<
this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var d="",c=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),c=c+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=4,d+=String.fromCharCode(parseInt(e,
16))):d+=Jg[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a){this.index++;this.tokens.push({index:b,text:c,constant:!0,value:d});return}d+=f}this.index++}this.throwError("Unterminated quote",b)}};var s=function(a,b){this.lexer=a;this.options=b};s.Program="Program";s.ExpressionStatement="ExpressionStatement";s.AssignmentExpression="AssignmentExpression";s.ConditionalExpression="ConditionalExpression";s.LogicalExpression="LogicalExpression";s.BinaryExpression="BinaryExpression";s.UnaryExpression="UnaryExpression";
s.CallExpression="CallExpression";s.MemberExpression="MemberExpression";s.Identifier="Identifier";s.Literal="Literal";s.ArrayExpression="ArrayExpression";s.Property="Property";s.ObjectExpression="ObjectExpression";s.ThisExpression="ThisExpression";s.LocalsExpression="LocalsExpression";s.NGValueParameter="NGValueParameter";s.prototype={ast:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.program();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);return a},
program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:s.Program,body:a}},expressionStatement:function(){return{type:s.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();this.expect("=")&&(a={type:s.AssignmentExpression,
left:a,right:this.assignment(),operator:"="});return a},ternary:function(){var a=this.logicalOR(),b,d;return this.expect("?")&&(b=this.expression(),this.consume(":"))?(d=this.expression(),{type:s.ConditionalExpression,test:a,alternate:b,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:s.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:s.LogicalExpression,
operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a=this.relational(),b;b=this.expect("==","!=","===","!==");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.relational()};return a},relational:function(){for(var a=this.additive(),b;b=this.expect("<",">","<=",">=");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var a=this.multiplicative(),b;b=this.expect("+","-");)a={type:s.BinaryExpression,operator:b.text,
left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var a=this.unary(),b;b=this.expect("*","/","%");)a={type:s.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:s.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():
this.selfReferential.hasOwnProperty(this.peek().text)?a=pa(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:s.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:s.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):
"["===b.text?(a={type:s.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:s.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var b={type:s.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text){do a.push(this.filterChain());while(this.expect(","))
}return a},identifier:function(){var a=this.consume();a.identifier||this.throwError("is not a valid identifier",a);return{type:s.Identifier,name:a.text}},constant:function(){return{type:s.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:s.ArrayExpression,elements:a}},object:function(){var a=[],b;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;
b={type:s.Property,kind:"init"};this.peek().constant?(b.key=this.constant(),b.computed=!1,this.consume(":"),b.value=this.expression()):this.peek().identifier?(b.key=this.identifier(),b.computed=!1,this.peek(":")?(this.consume(":"),b.value=this.expression()):b.value=b.key):this.peek("[")?(this.consume("["),b.key=this.expression(),this.consume("]"),b.computed=!0,this.consume(":"),b.value=this.expression()):this.throwError("invalid key",this.peek());a.push(b)}while(this.expect(","))}this.consume("}");
return{type:s.ObjectExpression,properties:a}},throwError:function(a,b){throw X("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index));},consume:function(a){if(0===this.tokens.length)throw X("ueoe",this.text);var b=this.expect(a);b||this.throwError("is unexpected, expecting ["+a+"]",this.peek());return b},peekToken:function(){if(0===this.tokens.length)throw X("ueoe",this.text);return this.tokens[0]},peek:function(a,b,d,c){return this.peekAhead(0,a,b,d,c)},peekAhead:function(a,b,d,c,e){if(this.tokens.length>
a){a=this.tokens[a];var f=a.text;if(f===b||f===d||f===c||f===e||!(b||d||c||e))return a}return!1},expect:function(a,b,d,c){return(a=this.peek(a,b,d,c))?(this.tokens.shift(),a):!1},selfReferential:{"this":{type:s.ThisExpression},$locals:{type:s.LocalsExpression}}};td.prototype={compile:function(a,b){var d=this,c=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:b,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};V(c,d.$filter);var e="",f;this.stage="assign";
if(f=rd(c))this.state.computing="assign",e=this.nextId(),this.recurse(f,e),this.return_(e),e="fn.assign="+this.generateFunction("assign","s,v,l");f=pd(c.body);d.stage="inputs";q(f,function(a,b){var c="fn"+b;d.state[c]={vars:[],body:[],own:{}};d.state.computing=c;var e=d.nextId();d.recurse(a,e);d.return_(e);d.state.inputs.push(c);a.watchId=b});this.state.computing="fn";this.stage="main";this.recurse(c);e='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+
e+this.watchFns()+"return fn;";e=(new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",e))(this.$filter,Sa,ra,nd,ig,Ib,mg,od,a);this.state=this.stage=void 0;e.literal=sd(c);e.constant=c.constant;return e},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,d=this;q(b,function(b){a.push("var "+b+"="+d.generateFunction(b,"s"))});b.length&&a.push("fn.inputs=["+b.join(",")+"];");
return a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;q(this.state.filters,function(d,c){a.push(d+"=$filter("+b.escape(c)+")")});return a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,c,e,f){var g,h,k=this,l,m,n;c=c||A;if(!f&&w(a.watchId))b=
b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,c,e,!0));else switch(a.type){case s.Program:q(a.body,function(b,c){k.recurse(b.expression,void 0,void 0,function(a){h=a});c!==a.body.length-1?k.current().body.push(h,";"):k.return_(h)});break;case s.Literal:m=this.escape(a.value);this.assign(b,m);c(m);break;case s.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){h=a});m=a.operator+"("+this.ifDefined(h,0)+")";this.assign(b,m);
c(m);break;case s.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){g=a});this.recurse(a.right,void 0,void 0,function(a){h=a});m="+"===a.operator?this.plus(g,h):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(h,0):"("+g+")"+a.operator+"("+h+")";this.assign(b,m);c(m);break;case s.LogicalExpression:b=b||this.nextId();k.recurse(a.left,b);k.if_("&&"===a.operator?b:k.not(b),k.lazyRecurse(a.right,b));c(b);break;case s.ConditionalExpression:b=b||this.nextId();k.recurse(a.test,
b);k.if_(b,k.lazyRecurse(a.alternate,b),k.lazyRecurse(a.consequent,b));c(b);break;case s.Identifier:b=b||this.nextId();d&&(d.context="inputs"===k.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name);Sa(a.name);k.if_("inputs"===k.stage||k.not(k.getHasOwnProperty("l",a.name)),function(){k.if_("inputs"===k.stage||"s",function(){e&&1!==e&&k.if_(k.not(k.nonComputedMember("s",a.name)),k.lazyAssign(k.nonComputedMember("s",a.name),"{}"));k.assign(b,k.nonComputedMember("s",
a.name))})},b&&k.lazyAssign(b,k.nonComputedMember("l",a.name)));(k.state.expensiveChecks||Jb(a.name))&&k.addEnsureSafeObject(b);c(b);break;case s.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId();b=b||this.nextId();k.recurse(a.object,g,void 0,function(){k.if_(k.notNull(g),function(){e&&1!==e&&k.addEnsureSafeAssignContext(g);if(a.computed)h=k.nextId(),k.recurse(a.property,h),k.getStringValue(h),k.addEnsureSafeMemberName(h),e&&1!==e&&k.if_(k.not(k.computedMember(g,h)),k.lazyAssign(k.computedMember(g,
h),"{}")),m=k.ensureSafeObject(k.computedMember(g,h)),k.assign(b,m),d&&(d.computed=!0,d.name=h);else{Sa(a.property.name);e&&1!==e&&k.if_(k.not(k.nonComputedMember(g,a.property.name)),k.lazyAssign(k.nonComputedMember(g,a.property.name),"{}"));m=k.nonComputedMember(g,a.property.name);if(k.state.expensiveChecks||Jb(a.property.name))m=k.ensureSafeObject(m);k.assign(b,m);d&&(d.computed=!1,d.name=a.property.name)}},function(){k.assign(b,"undefined")});c(b)},!!e);break;case s.CallExpression:b=b||this.nextId();
a.filter?(h=k.filter(a.callee.name),l=[],q(a.arguments,function(a){var b=k.nextId();k.recurse(a,b);l.push(b)}),m=h+"("+l.join(",")+")",k.assign(b,m),c(b)):(h=k.nextId(),g={},l=[],k.recurse(a.callee,h,g,function(){k.if_(k.notNull(h),function(){k.addEnsureSafeFunction(h);q(a.arguments,function(a){k.recurse(a,k.nextId(),void 0,function(a){l.push(k.ensureSafeObject(a))})});g.name?(k.state.expensiveChecks||k.addEnsureSafeObject(g.context),m=k.member(g.context,g.name,g.computed)+"("+l.join(",")+")"):m=
h+"("+l.join(",")+")";m=k.ensureSafeObject(m);k.assign(b,m)},function(){k.assign(b,"undefined")});c(b)}));break;case s.AssignmentExpression:h=this.nextId();g={};if(!qd(a.left))throw X("lval");this.recurse(a.left,void 0,g,function(){k.if_(k.notNull(g.context),function(){k.recurse(a.right,h);k.addEnsureSafeObject(k.member(g.context,g.name,g.computed));k.addEnsureSafeAssignContext(g.context);m=k.member(g.context,g.name,g.computed)+a.operator+h;k.assign(b,m);c(b||m)})},1);break;case s.ArrayExpression:l=
[];q(a.elements,function(a){k.recurse(a,k.nextId(),void 0,function(a){l.push(a)})});m="["+l.join(",")+"]";this.assign(b,m);c(m);break;case s.ObjectExpression:l=[];n=!1;q(a.properties,function(a){a.computed&&(n=!0)});n?(b=b||this.nextId(),this.assign(b,"{}"),q(a.properties,function(a){a.computed?(g=k.nextId(),k.recurse(a.key,g)):g=a.key.type===s.Identifier?a.key.name:""+a.key.value;h=k.nextId();k.recurse(a.value,h);k.assign(k.member(b,g,a.computed),h)})):(q(a.properties,function(b){k.recurse(b.value,
a.constant?void 0:k.nextId(),void 0,function(a){l.push(k.escape(b.key.type===s.Identifier?b.key.name:""+b.key.value)+":"+a)})}),m="{"+l.join(",")+"}",this.assign(b,m));c(b||m);break;case s.ThisExpression:this.assign(b,"s");c("s");break;case s.LocalsExpression:this.assign(b,"l");c("l");break;case s.NGValueParameter:this.assign(b,"v"),c("v")}},getHasOwnProperty:function(a,b){var d=a+"."+b,c=this.current().own;c.hasOwnProperty(d)||(c[d]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")"));return c[d]},
assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0));return this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,d){if(!0===a)b();else{var c=this.current().body;c.push("if(",a,"){");b();c.push("}");d&&(c.push("else{"),
d(),c.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var d=/[^$_a-zA-Z0-9]/g;return/[$_a-zA-Z][$_a-zA-Z0-9]*/.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,d){return d?this.computedMember(a,b):this.nonComputedMember(a,b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),
";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},addEnsureSafeAssignContext:function(a){this.current().body.push(this.ensureSafeAssignContext(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},ensureSafeAssignContext:function(a){return"ensureSafeAssignContext("+
a+",text)"},lazyRecurse:function(a,b,d,c,e,f){var g=this;return function(){g.recurse(a,b,d,c,e,f)}},lazyAssign:function(a,b){var d=this;return function(){d.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(G(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(T(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if("undefined"===
typeof a)return"undefined";throw X("esc");},nextId:function(a,b){var d="v"+this.state.nextId++;a||this.current().vars.push(d+(b?"="+b:""));return d},current:function(){return this.state[this.state.computing]}};ud.prototype={compile:function(a,b){var d=this,c=this.astBuilder.ast(a);this.expression=a;this.expensiveChecks=b;V(c,d.$filter);var e,f;if(e=rd(c))f=this.recurse(e);e=pd(c.body);var g;e&&(g=[],q(e,function(a,b){var c=d.recurse(a);a.input=c;g.push(c);a.watchId=b}));var h=[];q(c.body,function(a){h.push(d.recurse(a.expression))});
e=0===c.body.length?A:1===c.body.length?h[0]:function(a,b){var c;q(h,function(d){c=d(a,b)});return c};f&&(e.assign=function(a,b,c){return f(a,c,b)});g&&(e.inputs=g);e.literal=sd(c);e.constant=c.constant;return e},recurse:function(a,b,d){var c,e,f=this,g;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case s.Literal:return this.value(a.value,b);case s.UnaryExpression:return e=this.recurse(a.argument),this["unary"+a.operator](e,b);case s.BinaryExpression:return c=this.recurse(a.left),
e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case s.LogicalExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case s.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case s.Identifier:return Sa(a.name,f.expression),f.identifier(a.name,f.expensiveChecks||Jb(a.name),b,d,f.expression);case s.MemberExpression:return c=this.recurse(a.object,!1,!!d),a.computed||(Sa(a.property.name,
f.expression),e=a.property.name),a.computed&&(e=this.recurse(a.property)),a.computed?this.computedMember(c,e,b,d,f.expression):this.nonComputedMember(c,e,f.expensiveChecks,b,d,f.expression);case s.CallExpression:return g=[],q(a.arguments,function(a){g.push(f.recurse(a))}),a.filter&&(e=this.$filter(a.callee.name)),a.filter||(e=this.recurse(a.callee,!0)),a.filter?function(a,c,d,f){for(var n=[],p=0;p<g.length;++p)n.push(g[p](a,c,d,f));a=e.apply(void 0,n,f);return b?{context:void 0,name:void 0,value:a}:
a}:function(a,c,d,m){var n=e(a,c,d,m),p;if(null!=n.value){ra(n.context,f.expression);nd(n.value,f.expression);p=[];for(var q=0;q<g.length;++q)p.push(ra(g[q](a,c,d,m),f.expression));p=ra(n.value.apply(n.context,p),f.expression)}return b?{value:p}:p};case s.AssignmentExpression:return c=this.recurse(a.left,!0,1),e=this.recurse(a.right),function(a,d,g,m){var n=c(a,d,g,m);a=e(a,d,g,m);ra(n.value,f.expression);Ib(n.context);n.context[n.name]=a;return b?{value:a}:a};case s.ArrayExpression:return g=[],q(a.elements,
function(a){g.push(f.recurse(a))}),function(a,c,d,e){for(var f=[],p=0;p<g.length;++p)f.push(g[p](a,c,d,e));return b?{value:f}:f};case s.ObjectExpression:return g=[],q(a.properties,function(a){a.computed?g.push({key:f.recurse(a.key),computed:!0,value:f.recurse(a.value)}):g.push({key:a.key.type===s.Identifier?a.key.name:""+a.key.value,computed:!1,value:f.recurse(a.value)})}),function(a,c,d,e){for(var f={},p=0;p<g.length;++p)g[p].computed?f[g[p].key(a,c,d,e)]=g[p].value(a,c,d,e):f[g[p].key]=g[p].value(a,
c,d,e);return b?{value:f}:f};case s.ThisExpression:return function(a){return b?{value:a}:a};case s.LocalsExpression:return function(a,c){return b?{value:c}:c};case s.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=w(d)?+d:0;return b?{value:d}:d}},"unary-":function(a,b){return function(d,c,e,f){d=a(d,c,e,f);d=w(d)?-d:0;return b?{value:d}:d}},"unary!":function(a,b){return function(d,c,e,f){d=!a(d,c,e,f);return b?{value:d}:
d}},"binary+":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);h=od(h,c);return d?{value:h}:h}},"binary-":function(a,b,d){return function(c,e,f,g){var h=a(c,e,f,g);c=b(c,e,f,g);h=(w(h)?h:0)-(w(c)?c:0);return d?{value:h}:h}},"binary*":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)*b(c,e,f,g);return d?{value:c}:c}},"binary/":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)/b(c,e,f,g);return d?{value:c}:c}},"binary%":function(a,b,d){return function(c,e,f,g){c=a(c,e,
f,g)%b(c,e,f,g);return d?{value:c}:c}},"binary===":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)===b(c,e,f,g);return d?{value:c}:c}},"binary!==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!==b(c,e,f,g);return d?{value:c}:c}},"binary==":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)==b(c,e,f,g);return d?{value:c}:c}},"binary!=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)!=b(c,e,f,g);return d?{value:c}:c}},"binary<":function(a,b,d){return function(c,e,f,g){c=a(c,e,
f,g)<b(c,e,f,g);return d?{value:c}:c}},"binary>":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>b(c,e,f,g);return d?{value:c}:c}},"binary<=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)<=b(c,e,f,g);return d?{value:c}:c}},"binary>=":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)>=b(c,e,f,g);return d?{value:c}:c}},"binary&&":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)&&b(c,e,f,g);return d?{value:c}:c}},"binary||":function(a,b,d){return function(c,e,f,g){c=a(c,e,f,g)||
b(c,e,f,g);return d?{value:c}:c}},"ternary?:":function(a,b,d,c){return function(e,f,g,h){e=a(e,f,g,h)?b(e,f,g,h):d(e,f,g,h);return c?{value:e}:e}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,d,c,e){return function(f,g,h,k){f=g&&a in g?g:f;c&&1!==c&&f&&!f[a]&&(f[a]={});g=f?f[a]:void 0;b&&ra(g,e);return d?{context:f,name:a,value:g}:g}},computedMember:function(a,b,d,c,e){return function(f,g,h,k){var l=a(f,g,h,k),m,n;null!=l&&(m=b(f,
g,h,k),m+="",Sa(m,e),c&&1!==c&&(Ib(l),l&&!l[m]&&(l[m]={})),n=l[m],ra(n,e));return d?{context:l,name:m,value:n}:n}},nonComputedMember:function(a,b,d,c,e,f){return function(g,h,k,l){g=a(g,h,k,l);e&&1!==e&&(Ib(g),g&&!g[b]&&(g[b]={}));h=null!=g?g[b]:void 0;(d||Jb(b))&&ra(h,f);return c?{context:g,name:b,value:h}:h}},inputs:function(a,b){return function(d,c,e,f){return f?f[b]:a(d,c,e)}}};var kc=function(a,b,d){this.lexer=a;this.$filter=b;this.options=d;this.ast=new s(a,d);this.astCompiler=d.csp?new ud(this.ast,
b):new td(this.ast,b)};kc.prototype={constructor:kc,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};var ng=Object.prototype.valueOf,sa=N("$sce"),la={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},pg=N("$compile"),$=C.document.createElement("a"),yd=Y(C.location.href);zd.$inject=["$document"];Mc.$inject=["$provide"];var Gd=22,Fd=".",mc="0";Ad.$inject=["$locale"];Cd.$inject=["$locale"];var Ag={yyyy:ba("FullYear",4,0,!1,!0),yy:ba("FullYear",2,0,
!0,!0),y:ba("FullYear",1,0,!1,!0),MMMM:kb("Month"),MMM:kb("Month",!0),MM:ba("Month",2,1),M:ba("Month",1,1),LLLL:kb("Month",!1,!0),dd:ba("Date",2),d:ba("Date",1),HH:ba("Hours",2),H:ba("Hours",1),hh:ba("Hours",2,-12),h:ba("Hours",1,-12),mm:ba("Minutes",2),m:ba("Minutes",1),ss:ba("Seconds",2),s:ba("Seconds",1),sss:ba("Milliseconds",3),EEEE:kb("Day"),EEE:kb("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,d){a=-1*d;return a=(0<=a?"+":"")+(Kb(Math[0<a?"floor":"ceil"](a/
60),2)+Kb(Math.abs(a%60),2))},ww:Id(2),w:Id(1),G:nc,GG:nc,GGG:nc,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},zg=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,yg=/^\-?\d+$/;Bd.$inject=["$locale"];var tg=ha(Q),ug=ha(ub);Dd.$inject=["$parse"];var oe=ha({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var e="[object SVGAnimatedString]"===ma.call(b.prop("href"))?
"xlink:href":"href";b.on("click",function(a){b.attr(e)||a.preventDefault()})}}}}),vb={};q(Eb,function(a,b){function d(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}if("multiple"!=a){var c=Aa("ng-"+b),e=d;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[c]&&d(a,b,e)});vb[c]=function(){return{restrict:"A",priority:100,link:e}}}});q(bd,function(a,b){vb[b]=function(){return{priority:100,link:function(a,c,e){if("ngPattern"===b&&"/"==e.ngPattern.charAt(0)&&(c=e.ngPattern.match(Cg))){e.$set("ngPattern",
new RegExp(c[1],c[2]));return}a.$watch(e[b],function(a){e.$set(b,a)})}}}});q(["src","srcset","href"],function(a){var b=Aa("ng-"+a);vb[b]=function(){return{priority:99,link:function(d,c,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ma.call(c.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null);e.$observe(b,function(b){b?(e.$set(g,b),Ea&&f&&c.prop(f,e[g])):"href"===a&&e.$set(g,null)})}}}});var Lb={$addControl:A,$$renameControl:function(a,b){a.$name=b},$removeControl:A,$setValidity:A,
$setDirty:A,$setPristine:A,$setSubmitted:A};Jd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Sd=function(a){return["$timeout","$parse",function(b,d){function c(a){return""===a?d('this[""]').assign:d(a).assign||A}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Jd,compile:function(d,f){d.addClass(Ua).addClass(ob);var g=f.name?"name":a&&f.ngForm?"ngForm":!1;return{pre:function(a,d,e,f){var n=f[0];if(!("action"in e)){var p=function(b){a.$apply(function(){n.$commitViewValue();
n.$setSubmitted()});b.preventDefault()};d[0].addEventListener("submit",p,!1);d.on("$destroy",function(){b(function(){d[0].removeEventListener("submit",p,!1)},0,!1)})}(f[1]||n.$$parentForm).$addControl(n);var q=g?c(n.$name):A;g&&(q(a,n),e.$observe(g,function(b){n.$name!==b&&(q(a,void 0),n.$$parentForm.$$renameControl(n,b),q=c(n.$name),q(a,n))}));d.on("$destroy",function(){n.$$parentForm.$removeControl(n);q(a,void 0);S(n,Lb)})}}}}}]},pe=Sd(),Ce=Sd(!0),Bg=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,
Kg=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Lg=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,Mg=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Td=/^(\d{4,})-(\d{2})-(\d{2})$/,Ud=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,rc=/^(\d{4,})-W(\d\d)$/,Vd=/^(\d{4,})-(\d\d)$/,
Wd=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ld=U();q(["date","datetime-local","month","time","week"],function(a){Ld[a]=!0});var Xd={text:function(a,b,d,c,e,f){lb(a,b,d,c,e,f);pc(c)},date:mb("date",Td,Nb(Td,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":mb("datetimelocal",Ud,Nb(Ud,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:mb("time",Wd,Nb(Wd,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:mb("week",rc,function(a,b){if(da(a))return a;if(G(a)){rc.lastIndex=0;var d=rc.exec(a);
if(d){var c=+d[1],e=+d[2],f=d=0,g=0,h=0,k=Hd(c),e=7*(e-1);b&&(d=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),h=b.getMilliseconds());return new Date(c,0,k.getDate()+e,d,f,g,h)}}return NaN},"yyyy-Www"),month:mb("month",Vd,Nb(Vd,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,d,c,e,f){Md(a,b,d,c);lb(a,b,d,c,e,f);c.$$parserName="number";c.$parsers.push(function(a){if(c.$isEmpty(a))return null;if(Mg.test(a))return parseFloat(a)});c.$formatters.push(function(a){if(!c.$isEmpty(a)){if(!T(a))throw nb("numfmt",
a);a=a.toString()}return a});if(w(d.min)||d.ngMin){var g;c.$validators.min=function(a){return c.$isEmpty(a)||y(g)||a>=g};d.$observe("min",function(a){w(a)&&!T(a)&&(a=parseFloat(a));g=T(a)&&!isNaN(a)?a:void 0;c.$validate()})}if(w(d.max)||d.ngMax){var h;c.$validators.max=function(a){return c.$isEmpty(a)||y(h)||a<=h};d.$observe("max",function(a){w(a)&&!T(a)&&(a=parseFloat(a));h=T(a)&&!isNaN(a)?a:void 0;c.$validate()})}},url:function(a,b,d,c,e,f){lb(a,b,d,c,e,f);pc(c);c.$$parserName="url";c.$validators.url=
function(a,b){var d=a||b;return c.$isEmpty(d)||Kg.test(d)}},email:function(a,b,d,c,e,f){lb(a,b,d,c,e,f);pc(c);c.$$parserName="email";c.$validators.email=function(a,b){var d=a||b;return c.$isEmpty(d)||Lg.test(d)}},radio:function(a,b,d,c){y(d.name)&&b.attr("name",++pb);b.on("click",function(a){b[0].checked&&c.$setViewValue(d.value,a&&a.type)});c.$render=function(){b[0].checked=d.value==c.$viewValue};d.$observe("value",c.$render)},checkbox:function(a,b,d,c,e,f,g,h){var k=Nd(h,a,"ngTrueValue",d.ngTrueValue,
!0),l=Nd(h,a,"ngFalseValue",d.ngFalseValue,!1);b.on("click",function(a){c.$setViewValue(b[0].checked,a&&a.type)});c.$render=function(){b[0].checked=c.$viewValue};c.$isEmpty=function(a){return!1===a};c.$formatters.push(function(a){return na(a,k)});c.$parsers.push(function(a){return a?k:l})},hidden:A,button:A,submit:A,reset:A,file:A},Gc=["$browser","$sniffer","$filter","$parse",function(a,b,d,c){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Xd[Q(g.type)]||Xd.text)(e,f,
g,h[0],b,a,d,c)}}}}],Ng=/^(true|false|\d+)$/,Ue=function(){return{restrict:"A",priority:100,compile:function(a,b){return Ng.test(b.ngValue)?function(a,b,e){e.$set("value",a.$eval(e.ngValue))}:function(a,b,e){a.$watch(e.ngValue,function(a){e.$set("value",a)})}}}},ue=["$compile",function(a){return{restrict:"AC",compile:function(b){a.$$addBindingClass(b);return function(b,c,e){a.$$addBindingInfo(c,e.ngBind);c=c[0];b.$watch(e.ngBind,function(a){c.textContent=y(a)?"":a})}}}}],we=["$interpolate","$compile",
function(a,b){return{compile:function(d){b.$$addBindingClass(d);return function(c,d,f){c=a(d.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(d,c.expressions);d=d[0];f.$observe("ngBindTemplate",function(a){d.textContent=y(a)?"":a})}}}}],ve=["$sce","$parse","$compile",function(a,b,d){return{restrict:"A",compile:function(c,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});d.$$addBindingClass(c);return function(b,c,e){d.$$addBindingInfo(c,e.ngBindHtml);b.$watch(g,function(){var d=
f(b);c.html(a.getTrustedHtml(d)||"")})}}}}],Te=ha({restrict:"A",require:"ngModel",link:function(a,b,d,c){c.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),xe=qc("",!0),ze=qc("Odd",0),ye=qc("Even",1),Ae=Ta({compile:function(a,b){b.$set("ngCloak",void 0);a.removeClass("ng-cloak")}}),Be=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Lc={},Og={blur:!0,focus:!0};q("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),
function(a){var b=Aa("ng-"+a);Lc[b]=["$parse","$rootScope",function(d,c){return{restrict:"A",compile:function(e,f){var g=d(f[b],null,!0);return function(b,d){d.on(a,function(d){var e=function(){g(b,{$event:d})};Og[a]&&c.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var Ee=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(d,c,e,f,g){var h,k,l;d.$watch(e.ngIf,function(d){d?k||g(function(d,f){k=f;d[d.length++]=
b.$$createComment("end ngIf",e.ngIf);h={clone:d};a.enter(d,c.parent(),c)}):(l&&(l.remove(),l=null),k&&(k.$destroy(),k=null),h&&(l=tb(h.clone),a.leave(l).then(function(){l=null}),h=null))})}}}],Fe=["$templateRequest","$anchorScroll","$animate",function(a,b,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ca.noop,compile:function(c,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(c,e,m,n,p){var q=0,s,B,r,y=function(){B&&(B.remove(),B=null);s&&
(s.$destroy(),s=null);r&&(d.leave(r).then(function(){B=null}),B=r,r=null)};c.$watch(f,function(f){var m=function(){!w(h)||h&&!c.$eval(h)||b()},t=++q;f?(a(f,!0).then(function(a){if(!c.$$destroyed&&t===q){var b=c.$new();n.template=a;a=p(b,function(a){y();d.enter(a,null,e).then(m)});s=b;r=a;s.$emit("$includeContentLoaded",f);c.$eval(g)}},function(){c.$$destroyed||t!==q||(y(),c.$emit("$includeContentError",f))}),c.$emit("$includeContentRequested",f)):(y(),n.template=null)})}}}}],We=["$compile",function(a){return{restrict:"ECA",
priority:-400,require:"ngInclude",link:function(b,d,c,e){ma.call(d[0]).match(/SVG/)?(d.empty(),a(Oc(e.template,C.document).childNodes)(b,function(a){d.append(a)},{futureParentElement:d})):(d.html(e.template),a(d.contents())(b))}}}],Ge=Ta({priority:450,compile:function(){return{pre:function(a,b,d){a.$eval(d.ngInit)}}}}),Se=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,c){var e=b.attr(d.$attr.ngList)||", ",f="false"!==d.ngTrim,g=f?W(e):e;c.$parsers.push(function(a){if(!y(a)){var b=
[];a&&q(a.split(g),function(a){a&&b.push(f?W(a):a)});return b}});c.$formatters.push(function(a){if(L(a))return a.join(e)});c.$isEmpty=function(a){return!a||!a.length}}}},ob="ng-valid",Od="ng-invalid",Ua="ng-pristine",Mb="ng-dirty",Qd="ng-pending",nb=N("ngModel"),Pg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,c,e,f,g,h,k,l){this.$modelValue=this.$viewValue=Number.NaN;this.$$rawModelValue=void 0;this.$validators={};
this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=void 0;this.$name=l(d.name||"",!1)(a);this.$$parentForm=Lb;var m=e(d.ngModel),n=m.assign,p=m,u=n,s=null,B,r=this;this.$$setOptions=function(a){if((r.$options=a)&&a.getterSetter){var b=e(d.ngModel+"()"),f=e(d.ngModel+"($$$p)");p=function(a){var c=m(a);z(c)&&(c=b(a));
return c};u=function(a,b){z(m(a))?f(a,{$$$p:b}):n(a,b)}}else if(!m.assign)throw nb("nonassign",d.ngModel,ya(c));};this.$render=A;this.$isEmpty=function(a){return y(a)||""===a||null===a||a!==a};this.$$updateEmptyClasses=function(a){r.$isEmpty(a)?(f.removeClass(c,"ng-not-empty"),f.addClass(c,"ng-empty")):(f.removeClass(c,"ng-empty"),f.addClass(c,"ng-not-empty"))};var J=0;Kd({ctrl:this,$element:c,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},$animate:f});this.$setPristine=function(){r.$dirty=
!1;r.$pristine=!0;f.removeClass(c,Mb);f.addClass(c,Ua)};this.$setDirty=function(){r.$dirty=!0;r.$pristine=!1;f.removeClass(c,Ua);f.addClass(c,Mb);r.$$parentForm.$setDirty()};this.$setUntouched=function(){r.$touched=!1;r.$untouched=!0;f.setClass(c,"ng-untouched","ng-touched")};this.$setTouched=function(){r.$touched=!0;r.$untouched=!1;f.setClass(c,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){g.cancel(s);r.$viewValue=r.$$lastCommittedViewValue;r.$render()};this.$validate=function(){if(!T(r.$modelValue)||
!isNaN(r.$modelValue)){var a=r.$$rawModelValue,b=r.$valid,c=r.$modelValue,d=r.$options&&r.$options.allowInvalid;r.$$runValidators(a,r.$$lastCommittedViewValue,function(e){d||b===e||(r.$modelValue=e?a:void 0,r.$modelValue!==c&&r.$$writeModelToScope())})}};this.$$runValidators=function(a,b,c){function d(){var c=!0;q(r.$validators,function(d,e){var g=d(a,b);c=c&&g;f(e,g)});return c?!0:(q(r.$asyncValidators,function(a,b){f(b,null)}),!1)}function e(){var c=[],d=!0;q(r.$asyncValidators,function(e,g){var h=
e(a,b);if(!h||!z(h.then))throw nb("nopromise",h);f(g,void 0);c.push(h.then(function(){f(g,!0)},function(){d=!1;f(g,!1)}))});c.length?k.all(c).then(function(){g(d)},A):g(!0)}function f(a,b){h===J&&r.$setValidity(a,b)}function g(a){h===J&&c(a)}J++;var h=J;(function(){var a=r.$$parserName||"parse";if(y(B))f(a,null);else return B||(q(r.$validators,function(a,b){f(b,null)}),q(r.$asyncValidators,function(a,b){f(b,null)})),f(a,B),B;return!0})()?d()?e():g(!1):g(!1)};this.$commitViewValue=function(){var a=
r.$viewValue;g.cancel(s);if(r.$$lastCommittedViewValue!==a||""===a&&r.$$hasNativeValidators)r.$$updateEmptyClasses(a),r.$$lastCommittedViewValue=a,r.$pristine&&this.$setDirty(),this.$$parseAndValidate()};this.$$parseAndValidate=function(){var b=r.$$lastCommittedViewValue;if(B=y(b)?void 0:!0)for(var c=0;c<r.$parsers.length;c++)if(b=r.$parsers[c](b),y(b)){B=!1;break}T(r.$modelValue)&&isNaN(r.$modelValue)&&(r.$modelValue=p(a));var d=r.$modelValue,e=r.$options&&r.$options.allowInvalid;r.$$rawModelValue=
b;e&&(r.$modelValue=b,r.$modelValue!==d&&r.$$writeModelToScope());r.$$runValidators(b,r.$$lastCommittedViewValue,function(a){e||(r.$modelValue=a?b:void 0,r.$modelValue!==d&&r.$$writeModelToScope())})};this.$$writeModelToScope=function(){u(a,r.$modelValue);q(r.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})};this.$setViewValue=function(a,b){r.$viewValue=a;r.$options&&!r.$options.updateOnDefault||r.$$debounceViewValueCommit(b)};this.$$debounceViewValueCommit=function(b){var c=0,d=r.$options;
d&&w(d.debounce)&&(d=d.debounce,T(d)?c=d:T(d[b])?c=d[b]:T(d["default"])&&(c=d["default"]));g.cancel(s);c?s=g(function(){r.$commitViewValue()},c):h.$$phase?r.$commitViewValue():a.$apply(function(){r.$commitViewValue()})};a.$watch(function(){var b=p(a);if(b!==r.$modelValue&&(r.$modelValue===r.$modelValue||b===b)){r.$modelValue=r.$$rawModelValue=b;B=void 0;for(var c=r.$formatters,d=c.length,e=b;d--;)e=c[d](e);r.$viewValue!==e&&(r.$$updateEmptyClasses(e),r.$viewValue=r.$$lastCommittedViewValue=e,r.$render(),
r.$$runValidators(b,e,A))}return b})}],Re=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Pg,priority:1,compile:function(b){b.addClass(Ua).addClass("ng-untouched").addClass(ob);return{pre:function(a,b,e,f){var g=f[0];b=f[1]||g.$$parentForm;g.$$setOptions(f[2]&&f[2].$options);b.$addControl(g);e.$observe("name",function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)});a.$on("$destroy",function(){g.$$parentForm.$removeControl(g)})},post:function(b,
c,e,f){var g=f[0];if(g.$options&&g.$options.updateOn)c.on(g.$options.updateOn,function(a){g.$$debounceViewValueCommit(a&&a.type)});c.on("blur",function(){g.$touched||(a.$$phase?b.$evalAsync(g.$setTouched):b.$apply(g.$setTouched))})}}}}}],Qg=/(\s+|^)default(\s+|$)/,Ve=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=pa(a.$eval(b.ngModelOptions));w(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=W(this.$options.updateOn.replace(Qg,
function(){d.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=!0}]}},He=Ta({terminal:!0,priority:1E3}),Rg=N("ngOptions"),Sg=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Pe=["$compile","$document","$parse",function(a,b,d){function c(a,b,c){function e(a,b,c,d,f){this.selectValue=a;this.viewValue=
b;this.label=c;this.group=d;this.disabled=f}function f(a){var b;if(!q&&ta(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var n=a.match(Sg);if(!n)throw Rg("iexp",a,ya(b));var p=n[5]||n[7],q=n[6];a=/ as /.test(n[0])&&n[1];var s=n[9];b=d(n[2]?n[1]:p);var w=a&&d(a)||b,r=s&&d(s),y=s?function(a,b){return r(c,b)}:function(a){return Ca(a)},v=function(a,b){return y(a,E(a,b))},A=d(n[2]||n[1]),t=d(n[3]||""),K=d(n[4]||""),z=d(n[8]),H={},E=q?function(a,b){H[q]=b;H[p]=
a;return H}:function(a){H[p]=a;return H};return{trackBy:s,getTrackByValue:v,getWatchables:d(z,function(a){var b=[];a=a||[];for(var d=f(a),e=d.length,g=0;g<e;g++){var h=a===d?g:d[g],l=a[h],h=E(l,h),l=y(l,h);b.push(l);if(n[2]||n[1])l=A(c,h),b.push(l);n[4]&&(h=K(c,h),b.push(h))}return b}),getOptions:function(){for(var a=[],b={},d=z(c)||[],g=f(d),h=g.length,n=0;n<h;n++){var p=d===g?n:g[n],q=E(d[p],p),r=w(c,q),p=y(r,q),u=A(c,q),H=t(c,q),q=K(c,q),r=new e(p,r,u,H,q);a.push(r);b[p]=r}return{items:a,selectValueMap:b,
getOptionFromViewValue:function(a){return b[v(a)]},getViewValueFromOption:function(a){return s?ca.copy(a.viewValue):a.viewValue}}}}}var e=C.document.createElement("option"),f=C.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=A},post:function(d,h,k,l){function m(a,b){a.element=b;b.disabled=a.disabled;a.label!==b.label&&(b.label=a.label,b.textContent=a.label);a.value!==b.value&&(b.value=a.selectValue)}function n(){var a=
t&&p.readValue();if(t)for(var b=t.items.length-1;0<=b;b--){var c=t.items[b];w(c.group)?Db(c.element.parentNode):Db(c.element)}t=K.getOptions();var d={};v&&h.prepend(B);t.items.forEach(function(a){var b;if(w(a.group)){b=d[a.group];b||(b=f.cloneNode(!1),C.appendChild(b),b.label=null===a.group?"null":a.group,d[a.group]=b);var c=e.cloneNode(!1)}else b=C,c=e.cloneNode(!1);b.appendChild(c);m(a,c)});h[0].appendChild(C);s.$render();s.$isEmpty(a)||(b=p.readValue(),(K.trackBy||y?na(a,b):a===b)||(s.$setViewValue(b),
s.$render()))}var p=l[0],s=l[1],y=k.multiple,B;l=0;for(var r=h.children(),A=r.length;l<A;l++)if(""===r[l].value){B=r.eq(l);break}var v=!!B,z=F(e.cloneNode(!1));z.val("?");var t,K=c(k.ngOptions,h,d),C=b[0].createDocumentFragment();y?(s.$isEmpty=function(a){return!a||0===a.length},p.writeValue=function(a){t.items.forEach(function(a){a.element.selected=!1});a&&a.forEach(function(a){if(a=t.getOptionFromViewValue(a))a.element.selected=!0})},p.readValue=function(){var a=h.val()||[],b=[];q(a,function(a){(a=
t.selectValueMap[a])&&!a.disabled&&b.push(t.getViewValueFromOption(a))});return b},K.trackBy&&d.$watchCollection(function(){if(L(s.$viewValue))return s.$viewValue.map(function(a){return K.getTrackByValue(a)})},function(){s.$render()})):(p.writeValue=function(a){var b=t.getOptionFromViewValue(a);b?(h[0].value!==b.selectValue&&(z.remove(),v||B.remove(),h[0].value=b.selectValue,b.element.selected=!0),b.element.setAttribute("selected","selected")):null===a||v?(z.remove(),v||h.prepend(B),h.val(""),B.prop("selected",
!0),B.attr("selected",!0)):(v||B.remove(),h.prepend(z),h.val("?"),z.prop("selected",!0),z.attr("selected",!0))},p.readValue=function(){var a=t.selectValueMap[h.val()];return a&&!a.disabled?(v||B.remove(),z.remove(),t.getViewValueFromOption(a)):null},K.trackBy&&d.$watch(function(){return K.getTrackByValue(s.$viewValue)},function(){s.$render()}));v?(B.remove(),a(B)(d),B.removeClass("ng-scope")):B=F(e.cloneNode(!1));h.empty();n();d.$watchCollection(K.getWatchables,n)}}}}],Ie=["$locale","$interpolate",
"$log",function(a,b,d){var c=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(f,g,h){function k(a){g.text(a||"")}var l=h.count,m=h.$attr.when&&g.attr(h.$attr.when),n=h.offset||0,p=f.$eval(m)||{},s={},w=b.startSymbol(),B=b.endSymbol(),r=w+l+"-"+n+B,z=ca.noop,v;q(h,function(a,b){var c=e.exec(b);c&&(c=(c[1]?"-":"")+Q(c[2]),p[c]=g.attr(h.$attr[b]))});q(p,function(a,d){s[d]=b(a.replace(c,r))});f.$watch(l,function(b){var c=parseFloat(b),e=isNaN(c);e||c in p||(c=a.pluralCat(c-n));c===v||e&&T(v)&&isNaN(v)||
(z(),e=s[c],y(e)?(null!=b&&d.debug("ngPluralize: no rule defined for '"+c+"' in "+m),z=A,k()):z=f.$watch(e,k),v=c)})}}}],Je=["$parse","$animate","$compile",function(a,b,d){var c=N("ngRepeat"),e=function(a,b,c,d,e,m,n){a[c]=d;e&&(a[e]=m);a.$index=b;a.$first=0===b;a.$last=b===n-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(b&1))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,compile:function(f,g){var h=g.ngRepeat,k=d.$$createComment("end ngRepeat",
h),l=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!l)throw c("iexp",h);var m=l[1],n=l[2],p=l[3],s=l[4],l=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!l)throw c("iidexp",m);var w=l[3]||l[1],y=l[2];if(p&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(p)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(p)))throw c("badident",p);var r,z,v,A,t={$id:Ca};s?r=a(s):(v=function(a,b){return Ca(b)},
A=function(a){return a});return function(a,d,f,g,l){r&&(z=function(b,c,d){y&&(t[y]=b);t[w]=c;t.$index=d;return r(a,t)});var m=U();a.$watchCollection(n,function(f){var g,n,r=d[0],s,u=U(),t,C,F,E,G,D,H;p&&(a[p]=f);if(ta(f))G=f,n=z||v;else for(H in n=z||A,G=[],f)ua.call(f,H)&&"$"!==H.charAt(0)&&G.push(H);t=G.length;H=Array(t);for(g=0;g<t;g++)if(C=f===G?g:G[g],F=f[C],E=n(C,F,g),m[E])D=m[E],delete m[E],u[E]=D,H[g]=D;else{if(u[E])throw q(H,function(a){a&&a.scope&&(m[a.id]=a)}),c("dupes",h,E,F);H[g]={id:E,
scope:void 0,clone:void 0};u[E]=!0}for(s in m){D=m[s];E=tb(D.clone);b.leave(E);if(E[0].parentNode)for(g=0,n=E.length;g<n;g++)E[g].$$NG_REMOVED=!0;D.scope.$destroy()}for(g=0;g<t;g++)if(C=f===G?g:G[g],F=f[C],D=H[g],D.scope){s=r;do s=s.nextSibling;while(s&&s.$$NG_REMOVED);D.clone[0]!=s&&b.move(tb(D.clone),null,r);r=D.clone[D.clone.length-1];e(D.scope,g,w,F,y,C,t)}else l(function(a,c){D.scope=c;var d=k.cloneNode(!1);a[a.length++]=d;b.enter(a,null,r);r=d;D.clone=a;u[D.id]=D;e(D.scope,g,w,F,y,C,t)});m=
u})}}}}],Ke=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngShow,function(b){a[b?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],De=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngHide,function(b){a[b?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Le=Ta(function(a,b,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&q(d,function(a,c){b.css(c,"")});a&&b.css(a)},
!0)}),Me=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(d,c,e,f){var g=[],h=[],k=[],l=[],m=function(a,b){return function(){a.splice(b,1)}};d.$watch(e.ngSwitch||e.on,function(c){var d,e;d=0;for(e=k.length;d<e;++d)a.cancel(k[d]);d=k.length=0;for(e=l.length;d<e;++d){var s=tb(h[d].clone);l[d].$destroy();(k[d]=a.leave(s)).then(m(k,d))}h.length=0;l.length=0;(g=f.cases["!"+c]||f.cases["?"])&&q(g,function(c){c.transclude(function(d,
e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");h.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],Ne=Ta({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){c.cases["!"+d.ngSwitchWhen]=c.cases["!"+d.ngSwitchWhen]||[];c.cases["!"+d.ngSwitchWhen].push({transclude:e,element:b})}}),Oe=Ta({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){c.cases["?"]=c.cases["?"]||[];c.cases["?"].push({transclude:e,
element:b})}}),Tg=N("ngTransclude"),Qe=["$compile",function(a){return{restrict:"EAC",terminal:!0,compile:function(b){var d=a(b.contents());b.empty();return function(a,b,f,g,h){function k(){d(a,function(a){b.append(a)})}if(!h)throw Tg("orphan",ya(b));f.ngTransclude===f.$attr.ngTransclude&&(f.ngTransclude="");f=f.ngTransclude||f.ngTranscludeSlot;h(function(a,c){a.length?b.append(a):(k(),c.$destroy())},null,f);f&&!h.isSlotFilled(f)&&k()}}}}],qe=["$templateCache",function(a){return{restrict:"E",terminal:!0,
compile:function(b,d){"text/ng-template"==d.type&&a.put(d.id,b[0].text)}}}],Ug={$setViewValue:A,$render:A},Vg=["$element","$scope",function(a,b){var d=this,c=new Ra;d.ngModelCtrl=Ug;d.unknownOption=F(C.document.createElement("option"));d.renderUnknownOption=function(b){b="? "+Ca(b)+" ?";d.unknownOption.val(b);a.prepend(d.unknownOption);a.val(b)};b.$on("$destroy",function(){d.renderUnknownOption=A});d.removeUnknownOption=function(){d.unknownOption.parent()&&d.unknownOption.remove()};d.readValue=function(){d.removeUnknownOption();
return a.val()};d.writeValue=function(b){d.hasOption(b)?(d.removeUnknownOption(),a.val(b),""===b&&d.emptyOption.prop("selected",!0)):null==b&&d.emptyOption?(d.removeUnknownOption(),a.val("")):d.renderUnknownOption(b)};d.addOption=function(a,b){if(8!==b[0].nodeType){Qa(a,'"option value"');""===a&&(d.emptyOption=b);var g=c.get(a)||0;c.put(a,g+1);d.ngModelCtrl.$render();b[0].hasAttribute("selected")&&(b[0].selected=!0)}};d.removeOption=function(a){var b=c.get(a);b&&(1===b?(c.remove(a),""===a&&(d.emptyOption=
void 0)):c.put(a,b-1))};d.hasOption=function(a){return!!c.get(a)};d.registerOption=function(a,b,c,h,k){if(h){var l;c.$observe("value",function(a){w(l)&&d.removeOption(l);l=a;d.addOption(a,b)})}else k?a.$watch(k,function(a,e){c.$set("value",a);e!==a&&d.removeOption(e);d.addOption(a,b)}):d.addOption(c.value,b);b.on("$destroy",function(){d.removeOption(c.value);d.ngModelCtrl.$render()})}}],re=function(){return{restrict:"E",require:["select","?ngModel"],controller:Vg,priority:1,link:{pre:function(a,b,
d,c){var e=c[1];if(e){var f=c[0];f.ngModelCtrl=e;b.on("change",function(){a.$apply(function(){e.$setViewValue(f.readValue())})});if(d.multiple){f.readValue=function(){var a=[];q(b.find("option"),function(b){b.selected&&a.push(b.value)});return a};f.writeValue=function(a){var c=new Ra(a);q(b.find("option"),function(a){a.selected=w(c.get(a.value))})};var g,h=NaN;a.$watch(function(){h!==e.$viewValue||na(g,e.$viewValue)||(g=ia(e.$viewValue),e.$render());h=e.$viewValue});e.$isEmpty=function(a){return!a||
0===a.length}}}},post:function(a,b,d,c){var e=c[1];if(e){var f=c[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},te=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,d){if(w(d.value))var c=a(d.value,!0);else{var e=a(b.text(),!0);e||d.$set("value",b.text())}return function(a,b,d){var k=b.parent();(k=k.data("$selectController")||k.parent().data("$selectController"))&&k.registerOption(a,b,d,c,e)}}}}],se=ha({restrict:"E",terminal:!1}),Ic=function(){return{restrict:"A",
require:"?ngModel",link:function(a,b,d,c){c&&(d.required=!0,c.$validators.required=function(a,b){return!d.required||!c.$isEmpty(b)},d.$observe("required",function(){c.$validate()}))}}},Hc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e,f=d.ngPattern||d.pattern;d.$observe("pattern",function(a){G(a)&&0<a.length&&(a=new RegExp("^"+a+"$"));if(a&&!a.test)throw N("ngPattern")("noregexp",f,a,ya(b));e=a||void 0;c.$validate()});c.$validators.pattern=function(a,b){return c.$isEmpty(b)||
y(e)||e.test(b)}}}}},Kc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=-1;d.$observe("maxlength",function(a){a=Z(a);e=isNaN(a)?-1:a;c.$validate()});c.$validators.maxlength=function(a,b){return 0>e||c.$isEmpty(b)||b.length<=e}}}}},Jc=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,d,c){if(c){var e=0;d.$observe("minlength",function(a){e=Z(a)||0;c.$validate()});c.$validators.minlength=function(a,b){return c.$isEmpty(b)||b.length>=e}}}}};C.angular.bootstrap?
C.console&&console.log("WARNING: Tried to load angular more than once."):(je(),le(ca),ca.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),
SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",
PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-\u00a4",negSuf:"",posPre:"\u00a4",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,c){var e=a|0,f=c;void 0===f&&(f=Math.min(b(a),3));Math.pow(10,f);return 1==e&&0==f?"one":"other"}})}]),F(C.document).ready(function(){fe(C.document,Bc)}))})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>');
//# sourceMappingURL=angular.min.js.map

/*
 AngularJS v1.5.8
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(R,B){'use strict';function Da(a,b,c){if(!a)throw Ma("areq",b||"?",c||"required");return a}function Ea(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;Y(a)&&(a=a.join(" "));Y(b)&&(b=b.join(" "));return a+" "+b}function Na(a){var b={};a&&(a.to||a.from)&&(b.to=a.to,b.from=a.from);return b}function Z(a,b,c){var d="";a=Y(a)?a:a&&G(a)&&a.length?a.split(/\s+/):[];s(a,function(a,l){a&&0<a.length&&(d+=0<l?" ":"",d+=c?b+a:a+b)});return d}function Oa(a){if(a instanceof F)switch(a.length){case 0:return a;
case 1:if(1===a[0].nodeType)return a;break;default:return F(ta(a))}if(1===a.nodeType)return F(a)}function ta(a){if(!a[0])return a;for(var b=0;b<a.length;b++){var c=a[b];if(1==c.nodeType)return c}}function Pa(a,b,c){s(b,function(b){a.addClass(b,c)})}function Qa(a,b,c){s(b,function(b){a.removeClass(b,c)})}function V(a){return function(b,c){c.addClass&&(Pa(a,b,c.addClass),c.addClass=null);c.removeClass&&(Qa(a,b,c.removeClass),c.removeClass=null)}}function oa(a){a=a||{};if(!a.$$prepared){var b=a.domOperation||
P;a.domOperation=function(){a.$$domOperationFired=!0;b();b=P};a.$$prepared=!0}return a}function ha(a,b){Fa(a,b);Ga(a,b)}function Fa(a,b){b.from&&(a.css(b.from),b.from=null)}function Ga(a,b){b.to&&(a.css(b.to),b.to=null)}function W(a,b,c){var d=b.options||{};c=c.options||{};var e=(d.addClass||"")+" "+(c.addClass||""),l=(d.removeClass||"")+" "+(c.removeClass||"");a=Ra(a.attr("class"),e,l);c.preparationClasses&&(d.preparationClasses=$(c.preparationClasses,d.preparationClasses),delete c.preparationClasses);
e=d.domOperation!==P?d.domOperation:null;ua(d,c);e&&(d.domOperation=e);d.addClass=a.addClass?a.addClass:null;d.removeClass=a.removeClass?a.removeClass:null;b.addClass=d.addClass;b.removeClass=d.removeClass;return d}function Ra(a,b,c){function d(a){G(a)&&(a=a.split(" "));var b={};s(a,function(a){a.length&&(b[a]=!0)});return b}var e={};a=d(a);b=d(b);s(b,function(a,b){e[b]=1});c=d(c);s(c,function(a,b){e[b]=1===e[b]?null:-1});var l={addClass:"",removeClass:""};s(e,function(b,c){var d,e;1===b?(d="addClass",
e=!a[c]||a[c+"-remove"]):-1===b&&(d="removeClass",e=a[c]||a[c+"-add"]);e&&(l[d].length&&(l[d]+=" "),l[d]+=c)});return l}function y(a){return a instanceof F?a[0]:a}function Sa(a,b,c){var d="";b&&(d=Z(b,"ng-",!0));c.addClass&&(d=$(d,Z(c.addClass,"-add")));c.removeClass&&(d=$(d,Z(c.removeClass,"-remove")));d.length&&(c.preparationClasses=d,a.addClass(d))}function pa(a,b){var c=b?"-"+b+"s":"";la(a,[ma,c]);return[ma,c]}function va(a,b){var c=b?"paused":"",d=aa+"PlayState";la(a,[d,c]);return[d,c]}function la(a,
b){a.style[b[0]]=b[1]}function $(a,b){return a?b?a+" "+b:a:b}function Ha(a,b,c){var d=Object.create(null),e=a.getComputedStyle(b)||{};s(c,function(a,b){var c=e[a];if(c){var g=c.charAt(0);if("-"===g||"+"===g||0<=g)c=Ta(c);0===c&&(c=null);d[b]=c}});return d}function Ta(a){var b=0;a=a.split(/\s*,\s*/);s(a,function(a){"s"==a.charAt(a.length-1)&&(a=a.substring(0,a.length-1));a=parseFloat(a)||0;b=b?Math.max(a,b):a});return b}function wa(a){return 0===a||null!=a}function Ia(a,b){var c=S,d=a+"s";b?c+="Duration":
d+=" linear all";return[c,d]}function Ja(){var a=Object.create(null);return{flush:function(){a=Object.create(null)},count:function(b){return(b=a[b])?b.total:0},get:function(b){return(b=a[b])&&b.value},put:function(b,c){a[b]?a[b].total++:a[b]={total:1,value:c}}}}function Ka(a,b,c){s(c,function(c){a[c]=xa(a[c])?a[c]:b.style.getPropertyValue(c)})}var S,ya,aa,za;void 0===R.ontransitionend&&void 0!==R.onwebkittransitionend?(S="WebkitTransition",ya="webkitTransitionEnd transitionend"):(S="transition",ya=
"transitionend");void 0===R.onanimationend&&void 0!==R.onwebkitanimationend?(aa="WebkitAnimation",za="webkitAnimationEnd animationend"):(aa="animation",za="animationend");var qa=aa+"Delay",Aa=aa+"Duration",ma=S+"Delay",La=S+"Duration",Ma=B.$$minErr("ng"),Ua={transitionDuration:La,transitionDelay:ma,transitionProperty:S+"Property",animationDuration:Aa,animationDelay:qa,animationIterationCount:aa+"IterationCount"},Va={transitionDuration:La,transitionDelay:ma,animationDuration:Aa,animationDelay:qa},
Ba,ua,s,Y,xa,ea,Ca,ba,G,J,F,P;B.module("ngAnimate",[],function(){P=B.noop;Ba=B.copy;ua=B.extend;F=B.element;s=B.forEach;Y=B.isArray;G=B.isString;ba=B.isObject;J=B.isUndefined;xa=B.isDefined;Ca=B.isFunction;ea=B.isElement}).directive("ngAnimateSwap",["$animate","$rootScope",function(a,b){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(b,d,e,l,n){var I,g;b.$watchCollection(e.ngAnimateSwap||e["for"],function(e){I&&a.leave(I);g&&(g.$destroy(),g=null);if(e||0===e)g=b.$new(),
n(g,function(b){I=b;a.enter(b,null,d)})})}}}]).directive("ngAnimateChildren",["$interpolate",function(a){return{link:function(b,c,d){function e(a){c.data("$$ngAnimateChildren","on"===a||"true"===a)}var l=d.ngAnimateChildren;G(l)&&0===l.length?c.data("$$ngAnimateChildren",!0):(e(a(l)(b)),d.$observe("ngAnimateChildren",e))}}}]).factory("$$rAFScheduler",["$$rAF",function(a){function b(a){d=d.concat(a);c()}function c(){if(d.length){for(var b=d.shift(),n=0;n<b.length;n++)b[n]();e||a(function(){e||c()})}}
var d,e;d=b.queue=[];b.waitUntilQuiet=function(b){e&&e();e=a(function(){e=null;b();c()})};return b}]).provider("$$animateQueue",["$animateProvider",function(a){function b(a){if(!a)return null;a=a.split(" ");var b=Object.create(null);s(a,function(a){b[a]=!0});return b}function c(a,c){if(a&&c){var d=b(c);return a.split(" ").some(function(a){return d[a]})}}function d(a,b,c,d){return l[a].some(function(a){return a(b,c,d)})}function e(a,b){var c=0<(a.addClass||"").length,d=0<(a.removeClass||"").length;
return b?c&&d:c||d}var l=this.rules={skip:[],cancel:[],join:[]};l.join.push(function(a,b,c){return!b.structural&&e(b)});l.skip.push(function(a,b,c){return!b.structural&&!e(b)});l.skip.push(function(a,b,c){return"leave"==c.event&&b.structural});l.skip.push(function(a,b,c){return c.structural&&2===c.state&&!b.structural});l.cancel.push(function(a,b,c){return c.structural&&b.structural});l.cancel.push(function(a,b,c){return 2===c.state&&b.structural});l.cancel.push(function(a,b,d){if(d.structural)return!1;
a=b.addClass;b=b.removeClass;var e=d.addClass;d=d.removeClass;return J(a)&&J(b)||J(e)&&J(d)?!1:c(a,d)||c(b,e)});this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(b,c,g,l,C,Wa,Q,t,H,T){function O(){var a=!1;return function(b){a?b():c.$$postDigest(function(){a=!0;b()})}}function x(a,b,c){var f=y(b),d=y(a),N=[];(a=h[c])&&s(a,function(a){w.call(a.node,f)?N.push(a.callback):"leave"===c&&w.call(a.node,
d)&&N.push(a.callback)});return N}function r(a,b,c){var f=ta(b);return a.filter(function(a){return!(a.node===f&&(!c||a.callback===c))})}function p(a,h,v){function r(c,f,d,h){sa(function(){var c=x(T,a,f);c.length?b(function(){s(c,function(b){b(a,d,h)});"close"!==d||a[0].parentNode||ra.off(a)}):"close"!==d||a[0].parentNode||ra.off(a)});c.progress(f,d,h)}function k(b){var c=a,f=m;f.preparationClasses&&(c.removeClass(f.preparationClasses),f.preparationClasses=null);f.activeClasses&&(c.removeClass(f.activeClasses),
f.activeClasses=null);E(a,m);ha(a,m);m.domOperation();A.complete(!b)}var m=Ba(v),p,T;if(a=Oa(a))p=y(a),T=a.parent();var m=oa(m),A=new Q,sa=O();Y(m.addClass)&&(m.addClass=m.addClass.join(" "));m.addClass&&!G(m.addClass)&&(m.addClass=null);Y(m.removeClass)&&(m.removeClass=m.removeClass.join(" "));m.removeClass&&!G(m.removeClass)&&(m.removeClass=null);m.from&&!ba(m.from)&&(m.from=null);m.to&&!ba(m.to)&&(m.to=null);if(!p)return k(),A;v=[p.className,m.addClass,m.removeClass].join(" ");if(!Xa(v))return k(),
A;var g=0<=["enter","move","leave"].indexOf(h),w=l[0].hidden,t=!f||w||N.get(p);v=!t&&z.get(p)||{};var H=!!v.state;t||H&&1==v.state||(t=!M(a,T,h));if(t)return w&&r(A,h,"start"),k(),w&&r(A,h,"close"),A;g&&K(a);w={structural:g,element:a,event:h,addClass:m.addClass,removeClass:m.removeClass,close:k,options:m,runner:A};if(H){if(d("skip",a,w,v)){if(2===v.state)return k(),A;W(a,v,w);return v.runner}if(d("cancel",a,w,v))if(2===v.state)v.runner.end();else if(v.structural)v.close();else return W(a,v,w),v.runner;
else if(d("join",a,w,v))if(2===v.state)W(a,w,{});else return Sa(a,g?h:null,m),h=w.event=v.event,m=W(a,v,w),v.runner}else W(a,w,{});(H=w.structural)||(H="animate"===w.event&&0<Object.keys(w.options.to||{}).length||e(w));if(!H)return k(),ka(a),A;var C=(v.counter||0)+1;w.counter=C;L(a,1,w);c.$$postDigest(function(){var b=z.get(p),c=!b,b=b||{},f=0<(a.parent()||[]).length&&("animate"===b.event||b.structural||e(b));if(c||b.counter!==C||!f){c&&(E(a,m),ha(a,m));if(c||g&&b.event!==h)m.domOperation(),A.end();
f||ka(a)}else h=!b.structural&&e(b,!0)?"setClass":b.event,L(a,2),b=Wa(a,h,b.options),A.setHost(b),r(A,h,"start",{}),b.done(function(b){k(!b);(b=z.get(p))&&b.counter===C&&ka(y(a));r(A,h,"close",{})})});return A}function K(a){a=y(a).querySelectorAll("[data-ng-animate]");s(a,function(a){var b=parseInt(a.getAttribute("data-ng-animate")),c=z.get(a);if(c)switch(b){case 2:c.runner.end();case 1:z.remove(a)}})}function ka(a){a=y(a);a.removeAttribute("data-ng-animate");z.remove(a)}function k(a,b){return y(a)===
y(b)}function M(a,b,c){c=F(l[0].body);var f=k(a,c)||"HTML"===a[0].nodeName,d=k(a,g),h=!1,r,e=N.get(y(a));(a=F.data(a[0],"$ngAnimatePin"))&&(b=a);for(b=y(b);b;){d||(d=k(b,g));if(1!==b.nodeType)break;a=z.get(b)||{};if(!h){var p=N.get(b);if(!0===p&&!1!==e){e=!0;break}else!1===p&&(e=!1);h=a.structural}if(J(r)||!0===r)a=F.data(b,"$$ngAnimateChildren"),xa(a)&&(r=a);if(h&&!1===r)break;f||(f=k(b,c));if(f&&d)break;if(!d&&(a=F.data(b,"$ngAnimatePin"))){b=y(a);continue}b=b.parentNode}return(!h||r)&&!0!==e&&
d&&f}function L(a,b,c){c=c||{};c.state=b;a=y(a);a.setAttribute("data-ng-animate",b);c=(b=z.get(a))?ua(b,c):c;z.put(a,c)}var z=new C,N=new C,f=null,A=c.$watch(function(){return 0===t.totalPendingRequests},function(a){a&&(A(),c.$$postDigest(function(){c.$$postDigest(function(){null===f&&(f=!0)})}))}),h=Object.create(null),sa=a.classNameFilter(),Xa=sa?function(a){return sa.test(a)}:function(){return!0},E=V(H),w=R.Node.prototype.contains||function(a){return this===a||!!(this.compareDocumentPosition(a)&
16)},ra={on:function(a,b,c){var f=ta(b);h[a]=h[a]||[];h[a].push({node:f,callback:c});F(b).on("$destroy",function(){z.get(f)||ra.off(a,b,c)})},off:function(a,b,c){if(1!==arguments.length||G(arguments[0])){var f=h[a];f&&(h[a]=1===arguments.length?null:r(f,b,c))}else for(f in b=arguments[0],h)h[f]=r(h[f],b)},pin:function(a,b){Da(ea(a),"element","not an element");Da(ea(b),"parentElement","not an element");a.data("$ngAnimatePin",b)},push:function(a,b,c,f){c=c||{};c.domOperation=f;return p(a,b,c)},enabled:function(a,
b){var c=arguments.length;if(0===c)b=!!f;else if(ea(a)){var d=y(a);1===c?b=!N.get(d):N.put(d,!b)}else b=f=!!a;return b}};return ra}]}]).provider("$$animation",["$animateProvider",function(a){var b=this.drivers=[];this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(a,d,e,l,n,I){function g(a){function b(a){if(a.processed)return a;a.processed=!0;var d=a.domNode,p=d.parentNode;e.put(d,a);for(var K;p;){if(K=e.get(p)){K.processed||(K=b(K));break}p=p.parentNode}(K||
c).children.push(a);return a}var c={children:[]},d,e=new n;for(d=0;d<a.length;d++){var g=a[d];e.put(g.domNode,a[d]={domNode:g.domNode,fn:g.fn,children:[]})}for(d=0;d<a.length;d++)b(a[d]);return function(a){var b=[],c=[],d;for(d=0;d<a.children.length;d++)c.push(a.children[d]);a=c.length;var e=0,k=[];for(d=0;d<c.length;d++){var g=c[d];0>=a&&(a=e,e=0,b.push(k),k=[]);k.push(g.fn);g.children.forEach(function(a){e++;c.push(a)});a--}k.length&&b.push(k);return b}(c)}var u=[],C=V(a);return function(n,Q,t){function H(a){a=
a.hasAttribute("ng-animate-ref")?[a]:a.querySelectorAll("[ng-animate-ref]");var b=[];s(a,function(a){var c=a.getAttribute("ng-animate-ref");c&&c.length&&b.push(a)});return b}function T(a){var b=[],c={};s(a,function(a,d){var h=y(a.element),e=0<=["enter","move"].indexOf(a.event),h=a.structural?H(h):[];if(h.length){var k=e?"to":"from";s(h,function(a){var b=a.getAttribute("ng-animate-ref");c[b]=c[b]||{};c[b][k]={animationID:d,element:F(a)}})}else b.push(a)});var d={},e={};s(c,function(c,k){var r=c.from,
p=c.to;if(r&&p){var z=a[r.animationID],g=a[p.animationID],A=r.animationID.toString();if(!e[A]){var n=e[A]={structural:!0,beforeStart:function(){z.beforeStart();g.beforeStart()},close:function(){z.close();g.close()},classes:O(z.classes,g.classes),from:z,to:g,anchors:[]};n.classes.length?b.push(n):(b.push(z),b.push(g))}e[A].anchors.push({out:r.element,"in":p.element})}else r=r?r.animationID:p.animationID,p=r.toString(),d[p]||(d[p]=!0,b.push(a[r]))});return b}function O(a,b){a=a.split(" ");b=b.split(" ");
for(var c=[],d=0;d<a.length;d++){var e=a[d];if("ng-"!==e.substring(0,3))for(var r=0;r<b.length;r++)if(e===b[r]){c.push(e);break}}return c.join(" ")}function x(a){for(var c=b.length-1;0<=c;c--){var d=e.get(b[c])(a);if(d)return d}}function r(a,b){function c(a){(a=a.data("$$animationRunner"))&&a.setHost(b)}a.from&&a.to?(c(a.from.element),c(a.to.element)):c(a.element)}function p(){var a=n.data("$$animationRunner");!a||"leave"===Q&&t.$$domOperationFired||a.end()}function K(b){n.off("$destroy",p);n.removeData("$$animationRunner");
C(n,t);ha(n,t);t.domOperation();L&&a.removeClass(n,L);n.removeClass("ng-animate");k.complete(!b)}t=oa(t);var ka=0<=["enter","move","leave"].indexOf(Q),k=new l({end:function(){K()},cancel:function(){K(!0)}});if(!b.length)return K(),k;n.data("$$animationRunner",k);var M=Ea(n.attr("class"),Ea(t.addClass,t.removeClass)),L=t.tempClasses;L&&(M+=" "+L,t.tempClasses=null);var z;ka&&(z="ng-"+Q+"-prepare",a.addClass(n,z));u.push({element:n,classes:M,event:Q,structural:ka,options:t,beforeStart:function(){n.addClass("ng-animate");
L&&a.addClass(n,L);z&&(a.removeClass(n,z),z=null)},close:K});n.on("$destroy",p);if(1<u.length)return k;d.$$postDigest(function(){var a=[];s(u,function(b){b.element.data("$$animationRunner")?a.push(b):b.close()});u.length=0;var b=T(a),c=[];s(b,function(a){c.push({domNode:y(a.from?a.from.element:a.element),fn:function(){a.beforeStart();var b,c=a.close;if((a.anchors?a.from.element||a.to.element:a.element).data("$$animationRunner")){var d=x(a);d&&(b=d.start)}b?(b=b(),b.done(function(a){c(!a)}),r(a,b)):
c()}})});I(g(c))});return k}}]}]).provider("$animateCss",["$animateProvider",function(a){var b=Ja(),c=Ja();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(a,e,l,n,I,g,u,C){function B(a,b){var c=a.parentNode;return(c.$$ngAnimateParentKey||(c.$$ngAnimateParentKey=++O))+"-"+a.getAttribute("class")+"-"+b}function Q(r,p,g,n){var k;0<b.count(g)&&(k=c.get(g),k||(p=Z(p,"-stagger"),e.addClass(r,p),k=Ha(a,r,n),k.animationDuration=
Math.max(k.animationDuration,0),k.transitionDuration=Math.max(k.transitionDuration,0),e.removeClass(r,p),c.put(g,k)));return k||{}}function t(a){x.push(a);u.waitUntilQuiet(function(){b.flush();c.flush();for(var a=I(),d=0;d<x.length;d++)x[d](a);x.length=0})}function H(c,e,g){e=b.get(g);e||(e=Ha(a,c,Ua),"infinite"===e.animationIterationCount&&(e.animationIterationCount=1));b.put(g,e);c=e;g=c.animationDelay;e=c.transitionDelay;c.maxDelay=g&&e?Math.max(g,e):g||e;c.maxDuration=Math.max(c.animationDuration*
c.animationIterationCount,c.transitionDuration);return c}var T=V(e),O=0,x=[];return function(a,c){function d(){k()}function u(){k(!0)}function k(b){if(!(w||F&&O)){w=!0;O=!1;f.$$skipPreparationClasses||e.removeClass(a,ga);e.removeClass(a,ea);va(h,!1);pa(h,!1);s(x,function(a){h.style[a[0]]=""});T(a,f);ha(a,f);Object.keys(A).length&&s(A,function(a,b){a?h.style.setProperty(b,a):h.style.removeProperty(b)});if(f.onDone)f.onDone();fa&&fa.length&&a.off(fa.join(" "),z);var c=a.data("$$animateCss");c&&(n.cancel(c[0].timer),
a.removeData("$$animateCss"));G&&G.complete(!b)}}function M(a){q.blockTransition&&pa(h,a);q.blockKeyframeAnimation&&va(h,!!a)}function L(){G=new l({end:d,cancel:u});t(P);k();return{$$willAnimate:!1,start:function(){return G},end:d}}function z(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||Date.now();b=parseFloat(b.elapsedTime.toFixed(3));Math.max(a-W,0)>=R&&b>=m&&(F=!0,k())}function N(){function b(){if(!w){M(!1);s(x,function(a){h.style[a[0]]=a[1]});T(a,f);e.addClass(a,ea);if(q.recalculateTimingStyles){na=
h.className+" "+ga;ia=B(h,na);D=H(h,na,ia);ca=D.maxDelay;J=Math.max(ca,0);m=D.maxDuration;if(0===m){k();return}q.hasTransitions=0<D.transitionDuration;q.hasAnimations=0<D.animationDuration}q.applyAnimationDelay&&(ca="boolean"!==typeof f.delay&&wa(f.delay)?parseFloat(f.delay):ca,J=Math.max(ca,0),D.animationDelay=ca,da=[qa,ca+"s"],x.push(da),h.style[da[0]]=da[1]);R=1E3*J;V=1E3*m;if(f.easing){var d,g=f.easing;q.hasTransitions&&(d=S+"TimingFunction",x.push([d,g]),h.style[d]=g);q.hasAnimations&&(d=aa+
"TimingFunction",x.push([d,g]),h.style[d]=g)}D.transitionDuration&&fa.push(ya);D.animationDuration&&fa.push(za);W=Date.now();var p=R+1.5*V;d=W+p;var g=a.data("$$animateCss")||[],N=!0;if(g.length){var l=g[0];(N=d>l.expectedEndTime)?n.cancel(l.timer):g.push(k)}N&&(p=n(c,p,!1),g[0]={timer:p,expectedEndTime:d},g.push(k),a.data("$$animateCss",g));if(fa.length)a.on(fa.join(" "),z);f.to&&(f.cleanupStyles&&Ka(A,h,Object.keys(f.to)),Ga(a,f))}}function c(){var b=a.data("$$animateCss");if(b){for(var d=1;d<b.length;d++)b[d]();
a.removeData("$$animateCss")}}if(!w)if(h.parentNode){var d=function(a){if(F)O&&a&&(O=!1,k());else if(O=!a,D.animationDuration)if(a=va(h,O),O)x.push(a);else{var b=x,c=b.indexOf(a);0<=a&&b.splice(c,1)}},g=0<ba&&(D.transitionDuration&&0===X.transitionDuration||D.animationDuration&&0===X.animationDuration)&&Math.max(X.animationDelay,X.transitionDelay);g?n(b,Math.floor(g*ba*1E3),!1):b();v.resume=function(){d(!0)};v.pause=function(){d(!1)}}else k()}var f=c||{};f.$$prepared||(f=oa(Ba(f)));var A={},h=y(a);
if(!h||!h.parentNode||!C.enabled())return L();var x=[],I=a.attr("class"),E=Na(f),w,O,F,G,v,J,R,m,V,W,fa=[];if(0===f.duration||!g.animations&&!g.transitions)return L();var ja=f.event&&Y(f.event)?f.event.join(" "):f.event,$="",U="";ja&&f.structural?$=Z(ja,"ng-",!0):ja&&($=ja);f.addClass&&(U+=Z(f.addClass,"-add"));f.removeClass&&(U.length&&(U+=" "),U+=Z(f.removeClass,"-remove"));f.applyClassesEarly&&U.length&&T(a,f);var ga=[$,U].join(" ").trim(),na=I+" "+ga,ea=Z(ga,"-active"),I=E.to&&0<Object.keys(E.to).length;
if(!(0<(f.keyframeStyle||"").length||I||ga))return L();var ia,X;0<f.stagger?(E=parseFloat(f.stagger),X={transitionDelay:E,animationDelay:E,transitionDuration:0,animationDuration:0}):(ia=B(h,na),X=Q(h,ga,ia,Va));f.$$skipPreparationClasses||e.addClass(a,ga);f.transitionStyle&&(E=[S,f.transitionStyle],la(h,E),x.push(E));0<=f.duration&&(E=0<h.style[S].length,E=Ia(f.duration,E),la(h,E),x.push(E));f.keyframeStyle&&(E=[aa,f.keyframeStyle],la(h,E),x.push(E));var ba=X?0<=f.staggerIndex?f.staggerIndex:b.count(ia):
0;(ja=0===ba)&&!f.skipBlocking&&pa(h,9999);var D=H(h,na,ia),ca=D.maxDelay;J=Math.max(ca,0);m=D.maxDuration;var q={};q.hasTransitions=0<D.transitionDuration;q.hasAnimations=0<D.animationDuration;q.hasTransitionAll=q.hasTransitions&&"all"==D.transitionProperty;q.applyTransitionDuration=I&&(q.hasTransitions&&!q.hasTransitionAll||q.hasAnimations&&!q.hasTransitions);q.applyAnimationDuration=f.duration&&q.hasAnimations;q.applyTransitionDelay=wa(f.delay)&&(q.applyTransitionDuration||q.hasTransitions);q.applyAnimationDelay=
wa(f.delay)&&q.hasAnimations;q.recalculateTimingStyles=0<U.length;if(q.applyTransitionDuration||q.applyAnimationDuration)m=f.duration?parseFloat(f.duration):m,q.applyTransitionDuration&&(q.hasTransitions=!0,D.transitionDuration=m,E=0<h.style[S+"Property"].length,x.push(Ia(m,E))),q.applyAnimationDuration&&(q.hasAnimations=!0,D.animationDuration=m,x.push([Aa,m+"s"]));if(0===m&&!q.recalculateTimingStyles)return L();if(null!=f.delay){var da;"boolean"!==typeof f.delay&&(da=parseFloat(f.delay),J=Math.max(da,
0));q.applyTransitionDelay&&x.push([ma,da+"s"]);q.applyAnimationDelay&&x.push([qa,da+"s"])}null==f.duration&&0<D.transitionDuration&&(q.recalculateTimingStyles=q.recalculateTimingStyles||ja);R=1E3*J;V=1E3*m;f.skipBlocking||(q.blockTransition=0<D.transitionDuration,q.blockKeyframeAnimation=0<D.animationDuration&&0<X.animationDelay&&0===X.animationDuration);f.from&&(f.cleanupStyles&&Ka(A,h,Object.keys(f.from)),Fa(a,f));q.blockTransition||q.blockKeyframeAnimation?M(m):f.skipBlocking||pa(h,!1);return{$$willAnimate:!0,
end:d,start:function(){if(!w)return v={end:d,cancel:u,resume:null,pause:null},G=new l(v),t(N),G}}}}]}]).provider("$$animateCssDriver",["$$animationProvider",function(a){a.drivers.push("$$animateCssDriver");this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(a,c,d,e,l,n,I){function g(a){return a.replace(/\bng-\S+\b/g,"")}function u(a,b){G(a)&&(a=a.split(" "));G(b)&&(b=b.split(" "));return a.filter(function(a){return-1===b.indexOf(a)}).join(" ")}
function C(c,e,n){function l(a){var b={},c=y(a).getBoundingClientRect();s(["width","height","top","left"],function(a){var d=c[a];switch(a){case "top":d+=t.scrollTop;break;case "left":d+=t.scrollLeft}b[a]=Math.floor(d)+"px"});return b}function p(){var c=g(n.attr("class")||""),d=u(c,k),c=u(k,c),d=a(C,{to:l(n),addClass:"ng-anchor-in "+d,removeClass:"ng-anchor-out "+c,delay:!0});return d.$$willAnimate?d:null}function I(){C.remove();e.removeClass("ng-animate-shim");n.removeClass("ng-animate-shim")}var C=
F(y(e).cloneNode(!0)),k=g(C.attr("class")||"");e.addClass("ng-animate-shim");n.addClass("ng-animate-shim");C.addClass("ng-anchor");H.append(C);var M;c=function(){var c=a(C,{addClass:"ng-anchor-out",delay:!0,from:l(e)});return c.$$willAnimate?c:null}();if(!c&&(M=p(),!M))return I();var L=c||M;return{start:function(){function a(){c&&c.end()}var b,c=L.start();c.done(function(){c=null;if(!M&&(M=p()))return c=M.start(),c.done(function(){c=null;I();b.complete()}),c;I();b.complete()});return b=new d({end:a,
cancel:a})}}}function B(a,b,c,e){var g=Q(a,P),n=Q(b,P),l=[];s(e,function(a){(a=C(c,a.out,a["in"]))&&l.push(a)});if(g||n||0!==l.length)return{start:function(){function a(){s(b,function(a){a.end()})}var b=[];g&&b.push(g.start());n&&b.push(n.start());s(l,function(a){b.push(a.start())});var c=new d({end:a,cancel:a});d.all(b,function(a){c.complete(a)});return c}}}function Q(c){var d=c.element,e=c.options||{};c.structural&&(e.event=c.event,e.structural=!0,e.applyClassesEarly=!0,"leave"===c.event&&(e.onDone=
e.domOperation));e.preparationClasses&&(e.event=$(e.event,e.preparationClasses));c=a(d,e);return c.$$willAnimate?c:null}if(!l.animations&&!l.transitions)return P;var t=I[0].body;c=y(e);var H=F(c.parentNode&&11===c.parentNode.nodeType||t.contains(c)?c:t);V(n);return function(a){return a.from&&a.to?B(a.from,a.to,a.classes,a.anchors):Q(a)}}]}]).provider("$$animateJs",["$animateProvider",function(a){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(b,c,d){function e(c){c=Y(c)?c:c.split(" ");
for(var d=[],e={},l=0;l<c.length;l++){var s=c[l],B=a.$$registeredAnimations[s];B&&!e[s]&&(d.push(b.get(B)),e[s]=!0)}return d}var l=V(d);return function(a,b,d,u){function C(){u.domOperation();l(a,u)}function B(a,b,d,e,f){switch(d){case "animate":b=[b,e.from,e.to,f];break;case "setClass":b=[b,F,G,f];break;case "addClass":b=[b,F,f];break;case "removeClass":b=[b,G,f];break;default:b=[b,f]}b.push(e);if(a=a.apply(a,b))if(Ca(a.start)&&(a=a.start()),a instanceof c)a.done(f);else if(Ca(a))return a;return P}
function y(a,b,d,e,f){var g=[];s(e,function(e){var k=e[f];k&&g.push(function(){var e,f,g=!1,h=function(a){g||(g=!0,(f||P)(a),e.complete(!a))};e=new c({end:function(){h()},cancel:function(){h(!0)}});f=B(k,a,b,d,function(a){h(!1===a)});return e})});return g}function t(a,b,d,e,f){var g=y(a,b,d,e,f);if(0===g.length){var h,k;"beforeSetClass"===f?(h=y(a,"removeClass",d,e,"beforeRemoveClass"),k=y(a,"addClass",d,e,"beforeAddClass")):"setClass"===f&&(h=y(a,"removeClass",d,e,"removeClass"),k=y(a,"addClass",
d,e,"addClass"));h&&(g=g.concat(h));k&&(g=g.concat(k))}if(0!==g.length)return function(a){var b=[];g.length&&s(g,function(a){b.push(a())});b.length?c.all(b,a):a();return function(a){s(b,function(b){a?b.cancel():b.end()})}}}var H=!1;3===arguments.length&&ba(d)&&(u=d,d=null);u=oa(u);d||(d=a.attr("class")||"",u.addClass&&(d+=" "+u.addClass),u.removeClass&&(d+=" "+u.removeClass));var F=u.addClass,G=u.removeClass,x=e(d),r,p;if(x.length){var K,J;"leave"==b?(J="leave",K="afterLeave"):(J="before"+b.charAt(0).toUpperCase()+
b.substr(1),K=b);"enter"!==b&&"move"!==b&&(r=t(a,b,u,x,J));p=t(a,b,u,x,K)}if(r||p){var k;return{$$willAnimate:!0,end:function(){k?k.end():(H=!0,C(),ha(a,u),k=new c,k.complete(!0));return k},start:function(){function b(c){H=!0;C();ha(a,u);k.complete(c)}if(k)return k;k=new c;var d,e=[];r&&e.push(function(a){d=r(a)});e.length?e.push(function(a){C();a(!0)}):C();p&&e.push(function(a){d=p(a)});k.setHost({end:function(){H||((d||P)(void 0),b(void 0))},cancel:function(){H||((d||P)(!0),b(!0))}});c.chain(e,
b);return k}}}}}]}]).provider("$$animateJsDriver",["$$animationProvider",function(a){a.drivers.push("$$animateJsDriver");this.$get=["$$animateJs","$$AnimateRunner",function(a,c){function d(c){return a(c.element,c.event,c.classes,c.options)}return function(a){if(a.from&&a.to){var b=d(a.from),n=d(a.to);if(b||n)return{start:function(){function a(){return function(){s(d,function(a){a.end()})}}var d=[];b&&d.push(b.start());n&&d.push(n.start());c.all(d,function(a){e.complete(a)});var e=new c({end:a(),cancel:a()});
return e}}}else return d(a)}}]}])})(window,window.angular);
//# sourceMappingURL=angular-animate.min.js.map

/**
 * floatThead wrapper for AngularJS
 * @version v0.1.0 - 2015-10-25
 * @link https://github.com/brandon-barker/angular-floatThead
 * @author Brandon Barker
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
(function () {
  'use strict';

  angular
    .module('floatThead', [])
    .directive('floatThead', ['$timeout', '$log', floatThead]);

  function floatThead($timeout, $log) {
    // Usage:
    // Specify float-thead on any table element and optionally pass through a floatThead options object to initialize the library.
    // Optionally specify ng-model to have the directive watch any objects for changes and call 'reflow' on floatThead.
    // You can also manually trigger a reflow by triggering an event on the table element called 'update', eg: jQuery('.table').trigger('update');
    var directive = {
      require: '?ngModel',
      scope: {
        floatThead: '=?',
        floatTheadEnabled: '=?'
      },
      controller: ['$scope', '$element', '$attrs', function ($scope, $element, $attrs) {
        // default float-thead-enabled to true if not present
        if (!$attrs.hasOwnProperty('floatTheadEnabled')) {
          $scope.floatTheadEnabled = $attrs.floatTheadEnabled = true;
        }
        
        // default to empty object
        if (!$attrs.hasOwnProperty('floatThead') || $attrs.floatThead === '') {
          $scope.floatThead = $attrs.floatThead = {};
        }
      }],
      link: link,
      restrict: 'A'
    };
    return directive;

    function link($scope, $element, $attrs, ngModel) {
      $scope.$watch('floatTheadEnabled', function (newVal) {
        if (newVal === true) {
          if (angular.isObject($scope.floatThead)) {
            jQuery($element).floatThead($scope.floatThead);
          }
        } else {
          jQuery($element).floatThead('destroy');
        }
      });
      
      $scope.$watch('floatThead', function (newVal, oldVal) {
        if (newVal === oldVal || !$scope.floatTheadEnabled) {
          return;
        }
        
        // first destroy it so we can recreate with new options
        jQuery($element).floatThead('destroy');
        if (angular.isObject(newVal)) {
          jQuery($element).floatThead(newVal);
        }
      }, true);

      if (ngModel) {
        // hook the model $formatters to get notified when anything changes so we can reflow
        ngModel.$formatters.push(function () {
          // only reflow if enabled
          if ($scope.floatTheadEnabled && angular.isObject($scope.floatThead)) {
            // give time for rerender before reflow
            $timeout(function() {
              jQuery($element).floatThead('reflow');
            });
          }
        });
      } else {
        $log.info('floatThead: ngModel not provided!');
      }

      $element.bind('update', function () {
        $timeout(function () {
          jQuery($element).floatThead('reflow');
        }, 0);
      });

      $element.bind('$destroy', function () {
        jQuery($element).floatThead('destroy');
      });
    }
  }
})();

angular.module("gettext",[]),angular.module("gettext").constant("gettext",function(a){return a}),angular.module("gettext").factory("gettextCatalog",["gettextPlurals","gettextFallbackLanguage","$http","$cacheFactory","$interpolate","$rootScope",function(a,b,c,d,e,f){function g(){f.$broadcast("gettextLanguageChanged")}var h,i="$$noContext",j='<span id="test" title="test" class="tested">test</span>',k=angular.element("<span>"+j+"</span>").html()!==j,l=function(a){return h.debug&&h.currentLanguage!==h.baseLanguage?h.debugPrefix+a:a},m=function(a){return h.showTranslatedMarkers?h.translatedMarkerPrefix+a+h.translatedMarkerSuffix:a};return h={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:d("strings"),setCurrentLanguage:function(a){this.currentLanguage=a,g()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(b,c){this.strings[b]||(this.strings[b]={});var d=a(b,1);for(var e in c){var f=c[e];if(k&&(e=angular.element("<span>"+e+"</span>").html()),angular.isString(f)||angular.isArray(f)){var h={};h[i]=f,f=h}for(var j in f){var l=f[j];angular.isArray(l)||(f[j]=[],f[j][d]=l)}this.strings[b][e]=f}g()},getStringFormFor:function(b,c,d,e){if(!b)return null;var f=this.strings[b]||{},g=f[c]||{},h=g[e||i]||[];return h[a(b,d)]},getString:function(a,c,d){var f=b(this.currentLanguage);return a=this.getStringFormFor(this.currentLanguage,a,1,d)||this.getStringFormFor(f,a,1,d)||l(a),a=c?e(a)(c):a,m(a)},getPlural:function(a,c,d,f,g){var h=b(this.currentLanguage);return c=this.getStringFormFor(this.currentLanguage,c,a,g)||this.getStringFormFor(h,c,a,g)||l(1===a?c:d),f&&(f.$count=a,c=e(c)(f)),m(c)},loadRemote:function(a){return c({method:"GET",url:a,cache:h.cache}).then(function(a){var b=a.data;for(var c in b)h.setStrings(c,b[c]);return a})}}}]),angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window","gettextUtil",function(a,b,c,d,e,f){function g(a){return f.lcFirst(a.replace(j,""))}function h(a,b,c){var d=Object.keys(b).filter(function(a){return f.startsWith(a,j)&&a!==j});if(!d.length)return null;var e=angular.extend({},a),h=[];return d.forEach(function(d){var f=a.$watch(b[d],function(a){var b=g(d);e[b]=a,c(e)});h.push(f)}),a.$on("$destroy",function(){h.forEach(function(a){a()})}),e}var i=parseInt((/msie (\d+)/.exec(angular.lowercase(e.navigator.userAgent))||[])[1],10),j="translateParams";return{restrict:"AE",terminal:!0,compile:function(e,g){f.assert(!g.translatePlural||g.translateN,"translate-n","translate-plural"),f.assert(!g.translateN||g.translatePlural,"translate-plural","translate-n");var j=f.trim(e.html()),k=g.translatePlural,l=g.translateContext;return 8>=i&&"<!--IE fix-->"===j.slice(-13)&&(j=j.slice(0,-13)),{post:function(e,g,i){function m(b){b=b||null;var h;k?(e=o||(o=e.$new()),e.$count=n(e),h=a.getPlural(e.$count,j,k,b,l)):h=a.getString(j,b,l);var i=g.contents();if(0!==i.length){if(h===f.trim(i.html()))return void(p&&d(i)(e));var m=angular.element("<span>"+h+"</span>");d(m.contents())(e);var q=m.contents();c.enter(q,g),c.leave(i)}}var n=b(i.translateN),o=null,p=!0,q=h(e,i,m);m(q),p=!1,i.translateN&&e.$watch(i.translateN,function(){m(q)}),e.$on("gettextLanguageChanged",function(){m(q)})}}}}}]),angular.module("gettext").factory("gettextFallbackLanguage",function(){var a={},b=/([^_]+)_[^_]+$/;return function(c){if(a[c])return a[c];var d=b.exec(c);return d?(a[c]=d[1],d[1]):null}}),angular.module("gettext").filter("translate",["gettextCatalog",function(a){function b(b,c){return a.getString(b,null,c)}return b.$stateful=!0,b}]),angular.module("gettext").factory("gettextPlurals",function(){function a(a){return b[a]||(b[a]=a.split(/\-|_/).shift()),b[a]}var b={pt_BR:"pt_BR","pt-BR":"pt_BR"};return function(b,c){switch(a(b)){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return c%10!=1||c%100==11?1:0;case"jv":return 0!=c?1:0;case"mk":return 1==c||c%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return c>1?1:0;case"lv":return c%10==1&&c%100!=11?0:0!=c?1:2;case"lt":return c%10==1&&c%100!=11?0:c%10>=2&&(10>c%100||c%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return c%10==1&&c%100!=11?0:c%10>=2&&4>=c%10&&(10>c%100||c%100>=20)?1:2;case"mnk":return 0==c?0:1==c?1:2;case"ro":return 1==c?0:0==c||c%100>0&&20>c%100?1:2;case"pl":return 1==c?0:c%10>=2&&4>=c%10&&(10>c%100||c%100>=20)?1:2;case"cs":case"sk":return 1==c?0:c>=2&&4>=c?1:2;case"sl":return c%100==1?1:c%100==2?2:c%100==3||c%100==4?3:0;case"mt":return 1==c?0:0==c||c%100>1&&11>c%100?1:c%100>10&&20>c%100?2:3;case"gd":return 1==c||11==c?0:2==c||12==c?1:c>2&&20>c?2:3;case"cy":return 1==c?0:2==c?1:8!=c&&11!=c?2:3;case"kw":return 1==c?0:2==c?1:3==c?2:3;case"ga":return 1==c?0:2==c?1:7>c?2:11>c?3:4;case"ar":return 0==c?0:1==c?1:2==c?2:c%100>=3&&10>=c%100?3:c%100>=11?4:5;default:return 1!=c?1:0}}}),angular.module("gettext").factory("gettextUtil",function(){function a(a,b,c){if(!a)throw new Error("You should add a "+b+" attribute whenever you add a "+c+" attribute.")}function b(a,b){return 0===a.indexOf(b)}function c(a){var b=a.charAt(0).toLowerCase();return b+a.substr(1)}var d=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s*/,"").replace(/\s*$/,""):a}}();return{trim:d,assert:a,startsWith:b,lcFirst:c}});

/*
 AngularJS v1.5.8
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(s,g){'use strict';function H(g){var l=[];t(l,A).chars(g);return l.join("")}var B=g.$$minErr("$sanitize"),C,l,D,E,q,A,F,t;g.module("ngSanitize",[]).provider("$sanitize",function(){function k(a,e){var b={},c=a.split(","),h;for(h=0;h<c.length;h++)b[e?q(c[h]):c[h]]=!0;return b}function I(a){for(var e={},b=0,c=a.length;b<c;b++){var h=a[b];e[h.name]=h.value}return e}function G(a){return a.replace(/&/g,"&amp;").replace(J,function(a){var b=a.charCodeAt(0);a=a.charCodeAt(1);return"&#"+(1024*(b-55296)+
(a-56320)+65536)+";"}).replace(K,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(a){if(a.nodeType===s.Node.ELEMENT_NODE)for(var e=a.attributes,b=0,c=e.length;b<c;b++){var h=e[b],d=h.name.toLowerCase();if("xmlns:ns1"===d||0===d.lastIndexOf("ns1:",0))a.removeAttributeNode(h),b--,c--}(e=a.firstChild)&&u(e);(e=a.nextSibling)&&u(e)}var v=!1;this.$get=["$$sanitizeUri",function(a){v&&l(w,x);return function(e){var b=[];F(e,t(b,function(b,h){return!/^unsafe:/.test(a(b,
h))}));return b.join("")}}];this.enableSvg=function(a){return E(a)?(v=a,this):v};C=g.bind;l=g.extend;D=g.forEach;E=g.isDefined;q=g.lowercase;A=g.noop;F=function(a,e){null===a||void 0===a?a="":"string"!==typeof a&&(a=""+a);f.innerHTML=a;var b=5;do{if(0===b)throw B("uinput");b--;s.document.documentMode&&u(f);a=f.innerHTML;f.innerHTML=a}while(a!==f.innerHTML);for(b=f.firstChild;b;){switch(b.nodeType){case 1:e.start(b.nodeName.toLowerCase(),I(b.attributes));break;case 3:e.chars(b.textContent)}var c;if(!(c=
b.firstChild)&&(1==b.nodeType&&e.end(b.nodeName.toLowerCase()),c=b.nextSibling,!c))for(;null==c;){b=b.parentNode;if(b===f)break;c=b.nextSibling;1==b.nodeType&&e.end(b.nodeName.toLowerCase())}b=c}for(;b=f.firstChild;)f.removeChild(b)};t=function(a,e){var b=!1,c=C(a,a.push);return{start:function(a,d){a=q(a);!b&&z[a]&&(b=a);b||!0!==w[a]||(c("<"),c(a),D(d,function(b,d){var f=q(d),g="img"===a&&"src"===f||"background"===f;!0!==m[f]||!0===n[f]&&!e(b,g)||(c(" "),c(d),c('="'),c(G(b)),c('"'))}),c(">"))},end:function(a){a=
q(a);b||!0!==w[a]||!0===y[a]||(c("</"),c(a),c(">"));a==b&&(b=!1)},chars:function(a){b||c(G(a))}}};var J=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,K=/([^\#-~ |!])/g,y=k("area,br,col,hr,img,wbr"),d=k("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),r=k("rp,rt"),p=l({},r,d),d=l({},d,k("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),r=l({},r,k("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),
x=k("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),z=k("script,style"),w=l({},y,d,r,p),n=k("background,cite,href,longdesc,src,xlink:href"),p=k("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),
r=k("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",
!0),m=l({},n,r,p),f;(function(a){if(a.document&&a.document.implementation)a=a.document.implementation.createHTMLDocument("inert");else throw B("noinert");var e=(a.documentElement||a.getDocumentElement()).getElementsByTagName("body");1===e.length?f=e[0]:(e=a.createElement("html"),f=a.createElement("body"),e.appendChild(f),a.appendChild(e))})(s)});g.module("ngSanitize").filter("linky",["$sanitize",function(k){var l=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,
q=/^mailto:/i,u=g.$$minErr("linky"),v=g.isDefined,s=g.isFunction,t=g.isObject,y=g.isString;return function(d,g,p){function x(a){a&&m.push(H(a))}function z(a,b){var c,d=w(a);m.push("<a ");for(c in d)m.push(c+'="'+d[c]+'" ');!v(g)||"target"in d||m.push('target="',g,'" ');m.push('href="',a.replace(/"/g,"&quot;"),'">');x(b);m.push("</a>")}if(null==d||""===d)return d;if(!y(d))throw u("notstring",d);for(var w=s(p)?p:t(p)?function(){return p}:function(){return{}},n=d,m=[],f,a;d=n.match(l);)f=d[0],d[2]||
d[4]||(f=(d[3]?"http://":"mailto:")+f),a=d.index,x(n.substr(0,a)),z(f,d[0].replace(q,"")),n=n.substring(a+d[0].length);x(n);return k(m.join(""))}}])})(window,window.angular);
//# sourceMappingURL=angular-sanitize.min.js.map

/*
 AngularJS v1.5.8
 (c) 2010-2016 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(x,n){'use strict';function s(f,k){var e=!1,a=!1;this.ngClickOverrideEnabled=function(b){return n.isDefined(b)?(b&&!a&&(a=!0,t.$$moduleName="ngTouch",k.directive("ngClick",t),f.decorator("ngClickDirective",["$delegate",function(a){if(e)a.shift();else for(var b=a.length-1;0<=b;){if("ngTouch"===a[b].$$moduleName){a.splice(b,1);break}b--}return a}])),e=b,this):e};this.$get=function(){return{ngClickOverrideEnabled:function(){return e}}}}function v(f,k,e){p.directive(f,["$parse","$swipe",function(a,
b){return function(l,u,g){function h(c){if(!d)return!1;var a=Math.abs(c.y-d.y);c=(c.x-d.x)*k;return r&&75>a&&0<c&&30<c&&.3>a/c}var m=a(g[f]),d,r,c=["touch"];n.isDefined(g.ngSwipeDisableMouse)||c.push("mouse");b.bind(u,{start:function(c,a){d=c;r=!0},cancel:function(c){r=!1},end:function(c,d){h(c)&&l.$apply(function(){u.triggerHandler(e);m(l,{$event:d})})}},c)}}])}var p=n.module("ngTouch",[]);p.provider("$touch",s);s.$inject=["$provide","$compileProvider"];p.factory("$swipe",[function(){function f(a){a=
a.originalEvent||a;var b=a.touches&&a.touches.length?a.touches:[a];a=a.changedTouches&&a.changedTouches[0]||b[0];return{x:a.clientX,y:a.clientY}}function k(a,b){var l=[];n.forEach(a,function(a){(a=e[a][b])&&l.push(a)});return l.join(" ")}var e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};return{bind:function(a,b,l){var e,
g,h,m,d=!1;l=l||["mouse","touch","pointer"];a.on(k(l,"start"),function(c){h=f(c);d=!0;g=e=0;m=h;b.start&&b.start(h,c)});var r=k(l,"cancel");if(r)a.on(r,function(c){d=!1;b.cancel&&b.cancel(c)});a.on(k(l,"move"),function(c){if(d&&h){var a=f(c);e+=Math.abs(a.x-m.x);g+=Math.abs(a.y-m.y);m=a;10>e&&10>g||(g>e?(d=!1,b.cancel&&b.cancel(c)):(c.preventDefault(),b.move&&b.move(a,c)))}});a.on(k(l,"end"),function(c){d&&(d=!1,b.end&&b.end(f(c),c))})}}}]);var t=["$parse","$timeout","$rootElement",function(f,k,e){function a(a,
d,b){for(var c=0;c<a.length;c+=2){var g=a[c+1],e=b;if(25>Math.abs(a[c]-d)&&25>Math.abs(g-e))return a.splice(c,c+2),!0}return!1}function b(b){if(!(2500<Date.now()-u)){var d=b.touches&&b.touches.length?b.touches:[b],e=d[0].clientX,d=d[0].clientY;if(!(1>e&&1>d||h&&h[0]===e&&h[1]===d)){h&&(h=null);var c=b.target;"label"===n.lowercase(c.nodeName||c[0]&&c[0].nodeName)&&(h=[e,d]);a(g,e,d)||(b.stopPropagation(),b.preventDefault(),b.target&&b.target.blur&&b.target.blur())}}}function l(a){a=a.touches&&a.touches.length?
a.touches:[a];var b=a[0].clientX,e=a[0].clientY;g.push(b,e);k(function(){for(var a=0;a<g.length;a+=2)if(g[a]==b&&g[a+1]==e){g.splice(a,a+2);break}},2500,!1)}var u,g,h;return function(h,d,k){var c=f(k.ngClick),w=!1,q,p,s,t;d.on("touchstart",function(a){w=!0;q=a.target?a.target:a.srcElement;3==q.nodeType&&(q=q.parentNode);d.addClass("ng-click-active");p=Date.now();a=a.originalEvent||a;a=(a.touches&&a.touches.length?a.touches:[a])[0];s=a.clientX;t=a.clientY});d.on("touchcancel",function(a){w=!1;d.removeClass("ng-click-active")});
d.on("touchend",function(c){var h=Date.now()-p,f=c.originalEvent||c,m=(f.changedTouches&&f.changedTouches.length?f.changedTouches:f.touches&&f.touches.length?f.touches:[f])[0],f=m.clientX,m=m.clientY,v=Math.sqrt(Math.pow(f-s,2)+Math.pow(m-t,2));w&&750>h&&12>v&&(g||(e[0].addEventListener("click",b,!0),e[0].addEventListener("touchstart",l,!0),g=[]),u=Date.now(),a(g,f,m),q&&q.blur(),n.isDefined(k.disabled)&&!1!==k.disabled||d.triggerHandler("click",[c]));w=!1;d.removeClass("ng-click-active")});d.onclick=
function(a){};d.on("click",function(a,b){h.$apply(function(){c(h,{$event:b||a})})});d.on("mousedown",function(a){d.addClass("ng-click-active")});d.on("mousemove mouseup",function(a){d.removeClass("ng-click-active")})}}];v("ngSwipeLeft",-1,"swipeleft");v("ngSwipeRight",1,"swiperight")})(window,window.angular);
//# sourceMappingURL=angular-touch.min.js.map

/**
 * Angular Dynamic Locale - 0.1.32
 * https://github.com/lgalfaso/angular-dynamic-locale
 * License: MIT
 */

!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){"use strict";return angular.module("tmh.dynamicLocale",[]).config(["$provide",function(a){function b(a){return a.$stateful=!0,a}a.decorator("dateFilter",["$delegate",b]),a.decorator("numberFilter",["$delegate",b]),a.decorator("currencyFilter",["$delegate",b])}]).constant("tmhDynamicLocale.STORAGE_KEY","tmhDynamicLocale.locale").provider("tmhDynamicLocale",["tmhDynamicLocale.STORAGE_KEY",function(a){function b(a,b,c,d){var f=document.createElement("script"),g=e?e:document.getElementsByTagName("body")[0],h=!1;f.type="text/javascript",f.readyState?f.onreadystatechange=function(){("complete"===f.readyState||"loaded"===f.readyState)&&(f.onreadystatechange=null,d(function(){h||(h=!0,g.removeChild(f),b())},30,!1))}:(f.onload=function(){h||(h=!0,g.removeChild(f),b())},f.onerror=function(){h||(h=!0,g.removeChild(f),c())}),f.src=a,f.async=!0,g.appendChild(f)}function c(a,c,d,e,h,i,l){function m(a,b){g===d&&(angular.forEach(a,function(c,d){b[d]?angular.isArray(b[d])&&(a[d].length=b[d].length):delete a[d]}),angular.forEach(b,function(c,d){angular.isArray(b[d])||angular.isObject(b[d])?(a[d]||(a[d]=angular.isArray(b[d])?[]:{}),m(a[d],b[d])):a[d]=b[d]}))}if(k[d])return g=d,k[d];var n,o=h.defer();return d===g?o.resolve(c):(n=i.get(d))?(g=d,e.$evalAsync(function(){m(c,n),f.put(j,d),e.$broadcast("$localeChangeSuccess",d,c),o.resolve(c)})):(g=d,k[d]=o.promise,b(a,function(){var a=angular.injector(["ngLocale"]),b=a.get("$locale");m(c,b),i.put(d,b),delete k[d],e.$applyAsync(function(){f.put(j,d),e.$broadcast("$localeChangeSuccess",d,c),o.resolve(c)})},function(){delete k[d],e.$applyAsync(function(){g===d&&(g=c.id),e.$broadcast("$localeChangeError",d),o.reject(d)})},l)),o.promise}var d,e,f,g,h="angular/i18n/angular-locale_{{locale}}.js",i="tmhDynamicLocaleStorageCache",j=a,k={},l={};this.localeLocationPattern=function(a){return a?(h=a,this):h},this.appendScriptTo=function(a){e=a},this.useStorage=function(a){i=a},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(a){d=a},this.storageKey=function(a){return a?(j=a,this):j},this.addLocalePatternValue=function(a,b){l[a]=b},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(a,b,e,k,m,n,o){function p(b){var d={locale:b,angularVersion:angular.version.full};return c(q(angular.extend({},l,d)),k,b,a,m,n,o)}var q=e(h);return f=b.get(i),a.$evalAsync(function(){var a;(a=f.get(j)||d)&&p(a)}),{set:p,get:function(){return g}}}]}]).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function(a){return a("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function(a){return a("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop]),"tmh.dynamicLocale"});
//# sourceMappingURL=tmhDynamicLocale.min.js.map

(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("jquery"), require("angular"), require("jquery-ui/datepicker"));
	else if(typeof define === 'function' && define.amd)
		define(["jquery", "angular", "jquery-ui/datepicker"], factory);
	else if(typeof exports === 'object')
		exports["angularUiDate"] = factory(require("jquery"), require("angular"), require("jquery-ui/datepicker"));
	else
		root["angularUiDate"] = factory(root["jQuery"], root["angular"], root["jquery-ui/datepicker"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "assets";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';

	Object.defineProperty(exports, "__esModule", {
	  value: true
	});

	var _jquery = __webpack_require__(1);

	var _jquery2 = _interopRequireDefault(_jquery);

	var _angular = __webpack_require__(2);

	var _angular2 = _interopRequireDefault(_angular);

	var _datepicker = __webpack_require__(3);

	var _datepicker2 = _interopRequireDefault(_datepicker);

	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

	// sets up jQuery with the datepicker plugin

	exports.default = _angular2.default.module('ui.date', []).constant('uiDateConfig', {}).constant('uiDateFormatConfig', '').factory('uiDateConverter', ['uiDateFormatConfig', function (uiDateFormatConfig) {
	  return {
	    stringToDate: stringToDate,
	    dateToString: dateToString
	  };

	  function dateToString(uiDateFormat, value) {
	    var dateFormat = uiDateFormat || uiDateFormatConfig;
	    if (value) {
	      if (dateFormat) {
	        try {
	          return _jquery2.default.datepicker.formatDate(dateFormat, value);
	        } catch (formatException) {
	          return undefined;
	        }
	      }

	      if (value.toISOString) {
	        return value.toISOString();
	      }
	    }
	    return null;
	  }

	  function stringToDate(dateFormat, valueToParse) {
	    dateFormat = dateFormat || uiDateFormatConfig;

	    if (_angular2.default.isDate(valueToParse) && !isNaN(valueToParse)) {
	      return valueToParse;
	    }

	    if (_angular2.default.isString(valueToParse)) {
	      if (dateFormat) {
	        return _jquery2.default.datepicker.parseDate(dateFormat, valueToParse);
	      }

	      var isoDate = new Date(valueToParse);
	      return isNaN(isoDate.getTime()) ? null : isoDate;
	    }

	    if (_angular2.default.isNumber(valueToParse)) {
	      // presumably timestamp to date object
	      return new Date(valueToParse);
	    }

	    return null;
	  }
	}]).directive('uiDate', ['uiDateConfig', 'uiDateConverter', function uiDateDirective(uiDateConfig, uiDateConverter) {

	  return {
	    require: '?ngModel',
	    link: function link(scope, element, attrs, controller) {

	      var $element = (0, _jquery2.default)(element);

	      var getOptions = function getOptions() {
	        return _angular2.default.extend({}, uiDateConfig, scope.$eval(attrs.uiDate));
	      };
	      var initDateWidget = function initDateWidget() {
	        var showing = false;
	        var opts = getOptions();

	        function setVal(forcedUpdate) {
	          var keys = ['Hours', 'Minutes', 'Seconds', 'Milliseconds'];
	          var isDate = _angular2.default.isDate(controller.$modelValue);
	          var preserve = {};

	          if (!forcedUpdate && isDate && controller.$modelValue.toDateString() === $element.datepicker('getDate').toDateString()) {
	            return;
	          }

	          if (isDate) {
	            _angular2.default.forEach(keys, function (key) {
	              preserve[key] = controller.$modelValue['get' + key]();
	            });
	          }

	          var newViewValue = $element.datepicker('getDate');

	          if (isDate) {
	            _angular2.default.forEach(keys, function (key) {
	              newViewValue['set' + key](preserve[key]);
	            });
	          }

	          controller.$setViewValue(newViewValue);
	        }

	        // If we have a controller (i.e. ngModelController) then wire it up
	        if (controller) {
	          // Set the view value in a $apply block when users selects
	          // (calling directive user's function too if provided)
	          var _onSelect = opts.onSelect || _angular2.default.noop;
	          opts.onSelect = function (value, picker) {
	            scope.$apply(function () {
	              showing = true;
	              setVal();
	              $element.blur();
	              _onSelect(value, picker, $element);
	            });
	          };

	          var _beforeShow = opts.beforeShow || _angular2.default.noop;
	          opts.beforeShow = function (input, picker) {
	            showing = true;
	            _beforeShow(input, picker, $element);
	          };

	          var _onClose = opts.onClose || _angular2.default.noop;
	          opts.onClose = function (value, picker) {
	            showing = false;
	            _onClose(value, picker, $element);
	          };

	          element.on('focus', function (focusEvent) {
	            if (attrs.readonly) {
	              focusEvent.stopImmediatePropagation();
	            }
	          });

	          $element.off('blur.datepicker').on('blur.datepicker', function () {
	            if (!showing) {
	              scope.$apply(function () {
	                $element.datepicker('setDate', $element.datepicker('getDate'));
	                setVal();
	              });
	            }
	          });

	          controller.$validators.uiDateValidator = function uiDateValidator(modelValue, viewValue) {
	            return viewValue === null || viewValue === '' || _angular2.default.isDate(uiDateConverter.stringToDate(attrs.uiDateFormat, viewValue));
	          };

	          controller.$parsers.push(function uiDateParser(valueToParse) {
	            return uiDateConverter.stringToDate(attrs.uiDateFormat, valueToParse);
	          });

	          // Update the date picker when the model changes
	          controller.$render = function () {
	            // Force a render to override whatever is in the input text box
	            if (_angular2.default.isDate(controller.$modelValue) === false && _angular2.default.isString(controller.$modelValue)) {
	              controller.$modelValue = uiDateConverter.stringToDate(attrs.uiDateFormat, controller.$modelValue);
	            }
	            $element.datepicker('setDate', controller.$modelValue);
	          };
	        }
	        // Check if the $element already has a datepicker.
	        //

	        if ($element.data('datepicker')) {
	          // Updates the datepicker options
	          $element.datepicker('option', opts);
	          $element.datepicker('refresh');
	        } else {
	          // Creates the new datepicker widget
	          $element.datepicker(opts);

	          // Cleanup on destroy, prevent memory leaking
	          $element.on('$destroy', function () {
	            $element.datepicker('hide');
	            $element.datepicker('destroy');
	          });
	        }

	        if (controller) {
	          controller.$render();
	          // Update the model with the value from the datepicker after parsed
	          setVal(true);
	        }
	      };

	      // Watch for changes to the directives options
	      scope.$watch(getOptions, initDateWidget, true);
	    }
	  };
	}]).directive('uiDateFormat', ['uiDateConverter', function (uiDateConverter) {
	  return {
	    require: 'ngModel',
	    link: function link(scope, element, attrs, modelCtrl) {
	      var dateFormat = attrs.uiDateFormat;

	      // Use the datepicker with the attribute value as the dateFormat string to convert to and from a string
	      modelCtrl.$formatters.unshift(function (value) {
	        return uiDateConverter.stringToDate(dateFormat, value);
	      });

	      modelCtrl.$parsers.push(function (value) {
	        return uiDateConverter.dateToString(dateFormat, value);
	      });
	    }
	  };
	}]);

/***/ },
/* 1 */
/***/ function(module, exports) {

	module.exports = __WEBPACK_EXTERNAL_MODULE_1__;

/***/ },
/* 2 */
/***/ function(module, exports) {

	module.exports = __WEBPACK_EXTERNAL_MODULE_2__;

/***/ },
/* 3 */
/***/ function(module, exports) {

	module.exports = __WEBPACK_EXTERNAL_MODULE_3__;

/***/ }
/******/ ])
});
;
//# sourceMappingURL=date.js.map

/*
 jQuery UI Slider plugin wrapper
*/
angular.module('ui.slider', []).value('uiSliderConfig',{}).directive('uiSlider', ['uiSliderConfig', '$timeout', function(uiSliderConfig, $timeout) {
    uiSliderConfig = uiSliderConfig || {};
    return {
        require: 'ngModel',
        compile: function() {
            var preLink = function (scope, elm, attrs, ngModel) {

                function parseNumber(n, decimals) {
                    return (decimals) ? parseFloat(n) : parseInt(n, 10);
                }

                var directiveOptions = angular.copy(scope.$eval(attrs.uiSlider));
                var options = angular.extend(directiveOptions || {}, uiSliderConfig);
                // Object holding range values
                var prevRangeValues = {
                    min: null,
                    max: null
                };

                // convenience properties
                var properties = ['min', 'max', 'step', 'lowerBound', 'upperBound'];
                var useDecimals = (!angular.isUndefined(attrs.useDecimals)) ? true : false;
                var updateOn = (angular.isDefined(options['updateOn'])) ? options['updateOn'] : 'slide'

                var init = function() {
                    // When ngModel is assigned an array of values then range is expected to be true.
                    // Warn user and change range to true else an error occurs when trying to drag handle
                    if (angular.isArray(ngModel.$viewValue) && options.range !== true) {
                        console.warn('Change your range option of ui-slider. When assigning ngModel an array of values then the range option should be set to true.');
                        options.range = true;
                    }

                    // Ensure the convenience properties are passed as options if they're defined
                    // This avoids init ordering issues where the slider's initial state (eg handle
                    // position) is calculated using widget defaults
                    // Note the properties take precedence over any duplicates in options
                    angular.forEach(properties, function(property) {
                        if (angular.isDefined(attrs[property])) {
                            options[property] = parseNumber(attrs[property], useDecimals);
                        }
                    });

                    elm.slider(options);
                    init = angular.noop;
                };

                // Find out if decimals are to be used for slider
                angular.forEach(properties, function(property) {
                    // support {{}} and watch for updates
                    attrs.$observe(property, function(newVal) {
                        if (!!newVal) {
                            init();
                            options[property] = parseNumber(newVal, useDecimals);
                            elm.slider('option', property, parseNumber(newVal, useDecimals));
                            ngModel.$render();
                        }
                    });
                });
                attrs.$observe('disabled', function(newVal) {
                    init();
                    elm.slider('option', 'disabled', !!newVal);
                });

                // Watch ui-slider (byVal) for changes and update
                scope.$watch(attrs.uiSlider, function(newVal) {
                    init();
                    if(newVal !== undefined) {
                      elm.slider('option', newVal);
                    }
                }, true);

                // Late-bind to prevent compiler clobbering
                $timeout(init, 0, true);

                // Update model value from slider
                elm.bind(updateOn, function(event, ui) {
                    var valuesChanged;

                    if (ui.values) {
                        var boundedValues = ui.values.slice();

                        if (options.lowerBound && boundedValues[0] < options.lowerBound) {
                            boundedValues[0] = Math.max(boundedValues[0], options.lowerBound);
                        }
                        if (options.upperBound && boundedValues[1] > options.upperBound) {
                            boundedValues[1] = Math.min(boundedValues[1], options.upperBound);
                        }

                        if (boundedValues[0] !== ui.values[0] || boundedValues[1] !== ui.values[1]) {
                            valuesChanged = true;
                            ui.values = boundedValues;
                        }
                    } else {
                        var boundedValue = ui.value;

                        if (options.lowerBound && boundedValue < options.lowerBound) {
                            boundedValue = Math.max(boundedValue, options.lowerBound);
                        }
                        if (options.upperBound && boundedValue > options.upperBound) {
                            boundedValue = Math.min(boundedValue, options.upperBound);
                        }

                        if (boundedValue !== ui.value) {
                            valuesChanged = true;
                            ui.value = boundedValue;
                        }
                    }


                    ngModel.$setViewValue(ui.values || ui.value);
                    $(ui.handle).find('.ui-slider-tip').text(ui.value);
                    scope.$apply();

                    if (valuesChanged) {
                        setTimeout(function() {
                            elm.slider('value', ui.values || ui.value);
                        }, 0);

                        return false;
                    }
                });

                // Update slider from model value
                ngModel.$render = function() {
                    init();
                    var method = options.range === true ? 'values' : 'value';

                    if (options.range !== true && isNaN(ngModel.$viewValue) && !(ngModel.$viewValue instanceof Array)) {
                        ngModel.$viewValue = 0;
                    }
                    else if (options.range && !angular.isDefined(ngModel.$viewValue)) {
                            ngModel.$viewValue = [0,0];
                    }

                    // Do some sanity check of range values
                    if (options.range === true) {
                        // previously, the model was a string b/c it was in a text input, need to convert to a array.
                        // make sure input exists, comma exists once, and it is a string.
                        if (ngModel.$viewValue && angular.isString(ngModel.$viewValue) && (ngModel.$viewValue.match(/,/g) || []).length === 1) {
                            // transform string model into array.
                            var valueArr = ngModel.$viewValue.split(',');
                            ngModel.$viewValue = [Number(valueArr[0]), Number(valueArr[1])];
                        }
                        // Check outer bounds for min and max values
                        if (angular.isDefined(options.min) && options.min > ngModel.$viewValue[0]) {
                            ngModel.$viewValue[0] = options.min;
                        }
                        if (angular.isDefined(options.max) && options.max < ngModel.$viewValue[1]) {
                            ngModel.$viewValue[1] = options.max;
                        }

                        // Check min and max range values
                        if (ngModel.$viewValue[0] > ngModel.$viewValue[1]) {
                            // Min value should be less to equal to max value
                            if (prevRangeValues.min >= ngModel.$viewValue[1]) {
                                ngModel.$viewValue[1] = prevRangeValues.min;
                            }
                            // Max value should be less to equal to min value
                            if (prevRangeValues.max <= ngModel.$viewValue[0]) {
                                ngModel.$viewValue[0] = prevRangeValues.max;
                            }
                        }

                        // Store values for later user
                        prevRangeValues.min = ngModel.$viewValue[0];
                        prevRangeValues.max = ngModel.$viewValue[1];

                    }
                    elm.slider(method, ngModel.$viewValue);
                };

                scope.$watch(attrs.ngModel, function() {
                    if (options.range === true) {
                        ngModel.$render();
                    }
                    $(elm).find('.ui-slider-tip').text(ngModel.$viewValue);
                }, true);

                function destroy() {
                    if (elm.hasClass('ui-slider')) {
                        elm.slider('destroy');
                    }
                }

                scope.$on("$destroy", destroy);
                elm.one('$destroy', destroy);
            };

            var postLink = function (scope, element, attrs, ngModel) {
                // Add tick marks if 'tick' and 'step' attributes have been setted on element.
                // Support horizontal slider bar so far. 'tick' and 'step' attributes are required.
                var options = angular.extend({}, scope.$eval(attrs.uiSlider));
                var properties = ['min', 'max', 'step', 'tick', 'tip'];
                angular.forEach(properties, function(property) {
                    if (angular.isDefined(attrs[property])) {
                        options[property] = attrs[property];
                    }
                });
                if (angular.isDefined(options['tick']) && angular.isDefined(options['step'])) {
                    var total = parseInt( (parseInt(options['max']) - parseInt(options['min'])) /parseInt(options['step']));
                    for (var i = total; i >= 0; i--) {
                        var left = ((i / total) * 100) + '%';
                        $("<div/>").addClass("ui-slider-tick").appendTo(element).css({left: left});
                    };
                }
                if(angular.isDefined(options['tip'])) {
                    $timeout(function(){
                        var handles = element.find('.ui-slider-handle');
                        if(handles && handles.length>1 && ngModel.$viewValue && angular.isArray(ngModel.$viewValue)){
                            $(handles[0]).append('<div class="ui-slider-tip">'+ngModel.$viewValue[0]+'</div>');
                            $(handles[1]).append('<div class="ui-slider-tip">'+ngModel.$viewValue[1]+'</div>');
                        }else{
                            element.find('.ui-slider-handle').append('<div class="ui-slider-tip">'+ngModel.$viewValue+'</div>');
                        }
                    },10);
                }
            }

            return {
                pre: preLink,
                post: postLink
            };
        }
    };
}]);

/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){if(a(b.target).is(this))return b.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.7",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a("#"===f?[]:f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.7",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c).prop(c,!0)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c).prop(c,!1))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")?(c.prop("checked")&&(a=!1),b.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==c.prop("type")&&(c.prop("checked")!==this.$element.hasClass("active")&&(a=!1),this.$element.toggleClass("active")),c.prop("checked",this.$element.hasClass("active")),a&&c.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target).closest(".btn");b.call(d,"toggle"),a(c.target).is('input[type="radio"], input[type="checkbox"]')||(c.preventDefault(),d.is("input,button")?d.trigger("focus"):d.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(a>this.$items.length-1||a<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){if(!this.sliding)return this.slide("next")},c.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.7",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass("open")&&(c&&"click"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event("hide.bs.dropdown",f)),c.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger(a.Event("hidden.bs.dropdown",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.7",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=b(e),g=f.hasClass("open");if(c(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(a(this)).on("click",c);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger(a.Event("shown.bs.dropdown",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(".disabled, :disabled")){var e=b(d),g=e.hasClass("open");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find(".dropdown-menu"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",c).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.7",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in"),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){document===a.target||this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement("div")).addClass("modal-backdrop "+e).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",a,b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusin"==b.type?"focus":"hover"]=!0),c.tip().hasClass("in")||"in"==c.hoverState?void(c.hoverState="in"):(clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);if(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),b instanceof a.Event&&(c.inState["focusout"==b.type?"focus":"hover"]=!1),!c.isInStateTrue())return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h="bottom"==h&&k.bottom+m>o.bottom?"top":"top"==h&&k.top-m<o.top?"bottom":"right"==h&&k.right+l>o.width?"left":"left"==h&&k.left-l<o.left?"right":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element&&e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);if(this.$element.trigger(g),!g.isDefaultPrevented())return f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=window.SVGElement&&c instanceof window.SVGElement,g=d?{top:0,left:0}:f?null:b.offset(),h={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},i=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,h,i,g)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null,a.$element=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;!e&&/destroy|hide/.test(b)||(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.7",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.7",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){
this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.7",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.7",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return e<c&&"top";if("bottom"==this.affixed)return null!=c?!(e+this.unpin<=f.top)&&"bottom":!(e+g<=a-d)&&"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&e<=c?"top":null!=d&&i+j>=a-d&&"bottom"},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);

// @preserve jQuery.floatThead 1.4.2 - http://mkoryak.github.io/floatThead/ - Copyright (c) 2012 - 2016 Misha Koryak
// @license MIT
!function(a){function b(a,b){if(8==k){var c=p.width(),d=i.debounce(function(){var a=p.width();c!=a&&(c=a,b())},1);p.on(a,d)}else p.on(a,i.debounce(b,1))}function c(b){var c=b[0],d=c.parentElement;do{var e=window.getComputedStyle(d).getPropertyValue("overflow");if("visible"!=e)break}while(d=d.parentElement);return a(d==document.body?[]:d)}function d(a){window&&window.console&&window.console.error&&window.console.error("jQuery.floatThead: "+a)}function e(a){var b=a.getBoundingClientRect();return b.width||b.right-b.left}function f(){var b=a('<div style="width:50px;height:50px;overflow-y:scroll;position:absolute;top:-200px;left:-200px;"><div style="height:100px;width:100%"></div>');a("body").append(b);var c=b.innerWidth(),d=a("div",b).innerWidth();return b.remove(),c-d}function g(a){if(a.dataTableSettings)for(var b=0;b<a.dataTableSettings.length;b++){var c=a.dataTableSettings[b].nTable;if(a[0]==c)return!0}return!1}function h(a,b,c){var d=c?"outerWidth":"width";if(n&&a.css("max-width")){var e=0;c&&(e+=parseInt(a.css("borderLeft"),10),e+=parseInt(a.css("borderRight"),10));for(var f=0;f<b.length;f++)e+=b.get(f).offsetWidth;return e}return a[d]()}a.floatThead=a.floatThead||{},a.floatThead.defaults={headerCellSelector:"tr:visible:first>*:visible",zIndex:1001,position:"auto",top:0,bottom:0,scrollContainer:function(){return a([])},responsiveContainer:function(){return a([])},getSizingRow:function(a){return a.find("tbody tr:visible:first>*:visible")},floatTableClass:"floatThead-table",floatWrapperClass:"floatThead-wrapper",floatContainerClass:"floatThead-container",copyTableClass:!0,enableAria:!1,autoReflow:!1,debug:!1,support:{bootstrap:!0,datatables:!0,jqueryUI:!0,perfectScrollbar:!0}};var i=window._,j="undefined"!=typeof MutationObserver,k=function(){for(var a=3,b=document.createElement("b"),c=b.all||[];a=1+a,b.innerHTML="<!--[if gt IE "+a+"]><i><![endif]-->",c[0];);return a>4?a:document.documentMode}(),l=/Gecko\//.test(navigator.userAgent),m=/WebKit\//.test(navigator.userAgent);k||l||m||(k=11);var n=function(){if(m){var b=a('<div style="width:0px"><table style="max-width:100%"><tr><th><div style="min-width:100px;">X</div></th></tr></table></div>');a("body").append(b);var c=0==b.find("table").width();return b.remove(),c}return!1},o=!l&&!k,p=a(window);if(!window.matchMedia){var q=window.onbeforeprint,r=window.onafterprint;window.onbeforeprint=function(){q&&q(),p.triggerHandler("beforeprint")},window.onafterprint=function(){r&&r(),p.triggerHandler("afterprint")}}a.fn.floatThead=function(l){if(l=l||{},!i&&(i=window._||a.floatThead._,!i))throw new Error("jquery.floatThead-slim.js requires underscore. You should use the non-lite version since you do not have underscore.");if(8>k)return this;var q=null;if(i.isFunction(n)&&(n=n()),i.isString(l)){var r=l,s=Array.prototype.slice.call(arguments,1),t=this;return this.filter("table").each(function(){var b=a(this),c=b.data("floatThead-lazy");c&&b.floatThead(c);var d=b.data("floatThead-attached");if(d&&i.isFunction(d[r])){var e=d[r].apply(this,s);void 0!==e&&(t=e)}}),t}var u=a.extend({},a.floatThead.defaults||{},l);if(a.each(l,function(b){b in a.floatThead.defaults||!u.debug||d("Used ["+b+"] key to init plugin, but that param is not an option for the plugin. Valid options are: "+i.keys(a.floatThead.defaults).join(", "))}),u.debug){var v=a.fn.jquery.split(".");1==parseInt(v[0],10)&&parseInt(v[1],10)<=7&&d("jQuery version "+a.fn.jquery+" detected! This plugin supports 1.8 or better, or 1.7.x with jQuery UI 1.8.24 -> http://jqueryui.com/resources/download/jquery-ui-1.8.24.zip")}return this.filter(":not(."+u.floatTableClass+")").each(function(){function l(a){return a+".fth-"+G+".floatTHead"}function n(){var b=0;if(I.children("tr:visible").each(function(){b+=a(this).outerHeight(!0)}),"collapse"==H.css("border-collapse")){var c=parseInt(H.css("border-top-width"),10),d=parseInt(H.find("thead tr:first").find(">*:first").css("border-top-width"),10);c>d&&(b-=c/2)}ib.outerHeight(b),jb.outerHeight(b)}function r(){var a=h(H,mb,!0),b=T?S:Q,c=b.width()||a,d="hidden"!=b.css("overflow-y")?c-N.vertical:c;if(fb.width(d),R){var e=100*a/d;ab.css("width",e+"%")}else ab.outerWidth(a)}function s(){K=(i.isFunction(u.top)?u.top(H):u.top)||0,L=(i.isFunction(u.bottom)?u.bottom(H):u.bottom)||0}function t(){var b,c=I.find(u.headerCellSelector);if(db?b=cb.find("col").length:(b=0,c.each(function(){b+=parseInt(a(this).attr("colspan")||1,10)})),b!=P){P=b;for(var d,e=[],f=[],g=[],h=0;b>h;h++)e.push(u.enableAria&&(d=c.eq(h).text())?'<th scope="col" class="floatThead-col">'+d+"</th>":'<th class="floatThead-col"/>'),f.push("<col/>"),g.push("<fthtd style='display:table-cell;height:0;width:auto;'/>");f=f.join(""),e=e.join(""),o&&(g=g.join(""),eb.html(g),mb=eb.find("fthtd")),ib.html(e),jb=ib.find("th"),db||cb.html(f),kb=cb.find("col"),bb.html(f),lb=bb.find("col")}return b}function v(){if(!M){if(M=!0,U){var a=h(H,mb,!0),b=$.width();a>b&&H.css("minWidth",a)}H.css(pb),ab.css(pb),ab.append(I),J.before(hb),n()}}function w(){M&&(M=!1,U&&H.width(rb),hb.detach(),H.prepend(I),H.css(qb),ab.css(qb),H.css("minWidth",sb),H.css("minWidth",h(H,mb)))}function x(a){tb!=a&&(tb=a,H.triggerHandler("floatThead",[a,fb]))}function y(a){U!=a&&(U=a,fb.css({position:U?"absolute":"fixed"}))}function z(a,b,c,d){return o?c:d?u.getSizingRow(a,b,c):b}function A(){var a,b=t();return function(){var c=fb.scrollLeft();kb=cb.find("col");var d=z(H,kb,mb,k);if(d.length==b&&b>0){if(!db)for(a=0;b>a;a++)kb.eq(a).css("width","");w();var f=[];for(a=0;b>a;a++)f[a]=e(d.get(a));for(a=0;b>a;a++)lb.eq(a).width(f[a]),kb.eq(a).width(f[a]);v()}else ab.append(I),H.css(qb),ab.css(qb),n();fb.scrollLeft(c),H.triggerHandler("reflowed",[fb])}}function B(a){var b=Q.css("border-"+a+"-width"),c=0;return b&&~b.indexOf("px")&&(c=parseInt(b,10)),c}function C(){return"auto"==S.css("overflow-x")}function D(){var a,b=Q.scrollTop(),c=0,d=W?V.outerHeight(!0):0,e=X?d:-d,f=fb.height(),g=H.offset(),h=0,i=0;if(R){var j=Q.offset();c=g.top-j.top+b,W&&X&&(c+=d),h=B("left"),i=B("top"),c-=i}else a=g.top-K-f+L+N.horizontal;var k=p.scrollTop(),l=p.scrollLeft(),n=(C()?S:Q).scrollLeft();return function(j){T=C();var o=H[0].offsetWidth<=0&&H[0].offsetHeight<=0;if(!o&&gb)return gb=!1,setTimeout(function(){H.triggerHandler("reflow")},1),null;if(o&&(gb=!0,!U))return null;if("windowScroll"==j)k=p.scrollTop(),l=p.scrollLeft();else if("containerScroll"==j)if(S.length){if(!T)return;n=S.scrollLeft()}else b=Q.scrollTop(),n=Q.scrollLeft();else"init"!=j&&(k=p.scrollTop(),l=p.scrollLeft(),b=Q.scrollTop(),n=(T?S:Q).scrollLeft());if(!m||!(0>k||0>l)){if(_)y("windowScrollDone"==j?!0:!1);else if("windowScrollDone"==j)return null;g=H.offset(),W&&X&&(g.top+=d);var q,r,s=H.outerHeight();if(R&&U){if(c>=b){var t=c-b+i;q=t>0?t:0,x(!1)}else q=Z?i:b,x(!0);r=h}else!R&&U?(k>a+s+e?q=s-f+e:g.top>=k+K?(q=0,w(),x(!1)):(q=K+k-g.top+c+(X?d:0),v(),x(!0)),r=n):R&&!U?(c>b||b-c>s?(q=g.top-k,w(),x(!1)):(q=g.top+b-k-c,v(),x(!0)),r=g.left+n-l):R||U||(k>a+s+e?q=s+K-k+a+e:g.top>k+K?(q=g.top-k,v(),x(!1)):(q=K,x(!0)),r=g.left+n-l);return{top:q,left:r}}}}function E(){var a=null,b=null,c=null;return function(d,e,f){null==d||a==d.top&&b==d.left||(fb.css({top:d.top,left:d.left}),a=d.top,b=d.left),e&&r(),f&&n();var g=(T?S:Q).scrollLeft();U&&c==g||(fb.scrollLeft(g),c=g)}}function F(){if(Q.length)if(u.support&&u.support.perfectScrollbar&&Q.data().perfectScrollbar)N={horizontal:0,vertical:0};else{if("scroll"==Q.css("overflow-x"))N.horizontal=O;else{var a=Q.width(),b=h(H,mb),c=e>d?O:0;N.horizontal=b>a-c?O:0}if("scroll"==Q.css("overflow-y"))N.vertical=O;else{var d=Q.height(),e=H.height(),f=b>a?O:0;N.vertical=e>d-f?O:0}}}var G=i.uniqueId(),H=a(this);if(H.data("floatThead-attached"))return!0;if(!H.is("table"))throw new Error('jQuery.floatThead must be run on a table element. ex: $("table").floatThead();');j=u.autoReflow&&j;var I=H.children("thead:first"),J=H.children("tbody:first");if(0==I.length||0==J.length)return H.data("floatThead-lazy",u),void H.unbind("reflow").one("reflow",function(){H.floatThead(u)});H.data("floatThead-lazy")&&H.unbind("reflow"),H.data("floatThead-lazy",!1);var K,L,M=!0,N={vertical:0,horizontal:0},O=f(),P=0;u.scrollContainer===!0&&(u.scrollContainer=c);var Q=u.scrollContainer(H)||a([]),R=Q.length>0,S=R?a([]):u.responsiveContainer(H)||a([]),T=C(),U=null;"undefined"!=typeof u.useAbsolutePositioning&&(u.position="auto",u.useAbsolutePositioning&&(u.position=u.useAbsolutePositioning?"absolute":"fixed"),d("option 'useAbsolutePositioning' has been removed in v1.3.0, use `position:'"+u.position+"'` instead. See docs for more info: http://mkoryak.github.io/floatThead/#options")),"undefined"!=typeof u.scrollingTop&&(u.top=u.scrollingTop,d("option 'scrollingTop' has been renamed to 'top' in v1.3.0. See docs for more info: http://mkoryak.github.io/floatThead/#options")),"undefined"!=typeof u.scrollingBottom&&(u.bottom=u.scrollingBottom,d("option 'scrollingBottom' has been renamed to 'bottom' in v1.3.0. See docs for more info: http://mkoryak.github.io/floatThead/#options")),"auto"==u.position?U=null:"fixed"==u.position?U=!1:"absolute"==u.position?U=!0:u.debug&&d('Invalid value given to "position" option, valid is "fixed", "absolute" and "auto". You passed: ',u.position),null==U&&(U=R);var V=H.find("caption"),W=1==V.length;if(W)var X="top"===(V.css("caption-side")||V.attr("align")||"top");var Y=a('<fthfoot style="display:table-footer-group;border-spacing:0;height:0;border-collapse:collapse;visibility:hidden"/>'),Z=!1,$=a([]),_=9>=k&&!R&&U,ab=a("<table/>"),bb=a("<colgroup/>"),cb=H.children("colgroup:first"),db=!0;0==cb.length&&(cb=a("<colgroup/>"),db=!1);var eb=a('<fthtr style="display:table-row;border-spacing:0;height:0;border-collapse:collapse"/>'),fb=a('<div style="overflow: hidden;" aria-hidden="true"></div>'),gb=!1,hb=a("<thead/>"),ib=a('<tr class="size-row"/>'),jb=a([]),kb=a([]),lb=a([]),mb=a([]);hb.append(ib),H.prepend(cb),o&&(Y.append(eb),H.append(Y)),ab.append(bb),fb.append(ab),u.copyTableClass&&ab.attr("class",H.attr("class")),ab.attr({cellpadding:H.attr("cellpadding"),cellspacing:H.attr("cellspacing"),border:H.attr("border")});var nb=H.css("display");if(ab.css({borderCollapse:H.css("borderCollapse"),border:H.css("border"),display:nb}),R||ab.css("width","auto"),"none"==nb&&(gb=!0),ab.addClass(u.floatTableClass).css({margin:0,"border-bottom-width":0}),U){var ob=function(a,b){var c=a.css("position"),d="relative"==c||"absolute"==c,e=a;if(!d||b){var f={paddingLeft:a.css("paddingLeft"),paddingRight:a.css("paddingRight")};fb.css(f),e=a.data("floatThead-containerWrap")||a.wrap("<div class='"+u.floatWrapperClass+"' style='position: relative; clear:both;'></div>").parent(),a.data("floatThead-containerWrap",e),Z=!0}return e};R?($=ob(Q,!0),$.prepend(fb)):($=ob(H),H.before(fb))}else H.before(fb);fb.css({position:U?"absolute":"fixed",marginTop:0,top:U?0:"auto",zIndex:u.zIndex}),fb.addClass(u.floatContainerClass),s();var pb={"table-layout":"fixed"},qb={"table-layout":H.css("tableLayout")||"auto"},rb=H[0].style.width||"",sb=H.css("minWidth")||"",tb=!1;F();var ub,vb=function(){(ub=A())()};vb();var wb=D(),xb=E();xb(wb("init"),!0);var yb=i.debounce(function(){xb(wb("windowScrollDone"),!1)},1),zb=function(){xb(wb("windowScroll"),!1),_&&yb()},Ab=function(){xb(wb("containerScroll"),!1)},Bb=function(){H.is(":hidden")||(s(),F(),vb(),wb=D(),(xb=E())(wb("resize"),!0,!0))},Cb=i.debounce(function(){H.is(":hidden")||(F(),s(),vb(),wb=D(),xb(wb("reflow"),!0))},1),Db=function(){H.floatThead("destroy",!0)},Eb=function(){H.floatThead(u)},Fb=function(a){a.matches?Db():Eb()};if(window.matchMedia?window.matchMedia("print").addListener(Fb):(p.on("beforeprint",Db),p.on("afterprint",Eb)),R?U?Q.on(l("scroll"),Ab):(Q.on(l("scroll"),Ab),p.on(l("scroll"),zb)):(S.on(l("scroll"),Ab),p.on(l("scroll"),zb)),p.on(l("load"),Cb),b(l("resize"),Bb),H.on("reflow",Cb),u.support&&u.support.datatables&&g(H)&&H.on("filter",Cb).on("sort",Cb).on("page",Cb),u.support&&u.support.bootstrap&&p.on(l("shown.bs.tab"),Cb),u.support&&u.support.jqueryUI&&p.on(l("tabsactivate"),Cb),j){var Gb=null;i.isFunction(u.autoReflow)&&(Gb=u.autoReflow(H,Q)),Gb||(Gb=Q.length?Q[0]:H[0]),q=new MutationObserver(function(a){for(var b=function(a){return a&&a[0]&&("THEAD"==a[0].nodeName||"TD"==a[0].nodeName||"TH"==a[0].nodeName)},c=0;c<a.length;c++)if(!b(a[c].addedNodes)&&!b(a[c].removedNodes)){Cb();break}}),q.observe(Gb,{childList:!0,subtree:!0})}H.data("floatThead-attached",{destroy:function(a){var b=".fth-"+G;w(),H.css(qb),cb.remove(),o&&Y.remove(),hb.parent().length&&hb.replaceWith(I),x(!1),j&&(q.disconnect(),q=null),H.off("reflow reflowed"),Q.off(b),S.off(b),Z&&(Q.length?Q.unwrap():H.unwrap()),R?Q.data("floatThead-containerWrap",!1):H.data("floatThead-containerWrap",!1),H.css("minWidth",sb),fb.remove(),H.data("floatThead-attached",!1),p.off(b),a||(window.matchMedia&&window.matchMedia("print").removeListener(Fb),Db=Eb=function(){})},reflow:function(){Cb()},setHeaderHeight:function(){n()},getFloatContainer:function(){return fb},getRowGroups:function(){return M?fb.find(">table>thead").add(H.children("tbody,tfoot")):H.children("thead,tbody,tfoot")}})}),this}}(jQuery),function(a){a.floatThead=a.floatThead||{},a.floatThead._=window._||function(){var b={},c=Object.prototype.hasOwnProperty,d=["Arguments","Function","String","Number","Date","RegExp"];b.has=function(a,b){return c.call(a,b)},b.keys=function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[];for(var d in a)b.has(a,d)&&c.push(d);return c};var e=0;return b.uniqueId=function(a){var b=++e+"";return a?a+b:b},a.each(d,function(){var a=this;b["is"+a]=function(b){return Object.prototype.toString.call(b)=="[object "+a+"]"}}),b.debounce=function(a,b,c){var d,e,f,g,h;return function(){f=this,e=arguments,g=new Date;var i=function(){var j=new Date-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e)))},j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e)),h}},b}()}(jQuery);

!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.proj4=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({"./includedProjections":[function(a,b,c){var d=[a("./lib/projections/tmerc"),a("./lib/projections/utm"),a("./lib/projections/sterea"),a("./lib/projections/stere"),a("./lib/projections/somerc"),a("./lib/projections/omerc"),a("./lib/projections/lcc"),a("./lib/projections/krovak"),a("./lib/projections/cass"),a("./lib/projections/laea"),a("./lib/projections/aea"),a("./lib/projections/gnom"),a("./lib/projections/cea"),a("./lib/projections/eqc"),a("./lib/projections/poly"),a("./lib/projections/nzmg"),a("./lib/projections/mill"),a("./lib/projections/sinu"),a("./lib/projections/moll"),a("./lib/projections/eqdc"),a("./lib/projections/vandg"),a("./lib/projections/aeqd"),a("./lib/projections/ortho")];b.exports=function(proj4){d.forEach(function(a){proj4.Proj.projections.add(a)})}},{"./lib/projections/aea":40,"./lib/projections/aeqd":41,"./lib/projections/cass":42,"./lib/projections/cea":43,"./lib/projections/eqc":44,"./lib/projections/eqdc":45,"./lib/projections/gnom":47,"./lib/projections/krovak":48,"./lib/projections/laea":49,"./lib/projections/lcc":50,"./lib/projections/mill":53,"./lib/projections/moll":54,"./lib/projections/nzmg":55,"./lib/projections/omerc":56,"./lib/projections/ortho":57,"./lib/projections/poly":58,"./lib/projections/sinu":59,"./lib/projections/somerc":60,"./lib/projections/stere":61,"./lib/projections/sterea":62,"./lib/projections/tmerc":63,"./lib/projections/utm":64,"./lib/projections/vandg":65}],1:[function(a,b,c){function Point(a,b,c){if(!(this instanceof Point))return new Point(a,b,c);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("object"==typeof a)this.x=a.x,this.y=a.y,this.z=a.z||0;else if("string"==typeof a&&"undefined"==typeof b){var d=a.split(",");this.x=parseFloat(d[0],10),this.y=parseFloat(d[1],10),this.z=parseFloat(d[2],10)||0}else this.x=a,this.y=b,this.z=c||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var d=a("mgrs");Point.fromMGRS=function(a){return new Point(d.toPoint(a))},Point.prototype.toMGRS=function(a){return d.forward([this.x,this.y],a)},b.exports=Point},{mgrs:68}],2:[function(a,b,c){function Projection(a,b){if(!(this instanceof Projection))return new Projection(a);b=b||function(a){if(a)throw a};var c=d(a);if("object"!=typeof c)return void b(a);var f=g(c),h=Projection.projections.get(f.projName);h?(e(this,f),e(this,h),this.init(),b(null,this)):b(a)}var d=a("./parseCode"),e=a("./extend"),f=a("./projections"),g=a("./deriveConstants");Projection.projections=f,Projection.projections.start(),b.exports=Projection},{"./deriveConstants":33,"./extend":34,"./parseCode":37,"./projections":39}],3:[function(a,b,c){b.exports=function(a,b,c){var d,e,f,g=c.x,h=c.y,i=c.z||0;for(f=0;3>f;f++)if(!b||2!==f||void 0!==c.z)switch(0===f?(d=g,e="x"):1===f?(d=h,e="y"):(d=i,e="z"),a.axis[f]){case"e":c[e]=d;break;case"w":c[e]=-d;break;case"n":c[e]=d;break;case"s":c[e]=-d;break;case"u":void 0!==c[e]&&(c.z=d);break;case"d":void 0!==c[e]&&(c.z=-d);break;default:return null}return c}},{}],4:[function(a,b,c){var d=Math.PI/2,e=a("./sign");b.exports=function(a){return Math.abs(a)<d?a:a-e(a)*Math.PI}},{"./sign":21}],5:[function(a,b,c){var d=2*Math.PI,e=3.14159265359,f=a("./sign");b.exports=function(a){return Math.abs(a)<=e?a:a-f(a)*d}},{"./sign":21}],6:[function(a,b,c){b.exports=function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)}},{}],7:[function(a,b,c){b.exports=function(a){return 1-.25*a*(1+a/16*(3+1.25*a))}},{}],8:[function(a,b,c){b.exports=function(a){return.375*a*(1+.25*a*(1+.46875*a))}},{}],9:[function(a,b,c){b.exports=function(a){return.05859375*a*a*(1+.75*a)}},{}],10:[function(a,b,c){b.exports=function(a){return a*a*a*(35/3072)}},{}],11:[function(a,b,c){b.exports=function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)}},{}],12:[function(a,b,c){b.exports=function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;15>h;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)<=1e-10)return f;return NaN}},{}],13:[function(a,b,c){var d=Math.PI/2;b.exports=function(a,b){var c=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(b)-c)<1e-6)return 0>b?-1*d:d;for(var e,f,g,h,i=Math.asin(.5*b),j=0;30>j;j++)if(f=Math.sin(i),g=Math.cos(i),h=a*f,e=Math.pow(1-h*h,2)/(2*g)*(b/(1-a*a)-f/(1-h*h)+.5/a*Math.log((1-h)/(1+h))),i+=e,Math.abs(e)<=1e-10)return i;return NaN}},{}],14:[function(a,b,c){b.exports=function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)}},{}],15:[function(a,b,c){b.exports=function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)}},{}],16:[function(a,b,c){var d=Math.PI/2;b.exports=function(a,b){for(var c,e,f=.5*a,g=d-2*Math.atan(b),h=0;15>=h;h++)if(c=a*Math.sin(g),e=d-2*Math.atan(b*Math.pow((1-c)/(1+c),f))-g,g+=e,Math.abs(e)<=1e-10)return g;return-9999}},{}],17:[function(a,b,c){var d=1,e=.25,f=.046875,g=.01953125,h=.01068115234375,i=.75,j=.46875,k=.013020833333333334,l=.007120768229166667,m=.3645833333333333,n=.005696614583333333,o=.3076171875;b.exports=function(a){var b=[];b[0]=d-a*(e+a*(f+a*(g+a*h))),b[1]=a*(i-a*(f+a*(g+a*h)));var c=a*a;return b[2]=c*(j-a*(k+a*l)),c*=a,b[3]=c*(m-a*n),b[4]=c*a*o,b}},{}],18:[function(a,b,c){var d=a("./pj_mlfn"),e=1e-10,f=20;b.exports=function(a,b,c){for(var g=1/(1-b),h=a,i=f;i;--i){var j=Math.sin(h),k=1-b*j*j;if(k=(d(h,j,Math.cos(h),c)-a)*(k*Math.sqrt(k))*g,h-=k,Math.abs(k)<e)return h}return h}},{"./pj_mlfn":19}],19:[function(a,b,c){b.exports=function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))}},{}],20:[function(a,b,c){b.exports=function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b}},{}],21:[function(a,b,c){b.exports=function(a){return 0>a?-1:1}},{}],22:[function(a,b,c){b.exports=function(a,b){return Math.pow((1-a)/(1+a),b)}},{}],23:[function(a,b,c){b.exports=function(a){var b={x:a[0],y:a[1]};return a.length>2&&(b.z=a[2]),a.length>3&&(b.m=a[3]),b}},{}],24:[function(a,b,c){var d=Math.PI/2;b.exports=function(a,b,c){var e=a*c,f=.5*a;return e=Math.pow((1-e)/(1+e),f),Math.tan(.5*(d-b))/e}},{}],25:[function(a,b,c){c.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},c.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},c.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},c.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},c.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},c.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},c.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},c.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},c.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},c.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},c.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},c.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},c.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},c.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},c.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},c.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},{}],26:[function(a,b,c){c.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},c.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},c.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},c.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},c.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},c.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},c.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},c.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},c.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},c.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},c.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},c.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},c.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},c.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},c.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},c.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},c.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},c.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},c.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},c.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},c.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},c.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},c.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},c.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},c.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},c.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},c.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},c.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},c.hough={a:6378270,rf:297,ellipseName:"Hough"},c.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},c.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},c.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},c.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},c.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},c.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},c.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},c.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},c.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},c.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},c.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},c.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},c.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},c.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],27:[function(a,b,c){c.greenwich=0,c.lisbon=-9.131906111111,c.paris=2.337229166667,c.bogota=-74.080916666667,c.madrid=-3.687938888889,c.rome=12.452333333333,c.bern=7.439583333333,c.jakarta=106.807719444444,c.ferro=-17.666666666667,c.brussels=4.367975,c.stockholm=18.058277777778,c.athens=23.7163375,c.oslo=10.722916666667},{}],28:[function(a,b,c){c.ft={to_meter:.3048},c["us-ft"]={to_meter:1200/3937}},{}],29:[function(a,b,c){function d(a,b,c){var d;return Array.isArray(c)?(d=g(a,b,c),3===c.length?[d.x,d.y,d.z]:[d.x,d.y]):g(a,b,c)}function e(a){return a instanceof f?a:a.oProj?a.oProj:f(a)}function proj4(a,b,c){a=e(a);var f,g=!1;return"undefined"==typeof b?(b=a,a=h,g=!0):("undefined"!=typeof b.x||Array.isArray(b))&&(c=b,b=a,a=h,g=!0),b=e(b),c?d(a,b,c):(f={forward:function(c){return d(a,b,c)},inverse:function(c){return d(b,a,c)}},g&&(f.oProj=b),f)}var f=a("./Proj"),g=a("./transform"),h=f("WGS84");b.exports=proj4},{"./Proj":2,"./transform":66}],30:[function(a,b,c){var d=Math.PI/2,e=1,f=2,g=3,h=4,i=5,j=484813681109536e-20,k=1.0026,l=.3826834323650898,m=function(a){return this instanceof m?(this.datum_type=h,void(a&&(a.datumCode&&"none"===a.datumCode&&(this.datum_type=i),a.datum_params&&(this.datum_params=a.datum_params.map(parseFloat),0===this.datum_params[0]&&0===this.datum_params[1]&&0===this.datum_params[2]||(this.datum_type=e),this.datum_params.length>3&&(0===this.datum_params[3]&&0===this.datum_params[4]&&0===this.datum_params[5]&&0===this.datum_params[6]||(this.datum_type=f,this.datum_params[3]*=j,this.datum_params[4]*=j,this.datum_params[5]*=j,this.datum_params[6]=this.datum_params[6]/1e6+1))),this.datum_type=a.grids?g:this.datum_type,this.a=a.a,this.b=a.b,this.es=a.es,this.ep2=a.ep2,this.datum_type===g&&(this.grids=a.grids)))):new m(a)};m.prototype={compare_datums:function(a){return this.datum_type!==a.datum_type?!1:this.a!==a.a||Math.abs(this.es-a.es)>5e-11?!1:this.datum_type===e?this.datum_params[0]===a.datum_params[0]&&this.datum_params[1]===a.datum_params[1]&&this.datum_params[2]===a.datum_params[2]:this.datum_type===f?this.datum_params[0]===a.datum_params[0]&&this.datum_params[1]===a.datum_params[1]&&this.datum_params[2]===a.datum_params[2]&&this.datum_params[3]===a.datum_params[3]&&this.datum_params[4]===a.datum_params[4]&&this.datum_params[5]===a.datum_params[5]&&this.datum_params[6]===a.datum_params[6]:this.datum_type===g||a.datum_type===g?this.nadgrids===a.nadgrids:!0},geodetic_to_geocentric:function(a){var b,c,e,f,g,h,i,j=a.x,k=a.y,l=a.z?a.z:0,m=0;if(-d>k&&k>-1.001*d)k=-d;else if(k>d&&1.001*d>k)k=d;else if(-d>k||k>d)return null;return j>Math.PI&&(j-=2*Math.PI),g=Math.sin(k),i=Math.cos(k),h=g*g,f=this.a/Math.sqrt(1-this.es*h),b=(f+l)*i*Math.cos(j),c=(f+l)*i*Math.sin(j),e=(f*(1-this.es)+l)*g,a.x=b,a.y=c,a.z=e,m},geocentric_to_geodetic:function(a){var b,c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=1e-12,u=t*t,v=30,w=a.x,x=a.y,y=a.z?a.z:0;if(o=!1,b=Math.sqrt(w*w+x*x),c=Math.sqrt(w*w+x*x+y*y),b/this.a<t){if(o=!0,q=0,c/this.a<t)return r=d,void(s=-this.b)}else q=Math.atan2(x,w);e=y/c,f=b/c,g=1/Math.sqrt(1-this.es*(2-this.es)*f*f),j=f*(1-this.es)*g,k=e*g,p=0;do p++,i=this.a/Math.sqrt(1-this.es*k*k),s=b*j+y*k-i*(1-this.es*k*k),h=this.es*i/(i+s),g=1/Math.sqrt(1-h*(2-h)*f*f),l=f*(1-h)*g,m=e*g,n=m*j-l*k,j=l,k=m;while(n*n>u&&v>p);return r=Math.atan(m/Math.abs(l)),a.x=q,a.y=r,a.z=s,a},geocentric_to_geodetic_noniter:function(a){var b,c,e,f,g,h,i,j,m,n,o,p,q,r,s,t,u,v=a.x,w=a.y,x=a.z?a.z:0;if(v=parseFloat(v),w=parseFloat(w),x=parseFloat(x),u=!1,0!==v)b=Math.atan2(w,v);else if(w>0)b=d;else if(0>w)b=-d;else if(u=!0,b=0,x>0)c=d;else{if(!(0>x))return c=d,void(e=-this.b);c=-d}return g=v*v+w*w,f=Math.sqrt(g),h=x*k,j=Math.sqrt(h*h+g),n=h/j,p=f/j,o=n*n*n,i=x+this.b*this.ep2*o,t=f-this.a*this.es*p*p*p,m=Math.sqrt(i*i+t*t),q=i/m,r=t/m,s=this.a/Math.sqrt(1-this.es*q*q),e=r>=l?f/r-s:-l>=r?f/-r-s:x/q+s*(this.es-1),u===!1&&(c=Math.atan(q/r)),a.x=b,a.y=c,a.z=e,a},geocentric_to_wgs84:function(a){if(this.datum_type===e)a.x+=this.datum_params[0],a.y+=this.datum_params[1],a.z+=this.datum_params[2];else if(this.datum_type===f){var b=this.datum_params[0],c=this.datum_params[1],d=this.datum_params[2],g=this.datum_params[3],h=this.datum_params[4],i=this.datum_params[5],j=this.datum_params[6],k=j*(a.x-i*a.y+h*a.z)+b,l=j*(i*a.x+a.y-g*a.z)+c,m=j*(-h*a.x+g*a.y+a.z)+d;a.x=k,a.y=l,a.z=m}},geocentric_from_wgs84:function(a){if(this.datum_type===e)a.x-=this.datum_params[0],a.y-=this.datum_params[1],a.z-=this.datum_params[2];else if(this.datum_type===f){var b=this.datum_params[0],c=this.datum_params[1],d=this.datum_params[2],g=this.datum_params[3],h=this.datum_params[4],i=this.datum_params[5],j=this.datum_params[6],k=(a.x-b)/j,l=(a.y-c)/j,m=(a.z-d)/j;a.x=k+i*l-h*m,a.y=-i*k+l+g*m,a.z=h*k-g*l+m}}},b.exports=m},{}],31:[function(a,b,c){var d=1,e=2,f=3,g=5,h=6378137,i=.006694379990141316;b.exports=function(a,b,c){function j(a){return a===d||a===e}var k,l,m;if(a.compare_datums(b))return c;if(a.datum_type===g||b.datum_type===g)return c;var n=a.a,o=a.es,p=b.a,q=b.es,r=a.datum_type;if(r===f)if(0===this.apply_gridshift(a,0,c))a.a=h,a.es=i;else{if(!a.datum_params)return a.a=n,a.es=a.es,c;for(k=1,l=0,m=a.datum_params.length;m>l;l++)k*=a.datum_params[l];if(0===k)return a.a=n,a.es=a.es,c;r=a.datum_params.length>3?e:d}return b.datum_type===f&&(b.a=h,b.es=i),(a.es!==b.es||a.a!==b.a||j(r)||j(b.datum_type))&&(a.geodetic_to_geocentric(c),j(a.datum_type)&&a.geocentric_to_wgs84(c),j(b.datum_type)&&b.geocentric_from_wgs84(c),b.geocentric_to_geodetic(c)),b.datum_type===f&&this.apply_gridshift(b,1,c),a.a=n,a.es=o,b.a=p,b.es=q,c}},{}],32:[function(a,b,c){function d(a){var b=this;if(2===arguments.length){var c=arguments[1];"string"==typeof c?"+"===c.charAt(0)?d[a]=f(arguments[1]):d[a]=g(arguments[1]):d[a]=c}else if(1===arguments.length){if(Array.isArray(a))return a.map(function(a){Array.isArray(a)?d.apply(b,a):d(a)});if("string"==typeof a){if(a in d)return d[a]}else"EPSG"in a?d["EPSG:"+a.EPSG]=a:"ESRI"in a?d["ESRI:"+a.ESRI]=a:"IAU2000"in a?d["IAU2000:"+a.IAU2000]=a:console.log(a);return}}var e=a("./global"),f=a("./projString"),g=a("./wkt");e(d),b.exports=d},{"./global":35,"./projString":38,"./wkt":67}],33:[function(a,b,c){var d=a("./constants/Datum"),e=a("./constants/Ellipsoid"),f=a("./extend"),g=a("./datum"),h=1e-10,i=.16666666666666666,j=.04722222222222222,k=.022156084656084655;b.exports=function(a){if(a.datumCode&&"none"!==a.datumCode){var b=d[a.datumCode];b&&(a.datum_params=b.towgs84?b.towgs84.split(","):null,a.ellps=b.ellipse,a.datumName=b.datumName?b.datumName:a.datumCode)}if(!a.a){var c=e[a.ellps]?e[a.ellps]:e.WGS84;f(a,c)}return a.rf&&!a.b&&(a.b=(1-1/a.rf)*a.a),(0===a.rf||Math.abs(a.a-a.b)<h)&&(a.sphere=!0,a.b=a.a),a.a2=a.a*a.a,a.b2=a.b*a.b,a.es=(a.a2-a.b2)/a.a2,a.e=Math.sqrt(a.es),a.R_A&&(a.a*=1-a.es*(i+a.es*(j+a.es*k)),a.a2=a.a*a.a,a.b2=a.b*a.b,a.es=0),a.ep2=(a.a2-a.b2)/a.b2,a.k0||(a.k0=1),a.axis||(a.axis="enu"),a.datum||(a.datum=g(a)),a}},{"./constants/Datum":25,"./constants/Ellipsoid":26,"./datum":30,"./extend":34}],34:[function(a,b,c){b.exports=function(a,b){a=a||{};var c,d;if(!b)return a;for(d in b)c=b[d],void 0!==c&&(a[d]=c);return a}},{}],35:[function(a,b,c){b.exports=function(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]}},{}],36:[function(a,b,c){var proj4=a("./core");proj4.defaultDatum="WGS84",proj4.Proj=a("./Proj"),proj4.WGS84=new proj4.Proj("WGS84"),proj4.Point=a("./Point"),proj4.toPoint=a("./common/toPoint"),proj4.defs=a("./defs"),proj4.transform=a("./transform"),proj4.mgrs=a("mgrs"),proj4.version=a("../package.json").version,a("./includedProjections")(proj4),b.exports=proj4},{"../package.json":69,"./Point":1,"./Proj":2,"./common/toPoint":23,"./core":29,"./defs":32,"./includedProjections":"./includedProjections","./transform":66,mgrs:68}],37:[function(a,b,c){function d(a){return"string"==typeof a}function e(a){return a in i}function f(a){var b=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return b.reduce(function(b,c){return b+1+a.indexOf(c)},0)}function g(a){return"+"===a[0]}function h(a){return d(a)?e(a)?i[a]:f(a)?j(a):g(a)?k(a):void 0:a}var i=a("./defs"),j=a("./wkt"),k=a("./projString");b.exports=h},{"./defs":32,"./projString":38,"./wkt":67}],38:[function(a,b,c){var d=.017453292519943295,e=a("./constants/PrimeMeridian"),f=a("./constants/units");b.exports=function(a){var b={},c={};a.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).forEach(function(a){var b=a.split("=");b.push(!0),c[b[0].toLowerCase()]=b[1]});var g,h,i,j={proj:"projName",datum:"datumCode",rf:function(a){b.rf=parseFloat(a)},lat_0:function(a){b.lat0=a*d},lat_1:function(a){b.lat1=a*d},lat_2:function(a){b.lat2=a*d},lat_ts:function(a){b.lat_ts=a*d},lon_0:function(a){b.long0=a*d},lon_1:function(a){b.long1=a*d},lon_2:function(a){b.long2=a*d},alpha:function(a){b.alpha=parseFloat(a)*d},lonc:function(a){b.longc=a*d},x_0:function(a){b.x0=parseFloat(a)},y_0:function(a){b.y0=parseFloat(a)},k_0:function(a){b.k0=parseFloat(a)},k:function(a){b.k0=parseFloat(a)},a:function(a){b.a=parseFloat(a)},b:function(a){b.b=parseFloat(a)},r_a:function(){b.R_A=!0},zone:function(a){b.zone=parseInt(a,10)},south:function(){b.utmSouth=!0},towgs84:function(a){b.datum_params=a.split(",").map(function(a){return parseFloat(a)})},to_meter:function(a){b.to_meter=parseFloat(a)},units:function(a){b.units=a,f[a]&&(b.to_meter=f[a].to_meter)},from_greenwich:function(a){b.from_greenwich=a*d},pm:function(a){b.from_greenwich=(e[a]?e[a]:parseFloat(a))*d},nadgrids:function(a){"@null"===a?b.datumCode="none":b.nadgrids=a},axis:function(a){var c="ewnsud";3===a.length&&-1!==c.indexOf(a.substr(0,1))&&-1!==c.indexOf(a.substr(1,1))&&-1!==c.indexOf(a.substr(2,1))&&(b.axis=a)}};for(g in c)h=c[g],g in j?(i=j[g],"function"==typeof i?i(h):b[i]=h):b[g]=h;return"string"==typeof b.datumCode&&"WGS84"!==b.datumCode&&(b.datumCode=b.datumCode.toLowerCase()),b}},{"./constants/PrimeMeridian":27,"./constants/units":28}],39:[function(a,b,c){function d(a,b){var c=g.length;return a.names?(g[c]=a,a.names.forEach(function(a){f[a.toLowerCase()]=c}),this):(console.log(b),!0)}var e=[a("./projections/merc"),a("./projections/longlat")],f={},g=[];c.add=d,c.get=function(a){if(!a)return!1;var b=a.toLowerCase();return"undefined"!=typeof f[b]&&g[f[b]]?g[f[b]]:void 0},c.start=function(){e.forEach(d)}},{"./projections/longlat":51,"./projections/merc":52}],40:[function(a,b,c){var d=1e-10,e=a("../common/msfnz"),f=a("../common/qsfnz"),g=a("../common/adjust_lon"),h=a("../common/asinz");c.init=function(){Math.abs(this.lat1+this.lat2)<d||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=e(this.e3,this.sin_po,this.cos_po),this.qs1=f(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=e(this.e3,this.sin_po,this.cos_po),this.qs2=f(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=f(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>d?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},c.forward=function(a){var b=a.x,c=a.y;this.sin_phi=Math.sin(c),this.cos_phi=Math.cos(c);var d=f(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*d)/this.ns0,h=this.ns0*g(b-this.long0),i=e*Math.sin(h)+this.x0,j=this.rh-e*Math.cos(h)+this.y0;return a.x=i,a.y=j,a},c.inverse=function(a){var b,c,d,e,f,h;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1),e=0,0!==b&&(e=Math.atan2(d*a.x,d*a.y)),d=b*this.ns0/this.a,this.sphere?h=Math.asin((this.c-d*d)/(2*this.ns0)):(c=(this.c-d*d)/this.ns0,h=this.phi1z(this.e3,c)),f=g(e/this.ns0+this.long0),a.x=f,a.y=h,a},c.phi1z=function(a,b){var c,e,f,g,i,j=h(.5*b);if(d>a)return j;for(var k=a*a,l=1;25>=l;l++)if(c=Math.sin(j),e=Math.cos(j),f=a*c,g=1-f*f,i=.5*g*g/e*(b/(1-k)-c/g+.5/a*Math.log((1-f)/(1+f))),j+=i,Math.abs(i)<=1e-7)return j;return null},c.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/msfnz":15,"../common/qsfnz":20}],41:[function(a,b,c){var d=a("../common/adjust_lon"),e=Math.PI/2,f=1e-10,g=a("../common/mlfn"),h=a("../common/e0fn"),i=a("../common/e1fn"),j=a("../common/e2fn"),k=a("../common/e3fn"),l=a("../common/gN"),m=a("../common/asinz"),n=a("../common/imlfn");c.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},c.forward=function(a){var b,c,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=a.x,I=a.y,J=Math.sin(a.y),K=Math.cos(a.y),L=d(H-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=f?(a.x=this.x0+this.a*(e-I)*Math.sin(L),a.y=this.y0-this.a*(e-I)*Math.cos(L),a):Math.abs(this.sin_p12+1)<=f?(a.x=this.x0+this.a*(e+I)*Math.sin(L),a.y=this.y0+this.a*(e+I)*Math.cos(L),a):(B=this.sin_p12*J+this.cos_p12*K*Math.cos(L),z=Math.acos(B),A=z/Math.sin(z),a.x=this.x0+this.a*A*K*Math.sin(L),a.y=this.y0+this.a*A*(this.cos_p12*J-this.sin_p12*K*Math.cos(L)),a):(b=h(this.es),c=i(this.es),m=j(this.es),n=k(this.es),Math.abs(this.sin_p12-1)<=f?(o=this.a*g(b,c,m,n,e),p=this.a*g(b,c,m,n,I),a.x=this.x0+(o-p)*Math.sin(L),a.y=this.y0-(o-p)*Math.cos(L),a):Math.abs(this.sin_p12+1)<=f?(o=this.a*g(b,c,m,n,e),p=this.a*g(b,c,m,n,I),a.x=this.x0+(o+p)*Math.sin(L),a.y=this.y0+(o+p)*Math.cos(L),a):(q=J/K,r=l(this.a,this.e,this.sin_p12),s=l(this.a,this.e,J),t=Math.atan((1-this.es)*q+this.es*r*this.sin_p12/(s*K)),u=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(t)-this.sin_p12*Math.cos(L)),C=0===u?Math.asin(this.cos_p12*Math.sin(t)-this.sin_p12*Math.cos(t)):Math.abs(Math.abs(u)-Math.PI)<=f?-Math.asin(this.cos_p12*Math.sin(t)-this.sin_p12*Math.cos(t)):Math.asin(Math.sin(L)*Math.cos(t)/Math.sin(u)),v=this.e*this.sin_p12/Math.sqrt(1-this.es),w=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es),x=v*w,y=w*w,D=C*C,E=D*C,F=E*C,G=F*C,z=r*C*(1-D*y*(1-y)/6+E/8*x*(1-2*y)+F/120*(y*(4-7*y)-3*v*v*(1-7*y))-G/48*x),a.x=this.x0+z*Math.sin(u),a.y=this.y0+z*Math.cos(u),a))},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;if(this.sphere){if(b=Math.sqrt(a.x*a.x+a.y*a.y),b>2*e*this.a)return;return c=b/this.a,o=Math.sin(c),p=Math.cos(c),q=this.long0,Math.abs(b)<=f?r=this.lat0:(r=m(p*this.sin_p12+a.y*o*this.cos_p12/b),s=Math.abs(this.lat0)-e,q=d(Math.abs(s)<=f?this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y):this.long0+Math.atan2(a.x*o,b*this.cos_p12*p-a.y*this.sin_p12*o))),a.x=q,a.y=r,a}return t=h(this.es),u=i(this.es),v=j(this.es),w=k(this.es),Math.abs(this.sin_p12-1)<=f?(x=this.a*g(t,u,v,w,e),b=Math.sqrt(a.x*a.x+a.y*a.y),y=x-b,r=n(y/this.a,t,u,v,w),q=d(this.long0+Math.atan2(a.x,-1*a.y)),a.x=q,a.y=r,a):Math.abs(this.sin_p12+1)<=f?(x=this.a*g(t,u,v,w,e),b=Math.sqrt(a.x*a.x+a.y*a.y),y=b-x,r=n(y/this.a,t,u,v,w),q=d(this.long0+Math.atan2(a.x,a.y)),a.x=q,a.y=r,a):(b=Math.sqrt(a.x*a.x+a.y*a.y),B=Math.atan2(a.x,a.y),z=l(this.a,this.e,this.sin_p12),C=Math.cos(B),D=this.e*this.cos_p12*C,E=-D*D/(1-this.es),F=3*this.es*(1-E)*this.sin_p12*this.cos_p12*C/(1-this.es),G=b/z,H=G-E*(1+E)*Math.pow(G,3)/6-F*(1+3*E)*Math.pow(G,4)/24,I=1-E*H*H/2-G*H*H*H/6,A=Math.asin(this.sin_p12*Math.cos(H)+this.cos_p12*Math.sin(H)*C),q=d(this.long0+Math.asin(Math.sin(B)*Math.sin(H)/Math.cos(A))),r=Math.atan((1-this.es*I*this.sin_p12/Math.sin(A))*Math.tan(A)/(1-this.es)),a.x=q,a.y=r,a)},c.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],42:[function(a,b,c){var d=a("../common/mlfn"),e=a("../common/e0fn"),f=a("../common/e1fn"),g=a("../common/e2fn"),h=a("../common/e3fn"),i=a("../common/gN"),j=a("../common/adjust_lon"),k=a("../common/adjust_lat"),l=a("../common/imlfn"),m=Math.PI/2,n=1e-10;c.init=function(){this.sphere||(this.e0=e(this.es),this.e1=f(this.es),this.e2=g(this.es),this.e3=h(this.es),this.ml0=this.a*d(this.e0,this.e1,this.e2,this.e3,this.lat0))},c.forward=function(a){var b,c,e=a.x,f=a.y;if(e=j(e-this.long0),this.sphere)b=this.a*Math.asin(Math.cos(f)*Math.sin(e)),c=this.a*(Math.atan2(Math.tan(f),Math.cos(e))-this.lat0);else{var g=Math.sin(f),h=Math.cos(f),k=i(this.a,this.e,g),l=Math.tan(f)*Math.tan(f),m=e*Math.cos(f),n=m*m,o=this.es*h*h/(1-this.es),p=this.a*d(this.e0,this.e1,this.e2,this.e3,f);b=k*m*(1-n*l*(1/6-(8-l+8*o)*n/120)),c=p-this.ml0+k*g/h*n*(.5+(5-l+6*o)*n/24)}return a.x=b+this.x0,a.y=c+this.y0,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere){var f=e+this.lat0;b=Math.asin(Math.sin(f)*Math.cos(d)),c=Math.atan2(Math.tan(d),Math.cos(f))}else{var g=this.ml0/this.a+e,h=l(g,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-m)<=n)return a.x=this.long0,a.y=m,0>e&&(a.y*=-1),a;var o=i(this.a,this.e,Math.sin(h)),p=o*o*o/this.a/this.a*(1-this.es),q=Math.pow(Math.tan(h),2),r=d*this.a/o,s=r*r;b=h-o*Math.tan(h)/p*r*r*(.5-(1+3*q)*r*r/24),c=r*(1-s*(q/3+(1+3*q)*q*s/15))/Math.cos(h)}return a.x=j(c+this.long0),a.y=k(b),a},c.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],43:[function(a,b,c){var d=a("../common/adjust_lon"),e=a("../common/qsfnz"),f=a("../common/msfnz"),g=a("../common/iqsfnz");c.init=function(){this.sphere||(this.k0=f(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},c.forward=function(a){var b,c,f=a.x,g=a.y,h=d(f-this.long0);if(this.sphere)b=this.x0+this.a*h*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(g)/Math.cos(this.lat_ts);else{var i=e(this.e,Math.sin(g));b=this.x0+this.a*this.k0*h,c=this.y0+this.a*i*.5/this.k0}return a.x=b,a.y=c,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c;return this.sphere?(b=d(this.long0+a.x/this.a/Math.cos(this.lat_ts)),c=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(c=g(this.e,2*a.y*this.k0/this.a),b=d(this.long0+a.x/(this.a*this.k0))),a.x=b,a.y=c,a},c.names=["cea"]},{"../common/adjust_lon":5,"../common/iqsfnz":13,"../common/msfnz":15,"../common/qsfnz":20}],44:[function(a,b,c){var d=a("../common/adjust_lon"),e=a("../common/adjust_lat");c.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},c.forward=function(a){var b=a.x,c=a.y,f=d(b-this.long0),g=e(c-this.lat0);return a.x=this.x0+this.a*f*this.rc,a.y=this.y0+this.a*g,a},c.inverse=function(a){var b=a.x,c=a.y;return a.x=d(this.long0+(b-this.x0)/(this.a*this.rc)),a.y=e(this.lat0+(c-this.y0)/this.a),a},c.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5}],45:[function(a,b,c){var d=a("../common/e0fn"),e=a("../common/e1fn"),f=a("../common/e2fn"),g=a("../common/e3fn"),h=a("../common/msfnz"),i=a("../common/mlfn"),j=a("../common/adjust_lon"),k=a("../common/adjust_lat"),l=a("../common/imlfn"),m=1e-10;c.init=function(){Math.abs(this.lat1+this.lat2)<m||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=h(this.e,this.sinphi,this.cosphi),this.ml1=i(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<m?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=h(this.e,this.sinphi,this.cosphi),this.ml2=i(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=i(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},c.forward=function(a){var b,c=a.x,d=a.y;if(this.sphere)b=this.a*(this.g-d);else{var e=i(this.e0,this.e1,this.e2,this.e3,d);b=this.a*(this.g-e)}var f=this.ns*j(c-this.long0),g=this.x0+b*Math.sin(f),h=this.y0+this.rh-b*Math.cos(f);return a.x=g,a.y=h,a},c.inverse=function(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var b,c,d,e;this.ns>=0?(c=Math.sqrt(a.x*a.x+a.y*a.y),
b=1):(c=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);var f=0;if(0!==c&&(f=Math.atan2(b*a.x,b*a.y)),this.sphere)return e=j(this.long0+f/this.ns),d=k(this.g-c/this.a),a.x=e,a.y=d,a;var g=this.g-c/this.a;return d=l(g,this.e0,this.e1,this.e2,this.e3),e=j(this.long0+f/this.ns),a.x=e,a.y=d,a},c.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/imlfn":12,"../common/mlfn":14,"../common/msfnz":15}],46:[function(a,b,c){var d=Math.PI/4,e=a("../common/srat"),f=Math.PI/2,g=20;c.init=function(){var a=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+d)/(Math.pow(Math.tan(.5*this.lat0+d),this.C)*e(this.e*a,this.ratexp))},c.forward=function(a){var b=a.x,c=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*c+d),this.C)*e(this.e*Math.sin(c),this.ratexp))-f,a.x=this.C*b,a},c.inverse=function(a){for(var b=1e-14,c=a.x/this.C,h=a.y,i=Math.pow(Math.tan(.5*h+d)/this.K,1/this.C),j=g;j>0&&(h=2*Math.atan(i*e(this.e*Math.sin(a.y),-.5*this.e))-f,!(Math.abs(h-a.y)<b));--j)a.y=h;return j?(a.x=c,a.y=h,a):null},c.names=["gauss"]},{"../common/srat":22}],47:[function(a,b,c){var d=a("../common/adjust_lon"),e=1e-10,f=a("../common/asinz");c.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},c.forward=function(a){var b,c,f,g,h,i,j,k,l=a.x,m=a.y;return f=d(l-this.long0),b=Math.sin(m),c=Math.cos(m),g=Math.cos(f),i=this.sin_p14*b+this.cos_p14*c*g,h=1,i>0||Math.abs(i)<=e?(j=this.x0+this.a*h*c*Math.sin(f)/i,k=this.y0+this.a*h*(this.cos_p14*b-this.sin_p14*c*g)/i):(j=this.x0+this.infinity_dist*c*Math.sin(f),k=this.y0+this.infinity_dist*(this.cos_p14*b-this.sin_p14*c*g)),a.x=j,a.y=k,a},c.inverse=function(a){var b,c,e,g,h,i;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(b=Math.sqrt(a.x*a.x+a.y*a.y))?(g=Math.atan2(b,this.rc),c=Math.sin(g),e=Math.cos(g),i=f(e*this.sin_p14+a.y*c*this.cos_p14/b),h=Math.atan2(a.x*c,b*this.cos_p14*e-a.y*this.sin_p14*c),h=d(this.long0+h)):(i=this.phic0,h=0),a.x=h,a.y=i,a},c.names=["gnom"]},{"../common/adjust_lon":5,"../common/asinz":6}],48:[function(a,b,c){var d=a("../common/adjust_lon");c.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},c.forward=function(a){var b,c,e,f,g,h,i,j=a.x,k=a.y,l=d(j-this.long0);return b=Math.pow((1+this.e*Math.sin(k))/(1-this.e*Math.sin(k)),this.alfa*this.e/2),c=2*(Math.atan(this.k*Math.pow(Math.tan(k/2+this.s45),this.alfa)/b)-this.s45),e=-l*this.alfa,f=Math.asin(Math.cos(this.ad)*Math.sin(c)+Math.sin(this.ad)*Math.cos(c)*Math.cos(e)),g=Math.asin(Math.cos(c)*Math.sin(e)/Math.cos(f)),h=this.n*g,i=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(f/2+this.s45),this.n),a.y=i*Math.cos(h)/1,a.x=i*Math.sin(h)/1,this.czech||(a.y*=-1,a.x*=-1),a},c.inverse=function(a){var b,c,d,e,f,g,h,i,j=a.x;a.x=a.y,a.y=j,this.czech||(a.y*=-1,a.x*=-1),g=Math.sqrt(a.x*a.x+a.y*a.y),f=Math.atan2(a.y,a.x),e=f/Math.sin(this.s0),d=2*(Math.atan(Math.pow(this.ro0/g,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),b=Math.asin(Math.cos(this.ad)*Math.sin(d)-Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),c=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(b)),a.x=this.long0-c/this.alfa,h=b,i=0;var k=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(b/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-a.y)<1e-10&&(i=1),h=a.y,k+=1;while(0===i&&15>k);return k>=15?null:a},c.names=["Krovak","krovak"]},{"../common/adjust_lon":5}],49:[function(a,b,c){var d=Math.PI/2,e=Math.PI/4,f=1e-10,g=a("../common/qsfnz"),h=a("../common/adjust_lon");c.S_POLE=1,c.N_POLE=2,c.EQUIT=3,c.OBLIQ=4,c.init=function(){var a=Math.abs(this.lat0);if(Math.abs(a-d)<f?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<f?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var b;switch(this.qp=g(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),b=Math.sin(this.lat0),this.sinb1=g(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},c.forward=function(a){var b,c,i,j,k,l,m,n,o,p,q=a.x,r=a.y;if(q=h(q-this.long0),this.sphere){if(k=Math.sin(r),p=Math.cos(r),i=Math.cos(q),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c=this.mode===this.EQUIT?1+p*i:1+this.sinph0*k+this.cosph0*p*i,f>=c)return null;c=Math.sqrt(2/c),b=c*p*Math.sin(q),c*=this.mode===this.EQUIT?k:this.cosph0*k-this.sinph0*p*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(r+this.phi0)<f)return null;c=e-.5*r,c=2*(this.mode===this.S_POLE?Math.cos(c):Math.sin(c)),b=c*Math.sin(q),c*=i}}else{switch(m=0,n=0,o=0,i=Math.cos(q),j=Math.sin(q),k=Math.sin(r),l=g(this.e,k),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(m=l/this.qp,n=Math.sqrt(1-m*m)),this.mode){case this.OBLIQ:o=1+this.sinb1*m+this.cosb1*n*i;break;case this.EQUIT:o=1+n*i;break;case this.N_POLE:o=d+r,l=this.qp-l;break;case this.S_POLE:o=r-d,l=this.qp+l}if(Math.abs(o)<f)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:o=Math.sqrt(2/o),c=this.mode===this.OBLIQ?this.ymf*o*(this.cosb1*m-this.sinb1*n*i):(o=Math.sqrt(2/(1+n*i)))*m*this.ymf,b=this.xmf*o*n*j;break;case this.N_POLE:case this.S_POLE:l>=0?(b=(o=Math.sqrt(l))*j,c=i*(this.mode===this.S_POLE?o:-o)):b=c=0}}return a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,e,g,i,j,k,l=a.x/this.a,m=a.y/this.a;if(this.sphere){var n,o=0,p=0;if(n=Math.sqrt(l*l+m*m),c=.5*n,c>1)return null;switch(c=2*Math.asin(c),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(p=Math.sin(c),o=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(n)<=f?0:Math.asin(m*p/n),l*=p,m=o*n;break;case this.OBLIQ:c=Math.abs(n)<=f?this.phi0:Math.asin(o*this.sinph0+m*p*this.cosph0/n),l*=p*this.cosph0,m=(o-Math.sin(c)*this.sinph0)*n;break;case this.N_POLE:m=-m,c=d-c;break;case this.S_POLE:c-=d}b=0!==m||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,m):0}else{if(k=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,m*=this.dd,j=Math.sqrt(l*l+m*m),f>j)return a.x=0,a.y=this.phi0,a;g=2*Math.asin(.5*j/this.rq),e=Math.cos(g),l*=g=Math.sin(g),this.mode===this.OBLIQ?(k=e*this.sinb1+m*g*this.cosb1/j,i=this.qp*k,m=j*this.cosb1*e-m*this.sinb1*g):(k=m*g/j,i=this.qp*k,m=j*e)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(m=-m),i=l*l+m*m,!i)return a.x=0,a.y=this.phi0,a;k=1-i/this.qp,this.mode===this.S_POLE&&(k=-k)}b=Math.atan2(l,m),c=this.authlat(Math.asin(k),this.apa)}return a.x=h(this.long0+b),a.y=c,a},c.P00=.3333333333333333,c.P01=.17222222222222222,c.P02=.10257936507936508,c.P10=.06388888888888888,c.P11=.0664021164021164,c.P20=.016415012942191543,c.authset=function(a){var b,c=[];return c[0]=a*this.P00,b=a*a,c[0]+=b*this.P01,c[1]=b*this.P10,b*=a,c[0]+=b*this.P02,c[1]+=b*this.P11,c[2]=b*this.P20,c},c.authlat=function(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)},c.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":5,"../common/qsfnz":20}],50:[function(a,b,c){var d=1e-10,e=a("../common/msfnz"),f=a("../common/tsfnz"),g=Math.PI/2,h=a("../common/sign"),i=a("../common/adjust_lon"),j=a("../common/phi2z");c.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<d)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var b=Math.sin(this.lat1),c=Math.cos(this.lat1),g=e(this.e,b,c),h=f(this.e,this.lat1,b),i=Math.sin(this.lat2),j=Math.cos(this.lat2),k=e(this.e,i,j),l=f(this.e,this.lat2,i),m=f(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>d?this.ns=Math.log(g/k)/Math.log(h/l):this.ns=b,isNaN(this.ns)&&(this.ns=b),this.f0=g/(this.ns*Math.pow(h,this.ns)),this.rh=this.a*this.f0*Math.pow(m,this.ns),this.title||(this.title="Lambert Conformal Conic")}},c.forward=function(a){var b=a.x,c=a.y;Math.abs(2*Math.abs(c)-Math.PI)<=d&&(c=h(c)*(g-2*d));var e,j,k=Math.abs(Math.abs(c)-g);if(k>d)e=f(this.e,c,Math.sin(c)),j=this.a*this.f0*Math.pow(e,this.ns);else{if(k=c*this.ns,0>=k)return null;j=0}var l=this.ns*i(b-this.long0);return a.x=this.k0*(j*Math.sin(l))+this.x0,a.y=this.k0*(this.rh-j*Math.cos(l))+this.y0,a},c.inverse=function(a){var b,c,d,e,f,h=(a.x-this.x0)/this.k0,k=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(b=Math.sqrt(h*h+k*k),c=1):(b=-Math.sqrt(h*h+k*k),c=-1);var l=0;if(0!==b&&(l=Math.atan2(c*h,c*k)),0!==b||this.ns>0){if(c=1/this.ns,d=Math.pow(b/(this.a*this.f0),c),e=j(this.e,d),-9999===e)return null}else e=-g;return f=i(l/this.ns+this.long0),a.x=f,a.y=e,a},c.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],51:[function(a,b,c){function d(a){return a}c.init=function(){},c.forward=d,c.inverse=d,c.names=["longlat","identity"]},{}],52:[function(a,b,c){var d=a("../common/msfnz"),e=Math.PI/2,f=1e-10,g=57.29577951308232,h=a("../common/adjust_lon"),i=Math.PI/4,j=a("../common/tsfnz"),k=a("../common/phi2z");c.init=function(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=d(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},c.forward=function(a){var b=a.x,c=a.y;if(c*g>90&&-90>c*g&&b*g>180&&-180>b*g)return null;var d,k;if(Math.abs(Math.abs(c)-e)<=f)return null;if(this.sphere)d=this.x0+this.a*this.k0*h(b-this.long0),k=this.y0+this.a*this.k0*Math.log(Math.tan(i+.5*c));else{var l=Math.sin(c),m=j(this.e,c,l);d=this.x0+this.a*this.k0*h(b-this.long0),k=this.y0-this.a*this.k0*Math.log(m)}return a.x=d,a.y=k,a},c.inverse=function(a){var b,c,d=a.x-this.x0,f=a.y-this.y0;if(this.sphere)c=e-2*Math.atan(Math.exp(-f/(this.a*this.k0)));else{var g=Math.exp(-f/(this.a*this.k0));if(c=k(this.e,g),-9999===c)return null}return b=h(this.long0+d/(this.a*this.k0)),a.x=b,a.y=c,a},c.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/tsfnz":24}],53:[function(a,b,c){var d=a("../common/adjust_lon");c.init=function(){},c.forward=function(a){var b=a.x,c=a.y,e=d(b-this.long0),f=this.x0+this.a*e,g=this.y0+this.a*Math.log(Math.tan(Math.PI/4+c/2.5))*1.25;return a.x=f,a.y=g,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b=d(this.long0+a.x/this.a),c=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=b,a.y=c,a},c.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":5}],54:[function(a,b,c){var d=a("../common/adjust_lon"),e=1e-10;c.init=function(){},c.forward=function(a){for(var b=a.x,c=a.y,f=d(b-this.long0),g=c,h=Math.PI*Math.sin(c),i=0;!0;i++){var j=-(g+Math.sin(g)-h)/(1+Math.cos(g));if(g+=j,Math.abs(j)<e)break}g/=2,Math.PI/2-Math.abs(c)<e&&(f=0);var k=.900316316158*this.a*f*Math.cos(g)+this.x0,l=1.4142135623731*this.a*Math.sin(g)+this.y0;return a.x=k,a.y=l,a},c.inverse=function(a){var b,c;a.x-=this.x0,a.y-=this.y0,c=a.y/(1.4142135623731*this.a),Math.abs(c)>.999999999999&&(c=.999999999999),b=Math.asin(c);var e=d(this.long0+a.x/(.900316316158*this.a*Math.cos(b)));e<-Math.PI&&(e=-Math.PI),e>Math.PI&&(e=Math.PI),c=(2*b+Math.sin(2*b))/Math.PI,Math.abs(c)>1&&(c=1);var f=Math.asin(c);return a.x=e,a.y=f,a},c.names=["Mollweide","moll"]},{"../common/adjust_lon":5}],55:[function(a,b,c){var d=484813681109536e-20;c.iterations=1,c.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},c.forward=function(a){var b,c=a.x,e=a.y,f=e-this.lat0,g=c-this.long0,h=f/d*1e-5,i=g,j=1,k=0;for(b=1;10>=b;b++)j*=h,k+=this.A[b]*j;var l,m,n=k,o=i,p=1,q=0,r=0,s=0;for(b=1;6>=b;b++)l=p*n-q*o,m=q*n+p*o,p=l,q=m,r=r+this.B_re[b]*p-this.B_im[b]*q,s=s+this.B_im[b]*p+this.B_re[b]*q;return a.x=s*this.a+this.x0,a.y=r*this.a+this.y0,a},c.inverse=function(a){var b,c,e,f=a.x,g=a.y,h=f-this.x0,i=g-this.y0,j=i/this.a,k=h/this.a,l=1,m=0,n=0,o=0;for(b=1;6>=b;b++)c=l*j-m*k,e=m*j+l*k,l=c,m=e,n=n+this.C_re[b]*l-this.C_im[b]*m,o=o+this.C_im[b]*l+this.C_re[b]*m;for(var p=0;p<this.iterations;p++){var q,r,s=n,t=o,u=j,v=k;for(b=2;6>=b;b++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,u+=(b-1)*(this.B_re[b]*s-this.B_im[b]*t),v+=(b-1)*(this.B_im[b]*s+this.B_re[b]*t);s=1,t=0;var w=this.B_re[1],x=this.B_im[1];for(b=2;6>=b;b++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,w+=b*(this.B_re[b]*s-this.B_im[b]*t),x+=b*(this.B_im[b]*s+this.B_re[b]*t);var y=w*w+x*x;n=(u*w+v*x)/y,o=(v*w-u*x)/y}var z=n,A=o,B=1,C=0;for(b=1;9>=b;b++)B*=z,C+=this.D[b]*B;var D=this.lat0+C*d*1e5,E=this.long0+A;return a.x=E,a.y=D,a},c.names=["New_Zealand_Map_Grid","nzmg"]},{}],56:[function(a,b,c){var d=a("../common/tsfnz"),e=a("../common/adjust_lon"),f=a("../common/phi2z"),g=Math.PI/2,h=Math.PI/4,i=1e-10;c.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var a=Math.sin(this.lat0),b=Math.cos(this.lat0),c=this.e*a;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(b,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-c*c);var f=d(this.e,this.lat0,a),g=this.bl/b*Math.sqrt((1-this.es)/(1-c*c));1>g*g&&(g=1);var h,i;if(isNaN(this.longc)){var j=d(this.e,this.lat1,Math.sin(this.lat1)),k=d(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(g+Math.sqrt(g*g-1))*Math.pow(f,this.bl):this.el=(g-Math.sqrt(g*g-1))*Math.pow(f,this.bl);var l=Math.pow(j,this.bl),m=Math.pow(k,this.bl);h=this.el/l,i=.5*(h-1/h);var n=(this.el*this.el-m*l)/(this.el*this.el+m*l),o=(m-l)/(m+l),p=e(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(n*Math.tan(.5*this.bl*p)/o)/this.bl,this.long0=e(this.long0);var q=e(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*q)/i),this.alpha=Math.asin(g*Math.sin(this.gamma0))}else h=this.lat0>=0?g+Math.sqrt(g*g-1):g-Math.sqrt(g*g-1),this.el=h*Math.pow(f,this.bl),i=.5*(h-1/h),this.gamma0=Math.asin(Math.sin(this.alpha)/g),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(g*g-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(g*g-1),Math.cos(this.alpha))},c.forward=function(a){var b,c,f,j=a.x,k=a.y,l=e(j-this.long0);if(Math.abs(Math.abs(k)-g)<=i)f=k>0?-1:1,c=this.al/this.bl*Math.log(Math.tan(h+f*this.gamma0*.5)),b=-1*f*g*this.al/this.bl;else{var m=d(this.e,k,Math.sin(k)),n=this.el/Math.pow(m,this.bl),o=.5*(n-1/n),p=.5*(n+1/n),q=Math.sin(this.bl*l),r=(o*Math.sin(this.gamma0)-q*Math.cos(this.gamma0))/p;c=Math.abs(Math.abs(r)-1)<=i?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-r)/(1+r))/this.bl,b=Math.abs(Math.cos(this.bl*l))<=i?this.al*this.bl*l:this.al*Math.atan2(o*Math.cos(this.gamma0)+q*Math.sin(this.gamma0),Math.cos(this.bl*l))/this.bl}return this.no_rot?(a.x=this.x0+b,a.y=this.y0+c):(b-=this.uc,a.x=this.x0+c*Math.cos(this.alpha)+b*Math.sin(this.alpha),a.y=this.y0+b*Math.cos(this.alpha)-c*Math.sin(this.alpha)),a},c.inverse=function(a){var b,c;this.no_rot?(c=a.y-this.y0,b=a.x-this.x0):(c=(a.x-this.x0)*Math.cos(this.alpha)-(a.y-this.y0)*Math.sin(this.alpha),b=(a.y-this.y0)*Math.cos(this.alpha)+(a.x-this.x0)*Math.sin(this.alpha),b+=this.uc);var d=Math.exp(-1*this.bl*c/this.al),h=.5*(d-1/d),j=.5*(d+1/d),k=Math.sin(this.bl*b/this.al),l=(k*Math.cos(this.gamma0)+h*Math.sin(this.gamma0))/j,m=Math.pow(this.el/Math.sqrt((1+l)/(1-l)),1/this.bl);return Math.abs(l-1)<i?(a.x=this.long0,a.y=g):Math.abs(l+1)<i?(a.x=this.long0,a.y=-1*g):(a.y=f(this.e,m),a.x=e(this.long0-Math.atan2(h*Math.cos(this.gamma0)-k*Math.sin(this.gamma0),Math.cos(this.bl*b/this.al))/this.bl)),a},c.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":5,"../common/phi2z":16,"../common/tsfnz":24}],57:[function(a,b,c){var d=a("../common/adjust_lon"),e=1e-10,f=a("../common/asinz"),g=Math.PI/2;c.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},c.forward=function(a){var b,c,f,g,h,i,j,k,l=a.x,m=a.y;return f=d(l-this.long0),b=Math.sin(m),c=Math.cos(m),g=Math.cos(f),i=this.sin_p14*b+this.cos_p14*c*g,h=1,(i>0||Math.abs(i)<=e)&&(j=this.a*h*c*Math.sin(f),k=this.y0+this.a*h*(this.cos_p14*b-this.sin_p14*c*g)),a.x=j,a.y=k,a},c.inverse=function(a){var b,c,h,i,j,k,l;return a.x-=this.x0,a.y-=this.y0,b=Math.sqrt(a.x*a.x+a.y*a.y),c=f(b/this.a),h=Math.sin(c),i=Math.cos(c),k=this.long0,Math.abs(b)<=e?(l=this.lat0,a.x=k,a.y=l,a):(l=f(i*this.sin_p14+a.y*h*this.cos_p14/b),j=Math.abs(this.lat0)-g,Math.abs(j)<=e?(k=d(this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y)),a.x=k,a.y=l,a):(k=d(this.long0+Math.atan2(a.x*h,b*this.cos_p14*i-a.y*this.sin_p14*h)),a.x=k,a.y=l,a))},c.names=["ortho"]},{"../common/adjust_lon":5,"../common/asinz":6}],58:[function(a,b,c){var d=a("../common/e0fn"),e=a("../common/e1fn"),f=a("../common/e2fn"),g=a("../common/e3fn"),h=a("../common/adjust_lon"),i=a("../common/adjust_lat"),j=a("../common/mlfn"),k=1e-10,l=a("../common/gN"),m=20;c.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.ml0=this.a*j(this.e0,this.e1,this.e2,this.e3,this.lat0)},c.forward=function(a){var b,c,d,e=a.x,f=a.y,g=h(e-this.long0);if(d=g*Math.sin(f),this.sphere)Math.abs(f)<=k?(b=this.a*g,c=-1*this.a*this.lat0):(b=this.a*Math.sin(d)/Math.tan(f),c=this.a*(i(f-this.lat0)+(1-Math.cos(d))/Math.tan(f)));else if(Math.abs(f)<=k)b=this.a*g,c=-1*this.ml0;else{var m=l(this.a,this.e,Math.sin(f))/Math.tan(f);b=m*Math.sin(d),c=this.a*j(this.e0,this.e1,this.e2,this.e3,f)-this.ml0+m*(1-Math.cos(d))}return a.x=b+this.x0,a.y=c+this.y0,a},c.inverse=function(a){var b,c,d,e,f,g,i,l,n;if(d=a.x-this.x0,e=a.y-this.y0,this.sphere)if(Math.abs(e+this.a*this.lat0)<=k)b=h(d/this.a+this.long0),c=0;else{g=this.lat0+e/this.a,i=d*d/this.a/this.a+g*g,l=g;var o;for(f=m;f;--f)if(o=Math.tan(l),n=-1*(g*(l*o+1)-l-.5*(l*l+i)*o)/((l-g)/o-1),l+=n,Math.abs(n)<=k){c=l;break}b=h(this.long0+Math.asin(d*Math.tan(l)/this.a)/Math.sin(c))}else if(Math.abs(e+this.ml0)<=k)c=0,b=h(this.long0+d/this.a);else{g=(this.ml0+e)/this.a,i=d*d/this.a/this.a+g*g,l=g;var p,q,r,s,t;for(f=m;f;--f)if(t=this.e*Math.sin(l),p=Math.sqrt(1-t*t)*Math.tan(l),q=this.a*j(this.e0,this.e1,this.e2,this.e3,l),r=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),s=q/this.a,n=(g*(p*s+1)-s-.5*p*(s*s+i))/(this.es*Math.sin(2*l)*(s*s+i-2*g*s)/(4*p)+(g-s)*(p*r-2/Math.sin(2*l))-r),l-=n,Math.abs(n)<=k){c=l;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(c),2))*Math.tan(c),b=h(this.long0+Math.asin(d*p/this.a)/Math.sin(c))}return a.x=b,a.y=c,a},c.names=["Polyconic","poly"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/mlfn":14}],59:[function(a,b,c){var d=a("../common/adjust_lon"),e=a("../common/adjust_lat"),f=a("../common/pj_enfn"),g=20,h=a("../common/pj_mlfn"),i=a("../common/pj_inv_mlfn"),j=Math.PI/2,k=1e-10,l=a("../common/asinz");c.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=f(this.es)},c.forward=function(a){var b,c,e=a.x,f=a.y;if(e=d(e-this.long0),this.sphere){if(this.m)for(var i=this.n*Math.sin(f),j=g;j;--j){var l=(this.m*f+Math.sin(f)-i)/(this.m+Math.cos(f));if(f-=l,Math.abs(l)<k)break}else f=1!==this.n?Math.asin(this.n*Math.sin(f)):f;b=this.a*this.C_x*e*(this.m+Math.cos(f)),c=this.a*this.C_y*f}else{var m=Math.sin(f),n=Math.cos(f);c=this.a*h(f,m,n,this.en),b=this.a*e*n/Math.sqrt(1-this.es*m*m)}return a.x=b,a.y=c,a},c.inverse=function(a){var b,c,f,g;return a.x-=this.x0,f=a.x/this.a,a.y-=this.y0,b=a.y/this.a,this.sphere?(b/=this.C_y,f/=this.C_x*(this.m+Math.cos(b)),this.m?b=l((this.m*b+Math.sin(b))/this.n):1!==this.n&&(b=l(Math.sin(b)/this.n)),f=d(f+this.long0),b=e(b)):(b=i(a.y/this.a,this.es,this.en),g=Math.abs(b),j>g?(g=Math.sin(b),c=this.long0+a.x*Math.sqrt(1-this.es*g*g)/(this.a*Math.cos(b)),f=d(c)):j>g-k&&(f=this.long0)),a.x=f,a.y=b,a},c.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/asinz":6,"../common/pj_enfn":17,"../common/pj_inv_mlfn":18,"../common/pj_mlfn":19}],60:[function(a,b,c){c.init=function(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),i=Math.log(Math.tan(Math.PI/4+a/2)),j=Math.log((1+g*b)/(1-g*b));this.K=h-this.alpha*i+this.alpha*g/2*j},c.forward=function(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a},c.inverse=function(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)>1e-7;){if(++l>20)return;i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a},c.names=["somerc"]},{}],61:[function(a,b,c){var d=Math.PI/2,e=1e-10,f=a("../common/sign"),g=a("../common/msfnz"),h=a("../common/tsfnz"),i=a("../common/phi2z"),j=a("../common/adjust_lon");c.ssfn_=function(a,b,c){return b*=c,Math.tan(.5*(d+a))*Math.pow((1-b)/(1+b),.5*c)},c.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&(this.k0=.5*(1+f(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=e&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&(this.k0=.5*this.cons*g(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/h(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=g(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-d,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},c.forward=function(a){var b,c,f,g,i,k,l=a.x,m=a.y,n=Math.sin(m),o=Math.cos(m),p=j(l-this.long0);return Math.abs(Math.abs(l-this.long0)-Math.PI)<=e&&Math.abs(m+this.lat0)<=e?(a.x=NaN,a.y=NaN,a):this.sphere?(b=2*this.k0/(1+this.sinlat0*n+this.coslat0*o*Math.cos(p)),a.x=this.a*b*o*Math.sin(p)+this.x0,a.y=this.a*b*(this.coslat0*n-this.sinlat0*o*Math.cos(p))+this.y0,a):(c=2*Math.atan(this.ssfn_(m,n,this.e))-d,g=Math.cos(c),f=Math.sin(c),Math.abs(this.coslat0)<=e?(i=h(this.e,m*this.con,this.con*n),k=2*this.a*this.k0*i/this.cons,a.x=this.x0+k*Math.sin(l-this.long0),a.y=this.y0-this.con*k*Math.cos(l-this.long0),a):(Math.abs(this.sinlat0)<e?(b=2*this.a*this.k0/(1+g*Math.cos(p)),a.y=b*f):(b=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*g*Math.cos(p))),a.y=b*(this.cosX0*f-this.sinX0*g*Math.cos(p))+this.y0),a.x=b*g*Math.sin(p)+this.x0,a))},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,f,g,h,k=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var l=2*Math.atan(k/(.5*this.a*this.k0));return b=this.long0,c=this.lat0,e>=k?(a.x=b,a.y=c,a):(c=Math.asin(Math.cos(l)*this.sinlat0+a.y*Math.sin(l)*this.coslat0/k),b=j(Math.abs(this.coslat0)<e?this.lat0>0?this.long0+Math.atan2(a.x,-1*a.y):this.long0+Math.atan2(a.x,a.y):this.long0+Math.atan2(a.x*Math.sin(l),k*this.coslat0*Math.cos(l)-a.y*this.sinlat0*Math.sin(l))),a.x=b,a.y=c,a)}if(Math.abs(this.coslat0)<=e){if(e>=k)return c=this.lat0,b=this.long0,a.x=b,a.y=c,a;a.x*=this.con,a.y*=this.con,f=k*this.cons/(2*this.a*this.k0),c=this.con*i(this.e,f),b=this.con*j(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else g=2*Math.atan(k*this.cosX0/(2*this.a*this.k0*this.ms1)),b=this.long0,e>=k?h=this.X0:(h=Math.asin(Math.cos(g)*this.sinX0+a.y*Math.sin(g)*this.cosX0/k),b=j(this.long0+Math.atan2(a.x*Math.sin(g),k*this.cosX0*Math.cos(g)-a.y*this.sinX0*Math.sin(g)))),c=-1*i(this.e,Math.tan(.5*(d+h)));return a.x=b,a.y=c,a},c.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],62:[function(a,b,c){var d=a("./gauss"),e=a("../common/adjust_lon");c.init=function(){d.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},c.forward=function(a){var b,c,f,g;return a.x=e(a.x-this.long0),d.forward.apply(this,[a]),b=Math.sin(a.y),c=Math.cos(a.y),f=Math.cos(a.x),g=this.k0*this.R2/(1+this.sinc0*b+this.cosc0*c*f),a.x=g*c*Math.sin(a.x),a.y=g*(this.cosc0*b-this.sinc0*c*f),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a},c.inverse=function(a){var b,c,f,g,h;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,h=Math.sqrt(a.x*a.x+a.y*a.y)){var i=2*Math.atan2(h,this.R2);b=Math.sin(i),c=Math.cos(i),g=Math.asin(c*this.sinc0+a.y*b*this.cosc0/h),f=Math.atan2(a.x*b,h*this.cosc0*c-a.y*this.sinc0*b)}else g=this.phic0,f=0;return a.x=f,a.y=g,d.inverse.apply(this,[a]),a.x=e(a.x+this.long0),a},c.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":5,"./gauss":46}],63:[function(a,b,c){var d=a("../common/e0fn"),e=a("../common/e1fn"),f=a("../common/e2fn"),g=a("../common/e3fn"),h=a("../common/mlfn"),i=a("../common/adjust_lon"),j=Math.PI/2,k=1e-10,l=a("../common/sign"),m=a("../common/asinz");c.init=function(){this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.ml0=this.a*h(this.e0,this.e1,this.e2,this.e3,this.lat0)},c.forward=function(a){var b,c,d,e=a.x,f=a.y,g=i(e-this.long0),j=Math.sin(f),k=Math.cos(f);if(this.sphere){var l=k*Math.sin(g);if(Math.abs(Math.abs(l)-1)<1e-10)return 93;c=.5*this.a*this.k0*Math.log((1+l)/(1-l)),b=Math.acos(k*Math.cos(g)/Math.sqrt(1-l*l)),0>f&&(b=-b),d=this.a*this.k0*(b-this.lat0)}else{var m=k*g,n=Math.pow(m,2),o=this.ep2*Math.pow(k,2),p=Math.tan(f),q=Math.pow(p,2);b=1-this.es*Math.pow(j,2);var r=this.a/Math.sqrt(b),s=this.a*h(this.e0,this.e1,this.e2,this.e3,f);c=this.k0*r*m*(1+n/6*(1-q+o+n/20*(5-18*q+Math.pow(q,2)+72*o-58*this.ep2)))+this.x0,d=this.k0*(s-this.ml0+r*p*(n*(.5+n/24*(5-q+9*o+4*Math.pow(o,2)+n/30*(61-58*q+Math.pow(q,2)+600*o-330*this.ep2)))))+this.y0}return a.x=c,a.y=d,a},c.inverse=function(a){var b,c,d,e,f,g,h=6;if(this.sphere){var n=Math.exp(a.x/(this.a*this.k0)),o=.5*(n-1/n),p=this.lat0+a.y/(this.a*this.k0),q=Math.cos(p);b=Math.sqrt((1-q*q)/(1+o*o)),f=m(b),0>p&&(f=-f),g=0===o&&0===q?this.long0:i(Math.atan2(o,q)+this.long0)}else{var r=a.x-this.x0,s=a.y-this.y0;for(b=(this.ml0+s/this.k0)/this.a,c=b,e=0;!0&&(d=(b+this.e1*Math.sin(2*c)-this.e2*Math.sin(4*c)+this.e3*Math.sin(6*c))/this.e0-c,c+=d,!(Math.abs(d)<=k));e++)if(e>=h)return 95;if(Math.abs(c)<j){var t=Math.sin(c),u=Math.cos(c),v=Math.tan(c),w=this.ep2*Math.pow(u,2),x=Math.pow(w,2),y=Math.pow(v,2),z=Math.pow(y,2);b=1-this.es*Math.pow(t,2);var A=this.a/Math.sqrt(b),B=A*(1-this.es)/b,C=r/(A*this.k0),D=Math.pow(C,2);f=c-A*v*D/B*(.5-D/24*(5+3*y+10*w-4*x-9*this.ep2-D/30*(61+90*y+298*w+45*z-252*this.ep2-3*x))),g=i(this.long0+C*(1-D/6*(1+2*y+w-D/20*(5-2*w+28*y-3*x+8*this.ep2+24*z)))/u)}else f=j*l(s),g=this.long0}return a.x=g,a.y=f,a},c.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/mlfn":14,"../common/sign":21}],64:[function(a,b,c){var d=.017453292519943295,e=a("./tmerc");c.dependsOn="tmerc",c.init=function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*d,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,e.init.apply(this),this.forward=e.forward,this.inverse=e.inverse)},c.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":63}],65:[function(a,b,c){var d=a("../common/adjust_lon"),e=Math.PI/2,f=1e-10,g=a("../common/asinz");c.init=function(){this.R=this.a},c.forward=function(a){var b,c,h=a.x,i=a.y,j=d(h-this.long0);Math.abs(i)<=f&&(b=this.x0+this.R*j,c=this.y0);var k=g(2*Math.abs(i/Math.PI));(Math.abs(j)<=f||Math.abs(Math.abs(i)-e)<=f)&&(b=this.x0,c=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*k):this.y0+Math.PI*this.R*-Math.tan(.5*k));var l=.5*Math.abs(Math.PI/j-j/Math.PI),m=l*l,n=Math.sin(k),o=Math.cos(k),p=o/(n+o-1),q=p*p,r=p*(2/n-1),s=r*r,t=Math.PI*this.R*(l*(p-s)+Math.sqrt(m*(p-s)*(p-s)-(s+m)*(q-s)))/(s+m);0>j&&(t=-t),b=this.x0+t;var u=m+p;return t=Math.PI*this.R*(r*u-l*Math.sqrt((s+m)*(m+1)-u*u))/(s+m),c=i>=0?this.y0+t:this.y0-t,a.x=b,a.y=c,a},c.inverse=function(a){var b,c,e,g,h,i,j,k,l,m,n,o,p;return a.x-=this.x0,a.y-=this.y0,n=Math.PI*this.R,e=a.x/n,g=a.y/n,h=e*e+g*g,i=-Math.abs(g)*(1+h),
j=i-2*g*g+e*e,k=-2*i+1+2*g*g+h*h,p=g*g/k+(2*j*j*j/k/k/k-9*i*j/k/k)/27,l=(i-j*j/3/k)/k,m=2*Math.sqrt(-l/3),n=3*p/l/m,Math.abs(n)>1&&(n=n>=0?1:-1),o=Math.acos(n)/3,c=a.y>=0?(-m*Math.cos(o+Math.PI/3)-j/3/k)*Math.PI:-(-m*Math.cos(o+Math.PI/3)-j/3/k)*Math.PI,b=Math.abs(e)<f?this.long0:d(this.long0+Math.PI*(h-1+Math.sqrt(1+2*(e*e-g*g)+h*h))/2/e),a.x=b,a.y=c,a},c.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":5,"../common/asinz":6}],66:[function(a,b,c){var d=.017453292519943295,e=57.29577951308232,f=1,g=2,h=a("./datum_transform"),i=a("./adjust_axis"),j=a("./Proj"),k=a("./common/toPoint");b.exports=function l(a,b,c){function m(a,b){return(a.datum.datum_type===f||a.datum.datum_type===g)&&"WGS84"!==b.datumCode}var n;return Array.isArray(c)&&(c=k(c)),a.datum&&b.datum&&(m(a,b)||m(b,a))&&(n=new j("WGS84"),l(a,n,c),a=n),"enu"!==a.axis&&i(a,!1,c),"longlat"===a.projName?(c.x*=d,c.y*=d):(a.to_meter&&(c.x*=a.to_meter,c.y*=a.to_meter),a.inverse(c)),a.from_greenwich&&(c.x+=a.from_greenwich),c=h(a.datum,b.datum,c),b.from_greenwich&&(c.x-=b.from_greenwich),"longlat"===b.projName?(c.x*=e,c.y*=e):(b.forward(c),b.to_meter&&(c.x/=b.to_meter,c.y/=b.to_meter)),"enu"!==b.axis&&i(b,!0,c),c}},{"./Proj":2,"./adjust_axis":3,"./common/toPoint":23,"./datum_transform":31}],67:[function(a,b,c){function d(a,b,c){a[b]=c.map(function(a){var b={};return e(a,b),b}).reduce(function(a,b){return j(a,b)},{})}function e(a,b){var c;return Array.isArray(a)?(c=a.shift(),"PARAMETER"===c&&(c=a.shift()),1===a.length?Array.isArray(a[0])?(b[c]={},e(a[0],b[c])):b[c]=a[0]:a.length?"TOWGS84"===c?b[c]=a:(b[c]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(c)>-1?(b[c]={name:a[0].toLowerCase(),convert:a[1]},3===a.length&&(b[c].auth=a[2])):"SPHEROID"===c?(b[c]={name:a[0],a:a[1],rf:a[2]},4===a.length&&(b[c].auth=a[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(c)>-1?(a[0]=["name",a[0]],d(b,c,a)):a.every(function(a){return Array.isArray(a)})?d(b,c,a):e(a,b[c])):b[c]=!0,void 0):void(b[a]=!0)}function f(a,b){var c=b[0],d=b[1];!(c in a)&&d in a&&(a[c]=a[d],3===b.length&&(a[c]=b[2](a[c])))}function g(a){return a*i}function h(a){function b(b){var c=a.to_meter||1;return parseFloat(b,10)*c}"GEOGCS"===a.type?a.projName="longlat":"LOCAL_CS"===a.type?(a.projName="identity",a.local=!0):"object"==typeof a.PROJECTION?a.projName=Object.keys(a.PROJECTION)[0]:a.projName=a.PROJECTION,a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),"metre"===a.units&&(a.units="meter"),a.UNIT.convert&&("GEOGCS"===a.type?a.DATUM&&a.DATUM.SPHEROID&&(a.to_meter=parseFloat(a.UNIT.convert,10)*a.DATUM.SPHEROID.a):a.to_meter=parseFloat(a.UNIT.convert,10))),a.GEOGCS&&(a.GEOGCS.DATUM?a.datumCode=a.GEOGCS.DATUM.name.toLowerCase():a.datumCode=a.GEOGCS.name.toLowerCase(),"d_"===a.datumCode.slice(0,2)&&(a.datumCode=a.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==a.datumCode&&"new_zealand_1949"!==a.datumCode||(a.datumCode="nzgd49"),"wgs_1984"===a.datumCode&&("Mercator_Auxiliary_Sphere"===a.PROJECTION&&(a.sphere=!0),a.datumCode="wgs84"),"_ferro"===a.datumCode.slice(-6)&&(a.datumCode=a.datumCode.slice(0,-6)),"_jakarta"===a.datumCode.slice(-8)&&(a.datumCode=a.datumCode.slice(0,-8)),~a.datumCode.indexOf("belge")&&(a.datumCode="rnb72"),a.GEOGCS.DATUM&&a.GEOGCS.DATUM.SPHEROID&&(a.ellps=a.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===a.ellps.toLowerCase().slice(0,13)&&(a.ellps="intl"),a.a=a.GEOGCS.DATUM.SPHEROID.a,a.rf=parseFloat(a.GEOGCS.DATUM.SPHEROID.rf,10)),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36")),a.b&&!isFinite(a.b)&&(a.b=a.a);var c=function(b){return f(a,b)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",g],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",g],["x0","false_easting",b],["y0","false_northing",b],["long0","central_meridian",g],["lat0","latitude_of_origin",g],["lat0","standard_parallel_1",g],["lat1","standard_parallel_1",g],["lat2","standard_parallel_2",g],["alpha","azimuth",g],["srsCode","name"]];d.forEach(c),a.long0||!a.longc||"Albers_Conic_Equal_Area"!==a.projName&&"Lambert_Azimuthal_Equal_Area"!==a.projName||(a.long0=a.longc),a.lat_ts||!a.lat1||"Stereographic_South_Pole"!==a.projName&&"Polar Stereographic (variant B)"!==a.projName||(a.lat0=g(a.lat1>0?90:-90),a.lat_ts=a.lat1)}var i=.017453292519943295,j=a("./extend");b.exports=function(a,b){var c=JSON.parse((","+a).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),d=c.shift(),f=c.shift();c.unshift(["name",f]),c.unshift(["type",d]),c.unshift("output");var g={};return e(c,g),h(g.output),j(b,g.output)}},{"./extend":34}],68:[function(a,b,c){function d(a){return a*(Math.PI/180)}function e(a){return 180*(a/Math.PI)}function f(a){var b,c,e,f,g,i,j,k,l,m=a.lat,n=a.lon,o=6378137,p=.00669438,q=.9996,r=d(m),s=d(n);l=Math.floor((n+180)/6)+1,180===n&&(l=60),m>=56&&64>m&&n>=3&&12>n&&(l=32),m>=72&&84>m&&(n>=0&&9>n?l=31:n>=9&&21>n?l=33:n>=21&&33>n?l=35:n>=33&&42>n&&(l=37)),b=6*(l-1)-180+3,k=d(b),c=p/(1-p),e=o/Math.sqrt(1-p*Math.sin(r)*Math.sin(r)),f=Math.tan(r)*Math.tan(r),g=c*Math.cos(r)*Math.cos(r),i=Math.cos(r)*(s-k),j=o*((1-p/4-3*p*p/64-5*p*p*p/256)*r-(3*p/8+3*p*p/32+45*p*p*p/1024)*Math.sin(2*r)+(15*p*p/256+45*p*p*p/1024)*Math.sin(4*r)-35*p*p*p/3072*Math.sin(6*r));var t=q*e*(i+(1-f+g)*i*i*i/6+(5-18*f+f*f+72*g-58*c)*i*i*i*i*i/120)+5e5,u=q*(j+e*Math.tan(r)*(i*i/2+(5-f+9*g+4*g*g)*i*i*i*i/24+(61-58*f+f*f+600*g-330*c)*i*i*i*i*i*i/720));return 0>m&&(u+=1e7),{northing:Math.round(u),easting:Math.round(t),zoneNumber:l,zoneLetter:h(m)}}function g(a){var b=a.northing,c=a.easting,d=a.zoneLetter,f=a.zoneNumber;if(0>f||f>60)return null;var h,i,j,k,l,m,n,o,p,q,r=.9996,s=6378137,t=.00669438,u=(1-Math.sqrt(1-t))/(1+Math.sqrt(1-t)),v=c-5e5,w=b;"N">d&&(w-=1e7),o=6*(f-1)-180+3,h=t/(1-t),n=w/r,p=n/(s*(1-t/4-3*t*t/64-5*t*t*t/256)),q=p+(3*u/2-27*u*u*u/32)*Math.sin(2*p)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*p)+151*u*u*u/96*Math.sin(6*p),i=s/Math.sqrt(1-t*Math.sin(q)*Math.sin(q)),j=Math.tan(q)*Math.tan(q),k=h*Math.cos(q)*Math.cos(q),l=s*(1-t)/Math.pow(1-t*Math.sin(q)*Math.sin(q),1.5),m=v/(i*r);var x=q-i*Math.tan(q)/l*(m*m/2-(5+3*j+10*k-4*k*k-9*h)*m*m*m*m/24+(61+90*j+298*k+45*j*j-252*h-3*k*k)*m*m*m*m*m*m/720);x=e(x);var y=(m-(1+2*j+k)*m*m*m/6+(5-2*k+28*j-3*k*k+8*h+24*j*j)*m*m*m*m*m/120)/Math.cos(q);y=o+e(y);var z;if(a.accuracy){var A=g({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});z={top:A.lat,right:A.lon,bottom:x,left:y}}else z={lat:x,lon:y};return z}function h(a){var b="Z";return 84>=a&&a>=72?b="X":72>a&&a>=64?b="W":64>a&&a>=56?b="V":56>a&&a>=48?b="U":48>a&&a>=40?b="T":40>a&&a>=32?b="S":32>a&&a>=24?b="R":24>a&&a>=16?b="Q":16>a&&a>=8?b="P":8>a&&a>=0?b="N":0>a&&a>=-8?b="M":-8>a&&a>=-16?b="L":-16>a&&a>=-24?b="K":-24>a&&a>=-32?b="J":-32>a&&a>=-40?b="H":-40>a&&a>=-48?b="G":-48>a&&a>=-56?b="F":-56>a&&a>=-64?b="E":-64>a&&a>=-72?b="D":-72>a&&a>=-80&&(b="C"),b}function i(a,b){var c="00000"+a.easting,d="00000"+a.northing;return a.zoneNumber+a.zoneLetter+j(a.easting,a.northing,a.zoneNumber)+c.substr(c.length-5,b)+d.substr(d.length-5,b)}function j(a,b,c){var d=k(c),e=Math.floor(a/1e5),f=Math.floor(b/1e5)%20;return l(e,f,d)}function k(a){var b=a%q;return 0===b&&(b=q),b}function l(a,b,c){var d=c-1,e=r.charCodeAt(d),f=s.charCodeAt(d),g=e+a-1,h=f+b,i=!1;g>x&&(g=g-x+t-1,i=!0),(g===u||u>e&&g>u||(g>u||u>e)&&i)&&g++,(g===v||v>e&&g>v||(g>v||v>e)&&i)&&(g++,g===u&&g++),g>x&&(g=g-x+t-1),h>w?(h=h-w+t-1,i=!0):i=!1,(h===u||u>f&&h>u||(h>u||u>f)&&i)&&h++,(h===v||v>f&&h>v||(h>v||v>f)&&i)&&(h++,h===u&&h++),h>w&&(h=h-w+t-1);var j=String.fromCharCode(g)+String.fromCharCode(h);return j}function m(a){if(a&&0===a.length)throw"MGRSPoint coverting from nothing";for(var b,c=a.length,d=null,e="",f=0;!/[A-Z]/.test(b=a.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+a;e+=b,f++}var g=parseInt(e,10);if(0===f||f+3>c)throw"MGRSPoint bad conversion from: "+a;var h=a.charAt(f++);if("A">=h||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+a;d=a.substring(f,f+=2);for(var i=k(g),j=n(d.charAt(0),i),l=o(d.charAt(1),i);l<p(h);)l+=2e6;var m=c-f;if(m%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+a;var q,r,s,t,u,v=m/2,w=0,x=0;return v>0&&(q=1e5/Math.pow(10,v),r=a.substring(f,f+v),w=parseFloat(r)*q,s=a.substring(f+v),x=parseFloat(s)*q),t=w+j,u=x+l,{easting:t,northing:u,zoneLetter:h,zoneNumber:g,accuracy:q}}function n(a,b){for(var c=r.charCodeAt(b-1),d=1e5,e=!1;c!==a.charCodeAt(0);){if(c++,c===u&&c++,c===v&&c++,c>x){if(e)throw"Bad character: "+a;c=t,e=!0}d+=1e5}return d}function o(a,b){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var c=s.charCodeAt(b-1),d=0,e=!1;c!==a.charCodeAt(0);){if(c++,c===u&&c++,c===v&&c++,c>w){if(e)throw"Bad character: "+a;c=t,e=!0}d+=1e5}return d}function p(a){var b;switch(a){case"C":b=11e5;break;case"D":b=2e6;break;case"E":b=28e5;break;case"F":b=37e5;break;case"G":b=46e5;break;case"H":b=55e5;break;case"J":b=64e5;break;case"K":b=73e5;break;case"L":b=82e5;break;case"M":b=91e5;break;case"N":b=0;break;case"P":b=8e5;break;case"Q":b=17e5;break;case"R":b=26e5;break;case"S":b=35e5;break;case"T":b=44e5;break;case"U":b=53e5;break;case"V":b=62e5;break;case"W":b=7e6;break;case"X":b=79e5;break;default:b=-1}if(b>=0)return b;throw"Invalid zone letter: "+a}var q=6,r="AJSAJS",s="AFAFAF",t=65,u=73,v=79,w=86,x=90;c.forward=function(a,b){return b=b||5,i(f({lat:a[1],lon:a[0]}),b)},c.inverse=function(a){var b=g(m(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat,b.lon,b.lat]:[b.left,b.bottom,b.right,b.top]},c.toPoint=function(a){var b=g(m(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat]:[(b.left+b.right)/2,(b.top+b.bottom)/2]}},{}],69:[function(a,b,c){b.exports={name:"proj4",version:"2.3.15",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},devDependencies:{"grunt-cli":"~0.1.13",grunt:"~0.4.2","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0",chai:"~1.8.1",mocha:"~1.17.1","grunt-mocha-phantomjs":"~0.4.0",browserify:"~12.0.1","grunt-browserify":"~4.0.1","grunt-contrib-uglify":"~0.11.1",curl:"git://github.com/cujojs/curl.git",istanbul:"~0.2.4",tin:"~0.4.0"},dependencies:{mgrs:"~0.0.2"}}},{}]},{},[36])(36)});

!function(){function n(n){return n&&(n.ownerDocument||n.document||n).documentElement}function t(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function e(n,t){return t>n?-1:n>t?1:n>=t?0:NaN}function r(n){return null===n?NaN:+n}function i(n){return!isNaN(n)}function u(n){return{left:function(t,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var u=r+i>>>1;n(t[u],e)<0?r=u+1:i=u}return r},right:function(t,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var u=r+i>>>1;n(t[u],e)>0?i=u:r=u+1}return r}}}function o(n){return n.length}function a(n){for(var t=1;n*t%1;)t*=10;return t}function l(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function c(){this._=Object.create(null)}function f(n){return(n+="")===bo||n[0]===_o?_o+n:n}function s(n){return(n+="")[0]===_o?n.slice(1):n}function h(n){return f(n)in this._}function p(n){return(n=f(n))in this._&&delete this._[n]}function g(){var n=[];for(var t in this._)n.push(s(t));return n}function v(){var n=0;for(var t in this._)++n;return n}function d(){for(var n in this._)return!1;return!0}function y(){this._=Object.create(null)}function m(n){return n}function M(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function x(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=wo.length;r>e;++e){var i=wo[e]+t;if(i in n)return i}}function b(){}function _(){}function w(n){function t(){for(var t,r=e,i=-1,u=r.length;++i<u;)(t=r[i].on)&&t.apply(this,arguments);return n}var e=[],r=new c;return t.on=function(t,i){var u,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,u=e.indexOf(o)).concat(e.slice(u+1)),r.remove(t)),i&&e.push(r.set(t,{on:i})),n)},t}function S(){ao.event.preventDefault()}function k(){for(var n,t=ao.event;n=t.sourceEvent;)t=n;return t}function N(n){for(var t=new _,e=0,r=arguments.length;++e<r;)t[arguments[e]]=w(t);return t.of=function(e,r){return function(i){try{var u=i.sourceEvent=ao.event;i.target=n,ao.event=i,t[i.type].apply(e,r)}finally{ao.event=u}}},t}function E(n){return ko(n,Co),n}function A(n){return"function"==typeof n?n:function(){return No(n,this)}}function C(n){return"function"==typeof n?n:function(){return Eo(n,this)}}function z(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function i(){this.setAttribute(n,t)}function u(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=ao.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?u:i}function L(n){return n.trim().replace(/\s+/g," ")}function q(n){return new RegExp("(?:^|\\s+)"+ao.requote(n)+"(?:\\s+|$)","g")}function T(n){return(n+"").trim().split(/^|\s+/)}function R(n,t){function e(){for(var e=-1;++e<i;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<i;)n[e](this,r)}n=T(n).map(D);var i=n.length;return"function"==typeof t?r:e}function D(n){var t=q(n);return function(e,r){if(i=e.classList)return r?i.add(n):i.remove(n);var i=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||e.setAttribute("class",L(i+" "+n))):e.setAttribute("class",L(i.replace(t," ")))}}function P(n,t,e){function r(){this.style.removeProperty(n)}function i(){this.style.setProperty(n,t,e)}function u(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?u:i}function U(n,t){function e(){delete this[n]}function r(){this[n]=t}function i(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?i:r}function j(n){function t(){var t=this.ownerDocument,e=this.namespaceURI;return e===zo&&t.documentElement.namespaceURI===zo?t.createElement(n):t.createElementNS(e,n)}function e(){return this.ownerDocument.createElementNS(n.space,n.local)}return"function"==typeof n?n:(n=ao.ns.qualify(n)).local?e:t}function F(){var n=this.parentNode;n&&n.removeChild(this)}function H(n){return{__data__:n}}function O(n){return function(){return Ao(this,n)}}function I(n){return arguments.length||(n=e),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function Y(n,t){for(var e=0,r=n.length;r>e;e++)for(var i,u=n[e],o=0,a=u.length;a>o;o++)(i=u[o])&&t(i,o,e);return n}function Z(n){return ko(n,qo),n}function V(n){var t,e;return function(r,i,u){var o,a=n[u].update,l=a.length;for(u!=e&&(e=u,t=0),i>=t&&(t=i+1);!(o=a[t])&&++t<l;);return o}}function X(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function i(){var i=l(t,co(arguments));r.call(this),this.addEventListener(n,this[o]=i,i.$=e),i._=t}function u(){var t,e=new RegExp("^__on([^.]+)"+ao.requote(n)+"$");for(var r in this)if(t=r.match(e)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),l=$;a>0&&(n=n.slice(0,a));var c=To.get(n);return c&&(n=c,l=B),a?t?i:r:t?b:u}function $(n,t){return function(e){var r=ao.event;ao.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{ao.event=r}}}function B(n,t){var e=$(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function W(e){var r=".dragsuppress-"+ ++Do,i="click"+r,u=ao.select(t(e)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Ro&&(Ro="onselectstart"in e?!1:x(e.style,"userSelect")),Ro){var o=n(e).style,a=o[Ro];o[Ro]="none"}return function(n){if(u.on(r,null),Ro&&(o[Ro]=a),n){var t=function(){u.on(i,null)};u.on(i,function(){S(),t()},!0),setTimeout(t,0)}}}function J(n,e){e.changedTouches&&(e=e.changedTouches[0]);var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>Po){var u=t(n);if(u.scrollX||u.scrollY){r=ao.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Po=!(o.f||o.e),r.remove()}}return Po?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}var a=n.getBoundingClientRect();return[e.clientX-a.left-n.clientLeft,e.clientY-a.top-n.clientTop]}function G(){return ao.event.changedTouches[0].identifier}function K(n){return n>0?1:0>n?-1:0}function Q(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function nn(n){return n>1?0:-1>n?Fo:Math.acos(n)}function tn(n){return n>1?Io:-1>n?-Io:Math.asin(n)}function en(n){return((n=Math.exp(n))-1/n)/2}function rn(n){return((n=Math.exp(n))+1/n)/2}function un(n){return((n=Math.exp(2*n))-1)/(n+1)}function on(n){return(n=Math.sin(n/2))*n}function an(){}function ln(n,t,e){return this instanceof ln?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof ln?new ln(n.h,n.s,n.l):_n(""+n,wn,ln):new ln(n,t,e)}function cn(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?u+(o-u)*n/60:180>n?o:240>n?u+(o-u)*(240-n)/60:u}function i(n){return Math.round(255*r(n))}var u,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,o=.5>=e?e*(1+t):e+t-e*t,u=2*e-o,new mn(i(n+120),i(n),i(n-120))}function fn(n,t,e){return this instanceof fn?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof fn?new fn(n.h,n.c,n.l):n instanceof hn?gn(n.l,n.a,n.b):gn((n=Sn((n=ao.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new fn(n,t,e)}function sn(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new hn(e,Math.cos(n*=Yo)*t,Math.sin(n)*t)}function hn(n,t,e){return this instanceof hn?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof hn?new hn(n.l,n.a,n.b):n instanceof fn?sn(n.h,n.c,n.l):Sn((n=mn(n)).r,n.g,n.b):new hn(n,t,e)}function pn(n,t,e){var r=(n+16)/116,i=r+t/500,u=r-e/200;return i=vn(i)*na,r=vn(r)*ta,u=vn(u)*ea,new mn(yn(3.2404542*i-1.5371385*r-.4985314*u),yn(-.969266*i+1.8760108*r+.041556*u),yn(.0556434*i-.2040259*r+1.0572252*u))}function gn(n,t,e){return n>0?new fn(Math.atan2(e,t)*Zo,Math.sqrt(t*t+e*e),n):new fn(NaN,NaN,n)}function vn(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function dn(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function yn(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function mn(n,t,e){return this instanceof mn?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof mn?new mn(n.r,n.g,n.b):_n(""+n,mn,cn):new mn(n,t,e)}function Mn(n){return new mn(n>>16,n>>8&255,255&n)}function xn(n){return Mn(n)+""}function bn(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function _n(n,t,e){var r,i,u,o=0,a=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(n=n.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Nn(i[0]),Nn(i[1]),Nn(i[2]))}return(u=ua.get(n))?t(u.r,u.g,u.b):(null==n||"#"!==n.charAt(0)||isNaN(u=parseInt(n.slice(1),16))||(4===n.length?(o=(3840&u)>>4,o=o>>4|o,a=240&u,a=a>>4|a,l=15&u,l=l<<4|l):7===n.length&&(o=(16711680&u)>>16,a=(65280&u)>>8,l=255&u)),t(o,a,l))}function wn(n,t,e){var r,i,u=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-u,l=(o+u)/2;return a?(i=.5>l?a/(o+u):a/(2-o-u),r=n==o?(t-e)/a+(e>t?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=NaN,i=l>0&&1>l?0:r),new ln(r,i,l)}function Sn(n,t,e){n=kn(n),t=kn(t),e=kn(e);var r=dn((.4124564*n+.3575761*t+.1804375*e)/na),i=dn((.2126729*n+.7151522*t+.072175*e)/ta),u=dn((.0193339*n+.119192*t+.9503041*e)/ea);return hn(116*i-16,500*(r-i),200*(i-u))}function kn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Nn(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function En(n){return"function"==typeof n?n:function(){return n}}function An(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Cn(t,e,n,r)}}function Cn(n,t,e,r){function i(){var n,t=l.status;if(!t&&Ln(l)||t>=200&&300>t||304===t){try{n=e.call(u,l)}catch(r){return void o.error.call(u,r)}o.load.call(u,n)}else o.error.call(u,l)}var u={},o=ao.dispatch("beforesend","progress","load","error"),a={},l=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(n)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(n){var t=ao.event;ao.event=n;try{o.progress.call(u,l)}finally{ao.event=t}},u.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",u)},u.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",u):t},u.responseType=function(n){return arguments.length?(c=n,u):c},u.response=function(n){return e=n,u},["get","post"].forEach(function(n){u[n]=function(){return u.send.apply(u,[n].concat(co(arguments)))}}),u.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),l.setRequestHeader)for(var f in a)l.setRequestHeader(f,a[f]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=i&&u.on("error",i).on("load",function(n){i(null,n)}),o.beforesend.call(u,l),l.send(null==r?null:r),u},u.abort=function(){return l.abort(),u},ao.rebind(u,o,"on"),null==r?u:u.get(zn(r))}function zn(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function Ln(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function qn(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var i=e+t,u={c:n,t:i,n:null};return aa?aa.n=u:oa=u,aa=u,la||(ca=clearTimeout(ca),la=1,fa(Tn)),u}function Tn(){var n=Rn(),t=Dn()-n;t>24?(isFinite(t)&&(clearTimeout(ca),ca=setTimeout(Tn,t)),la=0):(la=1,fa(Tn))}function Rn(){for(var n=Date.now(),t=oa;t;)n>=t.t&&t.c(n-t.t)&&(t.c=null),t=t.n;return n}function Dn(){for(var n,t=oa,e=1/0;t;)t.c?(t.t<e&&(e=t.t),t=(n=t).n):t=n?n.n=t.n:oa=t.n;return aa=n,e}function Pn(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Un(n,t){var e=Math.pow(10,3*xo(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function jn(n){var t=n.decimal,e=n.thousands,r=n.grouping,i=n.currency,u=r&&e?function(n,t){for(var i=n.length,u=[],o=0,a=r[0],l=0;i>0&&a>0&&(l+a+1>t&&(a=Math.max(1,t-l)),u.push(n.substring(i-=a,i+a)),!((l+=a+1)>t));)a=r[o=(o+1)%r.length];return u.reverse().join(e)}:m;return function(n){var e=ha.exec(n),r=e[1]||" ",o=e[2]||">",a=e[3]||"-",l=e[4]||"",c=e[5],f=+e[6],s=e[7],h=e[8],p=e[9],g=1,v="",d="",y=!1,m=!0;switch(h&&(h=+h.substring(1)),(c||"0"===r&&"="===o)&&(c=r="0",o="="),p){case"n":s=!0,p="g";break;case"%":g=100,d="%",p="f";break;case"p":g=100,d="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(v="0"+p.toLowerCase());case"c":m=!1;case"d":y=!0,h=0;break;case"s":g=-1,p="r"}"$"===l&&(v=i[0],d=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=pa.get(p)||Fn;var M=c&&s;return function(n){var e=d;if(y&&n%1)return"";var i=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===a?"":a;if(0>g){var l=ao.formatPrefix(n,h);n=l.scale(n),e=l.symbol+d}else n*=g;n=p(n,h);var x,b,_=n.lastIndexOf(".");if(0>_){var w=m?n.lastIndexOf("e"):-1;0>w?(x=n,b=""):(x=n.substring(0,w),b=n.substring(w))}else x=n.substring(0,_),b=t+n.substring(_+1);!c&&s&&(x=u(x,1/0));var S=v.length+x.length+b.length+(M?0:i.length),k=f>S?new Array(S=f-S+1).join(r):"";return M&&(x=u(k+x,k.length?f-b.length:1/0)),i+=v,n=x+b,("<"===o?i+n+k:">"===o?k+i+n:"^"===o?k.substring(0,S>>=1)+i+n+k.substring(S):i+(M?n:k+n))+e}}}function Fn(n){return n+""}function Hn(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function On(n,t,e){function r(t){var e=n(t),r=u(e,1);return r-t>t-e?e:r}function i(e){return t(e=n(new va(e-1)),1),e}function u(n,e){return t(n=new va(+n),e),n}function o(n,r,u){var o=i(n),a=[];if(u>1)for(;r>o;)e(o)%u||a.push(new Date(+o)),t(o,1);else for(;r>o;)a.push(new Date(+o)),t(o,1);return a}function a(n,t,e){try{va=Hn;var r=new Hn;return r._=n,o(r,t,e)}finally{va=Date}}n.floor=n,n.round=r,n.ceil=i,n.offset=u,n.range=o;var l=n.utc=In(n);return l.floor=l,l.round=In(r),l.ceil=In(i),l.offset=In(u),l.range=a,n}function In(n){return function(t,e){try{va=Hn;var r=new Hn;return r._=t,n(r,e)._}finally{va=Date}}}function Yn(n){function t(n){function t(t){for(var e,i,u,o=[],a=-1,l=0;++a<r;)37===n.charCodeAt(a)&&(o.push(n.slice(l,a)),null!=(i=ya[e=n.charAt(++a)])&&(e=n.charAt(++a)),(u=A[e])&&(e=u(t,null==i?"e"===e?" ":"0":i)),o.push(e),l=a+1);return o.push(n.slice(l,a)),o.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=e(r,n,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var u=null!=r.Z&&va!==Hn,o=new(u?Hn:va);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),u?o._:o},t.toString=function(){return n},t}function e(n,t,e,r){for(var i,u,o,a=0,l=t.length,c=e.length;l>a;){if(r>=c)return-1;if(i=t.charCodeAt(a++),37===i){if(o=t.charAt(a++),u=C[o in ya?t.charAt(a++):o],!u||(r=u(n,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){_.lastIndex=0;var r=_.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){x.lastIndex=0;var r=x.exec(t.slice(e));return r?(n.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){N.lastIndex=0;var r=N.exec(t.slice(e));return r?(n.m=E.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,r){return e(n,A.c.toString(),t,r)}function l(n,t,r){return e(n,A.x.toString(),t,r)}function c(n,t,r){return e(n,A.X.toString(),t,r)}function f(n,t,e){var r=M.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var s=n.dateTime,h=n.date,p=n.time,g=n.periods,v=n.days,d=n.shortDays,y=n.months,m=n.shortMonths;t.utc=function(n){function e(n){try{va=Hn;var t=new va;return t._=n,r(t)}finally{va=Date}}var r=t(n);return e.parse=function(n){try{va=Hn;var t=r.parse(n);return t&&t._}finally{va=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ct;var M=ao.map(),x=Vn(v),b=Xn(v),_=Vn(d),w=Xn(d),S=Vn(y),k=Xn(y),N=Vn(m),E=Xn(m);g.forEach(function(n,t){M.set(n.toLowerCase(),t)});var A={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return m[n.getMonth()]},B:function(n){return y[n.getMonth()]},c:t(s),d:function(n,t){return Zn(n.getDate(),t,2)},e:function(n,t){return Zn(n.getDate(),t,2)},H:function(n,t){return Zn(n.getHours(),t,2)},I:function(n,t){return Zn(n.getHours()%12||12,t,2)},j:function(n,t){return Zn(1+ga.dayOfYear(n),t,3)},L:function(n,t){return Zn(n.getMilliseconds(),t,3)},m:function(n,t){return Zn(n.getMonth()+1,t,2)},M:function(n,t){return Zn(n.getMinutes(),t,2)},p:function(n){return g[+(n.getHours()>=12)]},S:function(n,t){return Zn(n.getSeconds(),t,2)},U:function(n,t){return Zn(ga.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return Zn(ga.mondayOfYear(n),t,2)},x:t(h),X:t(p),y:function(n,t){return Zn(n.getFullYear()%100,t,2)},Y:function(n,t){return Zn(n.getFullYear()%1e4,t,4)},Z:at,"%":function(){return"%"}},C={a:r,A:i,b:u,B:o,c:a,d:tt,e:tt,H:rt,I:rt,j:et,L:ot,m:nt,M:it,p:f,S:ut,U:Bn,w:$n,W:Wn,x:l,X:c,y:Gn,Y:Jn,Z:Kn,"%":lt};return t}function Zn(n,t,e){var r=0>n?"-":"",i=(r?-n:n)+"",u=i.length;return r+(e>u?new Array(e-u+1).join(t)+i:i)}function Vn(n){return new RegExp("^(?:"+n.map(ao.requote).join("|")+")","i")}function Xn(n){for(var t=new c,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function $n(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Bn(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function Wn(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Jn(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Gn(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.y=Qn(+r[0]),e+r[0].length):-1}function Kn(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Qn(n){return n+(n>68?1900:2e3)}function nt(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function tt(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function et(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function rt(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function it(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function ut(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ot(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function at(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=xo(t)/60|0,i=xo(t)%60;return e+Zn(r,"0",2)+Zn(i,"0",2)}function lt(n,t,e){Ma.lastIndex=0;var r=Ma.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ct(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function ft(){}function st(n,t,e){var r=e.s=n+t,i=r-n,u=r-i;e.t=n-u+(t-i)}function ht(n,t){n&&wa.hasOwnProperty(n.type)&&wa[n.type](n,t)}function pt(n,t,e){var r,i=-1,u=n.length-e;for(t.lineStart();++i<u;)r=n[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function gt(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)pt(n[e],t,1);t.polygonEnd()}function vt(){function n(n,t){n*=Yo,t=t*Yo/2+Fo/4;var e=n-r,o=e>=0?1:-1,a=o*e,l=Math.cos(t),c=Math.sin(t),f=u*c,s=i*l+f*Math.cos(a),h=f*o*Math.sin(a);ka.add(Math.atan2(h,s)),r=n,i=l,u=c}var t,e,r,i,u;Na.point=function(o,a){Na.point=n,r=(t=o)*Yo,i=Math.cos(a=(e=a)*Yo/2+Fo/4),u=Math.sin(a)},Na.lineEnd=function(){n(t,e)}}function dt(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function yt(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function mt(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Mt(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function xt(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function bt(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function _t(n){return[Math.atan2(n[1],n[0]),tn(n[2])]}function wt(n,t){return xo(n[0]-t[0])<Uo&&xo(n[1]-t[1])<Uo}function St(n,t){n*=Yo;var e=Math.cos(t*=Yo);kt(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function kt(n,t,e){++Ea,Ca+=(n-Ca)/Ea,za+=(t-za)/Ea,La+=(e-La)/Ea}function Nt(){function n(n,i){n*=Yo;var u=Math.cos(i*=Yo),o=u*Math.cos(n),a=u*Math.sin(n),l=Math.sin(i),c=Math.atan2(Math.sqrt((c=e*l-r*a)*c+(c=r*o-t*l)*c+(c=t*a-e*o)*c),t*o+e*a+r*l);Aa+=c,qa+=c*(t+(t=o)),Ta+=c*(e+(e=a)),Ra+=c*(r+(r=l)),kt(t,e,r)}var t,e,r;ja.point=function(i,u){i*=Yo;var o=Math.cos(u*=Yo);t=o*Math.cos(i),e=o*Math.sin(i),r=Math.sin(u),ja.point=n,kt(t,e,r)}}function Et(){ja.point=St}function At(){function n(n,t){n*=Yo;var e=Math.cos(t*=Yo),o=e*Math.cos(n),a=e*Math.sin(n),l=Math.sin(t),c=i*l-u*a,f=u*o-r*l,s=r*a-i*o,h=Math.sqrt(c*c+f*f+s*s),p=r*o+i*a+u*l,g=h&&-nn(p)/h,v=Math.atan2(h,p);Da+=g*c,Pa+=g*f,Ua+=g*s,Aa+=v,qa+=v*(r+(r=o)),Ta+=v*(i+(i=a)),Ra+=v*(u+(u=l)),kt(r,i,u)}var t,e,r,i,u;ja.point=function(o,a){t=o,e=a,ja.point=n,o*=Yo;var l=Math.cos(a*=Yo);r=l*Math.cos(o),i=l*Math.sin(o),u=Math.sin(a),kt(r,i,u)},ja.lineEnd=function(){n(t,e),ja.lineEnd=Et,ja.point=St}}function Ct(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function zt(){return!0}function Lt(n,t,e,r,i){var u=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(wt(e,r)){i.lineStart();for(var a=0;t>a;++a)i.point((e=n[a])[0],e[1]);return void i.lineEnd()}var l=new Tt(e,n,null,!0),c=new Tt(e,null,l,!1);l.o=c,u.push(l),o.push(c),l=new Tt(r,n,null,!1),c=new Tt(r,null,l,!0),l.o=c,u.push(l),o.push(c)}}),o.sort(t),qt(u),qt(o),u.length){for(var a=0,l=e,c=o.length;c>a;++a)o[a].e=l=!l;for(var f,s,h=u[0];;){for(var p=h,g=!0;p.v;)if((p=p.n)===h)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(var a=0,c=f.length;c>a;++a)i.point((s=f[a])[0],s[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g){f=p.p.z;for(var a=f.length-1;a>=0;--a)i.point((s=f[a])[0],s[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,g=!g}while(!p.v);i.lineEnd()}}}function qt(n){if(t=n.length){for(var t,e,r=0,i=n[0];++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function Tt(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Rt(n,t,e,r){return function(i,u){function o(t,e){var r=i(t,e);n(t=r[0],e=r[1])&&u.point(t,e)}function a(n,t){var e=i(n,t);d.point(e[0],e[1])}function l(){m.point=a,d.lineStart()}function c(){m.point=o,d.lineEnd()}function f(n,t){v.push([n,t]);var e=i(n,t);x.point(e[0],e[1])}function s(){x.lineStart(),v=[]}function h(){f(v[0][0],v[0][1]),x.lineEnd();var n,t=x.clean(),e=M.buffer(),r=e.length;if(v.pop(),g.push(v),v=null,r)if(1&t){n=e[0];var i,r=n.length-1,o=-1;if(r>0){for(b||(u.polygonStart(),b=!0),u.lineStart();++o<r;)u.point((i=n[o])[0],i[1]);u.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),p.push(e.filter(Dt))}var p,g,v,d=t(u),y=i.invert(r[0],r[1]),m={point:o,lineStart:l,lineEnd:c,polygonStart:function(){m.point=f,m.lineStart=s,m.lineEnd=h,p=[],g=[]},polygonEnd:function(){m.point=o,m.lineStart=l,m.lineEnd=c,p=ao.merge(p);var n=Ot(y,g);p.length?(b||(u.polygonStart(),b=!0),Lt(p,Ut,n,e,u)):n&&(b||(u.polygonStart(),b=!0),u.lineStart(),e(null,null,1,u),u.lineEnd()),b&&(u.polygonEnd(),b=!1),p=g=null},sphere:function(){u.polygonStart(),u.lineStart(),e(null,null,1,u),u.lineEnd(),u.polygonEnd()}},M=Pt(),x=t(M),b=!1;return m}}function Dt(n){return n.length>1}function Pt(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:b,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Ut(n,t){return((n=n.x)[0]<0?n[1]-Io-Uo:Io-n[1])-((t=t.x)[0]<0?t[1]-Io-Uo:Io-t[1])}function jt(n){var t,e=NaN,r=NaN,i=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(u,o){var a=u>0?Fo:-Fo,l=xo(u-e);xo(l-Fo)<Uo?(n.point(e,r=(r+o)/2>0?Io:-Io),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(u,r),t=0):i!==a&&l>=Fo&&(xo(e-i)<Uo&&(e-=i*Uo),xo(u-a)<Uo&&(u-=a*Uo),r=Ft(e,r,u,o),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=u,r=o),i=a},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}}function Ft(n,t,e,r){var i,u,o=Math.sin(n-e);return xo(o)>Uo?Math.atan((Math.sin(t)*(u=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(t))*Math.sin(n))/(i*u*o)):(t+r)/2}function Ht(n,t,e,r){var i;if(null==n)i=e*Io,r.point(-Fo,i),r.point(0,i),r.point(Fo,i),r.point(Fo,0),r.point(Fo,-i),r.point(0,-i),r.point(-Fo,-i),r.point(-Fo,0),r.point(-Fo,i);else if(xo(n[0]-t[0])>Uo){var u=n[0]<t[0]?Fo:-Fo;i=e*u/2,r.point(-u,i),r.point(0,i),r.point(u,i)}else r.point(t[0],t[1])}function Ot(n,t){var e=n[0],r=n[1],i=[Math.sin(e),-Math.cos(e),0],u=0,o=0;ka.reset();for(var a=0,l=t.length;l>a;++a){var c=t[a],f=c.length;if(f)for(var s=c[0],h=s[0],p=s[1]/2+Fo/4,g=Math.sin(p),v=Math.cos(p),d=1;;){d===f&&(d=0),n=c[d];var y=n[0],m=n[1]/2+Fo/4,M=Math.sin(m),x=Math.cos(m),b=y-h,_=b>=0?1:-1,w=_*b,S=w>Fo,k=g*M;if(ka.add(Math.atan2(k*_*Math.sin(w),v*x+k*Math.cos(w))),u+=S?b+_*Ho:b,S^h>=e^y>=e){var N=mt(dt(s),dt(n));bt(N);var E=mt(i,N);bt(E);var A=(S^b>=0?-1:1)*tn(E[2]);(r>A||r===A&&(N[0]||N[1]))&&(o+=S^b>=0?1:-1)}if(!d++)break;h=y,g=M,v=x,s=n}}return(-Uo>u||Uo>u&&-Uo>ka)^1&o}function It(n){function t(n,t){return Math.cos(n)*Math.cos(t)>u}function e(n){var e,u,l,c,f;return{lineStart:function(){c=l=!1,f=1},point:function(s,h){var p,g=[s,h],v=t(s,h),d=o?v?0:i(s,h):v?i(s+(0>s?Fo:-Fo),h):0;if(!e&&(c=l=v)&&n.lineStart(),v!==l&&(p=r(e,g),(wt(e,p)||wt(g,p))&&(g[0]+=Uo,g[1]+=Uo,v=t(g[0],g[1]))),v!==l)f=0,v?(n.lineStart(),p=r(g,e),n.point(p[0],p[1])):(p=r(e,g),n.point(p[0],p[1]),n.lineEnd()),e=p;else if(a&&e&&o^v){var y;d&u||!(y=r(g,e,!0))||(f=0,o?(n.lineStart(),n.point(y[0][0],y[0][1]),n.point(y[1][0],y[1][1]),n.lineEnd()):(n.point(y[1][0],y[1][1]),n.lineEnd(),n.lineStart(),n.point(y[0][0],y[0][1])))}!v||e&&wt(e,g)||n.point(g[0],g[1]),e=g,l=v,u=d},lineEnd:function(){l&&n.lineEnd(),e=null},clean:function(){return f|(c&&l)<<1}}}function r(n,t,e){var r=dt(n),i=dt(t),o=[1,0,0],a=mt(r,i),l=yt(a,a),c=a[0],f=l-c*c;if(!f)return!e&&n;var s=u*l/f,h=-u*c/f,p=mt(o,a),g=xt(o,s),v=xt(a,h);Mt(g,v);var d=p,y=yt(g,d),m=yt(d,d),M=y*y-m*(yt(g,g)-1);if(!(0>M)){var x=Math.sqrt(M),b=xt(d,(-y-x)/m);if(Mt(b,g),b=_t(b),!e)return b;var _,w=n[0],S=t[0],k=n[1],N=t[1];w>S&&(_=w,w=S,S=_);var E=S-w,A=xo(E-Fo)<Uo,C=A||Uo>E;if(!A&&k>N&&(_=k,k=N,N=_),C?A?k+N>0^b[1]<(xo(b[0]-w)<Uo?k:N):k<=b[1]&&b[1]<=N:E>Fo^(w<=b[0]&&b[0]<=S)){var z=xt(d,(-y+x)/m);return Mt(z,g),[b,_t(z)]}}}function i(t,e){var r=o?n:Fo-n,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>e?i|=4:e>r&&(i|=8),i}var u=Math.cos(n),o=u>0,a=xo(u)>Uo,l=ve(n,6*Yo);return Rt(t,e,l,o?[0,-n]:[-Fo,n-Fo])}function Yt(n,t,e,r){return function(i){var u,o=i.a,a=i.b,l=o.x,c=o.y,f=a.x,s=a.y,h=0,p=1,g=f-l,v=s-c;if(u=n-l,g||!(u>0)){if(u/=g,0>g){if(h>u)return;p>u&&(p=u)}else if(g>0){if(u>p)return;u>h&&(h=u)}if(u=e-l,g||!(0>u)){if(u/=g,0>g){if(u>p)return;u>h&&(h=u)}else if(g>0){if(h>u)return;p>u&&(p=u)}if(u=t-c,v||!(u>0)){if(u/=v,0>v){if(h>u)return;p>u&&(p=u)}else if(v>0){if(u>p)return;u>h&&(h=u)}if(u=r-c,v||!(0>u)){if(u/=v,0>v){if(u>p)return;u>h&&(h=u)}else if(v>0){if(h>u)return;p>u&&(p=u)}return h>0&&(i.a={x:l+h*g,y:c+h*v}),1>p&&(i.b={x:l+p*g,y:c+p*v}),i}}}}}}function Zt(n,t,e,r){function i(r,i){return xo(r[0]-n)<Uo?i>0?0:3:xo(r[0]-e)<Uo?i>0?2:1:xo(r[1]-t)<Uo?i>0?1:0:i>0?3:2}function u(n,t){return o(n.x,t.x)}function o(n,t){var e=i(n,1),r=i(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function l(n){for(var t=0,e=d.length,r=n[1],i=0;e>i;++i)for(var u,o=1,a=d[i],l=a.length,c=a[0];l>o;++o)u=a[o],c[1]<=r?u[1]>r&&Q(c,u,n)>0&&++t:u[1]<=r&&Q(c,u,n)<0&&--t,c=u;return 0!==t}function c(u,a,l,c){var f=0,s=0;if(null==u||(f=i(u,l))!==(s=i(a,l))||o(u,a)<0^l>0){do c.point(0===f||3===f?n:e,f>1?r:t);while((f=(f+l+4)%4)!==s)}else c.point(a[0],a[1])}function f(i,u){return i>=n&&e>=i&&u>=t&&r>=u}function s(n,t){f(n,t)&&a.point(n,t)}function h(){C.point=g,d&&d.push(y=[]),S=!0,w=!1,b=_=NaN}function p(){v&&(g(m,M),x&&w&&E.rejoin(),v.push(E.buffer())),C.point=s,w&&a.lineEnd()}function g(n,t){n=Math.max(-Ha,Math.min(Ha,n)),t=Math.max(-Ha,Math.min(Ha,t));var e=f(n,t);if(d&&y.push([n,t]),S)m=n,M=t,x=e,S=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&w)a.point(n,t);else{var r={a:{x:b,y:_},b:{x:n,y:t}};A(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),k=!1):e&&(a.lineStart(),a.point(n,t),k=!1)}b=n,_=t,w=e}var v,d,y,m,M,x,b,_,w,S,k,N=a,E=Pt(),A=Yt(n,t,e,r),C={point:s,lineStart:h,lineEnd:p,polygonStart:function(){a=E,v=[],d=[],k=!0},polygonEnd:function(){a=N,v=ao.merge(v);var t=l([n,r]),e=k&&t,i=v.length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),c(null,null,1,a),a.lineEnd()),i&&Lt(v,u,t,c,a),a.polygonEnd()),v=d=y=null}};return C}}function Vt(n){var t=0,e=Fo/3,r=ae(n),i=r(t,e);return i.parallels=function(n){return arguments.length?r(t=n[0]*Fo/180,e=n[1]*Fo/180):[t/Fo*180,e/Fo*180]},i}function Xt(n,t){function e(n,t){var e=Math.sqrt(u-2*i*Math.sin(t))/i;return[e*Math.sin(n*=i),o-e*Math.cos(n)]}var r=Math.sin(n),i=(r+Math.sin(t))/2,u=1+r*(2*i-r),o=Math.sqrt(u)/i;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/i,tn((u-(n*n+e*e)*i*i)/(2*i))]},e}function $t(){function n(n,t){Ia+=i*n-r*t,r=n,i=t}var t,e,r,i;$a.point=function(u,o){$a.point=n,t=r=u,e=i=o},$a.lineEnd=function(){n(t,e)}}function Bt(n,t){Ya>n&&(Ya=n),n>Va&&(Va=n),Za>t&&(Za=t),t>Xa&&(Xa=t)}function Wt(){function n(n,t){o.push("M",n,",",t,u)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function i(){o.push("Z")}var u=Jt(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return u=Jt(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function Jt(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Gt(n,t){Ca+=n,za+=t,++La}function Kt(){function n(n,r){var i=n-t,u=r-e,o=Math.sqrt(i*i+u*u);qa+=o*(t+n)/2,Ta+=o*(e+r)/2,Ra+=o,Gt(t=n,e=r)}var t,e;Wa.point=function(r,i){Wa.point=n,Gt(t=r,e=i)}}function Qt(){Wa.point=Gt}function ne(){function n(n,t){var e=n-r,u=t-i,o=Math.sqrt(e*e+u*u);qa+=o*(r+n)/2,Ta+=o*(i+t)/2,Ra+=o,o=i*n-r*t,Da+=o*(r+n),Pa+=o*(i+t),Ua+=3*o,Gt(r=n,i=t)}var t,e,r,i;Wa.point=function(u,o){Wa.point=n,Gt(t=r=u,e=i=o)},Wa.lineEnd=function(){n(t,e)}}function te(n){function t(t,e){n.moveTo(t+o,e),n.arc(t,e,o,0,Ho)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function i(){a.point=t}function u(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:i,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=i,a.point=t},pointRadius:function(n){return o=n,a},result:b};return a}function ee(n){function t(n){return(a?r:e)(n)}function e(t){return ue(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){M=NaN,S.point=u,t.lineStart()}function u(e,r){var u=dt([e,r]),o=n(e,r);i(M,x,m,b,_,w,M=o[0],x=o[1],m=e,b=u[0],_=u[1],w=u[2],a,t),t.point(M,x)}function o(){S.point=e,t.lineEnd()}function l(){
r(),S.point=c,S.lineEnd=f}function c(n,t){u(s=n,h=t),p=M,g=x,v=b,d=_,y=w,S.point=u}function f(){i(M,x,m,b,_,w,p,g,s,v,d,y,a,t),S.lineEnd=o,o()}var s,h,p,g,v,d,y,m,M,x,b,_,w,S={point:e,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=l},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function i(t,e,r,a,l,c,f,s,h,p,g,v,d,y){var m=f-t,M=s-e,x=m*m+M*M;if(x>4*u&&d--){var b=a+p,_=l+g,w=c+v,S=Math.sqrt(b*b+_*_+w*w),k=Math.asin(w/=S),N=xo(xo(w)-1)<Uo||xo(r-h)<Uo?(r+h)/2:Math.atan2(_,b),E=n(N,k),A=E[0],C=E[1],z=A-t,L=C-e,q=M*z-m*L;(q*q/x>u||xo((m*z+M*L)/x-.5)>.3||o>a*p+l*g+c*v)&&(i(t,e,r,a,l,c,A,C,N,b/=S,_/=S,w,d,y),y.point(A,C),i(A,C,N,b,_,w,f,s,h,p,g,v,d,y))}}var u=.5,o=Math.cos(30*Yo),a=16;return t.precision=function(n){return arguments.length?(a=(u=n*n)>0&&16,t):Math.sqrt(u)},t}function re(n){var t=ee(function(t,e){return n([t*Zo,e*Zo])});return function(n){return le(t(n))}}function ie(n){this.stream=n}function ue(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function oe(n){return ae(function(){return n})()}function ae(n){function t(n){return n=a(n[0]*Yo,n[1]*Yo),[n[0]*h+l,c-n[1]*h]}function e(n){return n=a.invert((n[0]-l)/h,(c-n[1])/h),n&&[n[0]*Zo,n[1]*Zo]}function r(){a=Ct(o=se(y,M,x),u);var n=u(v,d);return l=p-n[0]*h,c=g+n[1]*h,i()}function i(){return f&&(f.valid=!1,f=null),t}var u,o,a,l,c,f,s=ee(function(n,t){return n=u(n,t),[n[0]*h+l,c-n[1]*h]}),h=150,p=480,g=250,v=0,d=0,y=0,M=0,x=0,b=Fa,_=m,w=null,S=null;return t.stream=function(n){return f&&(f.valid=!1),f=le(b(o,s(_(n)))),f.valid=!0,f},t.clipAngle=function(n){return arguments.length?(b=null==n?(w=n,Fa):It((w=+n)*Yo),i()):w},t.clipExtent=function(n){return arguments.length?(S=n,_=n?Zt(n[0][0],n[0][1],n[1][0],n[1][1]):m,i()):S},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(p=+n[0],g=+n[1],r()):[p,g]},t.center=function(n){return arguments.length?(v=n[0]%360*Yo,d=n[1]%360*Yo,r()):[v*Zo,d*Zo]},t.rotate=function(n){return arguments.length?(y=n[0]%360*Yo,M=n[1]%360*Yo,x=n.length>2?n[2]%360*Yo:0,r()):[y*Zo,M*Zo,x*Zo]},ao.rebind(t,s,"precision"),function(){return u=n.apply(this,arguments),t.invert=u.invert&&e,r()}}function le(n){return ue(n,function(t,e){n.point(t*Yo,e*Yo)})}function ce(n,t){return[n,t]}function fe(n,t){return[n>Fo?n-Ho:-Fo>n?n+Ho:n,t]}function se(n,t,e){return n?t||e?Ct(pe(n),ge(t,e)):pe(n):t||e?ge(t,e):fe}function he(n){return function(t,e){return t+=n,[t>Fo?t-Ho:-Fo>t?t+Ho:t,e]}}function pe(n){var t=he(n);return t.invert=he(-n),t}function ge(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),f=c*r+a*i;return[Math.atan2(l*u-f*o,a*r-c*i),tn(f*u+l*o)]}var r=Math.cos(n),i=Math.sin(n),u=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),f=c*u-l*o;return[Math.atan2(l*u+c*o,a*r+f*i),tn(f*r-a*i)]},e}function ve(n,t){var e=Math.cos(n),r=Math.sin(n);return function(i,u,o,a){var l=o*t;null!=i?(i=de(e,i),u=de(e,u),(o>0?u>i:i>u)&&(i+=o*Ho)):(i=n+o*Ho,u=n-.5*l);for(var c,f=i;o>0?f>u:u>f;f-=l)a.point((c=_t([e,-r*Math.cos(f),-r*Math.sin(f)]))[0],c[1])}}function de(n,t){var e=dt(t);e[0]-=n,bt(e);var r=nn(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Uo)%(2*Math.PI)}function ye(n,t,e){var r=ao.range(n,t-Uo,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function me(n,t,e){var r=ao.range(n,t-Uo,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function Me(n){return n.source}function xe(n){return n.target}function be(n,t,e,r){var i=Math.cos(t),u=Math.sin(t),o=Math.cos(r),a=Math.sin(r),l=i*Math.cos(n),c=i*Math.sin(n),f=o*Math.cos(e),s=o*Math.sin(e),h=2*Math.asin(Math.sqrt(on(r-t)+i*o*on(e-n))),p=1/Math.sin(h),g=h?function(n){var t=Math.sin(n*=h)*p,e=Math.sin(h-n)*p,r=e*l+t*f,i=e*c+t*s,o=e*u+t*a;return[Math.atan2(i,r)*Zo,Math.atan2(o,Math.sqrt(r*r+i*i))*Zo]}:function(){return[n*Zo,t*Zo]};return g.distance=h,g}function _e(){function n(n,i){var u=Math.sin(i*=Yo),o=Math.cos(i),a=xo((n*=Yo)-t),l=Math.cos(a);Ja+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*u-e*o*l)*a),e*u+r*o*l),t=n,e=u,r=o}var t,e,r;Ga.point=function(i,u){t=i*Yo,e=Math.sin(u*=Yo),r=Math.cos(u),Ga.point=n},Ga.lineEnd=function(){Ga.point=Ga.lineEnd=b}}function we(n,t){function e(t,e){var r=Math.cos(t),i=Math.cos(e),u=n(r*i);return[u*i*Math.sin(t),u*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),i=t(r),u=Math.sin(i),o=Math.cos(i);return[Math.atan2(n*u,r*o),Math.asin(r&&e*u/r)]},e}function Se(n,t){function e(n,t){o>0?-Io+Uo>t&&(t=-Io+Uo):t>Io-Uo&&(t=Io-Uo);var e=o/Math.pow(i(t),u);return[e*Math.sin(u*n),o-e*Math.cos(u*n)]}var r=Math.cos(n),i=function(n){return Math.tan(Fo/4+n/2)},u=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(i(t)/i(n)),o=r*Math.pow(i(n),u)/u;return u?(e.invert=function(n,t){var e=o-t,r=K(u)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/u,2*Math.atan(Math.pow(o/r,1/u))-Io]},e):Ne}function ke(n,t){function e(n,t){var e=u-t;return[e*Math.sin(i*n),u-e*Math.cos(i*n)]}var r=Math.cos(n),i=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),u=r/i+n;return xo(i)<Uo?ce:(e.invert=function(n,t){var e=u-t;return[Math.atan2(n,e)/i,u-K(i)*Math.sqrt(n*n+e*e)]},e)}function Ne(n,t){return[n,Math.log(Math.tan(Fo/4+t/2))]}function Ee(n){var t,e=oe(n),r=e.scale,i=e.translate,u=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=i.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=u.apply(e,arguments);if(o===e){if(t=null==n){var a=Fo*r(),l=i();u([[l[0]-a,l[1]-a],[l[0]+a,l[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function Ae(n,t){return[Math.log(Math.tan(Fo/4+t/2)),-n]}function Ce(n){return n[0]}function ze(n){return n[1]}function Le(n){for(var t=n.length,e=[0,1],r=2,i=2;t>i;i++){for(;r>1&&Q(n[e[r-2]],n[e[r-1]],n[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function qe(n,t){return n[0]-t[0]||n[1]-t[1]}function Te(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Re(n,t,e,r){var i=n[0],u=e[0],o=t[0]-i,a=r[0]-u,l=n[1],c=e[1],f=t[1]-l,s=r[1]-c,h=(a*(l-c)-s*(i-u))/(s*o-a*f);return[i+h*o,l+h*f]}function De(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Pe(){rr(this),this.edge=this.site=this.circle=null}function Ue(n){var t=cl.pop()||new Pe;return t.site=n,t}function je(n){Be(n),ol.remove(n),cl.push(n),rr(n)}function Fe(n){var t=n.circle,e=t.x,r=t.cy,i={x:e,y:r},u=n.P,o=n.N,a=[n];je(n);for(var l=u;l.circle&&xo(e-l.circle.x)<Uo&&xo(r-l.circle.cy)<Uo;)u=l.P,a.unshift(l),je(l),l=u;a.unshift(l),Be(l);for(var c=o;c.circle&&xo(e-c.circle.x)<Uo&&xo(r-c.circle.cy)<Uo;)o=c.N,a.push(c),je(c),c=o;a.push(c),Be(c);var f,s=a.length;for(f=1;s>f;++f)c=a[f],l=a[f-1],nr(c.edge,l.site,c.site,i);l=a[0],c=a[s-1],c.edge=Ke(l.site,c.site,null,i),$e(l),$e(c)}function He(n){for(var t,e,r,i,u=n.x,o=n.y,a=ol._;a;)if(r=Oe(a,o)-u,r>Uo)a=a.L;else{if(i=u-Ie(a,o),!(i>Uo)){r>-Uo?(t=a.P,e=a):i>-Uo?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var l=Ue(n);if(ol.insert(t,l),t||e){if(t===e)return Be(t),e=Ue(t.site),ol.insert(l,e),l.edge=e.edge=Ke(t.site,l.site),$e(t),void $e(e);if(!e)return void(l.edge=Ke(t.site,l.site));Be(t),Be(e);var c=t.site,f=c.x,s=c.y,h=n.x-f,p=n.y-s,g=e.site,v=g.x-f,d=g.y-s,y=2*(h*d-p*v),m=h*h+p*p,M=v*v+d*d,x={x:(d*m-p*M)/y+f,y:(h*M-v*m)/y+s};nr(e.edge,c,g,x),l.edge=Ke(c,n,null,x),e.edge=Ke(n,g,null,x),$e(t),$e(e)}}function Oe(n,t){var e=n.site,r=e.x,i=e.y,u=i-t;if(!u)return r;var o=n.P;if(!o)return-(1/0);e=o.site;var a=e.x,l=e.y,c=l-t;if(!c)return a;var f=a-r,s=1/u-1/c,h=f/c;return s?(-h+Math.sqrt(h*h-2*s*(f*f/(-2*c)-l+c/2+i-u/2)))/s+r:(r+a)/2}function Ie(n,t){var e=n.N;if(e)return Oe(e,t);var r=n.site;return r.y===t?r.x:1/0}function Ye(n){this.site=n,this.edges=[]}function Ze(n){for(var t,e,r,i,u,o,a,l,c,f,s=n[0][0],h=n[1][0],p=n[0][1],g=n[1][1],v=ul,d=v.length;d--;)if(u=v[d],u&&u.prepare())for(a=u.edges,l=a.length,o=0;l>o;)f=a[o].end(),r=f.x,i=f.y,c=a[++o%l].start(),t=c.x,e=c.y,(xo(r-t)>Uo||xo(i-e)>Uo)&&(a.splice(o,0,new tr(Qe(u.site,f,xo(r-s)<Uo&&g-i>Uo?{x:s,y:xo(t-s)<Uo?e:g}:xo(i-g)<Uo&&h-r>Uo?{x:xo(e-g)<Uo?t:h,y:g}:xo(r-h)<Uo&&i-p>Uo?{x:h,y:xo(t-h)<Uo?e:p}:xo(i-p)<Uo&&r-s>Uo?{x:xo(e-p)<Uo?t:s,y:p}:null),u.site,null)),++l)}function Ve(n,t){return t.angle-n.angle}function Xe(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function $e(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,i=n.site,u=e.site;if(r!==u){var o=i.x,a=i.y,l=r.x-o,c=r.y-a,f=u.x-o,s=u.y-a,h=2*(l*s-c*f);if(!(h>=-jo)){var p=l*l+c*c,g=f*f+s*s,v=(s*p-c*g)/h,d=(l*g-f*p)/h,s=d+a,y=fl.pop()||new Xe;y.arc=n,y.site=i,y.x=v+o,y.y=s+Math.sqrt(v*v+d*d),y.cy=s,n.circle=y;for(var m=null,M=ll._;M;)if(y.y<M.y||y.y===M.y&&y.x<=M.x){if(!M.L){m=M.P;break}M=M.L}else{if(!M.R){m=M;break}M=M.R}ll.insert(m,y),m||(al=y)}}}}function Be(n){var t=n.circle;t&&(t.P||(al=t.N),ll.remove(t),fl.push(t),rr(t),n.circle=null)}function We(n){for(var t,e=il,r=Yt(n[0][0],n[0][1],n[1][0],n[1][1]),i=e.length;i--;)t=e[i],(!Je(t,n)||!r(t)||xo(t.a.x-t.b.x)<Uo&&xo(t.a.y-t.b.y)<Uo)&&(t.a=t.b=null,e.splice(i,1))}function Je(n,t){var e=n.b;if(e)return!0;var r,i,u=n.a,o=t[0][0],a=t[1][0],l=t[0][1],c=t[1][1],f=n.l,s=n.r,h=f.x,p=f.y,g=s.x,v=s.y,d=(h+g)/2,y=(p+v)/2;if(v===p){if(o>d||d>=a)return;if(h>g){if(u){if(u.y>=c)return}else u={x:d,y:l};e={x:d,y:c}}else{if(u){if(u.y<l)return}else u={x:d,y:c};e={x:d,y:l}}}else if(r=(h-g)/(v-p),i=y-r*d,-1>r||r>1)if(h>g){if(u){if(u.y>=c)return}else u={x:(l-i)/r,y:l};e={x:(c-i)/r,y:c}}else{if(u){if(u.y<l)return}else u={x:(c-i)/r,y:c};e={x:(l-i)/r,y:l}}else if(v>p){if(u){if(u.x>=a)return}else u={x:o,y:r*o+i};e={x:a,y:r*a+i}}else{if(u){if(u.x<o)return}else u={x:a,y:r*a+i};e={x:o,y:r*o+i}}return n.a=u,n.b=e,!0}function Ge(n,t){this.l=n,this.r=t,this.a=this.b=null}function Ke(n,t,e,r){var i=new Ge(n,t);return il.push(i),e&&nr(i,n,t,e),r&&nr(i,t,n,r),ul[n.i].edges.push(new tr(i,n,t)),ul[t.i].edges.push(new tr(i,t,n)),i}function Qe(n,t,e){var r=new Ge(n,null);return r.a=t,r.b=e,il.push(r),r}function nr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function tr(n,t,e){var r=n.a,i=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function er(){this._=null}function rr(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function ir(n,t){var e=t,r=t.R,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ur(n,t){var e=t,r=t.L,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function or(n){for(;n.L;)n=n.L;return n}function ar(n,t){var e,r,i,u=n.sort(lr).pop();for(il=[],ul=new Array(n.length),ol=new er,ll=new er;;)if(i=al,u&&(!i||u.y<i.y||u.y===i.y&&u.x<i.x))u.x===e&&u.y===r||(ul[u.i]=new Ye(u),He(u),e=u.x,r=u.y),u=n.pop();else{if(!i)break;Fe(i.arc)}t&&(We(t),Ze(t));var o={cells:ul,edges:il};return ol=ll=il=ul=null,o}function lr(n,t){return t.y-n.y||t.x-n.x}function cr(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function fr(n){return n.x}function sr(n){return n.y}function hr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function pr(n,t,e,r,i,u){if(!n(t,e,r,i,u)){var o=.5*(e+i),a=.5*(r+u),l=t.nodes;l[0]&&pr(n,l[0],e,r,o,a),l[1]&&pr(n,l[1],o,r,i,a),l[2]&&pr(n,l[2],e,a,o,u),l[3]&&pr(n,l[3],o,a,i,u)}}function gr(n,t,e,r,i,u,o){var a,l=1/0;return function c(n,f,s,h,p){if(!(f>u||s>o||r>h||i>p)){if(g=n.point){var g,v=t-n.x,d=e-n.y,y=v*v+d*d;if(l>y){var m=Math.sqrt(l=y);r=t-m,i=e-m,u=t+m,o=e+m,a=g}}for(var M=n.nodes,x=.5*(f+h),b=.5*(s+p),_=t>=x,w=e>=b,S=w<<1|_,k=S+4;k>S;++S)if(n=M[3&S])switch(3&S){case 0:c(n,f,s,x,b);break;case 1:c(n,x,s,h,b);break;case 2:c(n,f,b,x,p);break;case 3:c(n,x,b,h,p)}}}(n,r,i,u,o),a}function vr(n,t){n=ao.rgb(n),t=ao.rgb(t);var e=n.r,r=n.g,i=n.b,u=t.r-e,o=t.g-r,a=t.b-i;return function(n){return"#"+bn(Math.round(e+u*n))+bn(Math.round(r+o*n))+bn(Math.round(i+a*n))}}function dr(n,t){var e,r={},i={};for(e in n)e in t?r[e]=Mr(n[e],t[e]):i[e]=n[e];for(e in t)e in n||(i[e]=t[e]);return function(n){for(e in r)i[e]=r[e](n);return i}}function yr(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function mr(n,t){var e,r,i,u=hl.lastIndex=pl.lastIndex=0,o=-1,a=[],l=[];for(n+="",t+="";(e=hl.exec(n))&&(r=pl.exec(t));)(i=r.index)>u&&(i=t.slice(u,i),a[o]?a[o]+=i:a[++o]=i),(e=e[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:yr(e,r)})),u=pl.lastIndex;return u<t.length&&(i=t.slice(u),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?(t=l[0].x,function(n){return t(n)+""}):function(){return t}:(t=l.length,function(n){for(var e,r=0;t>r;++r)a[(e=l[r]).i]=e.x(n);return a.join("")})}function Mr(n,t){for(var e,r=ao.interpolators.length;--r>=0&&!(e=ao.interpolators[r](n,t)););return e}function xr(n,t){var e,r=[],i=[],u=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;a>e;++e)r.push(Mr(n[e],t[e]));for(;u>e;++e)i[e]=n[e];for(;o>e;++e)i[e]=t[e];return function(n){for(e=0;a>e;++e)i[e]=r[e](n);return i}}function br(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function _r(n){return function(t){return 1-n(1-t)}}function wr(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function Sr(n){return n*n}function kr(n){return n*n*n}function Nr(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function Er(n){return function(t){return Math.pow(t,n)}}function Ar(n){return 1-Math.cos(n*Io)}function Cr(n){return Math.pow(2,10*(n-1))}function zr(n){return 1-Math.sqrt(1-n*n)}function Lr(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/Ho*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*Ho/t)}}function qr(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function Tr(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Rr(n,t){n=ao.hcl(n),t=ao.hcl(t);var e=n.h,r=n.c,i=n.l,u=t.h-e,o=t.c-r,a=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(u)?(u=0,e=isNaN(e)?t.h:e):u>180?u-=360:-180>u&&(u+=360),function(n){return sn(e+u*n,r+o*n,i+a*n)+""}}function Dr(n,t){n=ao.hsl(n),t=ao.hsl(t);var e=n.h,r=n.s,i=n.l,u=t.h-e,o=t.s-r,a=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(u)?(u=0,e=isNaN(e)?t.h:e):u>180?u-=360:-180>u&&(u+=360),function(n){return cn(e+u*n,r+o*n,i+a*n)+""}}function Pr(n,t){n=ao.lab(n),t=ao.lab(t);var e=n.l,r=n.a,i=n.b,u=t.l-e,o=t.a-r,a=t.b-i;return function(n){return pn(e+u*n,r+o*n,i+a*n)+""}}function Ur(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function jr(n){var t=[n.a,n.b],e=[n.c,n.d],r=Hr(t),i=Fr(t,e),u=Hr(Or(e,t,-i))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Zo,this.translate=[n.e,n.f],this.scale=[r,u],this.skew=u?Math.atan2(i,u)*Zo:0}function Fr(n,t){return n[0]*t[0]+n[1]*t[1]}function Hr(n){var t=Math.sqrt(Fr(n,n));return t&&(n[0]/=t,n[1]/=t),t}function Or(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Ir(n){return n.length?n.pop()+",":""}function Yr(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var i=e.push("translate(",null,",",null,")");r.push({i:i-4,x:yr(n[0],t[0])},{i:i-2,x:yr(n[1],t[1])})}else(t[0]||t[1])&&e.push("translate("+t+")")}function Zr(n,t,e,r){n!==t?(n-t>180?t+=360:t-n>180&&(n+=360),r.push({i:e.push(Ir(e)+"rotate(",null,")")-2,x:yr(n,t)})):t&&e.push(Ir(e)+"rotate("+t+")")}function Vr(n,t,e,r){n!==t?r.push({i:e.push(Ir(e)+"skewX(",null,")")-2,x:yr(n,t)}):t&&e.push(Ir(e)+"skewX("+t+")")}function Xr(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var i=e.push(Ir(e)+"scale(",null,",",null,")");r.push({i:i-4,x:yr(n[0],t[0])},{i:i-2,x:yr(n[1],t[1])})}else 1===t[0]&&1===t[1]||e.push(Ir(e)+"scale("+t+")")}function $r(n,t){var e=[],r=[];return n=ao.transform(n),t=ao.transform(t),Yr(n.translate,t.translate,e,r),Zr(n.rotate,t.rotate,e,r),Vr(n.skew,t.skew,e,r),Xr(n.scale,t.scale,e,r),n=t=null,function(n){for(var t,i=-1,u=r.length;++i<u;)e[(t=r[i]).i]=t.x(n);return e.join("")}}function Br(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Wr(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Jr(n){for(var t=n.source,e=n.target,r=Kr(t,e),i=[t];t!==r;)t=t.parent,i.push(t);for(var u=i.length;e!==r;)i.splice(u,0,e),e=e.parent;return i}function Gr(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Kr(n,t){if(n===t)return n;for(var e=Gr(n),r=Gr(t),i=e.pop(),u=r.pop(),o=null;i===u;)o=i,i=e.pop(),u=r.pop();return o}function Qr(n){n.fixed|=2}function ni(n){n.fixed&=-7}function ti(n){n.fixed|=4,n.px=n.x,n.py=n.y}function ei(n){n.fixed&=-5}function ri(n,t,e){var r=0,i=0;if(n.charge=0,!n.leaf)for(var u,o=n.nodes,a=o.length,l=-1;++l<a;)u=o[l],null!=u&&(ri(u,t,e),n.charge+=u.charge,r+=u.charge*u.cx,i+=u.charge*u.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var c=t*e[n.point.index];n.charge+=n.pointCharge=c,r+=c*n.point.x,i+=c*n.point.y}n.cx=r/n.charge,n.cy=i/n.charge}function ii(n,t){return ao.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=fi,n}function ui(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(i=n.children)&&(r=i.length))for(var r,i;--r>=0;)e.push(i[r])}function oi(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(u=n.children)&&(i=u.length))for(var i,u,o=-1;++o<i;)e.push(u[o]);for(;null!=(n=r.pop());)t(n)}function ai(n){return n.children}function li(n){return n.value}function ci(n,t){return t.value-n.value}function fi(n){return ao.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function si(n){return n.x}function hi(n){return n.y}function pi(n,t,e){n.y0=t,n.y=e}function gi(n){return ao.range(n.length)}function vi(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function di(n){for(var t,e=1,r=0,i=n[0][1],u=n.length;u>e;++e)(t=n[e][1])>i&&(r=e,i=t);return r}function yi(n){return n.reduce(mi,0)}function mi(n,t){return n+t[1]}function Mi(n,t){return xi(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function xi(n,t){for(var e=-1,r=+n[0],i=(n[1]-r)/t,u=[];++e<=t;)u[e]=i*e+r;return u}function bi(n){return[ao.min(n),ao.max(n)]}function _i(n,t){return n.value-t.value}function wi(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function Si(n,t){n._pack_next=t,t._pack_prev=n}function ki(n,t){var e=t.x-n.x,r=t.y-n.y,i=n.r+t.r;return.999*i*i>e*e+r*r}function Ni(n){function t(n){f=Math.min(n.x-n.r,f),s=Math.max(n.x+n.r,s),h=Math.min(n.y-n.r,h),p=Math.max(n.y+n.r,p)}if((e=n.children)&&(c=e.length)){var e,r,i,u,o,a,l,c,f=1/0,s=-(1/0),h=1/0,p=-(1/0);if(e.forEach(Ei),r=e[0],r.x=-r.r,r.y=0,t(r),c>1&&(i=e[1],i.x=i.r,i.y=0,t(i),c>2))for(u=e[2],zi(r,i,u),t(u),wi(r,u),r._pack_prev=u,wi(u,i),i=r._pack_next,o=3;c>o;o++){zi(r,i,u=e[o]);var g=0,v=1,d=1;for(a=i._pack_next;a!==i;a=a._pack_next,v++)if(ki(a,u)){g=1;break}if(1==g)for(l=r._pack_prev;l!==a._pack_prev&&!ki(l,u);l=l._pack_prev,d++);g?(d>v||v==d&&i.r<r.r?Si(r,i=a):Si(r=l,i),o--):(wi(r,u),i=u,t(u))}var y=(f+s)/2,m=(h+p)/2,M=0;for(o=0;c>o;o++)u=e[o],u.x-=y,u.y-=m,M=Math.max(M,u.r+Math.sqrt(u.x*u.x+u.y*u.y));n.r=M,e.forEach(Ai)}}function Ei(n){n._pack_next=n._pack_prev=n}function Ai(n){delete n._pack_next,delete n._pack_prev}function Ci(n,t,e,r){var i=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,i)for(var u=-1,o=i.length;++u<o;)Ci(i[u],t,e,r)}function zi(n,t,e){var r=n.r+e.r,i=t.x-n.x,u=t.y-n.y;if(r&&(i||u)){var o=t.r+e.r,a=i*i+u*u;o*=o,r*=r;var l=.5+(r-o)/(2*a),c=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+l*i+c*u,e.y=n.y+l*u-c*i}else e.x=n.x+r,e.y=n.y}function Li(n,t){return n.parent==t.parent?1:2}function qi(n){var t=n.children;return t.length?t[0]:n.t}function Ti(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ri(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Di(n){for(var t,e=0,r=0,i=n.children,u=i.length;--u>=0;)t=i[u],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Pi(n,t,e){return n.a.parent===t.parent?n.a:e}function Ui(n){return 1+ao.max(n,function(n){return n.y})}function ji(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Fi(n){var t=n.children;return t&&t.length?Fi(t[0]):n}function Hi(n){var t,e=n.children;return e&&(t=e.length)?Hi(e[t-1]):n}function Oi(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Ii(n,t){var e=n.x+t[3],r=n.y+t[0],i=n.dx-t[1]-t[3],u=n.dy-t[0]-t[2];return 0>i&&(e+=i/2,i=0),0>u&&(r+=u/2,u=0),{x:e,y:r,dx:i,dy:u}}function Yi(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Zi(n){return n.rangeExtent?n.rangeExtent():Yi(n.range())}function Vi(n,t,e,r){var i=e(n[0],n[1]),u=r(t[0],t[1]);return function(n){return u(i(n))}}function Xi(n,t){var e,r=0,i=n.length-1,u=n[r],o=n[i];return u>o&&(e=r,r=i,i=e,e=u,u=o,o=e),n[r]=t.floor(u),n[i]=t.ceil(o),n}function $i(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:Sl}function Bi(n,t,e,r){var i=[],u=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)i.push(e(n[o-1],n[o])),u.push(r(t[o-1],t[o]));return function(t){var e=ao.bisect(n,t,1,a)-1;return u[e](i[e](t))}}function Wi(n,t,e,r){function i(){var i=Math.min(n.length,t.length)>2?Bi:Vi,l=r?Wr:Br;return o=i(n,t,l,e),a=i(t,n,l,Mr),u}function u(n){return o(n)}var o,a;return u.invert=function(n){return a(n)},u.domain=function(t){return arguments.length?(n=t.map(Number),i()):n},u.range=function(n){return arguments.length?(t=n,i()):t},u.rangeRound=function(n){return u.range(n).interpolate(Ur)},u.clamp=function(n){return arguments.length?(r=n,i()):r},u.interpolate=function(n){return arguments.length?(e=n,i()):e},u.ticks=function(t){return Qi(n,t)},u.tickFormat=function(t,e){return nu(n,t,e)},u.nice=function(t){return Gi(n,t),i()},u.copy=function(){return Wi(n,t,e,r)},i()}function Ji(n,t){return ao.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Gi(n,t){return Xi(n,$i(Ki(n,t)[2])),Xi(n,$i(Ki(n,t)[2])),n}function Ki(n,t){null==t&&(t=10);var e=Yi(n),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),u=t/r*i;return.15>=u?i*=10:.35>=u?i*=5:.75>=u&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function Qi(n,t){return ao.range.apply(ao,Ki(n,t))}function nu(n,t,e){var r=Ki(n,t);if(e){var i=ha.exec(e);if(i.shift(),"s"===i[8]){var u=ao.formatPrefix(Math.max(xo(r[0]),xo(r[1])));return i[7]||(i[7]="."+tu(u.scale(r[2]))),i[8]="f",e=ao.format(i.join("")),function(n){return e(u.scale(n))+u.symbol}}i[7]||(i[7]="."+eu(i[8],r)),e=i.join("")}else e=",."+tu(r[2])+"f";return ao.format(e)}function tu(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function eu(n,t){var e=tu(t[2]);return n in kl?Math.abs(e-tu(Math.max(xo(t[0]),xo(t[1]))))+ +("e"!==n):e-2*("%"===n)}function ru(n,t,e,r){function i(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function u(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(i(t))}return o.invert=function(t){return u(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(i)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(i)),o):t},o.nice=function(){var t=Xi(r.map(i),e?Math:El);return n.domain(t),r=t.map(u),o},o.ticks=function(){var n=Yi(r),o=[],a=n[0],l=n[1],c=Math.floor(i(a)),f=Math.ceil(i(l)),s=t%1?2:t;if(isFinite(f-c)){if(e){for(;f>c;c++)for(var h=1;s>h;h++)o.push(u(c)*h);o.push(u(c))}else for(o.push(u(c));c++<f;)for(var h=s-1;h>0;h--)o.push(u(c)*h);for(c=0;o[c]<a;c++);for(f=o.length;o[f-1]>l;f--);o=o.slice(c,f)}return o},o.tickFormat=function(n,e){if(!arguments.length)return Nl;arguments.length<2?e=Nl:"function"!=typeof e&&(e=ao.format(e));var r=Math.max(1,t*n/o.ticks().length);return function(n){var o=n/u(Math.round(i(n)));return t-.5>o*t&&(o*=t),r>=o?e(n):""}},o.copy=function(){return ru(n.copy(),t,e,r)},Ji(o,n)}function iu(n,t,e){function r(t){return n(i(t))}var i=uu(t),u=uu(1/t);return r.invert=function(t){return u(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(i)),r):e},r.ticks=function(n){return Qi(e,n)},r.tickFormat=function(n,t){return nu(e,n,t)},r.nice=function(n){return r.domain(Gi(e,n))},r.exponent=function(o){return arguments.length?(i=uu(t=o),u=uu(1/t),n.domain(e.map(i)),r):t},r.copy=function(){return iu(n.copy(),t,e)},Ji(r,n)}function uu(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function ou(n,t){function e(e){return u[((i.get(e)||("range"===t.t?i.set(e,n.push(e)):NaN))-1)%u.length]}function r(t,e){return ao.range(n.length).map(function(n){return t+e*n})}var i,u,o;return e.domain=function(r){if(!arguments.length)return n;n=[],i=new c;for(var u,o=-1,a=r.length;++o<a;)i.has(u=r[o])||i.set(u,n.push(u));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(u=n,o=0,t={t:"range",a:arguments},e):u},e.rangePoints=function(i,a){arguments.length<2&&(a=0);var l=i[0],c=i[1],f=n.length<2?(l=(l+c)/2,0):(c-l)/(n.length-1+a);return u=r(l+f*a/2,f),o=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(i,a){arguments.length<2&&(a=0);var l=i[0],c=i[1],f=n.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(n.length-1+a)|0;return u=r(l+Math.round(f*a/2+(c-l-(n.length-1+a)*f)/2),f),o=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(i,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var c=i[1]<i[0],f=i[c-0],s=i[1-c],h=(s-f)/(n.length-a+2*l);return u=r(f+h*l,h),c&&u.reverse(),o=h*(1-a),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(i,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var c=i[1]<i[0],f=i[c-0],s=i[1-c],h=Math.floor((s-f)/(n.length-a+2*l));return u=r(f+Math.round((s-f-(n.length-a)*h)/2),h),c&&u.reverse(),o=Math.round(h*(1-a)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return o},e.rangeExtent=function(){return Yi(t.a[0])},e.copy=function(){return ou(n,t)},e.domain(n)}function au(n,t){function u(){var e=0,r=t.length;for(a=[];++e<r;)a[e-1]=ao.quantile(n,e/r);return o}function o(n){return isNaN(n=+n)?void 0:t[ao.bisect(a,n)]}var a;return o.domain=function(t){return arguments.length?(n=t.map(r).filter(i).sort(e),u()):n},o.range=function(n){return arguments.length?(t=n,u()):t},o.quantiles=function(){return a},o.invertExtent=function(e){return e=t.indexOf(e),0>e?[NaN,NaN]:[e>0?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]},o.copy=function(){return au(n,t)},u()}function lu(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(u*(t-n))))]}function i(){return u=e.length/(t-n),o=e.length-1,r}var u,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],i()):[n,t]},r.range=function(n){return arguments.length?(e=n,i()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?NaN:t/u+n,[t,t+1/u]},r.copy=function(){return lu(n,t,e)},i()}function cu(n,t){function e(e){return e>=e?t[ao.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return cu(n,t)},e}function fu(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Qi(n,t)},t.tickFormat=function(t,e){return nu(n,t,e)},t.copy=function(){return fu(n)},t}function su(){return 0}function hu(n){return n.innerRadius}function pu(n){return n.outerRadius}function gu(n){return n.startAngle}function vu(n){return n.endAngle}function du(n){return n&&n.padAngle}function yu(n,t,e,r){return(n-e)*t-(t-r)*n>0?0:1}function mu(n,t,e,r,i){var u=n[0]-t[0],o=n[1]-t[1],a=(i?r:-r)/Math.sqrt(u*u+o*o),l=a*o,c=-a*u,f=n[0]+l,s=n[1]+c,h=t[0]+l,p=t[1]+c,g=(f+h)/2,v=(s+p)/2,d=h-f,y=p-s,m=d*d+y*y,M=e-r,x=f*p-h*s,b=(0>y?-1:1)*Math.sqrt(Math.max(0,M*M*m-x*x)),_=(x*y-d*b)/m,w=(-x*d-y*b)/m,S=(x*y+d*b)/m,k=(-x*d+y*b)/m,N=_-g,E=w-v,A=S-g,C=k-v;return N*N+E*E>A*A+C*C&&(_=S,w=k),[[_-l,w-c],[_*e/M,w*e/M]]}function Mu(n){function t(t){function o(){c.push("M",u(n(f),a))}for(var l,c=[],f=[],s=-1,h=t.length,p=En(e),g=En(r);++s<h;)i.call(this,l=t[s],s)?f.push([+p.call(this,l,s),+g.call(this,l,s)]):f.length&&(o(),f=[]);return f.length&&o(),c.length?c.join(""):null}var e=Ce,r=ze,i=zt,u=xu,o=u.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(i=n,t):i},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?u=n:(u=Tl.get(n)||xu).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function xu(n){return n.length>1?n.join("L"):n+"Z"}function bu(n){return n.join("L")+"Z"}function _u(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&i.push("H",r[0]),i.join("")}function wu(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("V",(r=n[t])[1],"H",r[0]);return i.join("")}function Su(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("H",(r=n[t])[0],"V",r[1]);return i.join("")}function ku(n,t){return n.length<4?xu(n):n[1]+Au(n.slice(1,-1),Cu(n,t))}function Nu(n,t){return n.length<3?bu(n):n[0]+Au((n.push(n[0]),n),Cu([n[n.length-2]].concat(n,[n[1]]),t))}function Eu(n,t){return n.length<3?xu(n):n[0]+Au(n,Cu(n,t))}function Au(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return xu(n);var e=n.length!=t.length,r="",i=n[0],u=n[1],o=t[0],a=o,l=1;if(e&&(r+="Q"+(u[0]-2*o[0]/3)+","+(u[1]-2*o[1]/3)+","+u[0]+","+u[1],i=n[1],l=2),t.length>1){a=t[1],u=n[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(u[0]-a[0])+","+(u[1]-a[1])+","+u[0]+","+u[1];for(var c=2;c<t.length;c++,l++)u=n[l],a=t[c],r+="S"+(u[0]-a[0])+","+(u[1]-a[1])+","+u[0]+","+u[1]}if(e){var f=n[l];r+="Q"+(u[0]+2*a[0]/3)+","+(u[1]+2*a[1]/3)+","+f[0]+","+f[1]}return r}function Cu(n,t){for(var e,r=[],i=(1-t)/2,u=n[0],o=n[1],a=1,l=n.length;++a<l;)e=u,u=o,o=n[a],r.push([i*(o[0]-e[0]),i*(o[1]-e[1])]);return r}function zu(n){if(n.length<3)return xu(n);var t=1,e=n.length,r=n[0],i=r[0],u=r[1],o=[i,i,i,(r=n[1])[0]],a=[u,u,u,r[1]],l=[i,",",u,"L",Ru(Pl,o),",",Ru(Pl,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),Du(l,o,a);return n.pop(),l.push("L",r),l.join("")}function Lu(n){if(n.length<4)return xu(n);for(var t,e=[],r=-1,i=n.length,u=[0],o=[0];++r<3;)t=n[r],u.push(t[0]),o.push(t[1]);for(e.push(Ru(Pl,u)+","+Ru(Pl,o)),--r;++r<i;)t=n[r],u.shift(),u.push(t[0]),o.shift(),o.push(t[1]),Du(e,u,o);return e.join("")}function qu(n){for(var t,e,r=-1,i=n.length,u=i+4,o=[],a=[];++r<4;)e=n[r%i],o.push(e[0]),a.push(e[1]);for(t=[Ru(Pl,o),",",Ru(Pl,a)],--r;++r<u;)e=n[r%i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Du(t,o,a);return t.join("")}function Tu(n,t){var e=n.length-1;if(e)for(var r,i,u=n[0][0],o=n[0][1],a=n[e][0]-u,l=n[e][1]-o,c=-1;++c<=e;)r=n[c],i=c/e,r[0]=t*r[0]+(1-t)*(u+i*a),r[1]=t*r[1]+(1-t)*(o+i*l);return zu(n)}function Ru(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Du(n,t,e){n.push("C",Ru(Rl,t),",",Ru(Rl,e),",",Ru(Dl,t),",",Ru(Dl,e),",",Ru(Pl,t),",",Ru(Pl,e))}function Pu(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Uu(n){for(var t=0,e=n.length-1,r=[],i=n[0],u=n[1],o=r[0]=Pu(i,u);++t<e;)r[t]=(o+(o=Pu(i=u,u=n[t+1])))/2;return r[t]=o,r}function ju(n){for(var t,e,r,i,u=[],o=Uu(n),a=-1,l=n.length-1;++a<l;)t=Pu(n[a],n[a+1]),xo(t)<Uo?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,i=e*e+r*r,i>9&&(i=3*t/Math.sqrt(i),o[a]=i*e,o[a+1]=i*r));for(a=-1;++a<=l;)i=(n[Math.min(l,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),u.push([i||0,o[a]*i||0]);return u}function Fu(n){return n.length<3?xu(n):n[0]+Au(n,ju(n))}function Hu(n){for(var t,e,r,i=-1,u=n.length;++i<u;)t=n[i],e=t[0],r=t[1]-Io,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Ou(n){function t(t){function l(){v.push("M",a(n(y),s),f,c(n(d.reverse()),s),"Z")}for(var h,p,g,v=[],d=[],y=[],m=-1,M=t.length,x=En(e),b=En(i),_=e===r?function(){
return p}:En(r),w=i===u?function(){return g}:En(u);++m<M;)o.call(this,h=t[m],m)?(d.push([p=+x.call(this,h,m),g=+b.call(this,h,m)]),y.push([+_.call(this,h,m),+w.call(this,h,m)])):d.length&&(l(),d=[],y=[]);return d.length&&l(),v.length?v.join(""):null}var e=Ce,r=Ce,i=0,u=ze,o=zt,a=xu,l=a.key,c=a,f="L",s=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(i=u=n,t):u},t.y0=function(n){return arguments.length?(i=n,t):i},t.y1=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(l="function"==typeof n?a=n:(a=Tl.get(n)||xu).key,c=a.reverse||a,f=a.closed?"M":"L",t):l},t.tension=function(n){return arguments.length?(s=n,t):s},t}function Iu(n){return n.radius}function Yu(n){return[n.x,n.y]}function Zu(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-Io;return[e*Math.cos(r),e*Math.sin(r)]}}function Vu(){return 64}function Xu(){return"circle"}function $u(n){var t=Math.sqrt(n/Fo);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Bu(n){return function(){var t,e,r;(t=this[n])&&(r=t[e=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[e]:delete this[n],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Wu(n,t,e){return ko(n,Yl),n.namespace=t,n.id=e,n}function Ju(n,t,e,r){var i=n.id,u=n.namespace;return Y(n,"function"==typeof e?function(n,o,a){n[u][i].tween.set(t,r(e.call(n,n.__data__,o,a)))}:(e=r(e),function(n){n[u][i].tween.set(t,e)}))}function Gu(n){return null==n&&(n=""),function(){this.textContent=n}}function Ku(n){return null==n?"__transition__":"__transition_"+n+"__"}function Qu(n,t,e,r,i){function u(n){var t=v.delay;return f.t=t+l,n>=t?o(n-t):void(f.c=o)}function o(e){var i=g.active,u=g[i];u&&(u.timer.c=null,u.timer.t=NaN,--g.count,delete g[i],u.event&&u.event.interrupt.call(n,n.__data__,u.index));for(var o in g)if(r>+o){var c=g[o];c.timer.c=null,c.timer.t=NaN,--g.count,delete g[o]}f.c=a,qn(function(){return f.c&&a(e||1)&&(f.c=null,f.t=NaN),1},0,l),g.active=r,v.event&&v.event.start.call(n,n.__data__,t),p=[],v.tween.forEach(function(e,r){(r=r.call(n,n.__data__,t))&&p.push(r)}),h=v.ease,s=v.duration}function a(i){for(var u=i/s,o=h(u),a=p.length;a>0;)p[--a].call(n,o);return u>=1?(v.event&&v.event.end.call(n,n.__data__,t),--g.count?delete g[r]:delete n[e],1):void 0}var l,f,s,h,p,g=n[e]||(n[e]={active:0,count:0}),v=g[r];v||(l=i.time,f=qn(u,0,l),v=g[r]={tween:new c,time:l,timer:f,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++g.count)}function no(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function to(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function eo(n){return n.toISOString()}function ro(n,t,e){function r(t){return n(t)}function i(n,e){var r=n[1]-n[0],i=r/e,u=ao.bisect(Kl,i);return u==Kl.length?[t.year,Ki(n.map(function(n){return n/31536e6}),e)[2]]:u?t[i/Kl[u-1]<Kl[u]/i?u-1:u]:[tc,Ki(n,e)[2]]}return r.invert=function(t){return io(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(io)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,io(+e+1),t).length}var u=r.domain(),o=Yi(u),a=null==n?i(o,10):"number"==typeof n&&i(o,n);return a&&(n=a[0],t=a[1]),r.domain(Xi(u,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=io(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=io(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Yi(r.domain()),u=null==n?i(e,10):"number"==typeof n?i(e,n):!n.range&&[{range:n},t];return u&&(n=u[0],t=u[1]),n.range(e[0],io(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return ro(n.copy(),t,e)},Ji(r,n)}function io(n){return new Date(n)}function uo(n){return JSON.parse(n.responseText)}function oo(n){var t=fo.createRange();return t.selectNode(fo.body),t.createContextualFragment(n.responseText)}var ao={version:"3.5.17"},lo=[].slice,co=function(n){return lo.call(n)},fo=this.document;if(fo)try{co(fo.documentElement.childNodes)[0].nodeType}catch(so){co=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}if(Date.now||(Date.now=function(){return+new Date}),fo)try{fo.createElement("DIV").style.setProperty("opacity",0,"")}catch(ho){var po=this.Element.prototype,go=po.setAttribute,vo=po.setAttributeNS,yo=this.CSSStyleDeclaration.prototype,mo=yo.setProperty;po.setAttribute=function(n,t){go.call(this,n,t+"")},po.setAttributeNS=function(n,t,e){vo.call(this,n,t,e+"")},yo.setProperty=function(n,t,e){mo.call(this,n,t+"",e)}}ao.ascending=e,ao.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:NaN},ao.min=function(n,t){var e,r,i=-1,u=n.length;if(1===arguments.length){for(;++i<u;)if(null!=(r=n[i])&&r>=r){e=r;break}for(;++i<u;)null!=(r=n[i])&&e>r&&(e=r)}else{for(;++i<u;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=r;break}for(;++i<u;)null!=(r=t.call(n,n[i],i))&&e>r&&(e=r)}return e},ao.max=function(n,t){var e,r,i=-1,u=n.length;if(1===arguments.length){for(;++i<u;)if(null!=(r=n[i])&&r>=r){e=r;break}for(;++i<u;)null!=(r=n[i])&&r>e&&(e=r)}else{for(;++i<u;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=r;break}for(;++i<u;)null!=(r=t.call(n,n[i],i))&&r>e&&(e=r)}return e},ao.extent=function(n,t){var e,r,i,u=-1,o=n.length;if(1===arguments.length){for(;++u<o;)if(null!=(r=n[u])&&r>=r){e=i=r;break}for(;++u<o;)null!=(r=n[u])&&(e>r&&(e=r),r>i&&(i=r))}else{for(;++u<o;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=i=r;break}for(;++u<o;)null!=(r=t.call(n,n[u],u))&&(e>r&&(e=r),r>i&&(i=r))}return[e,i]},ao.sum=function(n,t){var e,r=0,u=n.length,o=-1;if(1===arguments.length)for(;++o<u;)i(e=+n[o])&&(r+=e);else for(;++o<u;)i(e=+t.call(n,n[o],o))&&(r+=e);return r},ao.mean=function(n,t){var e,u=0,o=n.length,a=-1,l=o;if(1===arguments.length)for(;++a<o;)i(e=r(n[a]))?u+=e:--l;else for(;++a<o;)i(e=r(t.call(n,n[a],a)))?u+=e:--l;return l?u/l:void 0},ao.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),i=+n[r-1],u=e-r;return u?i+u*(n[r]-i):i},ao.median=function(n,t){var u,o=[],a=n.length,l=-1;if(1===arguments.length)for(;++l<a;)i(u=r(n[l]))&&o.push(u);else for(;++l<a;)i(u=r(t.call(n,n[l],l)))&&o.push(u);return o.length?ao.quantile(o.sort(e),.5):void 0},ao.variance=function(n,t){var e,u,o=n.length,a=0,l=0,c=-1,f=0;if(1===arguments.length)for(;++c<o;)i(e=r(n[c]))&&(u=e-a,a+=u/++f,l+=u*(e-a));else for(;++c<o;)i(e=r(t.call(n,n[c],c)))&&(u=e-a,a+=u/++f,l+=u*(e-a));return f>1?l/(f-1):void 0},ao.deviation=function(){var n=ao.variance.apply(this,arguments);return n?Math.sqrt(n):n};var Mo=u(e);ao.bisectLeft=Mo.left,ao.bisect=ao.bisectRight=Mo.right,ao.bisector=function(n){return u(1===n.length?function(t,r){return e(n(t),r)}:n)},ao.shuffle=function(n,t,e){(u=arguments.length)<3&&(e=n.length,2>u&&(t=0));for(var r,i,u=e-t;u;)i=Math.random()*u--|0,r=n[u+t],n[u+t]=n[i+t],n[i+t]=r;return n},ao.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},ao.pairs=function(n){for(var t,e=0,r=n.length-1,i=n[0],u=new Array(0>r?0:r);r>e;)u[e]=[t=i,i=n[++e]];return u},ao.transpose=function(n){if(!(i=n.length))return[];for(var t=-1,e=ao.min(n,o),r=new Array(e);++t<e;)for(var i,u=-1,a=r[t]=new Array(i);++u<i;)a[u]=n[u][t];return r},ao.zip=function(){return ao.transpose(arguments)},ao.keys=function(n){var t=[];for(var e in n)t.push(e);return t},ao.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},ao.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},ao.merge=function(n){for(var t,e,r,i=n.length,u=-1,o=0;++u<i;)o+=n[u].length;for(e=new Array(o);--i>=0;)for(r=n[i],t=r.length;--t>=0;)e[--o]=r[t];return e};var xo=Math.abs;ao.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e===1/0)throw new Error("infinite range");var r,i=[],u=a(xo(e)),o=-1;if(n*=u,t*=u,e*=u,0>e)for(;(r=n+e*++o)>t;)i.push(r/u);else for(;(r=n+e*++o)<t;)i.push(r/u);return i},ao.map=function(n,t){var e=new c;if(n instanceof c)n.forEach(function(n,t){e.set(n,t)});else if(Array.isArray(n)){var r,i=-1,u=n.length;if(1===arguments.length)for(;++i<u;)e.set(i,n[i]);else for(;++i<u;)e.set(t.call(n,r=n[i],i),r)}else for(var o in n)e.set(o,n[o]);return e};var bo="__proto__",_o="\x00";l(c,{has:h,get:function(n){return this._[f(n)]},set:function(n,t){return this._[f(n)]=t},remove:p,keys:g,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:s(t),value:this._[t]});return n},size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,s(t),this._[t])}}),ao.nest=function(){function n(t,o,a){if(a>=u.length)return r?r.call(i,o):e?o.sort(e):o;for(var l,f,s,h,p=-1,g=o.length,v=u[a++],d=new c;++p<g;)(h=d.get(l=v(f=o[p])))?h.push(f):d.set(l,[f]);return t?(f=t(),s=function(e,r){f.set(e,n(t,r,a))}):(f={},s=function(e,r){f[e]=n(t,r,a)}),d.forEach(s),f}function t(n,e){if(e>=u.length)return n;var r=[],i=o[e++];return n.forEach(function(n,i){r.push({key:n,values:t(i,e)})}),i?r.sort(function(n,t){return i(n.key,t.key)}):r}var e,r,i={},u=[],o=[];return i.map=function(t,e){return n(e,t,0)},i.entries=function(e){return t(n(ao.map,e,0),0)},i.key=function(n){return u.push(n),i},i.sortKeys=function(n){return o[u.length-1]=n,i},i.sortValues=function(n){return e=n,i},i.rollup=function(n){return r=n,i},i},ao.set=function(n){var t=new y;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},l(y,{has:h,add:function(n){return this._[f(n+="")]=!0,n},remove:p,values:g,size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,s(t))}}),ao.behavior={},ao.rebind=function(n,t){for(var e,r=1,i=arguments.length;++r<i;)n[e=arguments[r]]=M(n,t,t[e]);return n};var wo=["webkit","ms","moz","Moz","o","O"];ao.dispatch=function(){for(var n=new _,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=w(n);return n},_.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},ao.event=null,ao.requote=function(n){return n.replace(So,"\\$&")};var So=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ko={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},No=function(n,t){return t.querySelector(n)},Eo=function(n,t){return t.querySelectorAll(n)},Ao=function(n,t){var e=n.matches||n[x(n,"matchesSelector")];return(Ao=function(n,t){return e.call(n,t)})(n,t)};"function"==typeof Sizzle&&(No=function(n,t){return Sizzle(n,t)[0]||null},Eo=Sizzle,Ao=Sizzle.matchesSelector),ao.selection=function(){return ao.select(fo.documentElement)};var Co=ao.selection.prototype=[];Co.select=function(n){var t,e,r,i,u=[];n=A(n);for(var o=-1,a=this.length;++o<a;){u.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,c=r.length;++l<c;)(i=r[l])?(t.push(e=n.call(i,i.__data__,l,o)),e&&"__data__"in i&&(e.__data__=i.__data__)):t.push(null)}return E(u)},Co.selectAll=function(n){var t,e,r=[];n=C(n);for(var i=-1,u=this.length;++i<u;)for(var o=this[i],a=-1,l=o.length;++a<l;)(e=o[a])&&(r.push(t=co(n.call(e,e.__data__,a,i))),t.parentNode=e);return E(r)};var zo="http://www.w3.org/1999/xhtml",Lo={svg:"http://www.w3.org/2000/svg",xhtml:zo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ao.ns={prefix:Lo,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),Lo.hasOwnProperty(e)?{space:Lo[e],local:n}:n}},Co.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=ao.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(z(t,n[t]));return this}return this.each(z(n,t))},Co.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=T(n)).length,i=-1;if(t=e.classList){for(;++i<r;)if(!t.contains(n[i]))return!1}else for(t=e.getAttribute("class");++i<r;)if(!q(n[i]).test(t))return!1;return!0}for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},Co.style=function(n,e,r){var i=arguments.length;if(3>i){if("string"!=typeof n){2>i&&(e="");for(r in n)this.each(P(r,n[r],e));return this}if(2>i){var u=this.node();return t(u).getComputedStyle(u,null).getPropertyValue(n)}r=""}return this.each(P(n,e,r))},Co.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(U(t,n[t]));return this}return this.each(U(n,t))},Co.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},Co.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},Co.append=function(n){return n=j(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},Co.insert=function(n,t){return n=j(n),t=A(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},Co.remove=function(){return this.each(F)},Co.data=function(n,t){function e(n,e){var r,i,u,o=n.length,s=e.length,h=Math.min(o,s),p=new Array(s),g=new Array(s),v=new Array(o);if(t){var d,y=new c,m=new Array(o);for(r=-1;++r<o;)(i=n[r])&&(y.has(d=t.call(i,i.__data__,r))?v[r]=i:y.set(d,i),m[r]=d);for(r=-1;++r<s;)(i=y.get(d=t.call(e,u=e[r],r)))?i!==!0&&(p[r]=i,i.__data__=u):g[r]=H(u),y.set(d,!0);for(r=-1;++r<o;)r in m&&y.get(m[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)i=n[r],u=e[r],i?(i.__data__=u,p[r]=i):g[r]=H(u);for(;s>r;++r)g[r]=H(e[r]);for(;o>r;++r)v[r]=n[r]}g.update=p,g.parentNode=p.parentNode=v.parentNode=n.parentNode,a.push(g),l.push(p),f.push(v)}var r,i,u=-1,o=this.length;if(!arguments.length){for(n=new Array(o=(r=this[0]).length);++u<o;)(i=r[u])&&(n[u]=i.__data__);return n}var a=Z([]),l=E([]),f=E([]);if("function"==typeof n)for(;++u<o;)e(r=this[u],n.call(r,r.parentNode.__data__,u));else for(;++u<o;)e(r=this[u],n);return l.enter=function(){return a},l.exit=function(){return f},l},Co.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},Co.filter=function(n){var t,e,r,i=[];"function"!=typeof n&&(n=O(n));for(var u=0,o=this.length;o>u;u++){i.push(t=[]),t.parentNode=(e=this[u]).parentNode;for(var a=0,l=e.length;l>a;a++)(r=e[a])&&n.call(r,r.__data__,a,u)&&t.push(r)}return E(i)},Co.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],i=r.length-1,u=r[i];--i>=0;)(e=r[i])&&(u&&u!==e.nextSibling&&u.parentNode.insertBefore(e,u),u=e);return this},Co.sort=function(n){n=I.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},Co.each=function(n){return Y(this,function(t,e,r){n.call(t,t.__data__,e,r)})},Co.call=function(n){var t=co(arguments);return n.apply(t[0]=this,t),this},Co.empty=function(){return!this.node()},Co.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,i=e.length;i>r;r++){var u=e[r];if(u)return u}return null},Co.size=function(){var n=0;return Y(this,function(){++n}),n};var qo=[];ao.selection.enter=Z,ao.selection.enter.prototype=qo,qo.append=Co.append,qo.empty=Co.empty,qo.node=Co.node,qo.call=Co.call,qo.size=Co.size,qo.select=function(n){for(var t,e,r,i,u,o=[],a=-1,l=this.length;++a<l;){r=(i=this[a]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var c=-1,f=i.length;++c<f;)(u=i[c])?(t.push(r[c]=e=n.call(i.parentNode,u.__data__,c,a)),e.__data__=u.__data__):t.push(null)}return E(o)},qo.insert=function(n,t){return arguments.length<2&&(t=V(this)),Co.insert.call(this,n,t)},ao.select=function(t){var e;return"string"==typeof t?(e=[No(t,fo)],e.parentNode=fo.documentElement):(e=[t],e.parentNode=n(t)),E([e])},ao.selectAll=function(n){var t;return"string"==typeof n?(t=co(Eo(n,fo)),t.parentNode=fo.documentElement):(t=co(n),t.parentNode=null),E([t])},Co.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(X(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(X(n,t,e))};var To=ao.map({mouseenter:"mouseover",mouseleave:"mouseout"});fo&&To.forEach(function(n){"on"+n in fo&&To.remove(n)});var Ro,Do=0;ao.mouse=function(n){return J(n,k())};var Po=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ao.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=k().changedTouches),t)for(var r,i=0,u=t.length;u>i;++i)if((r=t[i]).identifier===e)return J(n,r)},ao.behavior.drag=function(){function n(){this.on("mousedown.drag",u).on("touchstart.drag",o)}function e(n,t,e,u,o){return function(){function a(){var n,e,r=t(h,v);r&&(n=r[0]-M[0],e=r[1]-M[1],g|=n|e,M=r,p({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:n,dy:e}))}function l(){t(h,v)&&(y.on(u+d,null).on(o+d,null),m(g),p({type:"dragend"}))}var c,f=this,s=ao.event.target.correspondingElement||ao.event.target,h=f.parentNode,p=r.of(f,arguments),g=0,v=n(),d=".drag"+(null==v?"":"-"+v),y=ao.select(e(s)).on(u+d,a).on(o+d,l),m=W(s),M=t(h,v);i?(c=i.apply(f,arguments),c=[c.x-M[0],c.y-M[1]]):c=[0,0],p({type:"dragstart"})}}var r=N(n,"drag","dragstart","dragend"),i=null,u=e(b,ao.mouse,t,"mousemove","mouseup"),o=e(G,ao.touch,m,"touchmove","touchend");return n.origin=function(t){return arguments.length?(i=t,n):i},ao.rebind(n,r,"on")},ao.touches=function(n,t){return arguments.length<2&&(t=k().touches),t?co(t).map(function(t){var e=J(n,t);return e.identifier=t.identifier,e}):[]};var Uo=1e-6,jo=Uo*Uo,Fo=Math.PI,Ho=2*Fo,Oo=Ho-Uo,Io=Fo/2,Yo=Fo/180,Zo=180/Fo,Vo=Math.SQRT2,Xo=2,$o=4;ao.interpolateZoom=function(n,t){var e,r,i=n[0],u=n[1],o=n[2],a=t[0],l=t[1],c=t[2],f=a-i,s=l-u,h=f*f+s*s;if(jo>h)r=Math.log(c/o)/Vo,e=function(n){return[i+n*f,u+n*s,o*Math.exp(Vo*n*r)]};else{var p=Math.sqrt(h),g=(c*c-o*o+$o*h)/(2*o*Xo*p),v=(c*c-o*o-$o*h)/(2*c*Xo*p),d=Math.log(Math.sqrt(g*g+1)-g),y=Math.log(Math.sqrt(v*v+1)-v);r=(y-d)/Vo,e=function(n){var t=n*r,e=rn(d),a=o/(Xo*p)*(e*un(Vo*t+d)-en(d));return[i+a*f,u+a*s,o*e/rn(Vo*t+d)]}}return e.duration=1e3*r,e},ao.behavior.zoom=function(){function n(n){n.on(L,s).on(Wo+".zoom",p).on("dblclick.zoom",g).on(R,h)}function e(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function r(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}function i(n){k.k=Math.max(A[0],Math.min(A[1],n))}function u(n,t){t=r(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function o(t,e,r,o){t.__chart__={x:k.x,y:k.y,k:k.k},i(Math.pow(2,o)),u(d=e,r),t=ao.select(t),C>0&&(t=t.transition().duration(C)),t.call(n.event)}function a(){b&&b.domain(x.range().map(function(n){return(n-k.x)/k.k}).map(x.invert)),w&&w.domain(_.range().map(function(n){return(n-k.y)/k.k}).map(_.invert))}function l(n){z++||n({type:"zoomstart"})}function c(n){a(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function f(n){--z||(n({type:"zoomend"}),d=null)}function s(){function n(){a=1,u(ao.mouse(i),h),c(o)}function r(){s.on(q,null).on(T,null),p(a),f(o)}var i=this,o=D.of(i,arguments),a=0,s=ao.select(t(i)).on(q,n).on(T,r),h=e(ao.mouse(i)),p=W(i);Il.call(i),l(o)}function h(){function n(){var n=ao.touches(g);return p=k.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=e(n))}),n}function t(){var t=ao.event.target;ao.select(t).on(x,r).on(b,a),_.push(t);for(var e=ao.event.changedTouches,i=0,u=e.length;u>i;++i)d[e[i].identifier]=null;var l=n(),c=Date.now();if(1===l.length){if(500>c-M){var f=l[0];o(g,f,d[f.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}M=c}else if(l.length>1){var f=l[0],s=l[1],h=f[0]-s[0],p=f[1]-s[1];y=h*h+p*p}}function r(){var n,t,e,r,o=ao.touches(g);Il.call(g);for(var a=0,l=o.length;l>a;++a,r=null)if(e=o[a],r=d[e.identifier]){if(t)break;n=e,t=r}if(r){var f=(f=e[0]-n[0])*f+(f=e[1]-n[1])*f,s=y&&Math.sqrt(f/y);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(s*p)}M=null,u(n,t),c(v)}function a(){if(ao.event.touches.length){for(var t=ao.event.changedTouches,e=0,r=t.length;r>e;++e)delete d[t[e].identifier];for(var i in d)return void n()}ao.selectAll(_).on(m,null),w.on(L,s).on(R,h),N(),f(v)}var p,g=this,v=D.of(g,arguments),d={},y=0,m=".zoom-"+ao.event.changedTouches[0].identifier,x="touchmove"+m,b="touchend"+m,_=[],w=ao.select(g),N=W(g);t(),l(v),w.on(L,null).on(R,t)}function p(){var n=D.of(this,arguments);m?clearTimeout(m):(Il.call(this),v=e(d=y||ao.mouse(this)),l(n)),m=setTimeout(function(){m=null,f(n)},50),S(),i(Math.pow(2,.002*Bo())*k.k),u(d,v),c(n)}function g(){var n=ao.mouse(this),t=Math.log(k.k)/Math.LN2;o(this,n,e(n),ao.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var v,d,y,m,M,x,b,_,w,k={x:0,y:0,k:1},E=[960,500],A=Jo,C=250,z=0,L="mousedown.zoom",q="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",D=N(n,"zoomstart","zoom","zoomend");return Wo||(Wo="onwheel"in fo?(Bo=function(){return-ao.event.deltaY*(ao.event.deltaMode?120:1)},"wheel"):"onmousewheel"in fo?(Bo=function(){return ao.event.wheelDelta},"mousewheel"):(Bo=function(){return-ao.event.detail},"MozMousePixelScroll")),n.event=function(n){n.each(function(){var n=D.of(this,arguments),t=k;Hl?ao.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},l(n)}).tween("zoom:zoom",function(){var e=E[0],r=E[1],i=d?d[0]:e/2,u=d?d[1]:r/2,o=ao.interpolateZoom([(i-k.x)/k.k,(u-k.y)/k.k,e/k.k],[(i-t.x)/t.k,(u-t.y)/t.k,e/t.k]);return function(t){var r=o(t),a=e/r[2];this.__chart__=k={x:i-r[0]*a,y:u-r[1]*a,k:a},c(n)}}).each("interrupt.zoom",function(){f(n)}).each("end.zoom",function(){f(n)}):(this.__chart__=k,l(n),c(n),f(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},a(),n):[k.x,k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:null},i(+t),a(),n):k.k},n.scaleExtent=function(t){return arguments.length?(A=null==t?Jo:[+t[0],+t[1]],n):A},n.center=function(t){return arguments.length?(y=t&&[+t[0],+t[1]],n):y},n.size=function(t){return arguments.length?(E=t&&[+t[0],+t[1]],n):E},n.duration=function(t){return arguments.length?(C=+t,n):C},n.x=function(t){return arguments.length?(b=t,x=t.copy(),k={x:0,y:0,k:1},n):b},n.y=function(t){return arguments.length?(w=t,_=t.copy(),k={x:0,y:0,k:1},n):w},ao.rebind(n,D,"on")};var Bo,Wo,Jo=[0,1/0];ao.color=an,an.prototype.toString=function(){return this.rgb()+""},ao.hsl=ln;var Go=ln.prototype=new an;Go.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,this.l/n)},Go.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,n*this.l)},Go.rgb=function(){return cn(this.h,this.s,this.l)},ao.hcl=fn;var Ko=fn.prototype=new an;Ko.brighter=function(n){return new fn(this.h,this.c,Math.min(100,this.l+Qo*(arguments.length?n:1)))},Ko.darker=function(n){return new fn(this.h,this.c,Math.max(0,this.l-Qo*(arguments.length?n:1)))},Ko.rgb=function(){return sn(this.h,this.c,this.l).rgb()},ao.lab=hn;var Qo=18,na=.95047,ta=1,ea=1.08883,ra=hn.prototype=new an;ra.brighter=function(n){return new hn(Math.min(100,this.l+Qo*(arguments.length?n:1)),this.a,this.b)},ra.darker=function(n){return new hn(Math.max(0,this.l-Qo*(arguments.length?n:1)),this.a,this.b)},ra.rgb=function(){return pn(this.l,this.a,this.b)},ao.rgb=mn;var ia=mn.prototype=new an;ia.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,i=30;return t||e||r?(t&&i>t&&(t=i),e&&i>e&&(e=i),r&&i>r&&(r=i),new mn(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new mn(i,i,i)},ia.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new mn(n*this.r,n*this.g,n*this.b)},ia.hsl=function(){return wn(this.r,this.g,this.b)},ia.toString=function(){return"#"+bn(this.r)+bn(this.g)+bn(this.b)};var ua=ao.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ua.forEach(function(n,t){ua.set(n,Mn(t))}),ao.functor=En,ao.xhr=An(m),ao.dsv=function(n,t){function e(n,e,u){arguments.length<3&&(u=e,e=null);var o=Cn(n,t,null==e?r:i(e),u);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:i(n)):e},o}function r(n){return e.parse(n.responseText)}function i(n){return function(t){return e.parse(t.responseText,n)}}function u(t){return t.map(o).join(n)}function o(n){return a.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var a=new RegExp('["'+n+"\n]"),l=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var i=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(i(n),e)}:i})},e.parseRows=function(n,t){function e(){if(f>=c)return o;if(i)return i=!1,u;var t=f;if(34===n.charCodeAt(t)){for(var e=t;e++<c;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}f=e+2;var r=n.charCodeAt(e+1);return 13===r?(i=!0,10===n.charCodeAt(e+2)&&++f):10===r&&(i=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;c>f;){var r=n.charCodeAt(f++),a=1;if(10===r)i=!0;else if(13===r)i=!0,10===n.charCodeAt(f)&&(++f,++a);else if(r!==l)continue;return n.slice(t,f-a)}return n.slice(t)}for(var r,i,u={},o={},a=[],c=n.length,f=0,s=0;(r=e())!==o;){for(var h=[];r!==u&&r!==o;)h.push(r),r=e();t&&null==(h=t(h,s++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new y,i=[];return t.forEach(function(n){for(var t in n)r.has(t)||i.push(r.add(t))}),[i.map(o).join(n)].concat(t.map(function(t){return i.map(function(n){return o(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(u).join("\n")},e},ao.csv=ao.dsv(",","text/csv"),ao.tsv=ao.dsv("	","text/tab-separated-values");var oa,aa,la,ca,fa=this[x(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};ao.timer=function(){qn.apply(this,arguments)},ao.timer.flush=function(){Rn(),Dn()},ao.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var sa=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Un);ao.formatPrefix=function(n,t){var e=0;return(n=+n)&&(0>n&&(n*=-1),t&&(n=ao.round(n,Pn(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),sa[8+e/3]};var ha=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,pa=ao.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=ao.round(n,Pn(n,t))).toFixed(Math.max(0,Math.min(20,Pn(n*(1+1e-15),t))))}}),ga=ao.time={},va=Date;Hn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){da.setUTCDate.apply(this._,arguments)},setDay:function(){da.setUTCDay.apply(this._,arguments)},setFullYear:function(){da.setUTCFullYear.apply(this._,arguments)},setHours:function(){da.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){da.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){da.setUTCMinutes.apply(this._,arguments)},setMonth:function(){da.setUTCMonth.apply(this._,arguments)},setSeconds:function(){da.setUTCSeconds.apply(this._,arguments)},setTime:function(){da.setTime.apply(this._,arguments)}};var da=Date.prototype;ga.year=On(function(n){return n=ga.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),ga.years=ga.year.range,ga.years.utc=ga.year.utc.range,ga.day=On(function(n){var t=new va(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),ga.days=ga.day.range,ga.days.utc=ga.day.utc.range,ga.dayOfYear=function(n){var t=ga.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=ga[n]=On(function(n){return(n=ga.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=ga.year(n).getDay();return Math.floor((ga.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});ga[n+"s"]=e.range,ga[n+"s"].utc=e.utc.range,ga[n+"OfYear"]=function(n){var e=ga.year(n).getDay();return Math.floor((ga.dayOfYear(n)+(e+t)%7)/7)}}),ga.week=ga.sunday,ga.weeks=ga.sunday.range,ga.weeks.utc=ga.sunday.utc.range,ga.weekOfYear=ga.sundayOfYear;var ya={"-":"",_:" ",0:"0"},ma=/^\s*\d+/,Ma=/^%/;ao.locale=function(n){return{numberFormat:jn(n),timeFormat:Yn(n)}};var xa=ao.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ao.format=xa.numberFormat,ao.geo={},ft.prototype={s:0,t:0,add:function(n){st(n,this.t,ba),st(ba.s,this.s,this),this.s?this.t+=ba.t:this.s=ba.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ba=new ft;ao.geo.stream=function(n,t){n&&_a.hasOwnProperty(n.type)?_a[n.type](n,t):ht(n,t)};var _a={Feature:function(n,t){ht(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)ht(e[r].geometry,t)}},wa={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){pt(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)pt(e[r],t,0)},Polygon:function(n,t){gt(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)gt(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)ht(e[r],t)}};ao.geo.area=function(n){return Sa=0,ao.geo.stream(n,Na),Sa};var Sa,ka=new ft,Na={sphere:function(){Sa+=4*Fo},point:b,lineStart:b,lineEnd:b,polygonStart:function(){ka.reset(),Na.lineStart=vt},polygonEnd:function(){var n=2*ka;Sa+=0>n?4*Fo+n:n,Na.lineStart=Na.lineEnd=Na.point=b}};ao.geo.bounds=function(){function n(n,t){M.push(x=[f=n,h=n]),s>t&&(s=t),t>p&&(p=t)}function t(t,e){var r=dt([t*Yo,e*Yo]);if(y){var i=mt(y,r),u=[i[1],-i[0],0],o=mt(u,i);bt(o),o=_t(o);var l=t-g,c=l>0?1:-1,v=o[0]*Zo*c,d=xo(l)>180;if(d^(v>c*g&&c*t>v)){var m=o[1]*Zo;m>p&&(p=m)}else if(v=(v+360)%360-180,d^(v>c*g&&c*t>v)){var m=-o[1]*Zo;s>m&&(s=m)}else s>e&&(s=e),e>p&&(p=e);d?g>t?a(f,t)>a(f,h)&&(h=t):a(t,h)>a(f,h)&&(f=t):h>=f?(f>t&&(f=t),t>h&&(h=t)):t>g?a(f,t)>a(f,h)&&(h=t):a(t,h)>a(f,h)&&(f=t)}else n(t,e);y=r,g=t}function e(){b.point=t}function r(){x[0]=f,x[1]=h,b.point=n,y=null}function i(n,e){if(y){var r=n-g;m+=xo(r)>180?r+(r>0?360:-360):r}else v=n,d=e;Na.point(n,e),t(n,e)}function u(){Na.lineStart()}function o(){i(v,d),Na.lineEnd(),xo(m)>Uo&&(f=-(h=180)),x[0]=f,x[1]=h,y=null}function a(n,t){return(t-=n)<0?t+360:t}function l(n,t){return n[0]-t[0]}function c(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var f,s,h,p,g,v,d,y,m,M,x,b={point:n,lineStart:e,lineEnd:r,polygonStart:function(){b.point=i,b.lineStart=u,b.lineEnd=o,m=0,Na.polygonStart()},polygonEnd:function(){Na.polygonEnd(),b.point=n,b.lineStart=e,b.lineEnd=r,0>ka?(f=-(h=180),s=-(p=90)):m>Uo?p=90:-Uo>m&&(s=-90),x[0]=f,x[1]=h}};return function(n){p=h=-(f=s=1/0),M=[],ao.geo.stream(n,b);var t=M.length;if(t){M.sort(l);for(var e,r=1,i=M[0],u=[i];t>r;++r)e=M[r],c(e[0],i)||c(e[1],i)?(a(i[0],e[1])>a(i[0],i[1])&&(i[1]=e[1]),a(e[0],i[1])>a(i[0],i[1])&&(i[0]=e[0])):u.push(i=e);for(var o,e,g=-(1/0),t=u.length-1,r=0,i=u[t];t>=r;i=e,++r)e=u[r],(o=a(i[1],e[0]))>g&&(g=o,f=e[0],h=i[1])}return M=x=null,f===1/0||s===1/0?[[NaN,NaN],[NaN,NaN]]:[[f,s],[h,p]]}}(),ao.geo.centroid=function(n){Ea=Aa=Ca=za=La=qa=Ta=Ra=Da=Pa=Ua=0,ao.geo.stream(n,ja);var t=Da,e=Pa,r=Ua,i=t*t+e*e+r*r;return jo>i&&(t=qa,e=Ta,r=Ra,Uo>Aa&&(t=Ca,e=za,r=La),i=t*t+e*e+r*r,jo>i)?[NaN,NaN]:[Math.atan2(e,t)*Zo,tn(r/Math.sqrt(i))*Zo]};var Ea,Aa,Ca,za,La,qa,Ta,Ra,Da,Pa,Ua,ja={sphere:b,point:St,lineStart:Nt,lineEnd:Et,polygonStart:function(){ja.lineStart=At},polygonEnd:function(){ja.lineStart=Nt}},Fa=Rt(zt,jt,Ht,[-Fo,-Fo/2]),Ha=1e9;ao.geo.clipExtent=function(){var n,t,e,r,i,u,o={stream:function(n){return i&&(i.valid=!1),i=u(n),i.valid=!0,i},extent:function(a){return arguments.length?(u=Zt(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),i&&(i.valid=!1,i=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(ao.geo.conicEqualArea=function(){return Vt(Xt)}).raw=Xt,ao.geo.albers=function(){return ao.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ao.geo.albersUsa=function(){function n(n){var u=n[0],o=n[1];return t=null,e(u,o),t||(r(u,o),t)||i(u,o),t}var t,e,r,i,u=ao.geo.albers(),o=ao.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=ao.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=u.scale(),e=u.translate(),r=(n[0]-e[0])/t,i=(n[1]-e[1])/t;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?o:i>=.166&&.234>i&&r>=-.214&&-.115>r?a:u).invert(n)},n.stream=function(n){var t=u.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,i){t.point(n,i),e.point(n,i),r.point(n,i)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(u.precision(t),o.precision(t),a.precision(t),n):u.precision()},n.scale=function(t){return arguments.length?(u.scale(t),o.scale(.35*t),a.scale(t),n.translate(u.translate())):u.scale()},n.translate=function(t){if(!arguments.length)return u.translate();var c=u.scale(),f=+t[0],s=+t[1];return e=u.translate(t).clipExtent([[f-.455*c,s-.238*c],[f+.455*c,s+.238*c]]).stream(l).point,r=o.translate([f-.307*c,s+.201*c]).clipExtent([[f-.425*c+Uo,s+.12*c+Uo],[f-.214*c-Uo,s+.234*c-Uo]]).stream(l).point,i=a.translate([f-.205*c,s+.212*c]).clipExtent([[f-.214*c+Uo,s+.166*c+Uo],[f-.115*c-Uo,s+.234*c-Uo]]).stream(l).point,n},n.scale(1070)};var Oa,Ia,Ya,Za,Va,Xa,$a={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Ia=0,$a.lineStart=$t},polygonEnd:function(){$a.lineStart=$a.lineEnd=$a.point=b,Oa+=xo(Ia/2)}},Ba={point:Bt,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Wa={point:Gt,lineStart:Kt,lineEnd:Qt,polygonStart:function(){Wa.lineStart=ne},polygonEnd:function(){Wa.point=Gt,Wa.lineStart=Kt,Wa.lineEnd=Qt}};ao.geo.path=function(){function n(n){return n&&("function"==typeof a&&u.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=i(u)),ao.geo.stream(n,o)),u.result()}function t(){return o=null,n}var e,r,i,u,o,a=4.5;return n.area=function(n){return Oa=0,ao.geo.stream(n,i($a)),Oa},n.centroid=function(n){return Ca=za=La=qa=Ta=Ra=Da=Pa=Ua=0,ao.geo.stream(n,i(Wa)),Ua?[Da/Ua,Pa/Ua]:Ra?[qa/Ra,Ta/Ra]:La?[Ca/La,za/La]:[NaN,NaN]},n.bounds=function(n){return Va=Xa=-(Ya=Za=1/0),ao.geo.stream(n,i(Ba)),[[Ya,Za],[Va,Xa]]},n.projection=function(n){return arguments.length?(i=(e=n)?n.stream||re(n):m,t()):e},n.context=function(n){return arguments.length?(u=null==(r=n)?new Wt:new te(n),"function"!=typeof a&&u.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(u.pointRadius(+t),+t),n):a},n.projection(ao.geo.albersUsa()).context(null)},ao.geo.transform=function(n){return{stream:function(t){var e=new ie(t);for(var r in n)e[r]=n[r];return e}}},ie.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ao.geo.projection=oe,ao.geo.projectionMutator=ae,(ao.geo.equirectangular=function(){return oe(ce)}).raw=ce.invert=ce,ao.geo.rotation=function(n){function t(t){return t=n(t[0]*Yo,t[1]*Yo),t[0]*=Zo,t[1]*=Zo,t}return n=se(n[0]%360*Yo,n[1]*Yo,n.length>2?n[2]*Yo:0),t.invert=function(t){return t=n.invert(t[0]*Yo,t[1]*Yo),t[0]*=Zo,t[1]*=Zo,t},t},fe.invert=ce,ao.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=se(-n[0]*Yo,-n[1]*Yo,0).invert,i=[];return e(null,null,1,{point:function(n,e){i.push(n=t(n,e)),n[0]*=Zo,n[1]*=Zo}}),{type:"Polygon",coordinates:[i]}}var t,e,r=[0,0],i=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=ve((t=+r)*Yo,i*Yo),n):t},n.precision=function(r){return arguments.length?(e=ve(t*Yo,(i=+r)*Yo),n):i},n.angle(90)},ao.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Yo,i=n[1]*Yo,u=t[1]*Yo,o=Math.sin(r),a=Math.cos(r),l=Math.sin(i),c=Math.cos(i),f=Math.sin(u),s=Math.cos(u);return Math.atan2(Math.sqrt((e=s*o)*e+(e=c*f-l*s*a)*e),l*f+c*s*a)},ao.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return ao.range(Math.ceil(u/d)*d,i,d).map(h).concat(ao.range(Math.ceil(c/y)*y,l,y).map(p)).concat(ao.range(Math.ceil(r/g)*g,e,g).filter(function(n){return xo(n%d)>Uo}).map(f)).concat(ao.range(Math.ceil(a/v)*v,o,v).filter(function(n){return xo(n%y)>Uo}).map(s))}var e,r,i,u,o,a,l,c,f,s,h,p,g=10,v=g,d=90,y=360,m=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(u).concat(p(l).slice(1),h(i).reverse().slice(1),p(c).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(u=+t[0][0],i=+t[1][0],c=+t[0][1],l=+t[1][1],u>i&&(t=u,u=i,i=t),c>l&&(t=c,c=l,l=t),n.precision(m)):[[u,c],[i,l]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(m)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],y=+t[1],n):[d,y]},n.minorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],n):[g,v]},n.precision=function(t){return arguments.length?(m=+t,f=ye(a,o,90),s=me(r,e,m),h=ye(c,l,90),p=me(u,i,m),n):m},n.majorExtent([[-180,-90+Uo],[180,90-Uo]]).minorExtent([[-180,-80-Uo],[180,80+Uo]])},ao.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||i.apply(this,arguments)]}}var t,e,r=Me,i=xe;return n.distance=function(){return ao.geo.distance(t||r.apply(this,arguments),e||i.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(i=t,e="function"==typeof t?null:t,n):i},n.precision=function(){return arguments.length?n:0},n},ao.geo.interpolate=function(n,t){return be(n[0]*Yo,n[1]*Yo,t[0]*Yo,t[1]*Yo)},ao.geo.length=function(n){return Ja=0,ao.geo.stream(n,Ga),Ja};var Ja,Ga={sphere:b,point:b,lineStart:_e,lineEnd:b,polygonStart:b,polygonEnd:b},Ka=we(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(ao.geo.azimuthalEqualArea=function(){return oe(Ka)}).raw=Ka;var Qa=we(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},m);(ao.geo.azimuthalEquidistant=function(){return oe(Qa)}).raw=Qa,(ao.geo.conicConformal=function(){return Vt(Se)}).raw=Se,(ao.geo.conicEquidistant=function(){return Vt(ke)}).raw=ke;var nl=we(function(n){return 1/n},Math.atan);(ao.geo.gnomonic=function(){return oe(nl)}).raw=nl,Ne.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Io]},(ao.geo.mercator=function(){return Ee(Ne)}).raw=Ne;var tl=we(function(){return 1},Math.asin);(ao.geo.orthographic=function(){return oe(tl)}).raw=tl;var el=we(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(ao.geo.stereographic=function(){return oe(el)}).raw=el,Ae.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Io]},(ao.geo.transverseMercator=function(){var n=Ee(Ae),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Ae,ao.geom={},ao.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,i=En(e),u=En(r),o=n.length,a=[],l=[];for(t=0;o>t;t++)a.push([+i.call(this,n[t],t),+u.call(this,n[t],t),t]);for(a.sort(qe),t=0;o>t;t++)l.push([a[t][0],-a[t][1]]);var c=Le(a),f=Le(l),s=f[0]===c[0],h=f[f.length-1]===c[c.length-1],p=[];for(t=c.length-1;t>=0;--t)p.push(n[a[c[t]][2]]);for(t=+s;t<f.length-h;++t)p.push(n[a[f[t]][2]]);return p}var e=Ce,r=ze;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},ao.geom.polygon=function(n){return ko(n,rl),n};var rl=ao.geom.polygon.prototype=[];rl.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],i=0;++t<e;)n=r,r=this[t],i+=n[1]*r[0]-n[0]*r[1];return.5*i},rl.centroid=function(n){var t,e,r=-1,i=this.length,u=0,o=0,a=this[i-1];for(arguments.length||(n=-1/(6*this.area()));++r<i;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],u+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[u*n,o*n]},rl.clip=function(n){for(var t,e,r,i,u,o,a=De(n),l=-1,c=this.length-De(this),f=this[c-1];++l<c;){for(t=n.slice(),n.length=0,i=this[l],u=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],Te(o,f,i)?(Te(u,f,i)||n.push(Re(u,o,f,i)),n.push(o)):Te(u,f,i)&&n.push(Re(u,o,f,i)),u=o;a&&n.push(n[0]),f=i}return n};var il,ul,ol,al,ll,cl=[],fl=[];Ye.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Ve),t.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},er.prototype={insert:function(n,t){var e,r,i;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=or(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.R&&(ir(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ur(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.L&&(ur(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ir(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,i=n.U,u=n.L,o=n.R;if(e=u?o?or(o):u:o,i?i.L===n?i.L=e:i.R=e:this._=e,u&&o?(r=e.C,e.C=n.C,e.L=u,u.U=e,e!==o?(i=e.U,e.U=n.U,n=e.R,i.L=n,e.R=o,o.U=e):(e.U=i,i=e,n=e.R)):(r=n.C,n=e),n&&(n.U=i),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,ir(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ur(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ir(this,i),n=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ur(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ir(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ur(this,i),n=this._;break}t.C=!0,n=i,i=i.U}while(!n.C);n&&(n.C=!1)}}},ao.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],i=a[0][1],u=a[1][0],o=a[1][1];return ar(e(n),a).cells.forEach(function(e,a){var l=e.edges,c=e.site,f=t[a]=l.length?l.map(function(n){var t=n.start();return[t.x,t.y]}):c.x>=r&&c.x<=u&&c.y>=i&&c.y<=o?[[r,o],[u,o],[u,i],[r,i]]:[];f.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(u(n,t)/Uo)*Uo,y:Math.round(o(n,t)/Uo)*Uo,i:t}})}var r=Ce,i=ze,u=r,o=i,a=sl;return n?t(n):(t.links=function(n){return ar(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return ar(e(n)).cells.forEach(function(e,r){for(var i,u,o=e.site,a=e.edges.sort(Ve),l=-1,c=a.length,f=a[c-1].edge,s=f.l===o?f.r:f.l;++l<c;)i=f,u=s,f=a[l].edge,s=f.l===o?f.r:f.l,r<u.i&&r<s.i&&cr(o,u,s)<0&&t.push([n[r],n[u.i],n[s.i]])}),t},t.x=function(n){return arguments.length?(u=En(r=n),t):r},t.y=function(n){return arguments.length?(o=En(i=n),t):i},t.clipExtent=function(n){return arguments.length?(a=null==n?sl:n,t):a===sl?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===sl?null:a&&a[1]},t)};var sl=[[-1e6,-1e6],[1e6,1e6]];ao.geom.delaunay=function(n){return ao.geom.voronoi().triangles(n)},ao.geom.quadtree=function(n,t,e,r,i){function u(n){function u(n,t,e,r,i,u,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var l=n.x,f=n.y;if(null!=l)if(xo(l-e)+xo(f-r)<.01)c(n,t,e,r,i,u,o,a);else{var s=n.point;n.x=n.y=n.point=null,c(n,s,l,f,i,u,o,a),c(n,t,e,r,i,u,o,a)}else n.x=e,n.y=r,n.point=t}else c(n,t,e,r,i,u,o,a)}function c(n,t,e,r,i,o,a,l){var c=.5*(i+a),f=.5*(o+l),s=e>=c,h=r>=f,p=h<<1|s;n.leaf=!1,n=n.nodes[p]||(n.nodes[p]=hr()),s?i=c:a=c,h?o=f:l=f,u(n,t,e,r,i,o,a,l)}var f,s,h,p,g,v,d,y,m,M=En(a),x=En(l);if(null!=t)v=t,d=e,y=r,m=i;else if(y=m=-(v=d=1/0),s=[],h=[],g=n.length,o)for(p=0;g>p;++p)f=n[p],f.x<v&&(v=f.x),f.y<d&&(d=f.y),f.x>y&&(y=f.x),f.y>m&&(m=f.y),s.push(f.x),h.push(f.y);else for(p=0;g>p;++p){var b=+M(f=n[p],p),_=+x(f,p);v>b&&(v=b),d>_&&(d=_),b>y&&(y=b),_>m&&(m=_),s.push(b),h.push(_)}var w=y-v,S=m-d;w>S?m=d+w:y=v+S;var k=hr();if(k.add=function(n){u(k,n,+M(n,++p),+x(n,p),v,d,y,m)},k.visit=function(n){pr(n,k,v,d,y,m)},k.find=function(n){return gr(k,n[0],n[1],v,d,y,m)},p=-1,null==t){for(;++p<g;)u(k,n[p],s[p],h[p],v,d,y,m);--p}else n.forEach(k.add);return s=h=n=f=null,k}var o,a=Ce,l=ze;return(o=arguments.length)?(a=fr,l=sr,3===o&&(i=e,r=t,e=t=0),u(n)):(u.x=function(n){return arguments.length?(a=n,u):a},u.y=function(n){return arguments.length?(l=n,u):l},u.extent=function(n){return arguments.length?(null==n?t=e=r=i=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],i=+n[1][1]),u):null==t?null:[[t,e],[r,i]]},u.size=function(n){return arguments.length?(null==n?t=e=r=i=null:(t=e=0,r=+n[0],i=+n[1]),u):null==t?null:[r-t,i-e]},u)},ao.interpolateRgb=vr,ao.interpolateObject=dr,ao.interpolateNumber=yr,ao.interpolateString=mr;var hl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pl=new RegExp(hl.source,"g");ao.interpolate=Mr,ao.interpolators=[function(n,t){var e=typeof t;return("string"===e?ua.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?vr:mr:t instanceof an?vr:Array.isArray(t)?xr:"object"===e&&isNaN(t)?dr:yr)(n,t)}],ao.interpolateArray=xr;var gl=function(){return m},vl=ao.map({linear:gl,poly:Er,quad:function(){return Sr},cubic:function(){return kr},sin:function(){return Ar},exp:function(){return Cr},circle:function(){return zr},elastic:Lr,back:qr,bounce:function(){return Tr}}),dl=ao.map({"in":m,out:_r,"in-out":wr,"out-in":function(n){return wr(_r(n))}});ao.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=vl.get(e)||gl,r=dl.get(r)||m,br(r(e.apply(null,lo.call(arguments,1))))},ao.interpolateHcl=Rr,ao.interpolateHsl=Dr,ao.interpolateLab=Pr,ao.interpolateRound=Ur,ao.transform=function(n){var t=fo.createElementNS(ao.ns.prefix.svg,"g");return(ao.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new jr(e?e.matrix:yl)})(n)},jr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var yl={a:1,b:0,c:0,d:1,e:0,f:0};ao.interpolateTransform=$r,ao.layout={},ao.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Jr(n[e]));return t}},ao.layout.chord=function(){function n(){var n,c,s,h,p,g={},v=[],d=ao.range(u),y=[];for(e=[],r=[],n=0,h=-1;++h<u;){for(c=0,p=-1;++p<u;)c+=i[h][p];v.push(c),y.push(ao.range(u)),n+=c}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&y.forEach(function(n,t){n.sort(function(n,e){return a(i[t][n],i[t][e])})}),n=(Ho-f*u)/n,c=0,h=-1;++h<u;){for(s=c,p=-1;++p<u;){var m=d[h],M=y[m][p],x=i[m][M],b=c,_=c+=x*n;g[m+"-"+M]={index:m,subindex:M,startAngle:b,endAngle:_,value:x}}r[m]={index:m,startAngle:s,endAngle:c,value:v[m]},c+=f}for(h=-1;++h<u;)for(p=h-1;++p<u;){var w=g[h+"-"+p],S=g[p+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}l&&t()}function t(){e.sort(function(n,t){return l((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,i,u,o,a,l,c={},f=0;return c.matrix=function(n){return arguments.length?(u=(i=n)&&i.length,e=r=null,c):i},c.padding=function(n){return arguments.length?(f=n,e=r=null,c):f},c.sortGroups=function(n){return arguments.length?(o=n,e=r=null,c):o},c.sortSubgroups=function(n){return arguments.length?(a=n,e=null,c):a},c.sortChords=function(n){return arguments.length?(l=n,e&&t(),c):l},c.chords=function(){return e||n(),e},c.groups=function(){return r||n(),r},c},ao.layout.force=function(){function n(n){return function(t,e,r,i){if(t.point!==n){var u=t.cx-n.x,o=t.cy-n.y,a=i-e,l=u*u+o*o;if(l>a*a/y){if(v>l){var c=t.charge/l;n.px-=u*c,n.py-=o*c}return!0}if(t.point&&l&&v>l){var c=t.pointCharge/l;n.px-=u*c,n.py-=o*c}}return!t.charge}}function t(n){n.px=ao.event.x,n.py=ao.event.y,l.resume()}var e,r,i,u,o,a,l={},c=ao.dispatch("start","tick","end"),f=[1,1],s=.9,h=ml,p=Ml,g=-30,v=xl,d=.1,y=.64,M=[],x=[];return l.tick=function(){if((i*=.99)<.005)return e=null,c.end({type:"end",alpha:i=0}),!0;var t,r,l,h,p,v,y,m,b,_=M.length,w=x.length;for(r=0;w>r;++r)l=x[r],h=l.source,p=l.target,m=p.x-h.x,b=p.y-h.y,(v=m*m+b*b)&&(v=i*o[r]*((v=Math.sqrt(v))-u[r])/v,m*=v,b*=v,p.x-=m*(y=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=b*y,h.x+=m*(y=1-y),h.y+=b*y);if((y=i*d)&&(m=f[0]/2,b=f[1]/2,r=-1,y))for(;++r<_;)l=M[r],l.x+=(m-l.x)*y,l.y+=(b-l.y)*y;if(g)for(ri(t=ao.geom.quadtree(M),i,a),r=-1;++r<_;)(l=M[r]).fixed||t.visit(n(l));for(r=-1;++r<_;)l=M[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*s,l.y-=(l.py-(l.py=l.y))*s);c.tick({type:"tick",alpha:i})},l.nodes=function(n){return arguments.length?(M=n,l):M},l.links=function(n){return arguments.length?(x=n,l):x},l.size=function(n){return arguments.length?(f=n,l):f},l.linkDistance=function(n){return arguments.length?(h="function"==typeof n?n:+n,l):h},l.distance=l.linkDistance,l.linkStrength=function(n){return arguments.length?(p="function"==typeof n?n:+n,l):p},l.friction=function(n){return arguments.length?(s=+n,l):s},l.charge=function(n){return arguments.length?(g="function"==typeof n?n:+n,l):g},l.chargeDistance=function(n){return arguments.length?(v=n*n,l):Math.sqrt(v)},l.gravity=function(n){return arguments.length?(d=+n,l):d},l.theta=function(n){return arguments.length?(y=n*n,l):Math.sqrt(y)},l.alpha=function(n){return arguments.length?(n=+n,i?n>0?i=n:(e.c=null,e.t=NaN,e=null,c.end({type:"end",alpha:i=0})):n>0&&(c.start({type:"start",alpha:i=n}),e=qn(l.tick)),l):i},l.start=function(){function n(n,r){if(!e){for(e=new Array(i),l=0;i>l;++l)e[l]=[];for(l=0;c>l;++l){var u=x[l];e[u.source.index].push(u.target),e[u.target.index].push(u.source)}}for(var o,a=e[t],l=-1,f=a.length;++l<f;)if(!isNaN(o=a[l][n]))return o;return Math.random()*r}var t,e,r,i=M.length,c=x.length,s=f[0],v=f[1];for(t=0;i>t;++t)(r=M[t]).index=t,r.weight=0;for(t=0;c>t;++t)r=x[t],"number"==typeof r.source&&(r.source=M[r.source]),"number"==typeof r.target&&(r.target=M[r.target]),++r.source.weight,++r.target.weight;for(t=0;i>t;++t)r=M[t],isNaN(r.x)&&(r.x=n("x",s)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],"function"==typeof h)for(t=0;c>t;++t)u[t]=+h.call(this,x[t],t);else for(t=0;c>t;++t)u[t]=h;if(o=[],"function"==typeof p)for(t=0;c>t;++t)o[t]=+p.call(this,x[t],t);else for(t=0;c>t;++t)o[t]=p;if(a=[],"function"==typeof g)for(t=0;i>t;++t)a[t]=+g.call(this,M[t],t);else for(t=0;i>t;++t)a[t]=g;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=ao.behavior.drag().origin(m).on("dragstart.force",Qr).on("drag.force",t).on("dragend.force",ni)),arguments.length?void this.on("mouseover.force",ti).on("mouseout.force",ei).call(r):r},ao.rebind(l,c,"on")};var ml=20,Ml=1,xl=1/0;ao.layout.hierarchy=function(){function n(i){var u,o=[i],a=[];for(i.depth=0;null!=(u=o.pop());)if(a.push(u),(c=e.call(n,u,u.depth))&&(l=c.length)){for(var l,c,f;--l>=0;)o.push(f=c[l]),f.parent=u,f.depth=u.depth+1;r&&(u.value=0),u.children=c}else r&&(u.value=+r.call(n,u,u.depth)||0),delete u.children;return oi(i,function(n){var e,i;t&&(e=n.children)&&e.sort(t),r&&(i=n.parent)&&(i.value+=n.value)}),a}var t=ci,e=ai,r=li;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(ui(t,function(n){n.children&&(n.value=0)}),oi(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},ao.layout.partition=function(){function n(t,e,r,i){var u=t.children;if(t.x=e,t.y=t.depth*i,t.dx=r,t.dy=i,u&&(o=u.length)){var o,a,l,c=-1;for(r=t.value?r/t.value:0;++c<o;)n(a=u[c],e,l=a.value*r,i),e+=l}}function t(n){var e=n.children,r=0;if(e&&(i=e.length))for(var i,u=-1;++u<i;)r=Math.max(r,t(e[u]));return 1+r}function e(e,u){var o=r.call(this,e,u);return n(o[0],0,i[0],i[1]/t(o[0])),o}var r=ao.layout.hierarchy(),i=[1,1];return e.size=function(n){return arguments.length?(i=n,e):i},ii(e,r)},ao.layout.pie=function(){function n(o){var a,l=o.length,c=o.map(function(e,r){return+t.call(n,e,r)}),f=+("function"==typeof r?r.apply(this,arguments):r),s=("function"==typeof i?i.apply(this,arguments):i)-f,h=Math.min(Math.abs(s)/l,+("function"==typeof u?u.apply(this,arguments):u)),p=h*(0>s?-1:1),g=ao.sum(c),v=g?(s-l*p)/g:0,d=ao.range(l),y=[];return null!=e&&d.sort(e===bl?function(n,t){return c[t]-c[n]}:function(n,t){return e(o[n],o[t])}),d.forEach(function(n){y[n]={data:o[n],value:a=c[n],startAngle:f,endAngle:f+=a*v+p,padAngle:h}}),y}var t=Number,e=bl,r=0,i=Ho,u=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(i=t,n):i},n.padAngle=function(t){return arguments.length?(u=t,n):u},n};var bl={};ao.layout.stack=function(){function n(a,l){if(!(h=a.length))return a;var c=a.map(function(e,r){return t.call(n,e,r)}),f=c.map(function(t){return t.map(function(t,e){return[u.call(n,t,e),o.call(n,t,e)]})}),s=e.call(n,f,l);c=ao.permute(c,s),f=ao.permute(f,s);var h,p,g,v,d=r.call(n,f,l),y=c[0].length;for(g=0;y>g;++g)for(i.call(n,c[0][g],v=d[g],f[0][g][1]),p=1;h>p;++p)i.call(n,c[p][g],v+=f[p-1][g][1],f[p][g][1]);return a}var t=m,e=gi,r=vi,i=pi,u=si,o=hi;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:_l.get(t)||gi,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:wl.get(t)||vi,n):r},n.x=function(t){return arguments.length?(u=t,n):u},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(i=t,n):i},n};var _l=ao.map({"inside-out":function(n){var t,e,r=n.length,i=n.map(di),u=n.map(yi),o=ao.range(r).sort(function(n,t){return i[n]-i[t]}),a=0,l=0,c=[],f=[];for(t=0;r>t;++t)e=o[t],l>a?(a+=u[e],c.push(e)):(l+=u[e],f.push(e));return f.reverse().concat(c)},reverse:function(n){return ao.range(n.length).reverse()},"default":gi}),wl=ao.map({silhouette:function(n){var t,e,r,i=n.length,u=n[0].length,o=[],a=0,l=[];for(e=0;u>e;++e){for(t=0,r=0;i>t;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;u>e;++e)l[e]=(a-o[e])/2;return l},wiggle:function(n){var t,e,r,i,u,o,a,l,c,f=n.length,s=n[0],h=s.length,p=[];for(p[0]=l=c=0,e=1;h>e;++e){for(t=0,i=0;f>t;++t)i+=n[t][e][1];for(t=0,u=0,a=s[e][0]-s[e-1][0];f>t;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);t>r;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;u+=o*n[t][e][1]}p[e]=l-=i?u/i*a:0,c>l&&(c=l)}for(e=0;h>e;++e)p[e]-=c;return p},expand:function(n){var t,e,r,i=n.length,u=n[0].length,o=1/i,a=[];for(e=0;u>e;++e){for(t=0,r=0;i>t;t++)r+=n[t][e][1];if(r)for(t=0;i>t;t++)n[t][e][1]/=r;else for(t=0;i>t;t++)n[t][e][1]=o}for(e=0;u>e;++e)a[e]=0;return a},zero:vi});ao.layout.histogram=function(){function n(n,u){for(var o,a,l=[],c=n.map(e,this),f=r.call(this,c,u),s=i.call(this,f,c,u),u=-1,h=c.length,p=s.length-1,g=t?1:1/h;++u<p;)o=l[u]=[],o.dx=s[u+1]-(o.x=s[u]),o.y=0;if(p>0)for(u=-1;++u<h;)a=c[u],a>=f[0]&&a<=f[1]&&(o=l[ao.bisect(s,a,1,p)-1],o.y+=g,o.push(n[u]));return l}var t=!0,e=Number,r=bi,i=Mi;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=En(t),n):r},n.bins=function(t){return arguments.length?(i="number"==typeof t?function(n){return xi(n,t)}:En(t),n):i},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},ao.layout.pack=function(){function n(n,u){var o=e.call(this,n,u),a=o[0],l=i[0],c=i[1],f=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,oi(a,function(n){n.r=+f(n.value)}),oi(a,Ni),r){var s=r*(t?1:Math.max(2*a.r/l,2*a.r/c))/2;oi(a,function(n){n.r+=s}),oi(a,Ni),oi(a,function(n){n.r-=s})}return Ci(a,l/2,c/2,t?1:1/Math.max(2*a.r/l,2*a.r/c)),o}var t,e=ao.layout.hierarchy().sort(_i),r=0,i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},ii(n,e)},ao.layout.tree=function(){function n(n,i){var f=o.call(this,n,i),s=f[0],h=t(s);if(oi(h,e),h.parent.m=-h.z,ui(h,r),c)ui(s,u);else{var p=s,g=s,v=s;ui(s,function(n){n.x<p.x&&(p=n),n.x>g.x&&(g=n),n.depth>v.depth&&(v=n)});var d=a(p,g)/2-p.x,y=l[0]/(g.x+a(g,p)/2+d),m=l[1]/(v.depth||1);ui(s,function(n){n.x=(n.x+d)*y,n.y=n.depth*m})}return f}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var i,u=t.children,o=0,a=u.length;a>o;++o)r.push((u[o]=i={_:u[o],parent:t,children:(i=u[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Di(n);var u=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+a(n._,r._),n.m=n.z-u):n.z=u}else r&&(n.z=r.z+a(n._,r._));n.parent.A=i(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function i(n,t,e){if(t){for(var r,i=n,u=n,o=t,l=i.parent.children[0],c=i.m,f=u.m,s=o.m,h=l.m;o=Ti(o),i=qi(i),o&&i;)l=qi(l),u=Ti(u),u.a=n,r=o.z+s-i.z-c+a(o._,i._),r>0&&(Ri(Pi(o,n,e),n,r),c+=r,f+=r),s+=o.m,c+=i.m,h+=l.m,f+=u.m;o&&!Ti(u)&&(u.t=o,u.m+=s-f),i&&!qi(l)&&(l.t=i,l.m+=c-h,e=n)}return e}function u(n){n.x*=l[0],n.y=n.depth*l[1]}var o=ao.layout.hierarchy().sort(null).value(null),a=Li,l=[1,1],c=null;return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(c=null==(l=t)?u:null,n):c?null:l},n.nodeSize=function(t){return arguments.length?(c=null==(l=t)?null:u,n):c?l:null},ii(n,o)},ao.layout.cluster=function(){function n(n,u){var o,a=t.call(this,n,u),l=a[0],c=0;oi(l,function(n){var t=n.children;t&&t.length?(n.x=ji(t),n.y=Ui(t)):(n.x=o?c+=e(n,o):0,n.y=0,o=n)});var f=Fi(l),s=Hi(l),h=f.x-e(f,s)/2,p=s.x+e(s,f)/2;return oi(l,i?function(n){n.x=(n.x-l.x)*r[0],n.y=(l.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(p-h)*r[0],n.y=(1-(l.y?n.y/l.y:1))*r[1]}),a}var t=ao.layout.hierarchy().sort(null).value(null),e=Li,r=[1,1],i=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(i=null==(r=t),n):i?null:r},n.nodeSize=function(t){return arguments.length?(i=null!=(r=t),n):i?r:null},ii(n,t)},ao.layout.treemap=function(){function n(n,t){for(var e,r,i=-1,u=n.length;++i<u;)r=(e=n[i]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var u=e.children;if(u&&u.length){var o,a,l,c=s(e),f=[],h=u.slice(),g=1/0,v="slice"===p?c.dx:"dice"===p?c.dy:"slice-dice"===p?1&e.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(n(h,c.dx*c.dy/e.value),f.area=0;(l=h.length)>0;)f.push(o=h[l-1]),f.area+=o.area,"squarify"!==p||(a=r(f,v))<=g?(h.pop(),g=a):(f.area-=f.pop().area,i(f,v,c,!1),v=Math.min(c.dx,c.dy),f.length=f.area=0,g=1/0);f.length&&(i(f,v,c,!0),f.length=f.area=0),u.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var u,o=s(t),a=r.slice(),l=[];for(n(a,o.dx*o.dy/t.value),l.area=0;u=a.pop();)l.push(u),l.area+=u.area,null!=u.z&&(i(l,u.z?o.dx:o.dy,o,!a.length),l.length=l.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,i=0,u=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(u>e&&(u=e),e>i&&(i=e));return r*=r,t*=t,r?Math.max(t*i*g/r,r/(t*u*g)):1/0}function i(n,t,e,r){var i,u=-1,o=n.length,a=e.x,c=e.y,f=t?l(n.area/t):0;
if(t==e.dx){for((r||f>e.dy)&&(f=e.dy);++u<o;)i=n[u],i.x=a,i.y=c,i.dy=f,a+=i.dx=Math.min(e.x+e.dx-a,f?l(i.area/f):0);i.z=!0,i.dx+=e.x+e.dx-a,e.y+=f,e.dy-=f}else{for((r||f>e.dx)&&(f=e.dx);++u<o;)i=n[u],i.x=a,i.y=c,i.dx=f,c+=i.dy=Math.min(e.y+e.dy-c,f?l(i.area/f):0);i.z=!1,i.dy+=e.y+e.dy-c,e.x+=f,e.dx-=f}}function u(r){var i=o||a(r),u=i[0];return u.x=u.y=0,u.value?(u.dx=c[0],u.dy=c[1]):u.dx=u.dy=0,o&&a.revalue(u),n([u],u.dx*u.dy/u.value),(o?e:t)(u),h&&(o=i),i}var o,a=ao.layout.hierarchy(),l=Math.round,c=[1,1],f=null,s=Oi,h=!1,p="squarify",g=.5*(1+Math.sqrt(5));return u.size=function(n){return arguments.length?(c=n,u):c},u.padding=function(n){function t(t){var e=n.call(u,t,t.depth);return null==e?Oi(t):Ii(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Ii(t,n)}if(!arguments.length)return f;var r;return s=null==(f=n)?Oi:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,u},u.round=function(n){return arguments.length?(l=n?Math.round:Number,u):l!=Number},u.sticky=function(n){return arguments.length?(h=n,o=null,u):h},u.ratio=function(n){return arguments.length?(g=n,u):g},u.mode=function(n){return arguments.length?(p=n+"",u):p},ii(u,a)},ao.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,i;do e=2*Math.random()-1,r=2*Math.random()-1,i=e*e+r*r;while(!i||i>1);return n+t*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var n=ao.random.normal.apply(ao,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=ao.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},ao.scale={};var Sl={floor:m,ceil:m};ao.scale.linear=function(){return Wi([0,1],[0,1],Mr,!1)};var kl={s:1,g:1,p:1,r:1,e:1};ao.scale.log=function(){return ru(ao.scale.linear().domain([0,1]),10,!0,[1,10])};var Nl=ao.format(".0e"),El={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};ao.scale.pow=function(){return iu(ao.scale.linear(),1,[0,1])},ao.scale.sqrt=function(){return ao.scale.pow().exponent(.5)},ao.scale.ordinal=function(){return ou([],{t:"range",a:[[]]})},ao.scale.category10=function(){return ao.scale.ordinal().range(Al)},ao.scale.category20=function(){return ao.scale.ordinal().range(Cl)},ao.scale.category20b=function(){return ao.scale.ordinal().range(zl)},ao.scale.category20c=function(){return ao.scale.ordinal().range(Ll)};var Al=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xn),Cl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xn),zl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xn),Ll=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xn);ao.scale.quantile=function(){return au([],[])},ao.scale.quantize=function(){return lu(0,1,[0,1])},ao.scale.threshold=function(){return cu([.5],[0,1])},ao.scale.identity=function(){return fu([0,1])},ao.svg={},ao.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+r.apply(this,arguments)),f=o.apply(this,arguments)-Io,s=a.apply(this,arguments)-Io,h=Math.abs(s-f),p=f>s?0:1;if(n>c&&(g=c,c=n,n=g),h>=Oo)return t(c,p)+(n?t(n,1-p):"")+"Z";var g,v,d,y,m,M,x,b,_,w,S,k,N=0,E=0,A=[];if((y=(+l.apply(this,arguments)||0)/2)&&(d=u===ql?Math.sqrt(n*n+c*c):+u.apply(this,arguments),p||(E*=-1),c&&(E=tn(d/c*Math.sin(y))),n&&(N=tn(d/n*Math.sin(y)))),c){m=c*Math.cos(f+E),M=c*Math.sin(f+E),x=c*Math.cos(s-E),b=c*Math.sin(s-E);var C=Math.abs(s-f-2*E)<=Fo?0:1;if(E&&yu(m,M,x,b)===p^C){var z=(f+s)/2;m=c*Math.cos(z),M=c*Math.sin(z),x=b=null}}else m=M=0;if(n){_=n*Math.cos(s-N),w=n*Math.sin(s-N),S=n*Math.cos(f+N),k=n*Math.sin(f+N);var L=Math.abs(f-s+2*N)<=Fo?0:1;if(N&&yu(_,w,S,k)===1-p^L){var q=(f+s)/2;_=n*Math.cos(q),w=n*Math.sin(q),S=k=null}}else _=w=0;if(h>Uo&&(g=Math.min(Math.abs(c-n)/2,+i.apply(this,arguments)))>.001){v=c>n^p?0:1;var T=g,R=g;if(Fo>h){var D=null==S?[_,w]:null==x?[m,M]:Re([m,M],[S,k],[x,b],[_,w]),P=m-D[0],U=M-D[1],j=x-D[0],F=b-D[1],H=1/Math.sin(Math.acos((P*j+U*F)/(Math.sqrt(P*P+U*U)*Math.sqrt(j*j+F*F)))/2),O=Math.sqrt(D[0]*D[0]+D[1]*D[1]);R=Math.min(g,(n-O)/(H-1)),T=Math.min(g,(c-O)/(H+1))}if(null!=x){var I=mu(null==S?[_,w]:[S,k],[m,M],c,T,p),Y=mu([x,b],[_,w],c,T,p);g===T?A.push("M",I[0],"A",T,",",T," 0 0,",v," ",I[1],"A",c,",",c," 0 ",1-p^yu(I[1][0],I[1][1],Y[1][0],Y[1][1]),",",p," ",Y[1],"A",T,",",T," 0 0,",v," ",Y[0]):A.push("M",I[0],"A",T,",",T," 0 1,",v," ",Y[0])}else A.push("M",m,",",M);if(null!=S){var Z=mu([m,M],[S,k],n,-R,p),V=mu([_,w],null==x?[m,M]:[x,b],n,-R,p);g===R?A.push("L",V[0],"A",R,",",R," 0 0,",v," ",V[1],"A",n,",",n," 0 ",p^yu(V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-p," ",Z[1],"A",R,",",R," 0 0,",v," ",Z[0]):A.push("L",V[0],"A",R,",",R," 0 0,",v," ",Z[0])}else A.push("L",_,",",w)}else A.push("M",m,",",M),null!=x&&A.push("A",c,",",c," 0 ",C,",",p," ",x,",",b),A.push("L",_,",",w),null!=S&&A.push("A",n,",",n," 0 ",L,",",1-p," ",S,",",k);return A.push("Z"),A.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=hu,r=pu,i=su,u=ql,o=gu,a=vu,l=du;return n.innerRadius=function(t){return arguments.length?(e=En(t),n):e},n.outerRadius=function(t){return arguments.length?(r=En(t),n):r},n.cornerRadius=function(t){return arguments.length?(i=En(t),n):i},n.padRadius=function(t){return arguments.length?(u=t==ql?ql:En(t),n):u},n.startAngle=function(t){return arguments.length?(o=En(t),n):o},n.endAngle=function(t){return arguments.length?(a=En(t),n):a},n.padAngle=function(t){return arguments.length?(l=En(t),n):l},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-Io;return[Math.cos(t)*n,Math.sin(t)*n]},n};var ql="auto";ao.svg.line=function(){return Mu(m)};var Tl=ao.map({linear:xu,"linear-closed":bu,step:_u,"step-before":wu,"step-after":Su,basis:zu,"basis-open":Lu,"basis-closed":qu,bundle:Tu,cardinal:Eu,"cardinal-open":ku,"cardinal-closed":Nu,monotone:Fu});Tl.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Rl=[0,2/3,1/3,0],Dl=[0,1/3,2/3,0],Pl=[0,1/6,2/3,1/6];ao.svg.line.radial=function(){var n=Mu(Hu);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},wu.reverse=Su,Su.reverse=wu,ao.svg.area=function(){return Ou(m)},ao.svg.area.radial=function(){var n=Ou(Hu);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},ao.svg.chord=function(){function n(n,a){var l=t(this,u,n,a),c=t(this,o,n,a);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(e(l,c)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,c.r,c.p0)+r(c.r,c.p1,c.a1-c.a0)+i(c.r,c.p1,l.r,l.p0))+"Z"}function t(n,t,e,r){var i=t.call(n,e,r),u=a.call(n,i,r),o=l.call(n,i,r)-Io,f=c.call(n,i,r)-Io;return{r:u,a0:o,a1:f,p0:[u*Math.cos(o),u*Math.sin(o)],p1:[u*Math.cos(f),u*Math.sin(f)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>Fo)+",1 "+t}function i(n,t,e,r){return"Q 0,0 "+r}var u=Me,o=xe,a=Iu,l=gu,c=vu;return n.radius=function(t){return arguments.length?(a=En(t),n):a},n.source=function(t){return arguments.length?(u=En(t),n):u},n.target=function(t){return arguments.length?(o=En(t),n):o},n.startAngle=function(t){return arguments.length?(l=En(t),n):l},n.endAngle=function(t){return arguments.length?(c=En(t),n):c},n},ao.svg.diagonal=function(){function n(n,i){var u=t.call(this,n,i),o=e.call(this,n,i),a=(u.y+o.y)/2,l=[u,{x:u.x,y:a},{x:o.x,y:a},o];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=Me,e=xe,r=Yu;return n.source=function(e){return arguments.length?(t=En(e),n):t},n.target=function(t){return arguments.length?(e=En(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},ao.svg.diagonal.radial=function(){var n=ao.svg.diagonal(),t=Yu,e=n.projection;return n.projection=function(n){return arguments.length?e(Zu(t=n)):t},n},ao.svg.symbol=function(){function n(n,r){return(Ul.get(t.call(this,n,r))||$u)(e.call(this,n,r))}var t=Xu,e=Vu;return n.type=function(e){return arguments.length?(t=En(e),n):t},n.size=function(t){return arguments.length?(e=En(t),n):e},n};var Ul=ao.map({circle:$u,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Fl)),e=t*Fl;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});ao.svg.symbolTypes=Ul.keys();var jl=Math.sqrt(3),Fl=Math.tan(30*Yo);Co.transition=function(n){for(var t,e,r=Hl||++Zl,i=Ku(n),u=[],o=Ol||{time:Date.now(),ease:Nr,delay:0,duration:250},a=-1,l=this.length;++a<l;){u.push(t=[]);for(var c=this[a],f=-1,s=c.length;++f<s;)(e=c[f])&&Qu(e,f,i,r,o),t.push(e)}return Wu(u,i,r)},Co.interrupt=function(n){return this.each(null==n?Il:Bu(Ku(n)))};var Hl,Ol,Il=Bu(Ku()),Yl=[],Zl=0;Yl.call=Co.call,Yl.empty=Co.empty,Yl.node=Co.node,Yl.size=Co.size,ao.transition=function(n,t){return n&&n.transition?Hl?n.transition(t):n:ao.selection().transition(n)},ao.transition.prototype=Yl,Yl.select=function(n){var t,e,r,i=this.id,u=this.namespace,o=[];n=A(n);for(var a=-1,l=this.length;++a<l;){o.push(t=[]);for(var c=this[a],f=-1,s=c.length;++f<s;)(r=c[f])&&(e=n.call(r,r.__data__,f,a))?("__data__"in r&&(e.__data__=r.__data__),Qu(e,f,u,i,r[u][i]),t.push(e)):t.push(null)}return Wu(o,u,i)},Yl.selectAll=function(n){var t,e,r,i,u,o=this.id,a=this.namespace,l=[];n=C(n);for(var c=-1,f=this.length;++c<f;)for(var s=this[c],h=-1,p=s.length;++h<p;)if(r=s[h]){u=r[a][o],e=n.call(r,r.__data__,h,c),l.push(t=[]);for(var g=-1,v=e.length;++g<v;)(i=e[g])&&Qu(i,g,a,o,u),t.push(i)}return Wu(l,a,o)},Yl.filter=function(n){var t,e,r,i=[];"function"!=typeof n&&(n=O(n));for(var u=0,o=this.length;o>u;u++){i.push(t=[]);for(var e=this[u],a=0,l=e.length;l>a;a++)(r=e[a])&&n.call(r,r.__data__,a,u)&&t.push(r)}return Wu(i,this.namespace,this.id)},Yl.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):Y(this,null==t?function(t){t[r][e].tween.remove(n)}:function(i){i[r][e].tween.set(n,t)})},Yl.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function i(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function u(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?$r:Mr,a=ao.ns.qualify(n);return Ju(this,"attr."+n,t,a.local?u:i)},Yl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(i));return r&&function(n){this.setAttribute(i,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(i.space,i.local));return r&&function(n){this.setAttributeNS(i.space,i.local,r(n))}}var i=ao.ns.qualify(n);return this.tween("attr."+n,i.local?r:e)},Yl.style=function(n,e,r){function i(){this.style.removeProperty(n)}function u(e){return null==e?i:(e+="",function(){var i,u=t(this).getComputedStyle(this,null).getPropertyValue(n);return u!==e&&(i=Mr(u,e),function(t){this.style.setProperty(n,i(t),r)})})}var o=arguments.length;if(3>o){if("string"!=typeof n){2>o&&(e="");for(r in n)this.style(r,n[r],e);return this}r=""}return Ju(this,"style."+n,e,u)},Yl.styleTween=function(n,e,r){function i(i,u){var o=e.call(this,i,u,t(this).getComputedStyle(this,null).getPropertyValue(n));return o&&function(t){this.style.setProperty(n,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+n,i)},Yl.text=function(n){return Ju(this,"text",n,Gu)},Yl.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Yl.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=ao.ease.apply(ao,arguments)),Y(this,function(r){r[e][t].ease=n}))},Yl.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:Y(this,"function"==typeof n?function(r,i,u){r[e][t].delay=+n.call(r,r.__data__,i,u)}:(n=+n,function(r){r[e][t].delay=n}))},Yl.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:Y(this,"function"==typeof n?function(r,i,u){r[e][t].duration=Math.max(1,n.call(r,r.__data__,i,u))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Yl.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var i=Ol,u=Hl;try{Hl=e,Y(this,function(t,i,u){Ol=t[r][e],n.call(t,t.__data__,i,u)})}finally{Ol=i,Hl=u}}else Y(this,function(i){var u=i[r][e];(u.event||(u.event=ao.dispatch("start","end","interrupt"))).on(n,t)});return this},Yl.transition=function(){for(var n,t,e,r,i=this.id,u=++Zl,o=this.namespace,a=[],l=0,c=this.length;c>l;l++){a.push(n=[]);for(var t=this[l],f=0,s=t.length;s>f;f++)(e=t[f])&&(r=e[o][i],Qu(e,f,o,u,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),n.push(e)}return Wu(a,o,u)},ao.svg.axis=function(){function n(n){n.each(function(){var n,c=ao.select(this),f=this.__chart__||e,s=this.__chart__=e.copy(),h=null==l?s.ticks?s.ticks.apply(s,a):s.domain():l,p=null==t?s.tickFormat?s.tickFormat.apply(s,a):m:t,g=c.selectAll(".tick").data(h,s),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",Uo),d=ao.transition(g.exit()).style("opacity",Uo).remove(),y=ao.transition(g.order()).style("opacity",1),M=Math.max(i,0)+o,x=Zi(s),b=c.selectAll(".domain").data([0]),_=(b.enter().append("path").attr("class","domain"),ao.transition(b));v.append("line"),v.append("text");var w,S,k,N,E=v.select("line"),A=y.select("line"),C=g.select("text").text(p),z=v.select("text"),L=y.select("text"),q="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=no,w="x",k="y",S="x2",N="y2",C.attr("dy",0>q?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+q*u+"V0H"+x[1]+"V"+q*u)):(n=to,w="y",k="x",S="y2",N="x2",C.attr("dy",".32em").style("text-anchor",0>q?"end":"start"),_.attr("d","M"+q*u+","+x[0]+"H0V"+x[1]+"H"+q*u)),E.attr(N,q*i),z.attr(k,q*M),A.attr(S,0).attr(N,q*i),L.attr(w,0).attr(k,q*M),s.rangeBand){var T=s,R=T.rangeBand()/2;f=s=function(n){return T(n)+R}}else f.rangeBand?f=s:d.call(n,s,f);v.call(n,f,s),y.call(n,s,s)})}var t,e=ao.scale.linear(),r=Vl,i=6,u=6,o=3,a=[10],l=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Xl?t+"":Vl,n):r},n.ticks=function(){return arguments.length?(a=co(arguments),n):a},n.tickValues=function(t){return arguments.length?(l=t,n):l},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(i=+t,u=+arguments[e-1],n):i},n.innerTickSize=function(t){return arguments.length?(i=+t,n):i},n.outerTickSize=function(t){return arguments.length?(u=+t,n):u},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var Vl="bottom",Xl={top:1,right:1,bottom:1,left:1};ao.svg.brush=function(){function n(t){t.each(function(){var t=ao.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",u).on("touchstart.brush",u),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=t.selectAll(".resize").data(v,m);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return $l[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var l,s=ao.transition(t),h=ao.transition(o);c&&(l=Zi(c),h.attr("x",l[0]).attr("width",l[1]-l[0]),r(s)),f&&(l=Zi(f),h.attr("y",l[0]).attr("height",l[1]-l[0]),i(s)),e(s)})}function e(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+s[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function r(n){n.select(".extent").attr("x",s[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function i(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function u(){function u(){32==ao.event.keyCode&&(C||(M=null,L[0]-=s[1],L[1]-=h[1],C=2),S())}function v(){32==ao.event.keyCode&&2==C&&(L[0]+=s[1],L[1]+=h[1],C=0,S())}function d(){var n=ao.mouse(b),t=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(ao.event.altKey?(M||(M=[(s[0]+s[1])/2,(h[0]+h[1])/2]),L[0]=s[+(n[0]<M[0])],L[1]=h[+(n[1]<M[1])]):M=null),E&&y(n,c,0)&&(r(k),t=!0),A&&y(n,f,1)&&(i(k),t=!0),t&&(e(k),w({type:"brush",mode:C?"move":"resize"}))}function y(n,t,e){var r,i,u=Zi(t),l=u[0],c=u[1],f=L[e],v=e?h:s,d=v[1]-v[0];return C&&(l-=f,c-=d+f),r=(e?g:p)?Math.max(l,Math.min(c,n[e])):n[e],C?i=(r+=f)+d:(M&&(f=Math.max(l,Math.min(c,2*M[e]-r))),r>f?(i=r,r=f):i=f),v[0]!=r||v[1]!=i?(e?a=null:o=null,v[0]=r,v[1]=i,!0):void 0}function m(){d(),k.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),ao.select("body").style("cursor",null),q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),w({type:"brushend"})}var M,x,b=this,_=ao.select(ao.event.target),w=l.of(b,arguments),k=ao.select(b),N=_.datum(),E=!/^(n|s)$/.test(N)&&c,A=!/^(e|w)$/.test(N)&&f,C=_.classed("extent"),z=W(b),L=ao.mouse(b),q=ao.select(t(b)).on("keydown.brush",u).on("keyup.brush",v);if(ao.event.changedTouches?q.on("touchmove.brush",d).on("touchend.brush",m):q.on("mousemove.brush",d).on("mouseup.brush",m),k.interrupt().selectAll("*").interrupt(),C)L[0]=s[0]-L[0],L[1]=h[0]-L[1];else if(N){var T=+/w$/.test(N),R=+/^n/.test(N);x=[s[1-T]-L[0],h[1-R]-L[1]],L[0]=s[T],L[1]=h[R]}else ao.event.altKey&&(M=L.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ao.select("body").style("cursor",_.style("cursor")),w({type:"brushstart"}),d()}var o,a,l=N(n,"brushstart","brush","brushend"),c=null,f=null,s=[0,0],h=[0,0],p=!0,g=!0,v=Bl[0];return n.event=function(n){n.each(function(){var n=l.of(this,arguments),t={x:s,y:h,i:o,j:a},e=this.__chart__||t;this.__chart__=t,Hl?ao.select(this).transition().each("start.brush",function(){o=e.i,a=e.j,s=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=xr(s,t.x),r=xr(h,t.y);return o=a=null,function(i){s=t.x=e(i),h=t.y=r(i),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,a=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(c=t,v=Bl[!c<<1|!f],n):c},n.y=function(t){return arguments.length?(f=t,v=Bl[!c<<1|!f],n):f},n.clamp=function(t){return arguments.length?(c&&f?(p=!!t[0],g=!!t[1]):c?p=!!t:f&&(g=!!t),n):c&&f?[p,g]:c?p:f?g:null},n.extent=function(t){var e,r,i,u,l;return arguments.length?(c&&(e=t[0],r=t[1],f&&(e=e[0],r=r[0]),o=[e,r],c.invert&&(e=c(e),r=c(r)),e>r&&(l=e,e=r,r=l),e==s[0]&&r==s[1]||(s=[e,r])),f&&(i=t[0],u=t[1],c&&(i=i[1],u=u[1]),a=[i,u],f.invert&&(i=f(i),u=f(u)),i>u&&(l=i,i=u,u=l),i==h[0]&&u==h[1]||(h=[i,u])),n):(c&&(o?(e=o[0],r=o[1]):(e=s[0],r=s[1],c.invert&&(e=c.invert(e),r=c.invert(r)),e>r&&(l=e,e=r,r=l))),f&&(a?(i=a[0],u=a[1]):(i=h[0],u=h[1],f.invert&&(i=f.invert(i),u=f.invert(u)),i>u&&(l=i,i=u,u=l))),c&&f?[[e,i],[r,u]]:c?[e,r]:f&&[i,u])},n.clear=function(){return n.empty()||(s=[0,0],h=[0,0],o=a=null),n},n.empty=function(){return!!c&&s[0]==s[1]||!!f&&h[0]==h[1]},ao.rebind(n,l,"on")};var $l={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Wl=ga.format=xa.timeFormat,Jl=Wl.utc,Gl=Jl("%Y-%m-%dT%H:%M:%S.%LZ");Wl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?eo:Gl,eo.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},eo.toString=Gl.toString,ga.second=On(function(n){return new va(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),ga.seconds=ga.second.range,ga.seconds.utc=ga.second.utc.range,ga.minute=On(function(n){return new va(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),ga.minutes=ga.minute.range,ga.minutes.utc=ga.minute.utc.range,ga.hour=On(function(n){var t=n.getTimezoneOffset()/60;return new va(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),ga.hours=ga.hour.range,ga.hours.utc=ga.hour.utc.range,ga.month=On(function(n){return n=ga.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),ga.months=ga.month.range,ga.months.utc=ga.month.utc.range;var Kl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ql=[[ga.second,1],[ga.second,5],[ga.second,15],[ga.second,30],[ga.minute,1],[ga.minute,5],[ga.minute,15],[ga.minute,30],[ga.hour,1],[ga.hour,3],[ga.hour,6],[ga.hour,12],[ga.day,1],[ga.day,2],[ga.week,1],[ga.month,1],[ga.month,3],[ga.year,1]],nc=Wl.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",zt]]),tc={range:function(n,t,e){return ao.range(Math.ceil(n/e)*e,+t,e).map(io)},floor:m,ceil:m};Ql.year=ga.year,ga.scale=function(){return ro(ao.scale.linear(),Ql,nc)};var ec=Ql.map(function(n){return[n[0].utc,n[1]]}),rc=Jl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",zt]]);ec.year=ga.year.utc,ga.scale.utc=function(){return ro(ao.scale.linear(),ec,rc)},ao.text=An(function(n){return n.responseText}),ao.json=function(n,t){return Cn(n,"application/json",uo,t)},ao.html=function(n,t){return Cn(n,"text/html",oo,t)},ao.xml=An(function(n){return n.responseXML}),"function"==typeof define&&define.amd?(this.d3=ao,define(ao)):"object"==typeof module&&module.exports?module.exports=ao:this.d3=ao}();

/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||function(e){"use strict";if(typeof e==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,i=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},a=/constructor/i.test(e.HTMLElement),f=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},d="application/octet-stream",s=1e3*40,c=function(e){var t=function(){if(typeof e==="string"){n().revokeObjectURL(e)}else{e.remove()}};setTimeout(t,s)},l=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var o=e["on"+t[r]];if(typeof o==="function"){try{o.call(e,n||e)}catch(i){u(i)}}}},p=function(e){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)){return new Blob([String.fromCharCode(65279),e],{type:e.type})}return e},v=function(t,u,s){if(!s){t=p(t)}var v=this,w=t.type,m=w===d,y,h=function(){l(v,"writestart progress write writeend".split(" "))},S=function(){if((f||m&&a)&&e.FileReader){var r=new FileReader;r.onloadend=function(){var t=f?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");var n=e.open(t,"_blank");if(!n)e.location.href=t;t=undefined;v.readyState=v.DONE;h()};r.readAsDataURL(t);v.readyState=v.INIT;return}if(!y){y=n().createObjectURL(t)}if(m){e.location.href=y}else{var o=e.open(y,"_blank");if(!o){e.location.href=y}}v.readyState=v.DONE;h();c(y)};v.readyState=v.INIT;if(o){y=n().createObjectURL(t);setTimeout(function(){r.href=y;r.download=u;i(r);h();c(y);v.readyState=v.DONE});return}S()},w=v.prototype,m=function(e,t,n){return new v(e,t||e.name||"download",n)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(e,t,n){t=t||e.name||"download";if(!n){e=p(e)}return navigator.msSaveOrOpenBlob(e,t)}}w.abort=function(){};w.readyState=w.INIT=0;w.WRITING=1;w.DONE=2;w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null;return m}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined"&&module.exports){module.exports.saveAs=saveAs}else if(typeof define!=="undefined"&&define!==null&&define.amd!==null){define([],function(){return saveAs})}

/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */

!function(a,b){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(c){return a.Bloodhound=b(c)}):"object"==typeof exports?module.exports=b(require("jquery")):a.Bloodhound=b(jQuery)}(this,function(a){var b=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?void 0:!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?!1:void 0}),!!d):d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},stringify:function(a){return b.isString(a)?a:JSON.stringify(a)},noop:function(){}}}(),c="0.11.1",d=function(){"use strict";function a(a){return a=b.toStr(a),a?a.split(/\s+/):[]}function c(a){return a=b.toStr(a),a?a.split(/\W+/):[]}function d(a){return function(c){return c=b.isArray(c)?c:[].slice.call(arguments,0),function(d){var e=[];return b.each(c,function(c){e=e.concat(a(b.toStr(d[c])))}),e}}}return{nonword:c,whitespace:a,obj:{nonword:d(c),whitespace:d(a)}}}(),e=function(){"use strict";function c(c){this.maxSize=b.isNumber(c)?c:100,this.reset(),this.maxSize<=0&&(this.set=this.get=a.noop)}function d(){this.head=this.tail=null}function e(a,b){this.key=a,this.val=b,this.prev=this.next=null}return b.mixin(c.prototype,{set:function(a,b){var c,d=this.list.tail;this.size>=this.maxSize&&(this.list.remove(d),delete this.hash[d.key],this.size--),(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new e(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){var b=this.hash[a];return b?(this.list.moveToFront(b),b.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new d}}),b.mixin(d.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=a),this.head=a,this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next,a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a),this.add(a)}}),c}(),f=function(){"use strict";function c(a,c){this.prefix=["__",a,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+b.escapeRegExChars(this.prefix)),this.ls=c||h,!this.ls&&this._noop()}function d(){return(new Date).getTime()}function e(a){return JSON.stringify(b.isUndefined(a)?null:a)}function f(b){return a.parseJSON(b)}function g(a){var b,c,d=[],e=h.length;for(b=0;e>b;b++)(c=h.key(b)).match(a)&&d.push(c.replace(a,""));return d}var h;try{h=window.localStorage,h.setItem("~~~","!"),h.removeItem("~~~")}catch(i){h=null}return b.mixin(c.prototype,{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=b.noop},_safeSet:function(a,b){try{this.ls.setItem(a,b)}catch(c){"QuotaExceededError"===c.name&&(this.clear(),this._noop())}},get:function(a){return this.isExpired(a)&&this.remove(a),f(this.ls.getItem(this._prefix(a)))},set:function(a,c,f){return b.isNumber(f)?this._safeSet(this._ttlKey(a),e(d()+f)):this.ls.removeItem(this._ttlKey(a)),this._safeSet(this._prefix(a),e(c))},remove:function(a){return this.ls.removeItem(this._ttlKey(a)),this.ls.removeItem(this._prefix(a)),this},clear:function(){var a,b=g(this.keyMatcher);for(a=b.length;a--;)this.remove(b[a]);return this},isExpired:function(a){var c=f(this.ls.getItem(this._ttlKey(a)));return b.isNumber(c)&&d()>c?!0:!1}}),c}(),g=function(){"use strict";function c(a){a=a||{},this.cancelled=!1,this.lastReq=null,this._send=a.transport,this._get=a.limiter?a.limiter(this._get):this._get,this._cache=a.cache===!1?new e(0):h}var d=0,f={},g=6,h=new e(10);return c.setMaxPendingRequests=function(a){g=a},c.resetCache=function(){h.reset()},b.mixin(c.prototype,{_fingerprint:function(b){return b=b||{},b.url+b.type+a.param(b.data||{})},_get:function(a,b){function c(a){b(null,a),k._cache.set(i,a)}function e(){b(!0)}function h(){d--,delete f[i],k.onDeckRequestArgs&&(k._get.apply(k,k.onDeckRequestArgs),k.onDeckRequestArgs=null)}var i,j,k=this;i=this._fingerprint(a),this.cancelled||i!==this.lastReq||((j=f[i])?j.done(c).fail(e):g>d?(d++,f[i]=this._send(a).done(c).fail(e).always(h)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(c,d){var e,f;d=d||a.noop,c=b.isString(c)?{url:c}:c||{},f=this._fingerprint(c),this.cancelled=!1,this.lastReq=f,(e=this._cache.get(f))?d(null,e):this._get(c,d)},cancel:function(){this.cancelled=!0}}),c}(),h=window.SearchIndex=function(){"use strict";function c(c){c=c||{},c.datumTokenizer&&c.queryTokenizer||a.error("datumTokenizer and queryTokenizer are both required"),this.identify=c.identify||b.stringify,this.datumTokenizer=c.datumTokenizer,this.queryTokenizer=c.queryTokenizer,this.reset()}function d(a){return a=b.filter(a,function(a){return!!a}),a=b.map(a,function(a){return a.toLowerCase()})}function e(){var a={};return a[i]=[],a[h]={},a}function f(a){for(var b={},c=[],d=0,e=a.length;e>d;d++)b[a[d]]||(b[a[d]]=!0,c.push(a[d]));return c}function g(a,b){var c=0,d=0,e=[];a=a.sort(),b=b.sort();for(var f=a.length,g=b.length;f>c&&g>d;)a[c]<b[d]?c++:a[c]>b[d]?d++:(e.push(a[c]),c++,d++);return e}var h="c",i="i";return b.mixin(c.prototype,{bootstrap:function(a){this.datums=a.datums,this.trie=a.trie},add:function(a){var c=this;a=b.isArray(a)?a:[a],b.each(a,function(a){var f,g;c.datums[f=c.identify(a)]=a,g=d(c.datumTokenizer(a)),b.each(g,function(a){var b,d,g;for(b=c.trie,d=a.split("");g=d.shift();)b=b[h][g]||(b[h][g]=e()),b[i].push(f)})})},get:function(a){var c=this;return b.map(a,function(a){return c.datums[a]})},search:function(a){var c,e,j=this;return c=d(this.queryTokenizer(a)),b.each(c,function(a){var b,c,d,f;if(e&&0===e.length)return!1;for(b=j.trie,c=a.split("");b&&(d=c.shift());)b=b[h][d];return b&&0===c.length?(f=b[i].slice(0),void(e=e?g(e,f):f)):(e=[],!1)}),e?b.map(f(e),function(a){return j.datums[a]}):[]},all:function(){var a=[];for(var b in this.datums)a.push(this.datums[b]);return a},reset:function(){this.datums={},this.trie=e()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),c}(),i=function(){"use strict";function a(a){this.url=a.url,this.ttl=a.ttl,this.cache=a.cache,this.prepare=a.prepare,this.transform=a.transform,this.transport=a.transport,this.thumbprint=a.thumbprint,this.storage=new f(a.cacheKey)}var c;return c={data:"data",protocol:"protocol",thumbprint:"thumbprint"},b.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(a){this.cache&&(this.storage.set(c.data,a,this.ttl),this.storage.set(c.protocol,location.protocol,this.ttl),this.storage.set(c.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var a,b={};return this.cache?(b.data=this.storage.get(c.data),b.protocol=this.storage.get(c.protocol),b.thumbprint=this.storage.get(c.thumbprint),a=b.thumbprint!==this.thumbprint||b.protocol!==location.protocol,b.data&&!a?b.data:null):null},fromNetwork:function(a){function b(){a(!0)}function c(b){a(null,e.transform(b))}var d,e=this;a&&(d=this.prepare(this._settings()),this.transport(d).fail(b).done(c))},clear:function(){return this.storage.clear(),this}}),a}(),j=function(){"use strict";function a(a){this.url=a.url,this.prepare=a.prepare,this.transform=a.transform,this.transport=new g({cache:a.cache,limiter:a.limiter,transport:a.transport})}return b.mixin(a.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(a,b){function c(a,c){b(a?[]:e.transform(c))}var d,e=this;if(b)return a=a||"",d=this.prepare(a,this._settings()),this.transport.get(d,c)},cancelLastRequest:function(){this.transport.cancel()}}),a}(),k=function(){"use strict";function d(d){var e;return d?(e={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:b.identity,transform:b.identity,transport:null},d=b.isString(d)?{url:d}:d,d=b.mixin(e,d),!d.url&&a.error("prefetch requires url to be set"),d.transform=d.filter||d.transform,d.cacheKey=d.cacheKey||d.url,d.thumbprint=c+d.thumbprint,d.transport=d.transport?h(d.transport):a.ajax,d):null}function e(c){var d;if(c)return d={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:b.identity,transport:null},c=b.isString(c)?{url:c}:c,c=b.mixin(d,c),!c.url&&a.error("remote requires url to be set"),c.transform=c.filter||c.transform,c.prepare=f(c),c.limiter=g(c),c.transport=c.transport?h(c.transport):a.ajax,delete c.replace,delete c.wildcard,delete c.rateLimitBy,delete c.rateLimitWait,c}function f(a){function b(a,b){return b.url=f(b.url,a),b}function c(a,b){return b.url=b.url.replace(g,encodeURIComponent(a)),b}function d(a,b){return b}var e,f,g;return e=a.prepare,f=a.replace,g=a.wildcard,e?e:e=f?b:a.wildcard?c:d}function g(a){function c(a){return function(c){return b.debounce(c,a)}}function d(a){return function(c){return b.throttle(c,a)}}var e,f,g;return e=a.limiter,f=a.rateLimitBy,g=a.rateLimitWait,e||(e=/^throttle$/i.test(f)?d(g):c(g)),e}function h(c){return function(d){function e(a){b.defer(function(){g.resolve(a)})}function f(a){b.defer(function(){g.reject(a)})}var g=a.Deferred();return c(d,e,f),g}}return function(c){var f,g;return f={initialize:!0,identify:b.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},c=b.mixin(f,c||{}),!c.datumTokenizer&&a.error("datumTokenizer is required"),!c.queryTokenizer&&a.error("queryTokenizer is required"),g=c.sorter,c.sorter=g?function(a){return a.sort(g)}:b.identity,c.local=b.isFunction(c.local)?c.local():c.local,c.prefetch=d(c.prefetch),c.remote=e(c.remote),c}}(),l=function(){"use strict";function c(a){a=k(a),this.sorter=a.sorter,this.identify=a.identify,this.sufficient=a.sufficient,this.local=a.local,this.remote=a.remote?new j(a.remote):null,this.prefetch=a.prefetch?new i(a.prefetch):null,this.index=new h({identify:this.identify,datumTokenizer:a.datumTokenizer,queryTokenizer:a.queryTokenizer}),a.initialize!==!1&&this.initialize()}var e;return e=window&&window.Bloodhound,c.noConflict=function(){return window&&(window.Bloodhound=e),c},c.tokenizers=d,b.mixin(c.prototype,{__ttAdapter:function(){function a(a,b,d){return c.search(a,b,d)}function b(a,b){return c.search(a,b)}var c=this;return this.remote?a:b},_loadPrefetch:function(){function b(a,b){return a?c.reject():(e.add(b),e.prefetch.store(e.index.serialize()),void c.resolve())}var c,d,e=this;return c=a.Deferred(),this.prefetch?(d=this.prefetch.fromCache())?(this.index.bootstrap(d),c.resolve()):this.prefetch.fromNetwork(b):c.resolve(),c.promise()},_initialize:function(){function a(){b.add(b.local)}var b=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(a),this.initPromise},initialize:function(a){return!this.initPromise||a?this._initialize():this.initPromise},add:function(a){return this.index.add(a),this},get:function(a){return a=b.isArray(a)?a:[].slice.call(arguments),this.index.get(a)},search:function(a,c,d){function e(a){var c=[];b.each(a,function(a){!b.some(f,function(b){return g.identify(a)===g.identify(b)})&&c.push(a)}),d&&d(c)}var f,g=this;return f=this.sorter(this.index.search(a)),c(this.remote?f.slice():f),this.remote&&f.length<this.sufficient?this.remote.get(a,e):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return g.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),c}();return l}),function(a,b){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(a){return b(a)}):"object"==typeof exports?module.exports=b(require("jquery")):b(jQuery)}(this,function(a){var b=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(b){return b instanceof a},toStr:function(a){return b.isUndefined(a)||null===a?"":a+""},bind:a.proxy,each:function(b,c){function d(a,b){return c(b,a)}a.each(b,d)},map:a.map,filter:a.grep,every:function(b,c){var d=!0;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?void 0:!1}),!!d):d},some:function(b,c){var d=!1;return b?(a.each(b,function(a,e){return(d=c.call(null,e,a,b))?!1:void 0}),!!d):d},mixin:a.extend,identity:function(a){return a},clone:function(b){return a.extend(!0,{},b)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(b){function c(){return String(b)}return a.isFunction(b)?b:c},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var d,e;return function(){var f,g,h=this,i=arguments;return f=function(){d=null,c||(e=a.apply(h,i))},g=c&&!d,clearTimeout(d),d=setTimeout(f,b),g&&(e=a.apply(h,i)),e}},throttle:function(a,b){var c,d,e,f,g,h;return g=0,h=function(){g=new Date,e=null,f=a.apply(c,d)},function(){var i=new Date,j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(e),e=null,g=i,f=a.apply(c,d)):e||(e=setTimeout(h,j)),f}},stringify:function(a){return b.isString(a)?a:JSON.stringify(a)},noop:function(){}}}(),c=function(){"use strict";function a(a){var g,h;return h=b.mixin({},f,a),g={css:e(),classes:h,html:c(h),selectors:d(h)},{css:g.css,html:g.html,classes:g.classes,selectors:g.selectors,mixin:function(a){b.mixin(a,g)}}}function c(a){return{wrapper:'<span class="'+a.wrapper+'"></span>',menu:'<div class="'+a.menu+'"></div>'}}function d(a){var c={};return b.each(a,function(a,b){c[b]="."+a}),c}function e(){var a={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return b.isMsie()&&b.mixin(a.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),a}var f={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return a}(),d=function(){"use strict";function c(b){b&&b.el||a.error("EventBus initialized without el"),this.$el=a(b.el)}var d,e;return d="typeahead:",e={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},b.mixin(c.prototype,{_trigger:function(b,c){var e;return e=a.Event(d+b),(c=c||[]).unshift(e),this.$el.trigger.apply(this.$el,c),e},before:function(a){var b,c;return b=[].slice.call(arguments,1),c=this._trigger("before"+a,b),c.isDefaultPrevented()},trigger:function(a){var b;this._trigger(a,[].slice.call(arguments,1)),(b=e[a])&&this._trigger(b,[].slice.call(arguments,1))}}),c}(),e=function(){"use strict";function a(a,b,c,d){var e;if(!c)return this;for(b=b.split(i),c=d?h(c,d):c,this._callbacks=this._callbacks||{};e=b.shift();)this._callbacks[e]=this._callbacks[e]||{sync:[],async:[]},this._callbacks[e][a].push(c);return this}function b(b,c,d){return a.call(this,"async",b,c,d)}function c(b,c,d){return a.call(this,"sync",b,c,d)}function d(a){var b;if(!this._callbacks)return this;for(a=a.split(i);b=a.shift();)delete this._callbacks[b];return this}function e(a){var b,c,d,e,g;if(!this._callbacks)return this;for(a=a.split(i),d=[].slice.call(arguments,1);(b=a.shift())&&(c=this._callbacks[b]);)e=f(c.sync,this,[b].concat(d)),g=f(c.async,this,[b].concat(d)),e()&&j(g);return this}function f(a,b,c){function d(){for(var d,e=0,f=a.length;!d&&f>e;e+=1)d=a[e].apply(b,c)===!1;return!d}return d}function g(){var a;return a=window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}function h(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var i=/\s+/,j=g();return{onSync:c,onAsync:b,off:d,trigger:e}}(),f=function(a){"use strict";function c(a,c,d){for(var e,f=[],g=0,h=a.length;h>g;g++)f.push(b.escapeRegExChars(a[g]));return e=d?"\\b("+f.join("|")+")\\b":"("+f.join("|")+")",c?new RegExp(e):new RegExp(e,"i")}var d={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(e){function f(b){var c,d,f;return(c=h.exec(b.data))&&(f=a.createElement(e.tagName),e.className&&(f.className=e.className),d=b.splitText(c.index),d.splitText(c[0].length),f.appendChild(d.cloneNode(!0)),b.parentNode.replaceChild(f,d)),!!c}function g(a,b){for(var c,d=3,e=0;e<a.childNodes.length;e++)c=a.childNodes[e],c.nodeType===d?e+=b(c)?1:0:g(c,b)}var h;e=b.mixin({},d,e),e.node&&e.pattern&&(e.pattern=b.isArray(e.pattern)?e.pattern:[e.pattern],h=c(e.pattern,e.caseSensitive,e.wordsOnly),g(e.node,f))}}(window.document),g=function(){"use strict";function c(c,e){c=c||{},c.input||a.error("input is missing"),e.mixin(this),this.$hint=a(c.hint),this.$input=a(c.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=d(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=b.noop)}function d(b){return a('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:b.css("font-family"),fontSize:b.css("font-size"),fontStyle:b.css("font-style"),fontVariant:b.css("font-variant"),fontWeight:b.css("font-weight"),wordSpacing:b.css("word-spacing"),letterSpacing:b.css("letter-spacing"),textIndent:b.css("text-indent"),textRendering:b.css("text-rendering"),textTransform:b.css("text-transform")}).insertAfter(b)}function f(a,b){return c.normalizeQuery(a)===c.normalizeQuery(b)}function g(a){return a.altKey||a.ctrlKey||a.metaKey||a.shiftKey}var h;return h={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},c.normalizeQuery=function(a){return b.toStr(a).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},b.mixin(c.prototype,e,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(a){var b=h[a.which||a.keyCode];this._managePreventDefault(b,a),b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(a,b){var c;switch(a){case"up":case"down":c=!g(b);break;default:c=!1}c&&b.preventDefault()},_shouldTrigger:function(a,b){var c;switch(a){case"tab":c=!g(b);break;default:c=!0}return c},_checkLanguageDirection:function(){var a=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==a&&(this.dir=a,this.$hint.attr("dir",a),this.trigger("langDirChanged",a))},_setQuery:function(a,b){var c,d;c=f(a,this.query),d=c?this.query.length!==a.length:!1,this.query=a,b||c?!b&&d&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var a,c,d,e,f=this;return a=b.bind(this._onBlur,this),c=b.bind(this._onFocus,this),d=b.bind(this._onKeydown,this),e=b.bind(this._onInput,this),this.$input.on("blur.tt",a).on("focus.tt",c).on("keydown.tt",d),!b.isMsie()||b.isMsie()>9?this.$input.on("input.tt",e):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(a){h[a.which||a.keyCode]||b.defer(b.bind(f._onInput,f,a))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(a,b){this.setInputValue(a),this._setQuery(a,b)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(a){this.$input.val(a),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a,b,c,d;a=this.getInputValue(),b=this.getHint(),c=a!==b&&0===b.indexOf(a),d=""!==a&&c&&!this.hasOverflow(),!d&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var a=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var a,c,d;return a=this.$input.val().length,c=this.$input[0].selectionStart,b.isNumber(c)?c===a:document.selection?(d=document.selection.createRange(),d.moveStart("character",-a),a===d.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=a("<div>")}}),c}(),h=function(){"use strict";function c(c,e){c=c||{},c.templates=c.templates||{},c.templates.notFound=c.templates.notFound||c.templates.empty,c.source||a.error("missing source"),c.node||a.error("missing node"),c.name&&!h(c.name)&&a.error("invalid dataset name: "+c.name),e.mixin(this),this.highlight=!!c.highlight,this.name=c.name||j(),this.limit=c.limit||5,this.displayFn=d(c.display||c.displayKey),this.templates=g(c.templates,this.displayFn),this.source=c.source.__ttAdapter?c.source.__ttAdapter():c.source,this.async=b.isUndefined(c.async)?this.source.length>2:!!c.async,this._resetLastSuggestion(),this.$el=a(c.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function d(a){function c(b){return b[a]}return a=a||b.stringify,b.isFunction(a)?a:c}function g(c,d){function e(b){return a("<div>").text(d(b))}return{notFound:c.notFound&&b.templatify(c.notFound),pending:c.pending&&b.templatify(c.pending),header:c.header&&b.templatify(c.header),footer:c.footer&&b.templatify(c.footer),suggestion:c.suggestion||e}}function h(a){return/^[_a-zA-Z0-9-]+$/.test(a)}var i,j;return i={val:"tt-selectable-display",obj:"tt-selectable-object"},j=b.getIdGenerator(),c.extractData=function(b){var c=a(b);return c.data(i.obj)?{val:c.data(i.val)||"",obj:c.data(i.obj)||null}:null},b.mixin(c.prototype,e,{_overwrite:function(a,b){b=b||[],b.length?this._renderSuggestions(a,b):this.async&&this.templates.pending?this._renderPending(a):!this.async&&this.templates.notFound?this._renderNotFound(a):this._empty(),this.trigger("rendered",this.name,b,!1)},_append:function(a,b){b=b||[],b.length&&this.$lastSuggestion.length?this._appendSuggestions(a,b):b.length?this._renderSuggestions(a,b):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(a),this.trigger("rendered",this.name,b,!0)},_renderSuggestions:function(a,b){var c;c=this._getSuggestionsFragment(a,b),this.$lastSuggestion=c.children().last(),this.$el.html(c).prepend(this._getHeader(a,b)).append(this._getFooter(a,b))},_appendSuggestions:function(a,b){var c,d;c=this._getSuggestionsFragment(a,b),d=c.children().last(),this.$lastSuggestion.after(c),this.$lastSuggestion=d},_renderPending:function(a){var b=this.templates.pending;this._resetLastSuggestion(),b&&this.$el.html(b({query:a,dataset:this.name}))},_renderNotFound:function(a){var b=this.templates.notFound;this._resetLastSuggestion(),b&&this.$el.html(b({query:a,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(c,d){var e,g=this;return e=document.createDocumentFragment(),b.each(d,function(b){var d,f;f=g._injectQuery(c,b),d=a(g.templates.suggestion(f)).data(i.obj,b).data(i.val,g.displayFn(b)).addClass(g.classes.suggestion+" "+g.classes.selectable),e.appendChild(d[0])}),this.highlight&&f({className:this.classes.highlight,node:e,pattern:c}),a(e)},_getFooter:function(a,b){return this.templates.footer?this.templates.footer({query:a,suggestions:b,dataset:this.name}):null},_getHeader:function(a,b){return this.templates.header?this.templates.header({query:a,suggestions:b,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=a()},_injectQuery:function(a,c){return b.isObject(c)?b.mixin({_query:a},c):c},update:function(b){function c(a){g||(g=!0,a=(a||[]).slice(0,e.limit),h=a.length,e._overwrite(b,a),h<e.limit&&e.async&&e.trigger("asyncRequested",b))}function d(c){c=c||[],!f&&h<e.limit&&(e.cancel=a.noop,h+=c.length,e._append(b,c.slice(0,e.limit-h)),e.async&&e.trigger("asyncReceived",b))}var e=this,f=!1,g=!1,h=0;this.cancel(),this.cancel=function(){f=!0,e.cancel=a.noop,e.async&&e.trigger("asyncCanceled",b)},this.source(b,c,d),!g&&c([])},cancel:a.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=a("<div>")}}),c}(),i=function(){"use strict";function c(c,d){function e(b){var c=f.$node.find(b.node).first();return b.node=c.length?c:a("<div>").appendTo(f.$node),new h(b,d)}var f=this;c=c||{},c.node||a.error("node is required"),d.mixin(this),this.$node=a(c.node),this.query=null,this.datasets=b.map(c.datasets,e)}return b.mixin(c.prototype,e,{_onSelectableClick:function(b){this.trigger("selectableClicked",a(b.currentTarget))},_onRendered:function(a,b,c,d){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",b,c,d)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function a(a){return a.isEmpty()}return b.every(this.datasets,a)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var a=this.getActiveSelectable();a&&a.removeClass(this.classes.cursor)},_ensureVisible:function(a){var b,c,d,e;b=a.position().top,c=b+a.outerHeight(!0),d=this.$node.scrollTop(),e=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>b?this.$node.scrollTop(d+b):c>e&&this.$node.scrollTop(d+(c-e))},bind:function(){var a,c=this;return a=b.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,a),b.each(this.datasets,function(a){a.onSync("asyncRequested",c._propagate,c).onSync("asyncCanceled",c._propagate,c).onSync("asyncReceived",c._propagate,c).onSync("rendered",c._onRendered,c).onSync("cleared",c._onCleared,c)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(a){this.$node.attr("dir",a)},selectableRelativeToCursor:function(a){var b,c,d,e;return c=this.getActiveSelectable(),b=this._getSelectables(),d=c?b.index(c):-1,e=d+a,e=(e+1)%(b.length+1)-1,e=-1>e?b.length-1:e,-1===e?null:b.eq(e)},setCursor:function(a){this._removeCursor(),(a=a&&a.first())&&(a.addClass(this.classes.cursor),this._ensureVisible(a))},getSelectableData:function(a){return a&&a.length?h.extractData(a):null},getActiveSelectable:function(){var a=this._getSelectables().filter(this.selectors.cursor).first();return a.length?a:null},getTopSelectable:function(){var a=this._getSelectables().first();return a.length?a:null},update:function(a){function c(b){b.update(a)}var d=a!==this.query;return d&&(this.query=a,b.each(this.datasets,c)),d},empty:function(){function a(a){a.clear()}b.each(this.datasets,a),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function c(a){a.destroy()}this.$node.off(".tt"),this.$node=a("<div>"),b.each(this.datasets,c)}}),c}(),j=function(){"use strict";function a(){i.apply(this,[].slice.call(arguments,0))}var c=i.prototype;return b.mixin(a.prototype,i.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),c.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),c.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),c._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),c._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(a){return this.$node.css("ltr"===a?this.css.ltr:this.css.rtl),c.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),a}(),k=function(){"use strict";function c(c,e){var f,g,h,i,j,k,l,m,n,o,p;c=c||{},c.input||a.error("missing input"),c.menu||a.error("missing menu"),c.eventBus||a.error("missing event bus"),e.mixin(this),this.eventBus=c.eventBus,this.minLength=b.isNumber(c.minLength)?c.minLength:1,this.input=c.input,this.menu=c.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),f=d(this,"activate","open","_onFocused"),g=d(this,"deactivate","_onBlurred"),h=d(this,"isActive","isOpen","_onEnterKeyed"),i=d(this,"isActive","isOpen","_onTabKeyed"),j=d(this,"isActive","_onEscKeyed"),k=d(this,"isActive","open","_onUpKeyed"),l=d(this,"isActive","open","_onDownKeyed"),m=d(this,"isActive","isOpen","_onLeftKeyed"),n=d(this,"isActive","isOpen","_onRightKeyed"),o=d(this,"_openIfActive","_onQueryChanged"),p=d(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",f,this).onSync("blurred",g,this).onSync("enterKeyed",h,this).onSync("tabKeyed",i,this).onSync("escKeyed",j,this).onSync("upKeyed",k,this).onSync("downKeyed",l,this).onSync("leftKeyed",m,this).onSync("rightKeyed",n,this).onSync("queryChanged",o,this).onSync("whitespaceChanged",p,this).onSync("langDirChanged",this._onLangDirChanged,this)}function d(a){var c=[].slice.call(arguments,1);return function(){var d=[].slice.call(arguments);b.each(c,function(b){return a[b].apply(a,d)})}}return b.mixin(c.prototype,{_hacks:function(){var c,d;c=this.input.$input||a("<div>"),d=this.menu.$node||a("<div>"),c.on("blur.tt",function(a){var e,f,g;
e=document.activeElement,f=d.is(e),g=d.has(e).length>0,b.isMsie()&&(f||g)&&(a.preventDefault(),a.stopImmediatePropagation(),b.defer(function(){c.focus()}))}),d.on("mousedown.tt",function(a){a.preventDefault()})},_onSelectableClicked:function(a,b){this.select(b)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(a,b,c,d){this._updateHint(),this.eventBus.trigger("render",c,d,b)},_onAsyncRequested:function(a,b,c){this.eventBus.trigger("asyncrequest",c,b)},_onAsyncCanceled:function(a,b,c){this.eventBus.trigger("asynccancel",c,b)},_onAsyncReceived:function(a,b,c){this.eventBus.trigger("asyncreceive",c,b)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())&&this.select(c)&&b.preventDefault()},_onTabKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())?this.select(c)&&b.preventDefault():(c=this.menu.getTopSelectable())&&this.autocomplete(c)&&b.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(a,b){this._minLengthMet(b)?this.menu.update(b):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(a,b){this.dir!==b&&(this.dir=b,this.menu.setLanguageDirection(b))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(a){return a=b.isString(a)?a:this.input.getQuery()||"",a.length>=this.minLength},_updateHint:function(){var a,c,d,e,f,h,i;a=this.menu.getTopSelectable(),c=this.menu.getSelectableData(a),d=this.input.getInputValue(),!c||b.isBlankString(d)||this.input.hasOverflow()?this.input.clearHint():(e=g.normalizeQuery(d),f=b.escapeRegExChars(e),h=new RegExp("^(?:"+f+")(.+$)","i"),i=h.exec(c.val),i&&this.input.setHint(d+i[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(a){this.input.setQuery(b.toStr(a))},getVal:function(){return this.input.getQuery()},select:function(a){var b=this.menu.getSelectableData(a);return b&&!this.eventBus.before("select",b.obj)?(this.input.setQuery(b.val,!0),this.eventBus.trigger("select",b.obj),this.close(),!0):!1},autocomplete:function(a){var b,c,d;return b=this.input.getQuery(),c=this.menu.getSelectableData(a),d=c&&b!==c.val,d&&!this.eventBus.before("autocomplete",c.obj)?(this.input.setQuery(c.val),this.eventBus.trigger("autocomplete",c.obj),!0):!1},moveCursor:function(a){var b,c,d,e,f;return b=this.input.getQuery(),c=this.menu.selectableRelativeToCursor(a),d=this.menu.getSelectableData(c),e=d?d.obj:null,f=this._minLengthMet()&&this.menu.update(b),f||this.eventBus.before("cursorchange",e)?!1:(this.menu.setCursor(c),d?this.input.setInputValue(d.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",e),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),c}();!function(){"use strict";function e(b,c){b.each(function(){var b,d=a(this);(b=d.data(p.typeahead))&&c(b,d)})}function f(a,b){return a.clone().addClass(b.classes.hint).removeData().css(b.css.hint).css(l(a)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function h(a,b){a.data(p.attrs,{dir:a.attr("dir"),autocomplete:a.attr("autocomplete"),spellcheck:a.attr("spellcheck"),style:a.attr("style")}),a.addClass(b.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!a.attr("dir")&&a.attr("dir","auto")}catch(c){}return a}function l(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function m(a){var c,d;c=a.data(p.www),d=a.parent().filter(c.selectors.wrapper),b.each(a.data(p.attrs),function(c,d){b.isUndefined(c)?a.removeAttr(d):a.attr(d,c)}),a.removeData(p.typeahead).removeData(p.www).removeData(p.attr).removeClass(c.classes.input),d.length&&(a.detach().insertAfter(d),d.remove())}function n(c){var d,e;return d=b.isJQuery(c)||b.isElement(c),e=d?a(c).first():[],e.length?e:null}var o,p,q;o=a.fn.typeahead,p={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},q={initialize:function(e,l){function m(){var c,m,q,r,s,t,u,v,w,x,y;b.each(l,function(a){a.highlight=!!e.highlight}),c=a(this),m=a(o.html.wrapper),q=n(e.hint),r=n(e.menu),s=e.hint!==!1&&!q,t=e.menu!==!1&&!r,s&&(q=f(c,o)),t&&(r=a(o.html.menu).css(o.css.menu)),q&&q.val(""),c=h(c,o),(s||t)&&(m.css(o.css.wrapper),c.css(s?o.css.input:o.css.inputWithNoHint),c.wrap(m).parent().prepend(s?q:null).append(t?r:null)),y=t?j:i,u=new d({el:c}),v=new g({hint:q,input:c},o),w=new y({node:r,datasets:l},o),x=new k({input:v,menu:w,eventBus:u,minLength:e.minLength},o),c.data(p.www,o),c.data(p.typeahead,x)}var o;return l=b.isArray(l)?l:[].slice.call(arguments,1),e=e||{},o=c(e.classNames),this.each(m)},isEnabled:function(){var a;return e(this.first(),function(b){a=b.isEnabled()}),a},enable:function(){return e(this,function(a){a.enable()}),this},disable:function(){return e(this,function(a){a.disable()}),this},isActive:function(){var a;return e(this.first(),function(b){a=b.isActive()}),a},activate:function(){return e(this,function(a){a.activate()}),this},deactivate:function(){return e(this,function(a){a.deactivate()}),this},isOpen:function(){var a;return e(this.first(),function(b){a=b.isOpen()}),a},open:function(){return e(this,function(a){a.open()}),this},close:function(){return e(this,function(a){a.close()}),this},select:function(b){var c=!1,d=a(b);return e(this.first(),function(a){c=a.select(d)}),c},autocomplete:function(b){var c=!1,d=a(b);return e(this.first(),function(a){c=a.autocomplete(d)}),c},moveCursor:function(a){var b=!1;return e(this.first(),function(c){b=c.moveCursor(a)}),b},val:function(a){var b;return arguments.length?(e(this,function(b){b.setVal(a)}),this):(e(this.first(),function(a){b=a.getVal()}),b)},destroy:function(){return e(this,function(a,b){m(b),a.destroy()}),this}},a.fn.typeahead=function(a){return q[a]?q[a].apply(this,[].slice.call(arguments,1)):q.initialize.apply(this,arguments)},a.fn.typeahead.noConflict=function(){return a.fn.typeahead=o,this}}()});

/* Copyright jQuery Foundation and other contributors; Licensed MIT */
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory(jQuery)}})(function($){$.ui=$.ui||{};$.extend($.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({scrollParent:function(includeHidden){var position=this.css("position"),excludeStaticParent=position==="absolute",overflowRegex=includeHidden?/(auto|scroll|hidden)/:/(auto|scroll)/,scrollParent=this.parents().filter(function(){var parent=$(this);if(excludeStaticParent&&parent.css("position")==="static"){return false}return overflowRegex.test(parent.css("overflow")+parent.css("overflow-y")+parent.css("overflow-x"))}).eq(0);return position==="fixed"||!scrollParent.length?$(this[0].ownerDocument||document):scrollParent},uniqueId:function(){var uuid=0;return function(){return this.each(function(){if(!this.id){this.id="ui-id-"+ ++uuid}})}}(),removeUniqueId:function(){return this.each(function(){if(/^ui-id-\d+$/.test(this.id)){$(this).removeAttr("id")}})}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false}img=$("img[usemap='#"+mapName+"']")[0];return!!img&&visible(img)}return(/^(input|select|textarea|button|object)$/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden"}).length}$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}});if(!$("<a>").outerWidth(1).jquery){$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border){size-=parseFloat($.css(elem,"border"+this+"Width"))||0}if(margin){size-=parseFloat($.css(elem,"margin"+this))||0}});return size}$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this)}return this.each(function(){$(this).css(type,reduce(this,size)+"px")})};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size)}return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px")})}})}if(!$.fn.addBack){$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}}if($("<a>").data("a-b","a").removeData("a-b").data("a-b")){$.fn.removeData=function(removeData){return function(key){if(arguments.length){return removeData.call(this,$.camelCase(key))}else{return removeData.call(this)}}}($.fn.removeData)}$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.fn.extend({focus:function(orig){return function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem)}},delay)}):orig.apply(this,arguments)}}($.fn.focus),disableSelection:function(){var eventType="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(eventType+".ui-disableSelection",function(event){event.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex)}if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value}}elem=elem.parent()}}return 0}});$.ui.plugin={add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]])}},call:function(instance,name,args,allowDisconnected){var i,set=instance.plugins[name];if(!set){return}if(!allowDisconnected&&(!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)){return}for(i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args)}}}};var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=function(orig){return function(elems){var events,elem,i;for(i=0;(elem=elems[i])!=null;i++){try{events=$._data(elem,"events");if(events&&events.remove){$(elem).triggerHandler("remove")}}catch(e){}}orig(elems)}}($.cleanData);$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget}$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element)}if(arguments.length){this._createWidget(options,element)}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base;basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return}proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue}}()});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix||name:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)});delete existingConstructor._childConstructors}else{base._childConstructors.push(constructor)}$.widget.bridge(name,constructor);return constructor};$.widget.extend=function(target){var input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value)}else{target[key]=value}}}}return target};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=widget_slice.call(arguments,1),returnValue=this;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(options==="instance"){returnValue=instance;return false}if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'")}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance")}methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false}})}else{if(args.length){options=$.widget.extend.apply(null,[options].concat(args))}this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{});if(instance._init){instance._init()}}else{$.data(this,fullName,new object(options,this))}})}return returnValue}};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=widget_uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy()}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow)}this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options)}if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]]}key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key]}curOption[key]=value}else{if(arguments.length===1){return this.options[key]===undefined?null:this.options[key]}options[key]=value}}this._setOptions(options);return this},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key])}return this},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!value);if(value){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}}return this},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false}if(!handlers){handlers=element;element=this.element;delegateElement=this.widget()}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element)}$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return}return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments)}if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++}var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector){delegateElement.delegate(selector,eventName,handlerProxy)}else{element.bind(eventName,handlerProxy)}})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.unbind(eventName).undelegate(eventName);this.bindings=$(this.bindings.not(element).get());this.focusable=$(this.focusable.not(element).get());this.hoverable=$(this.hoverable.not(element).get())},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop]}}}this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented())}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options}}var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options}}hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay)}if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options)}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback)}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0])}next()})}}});var widget=$.widget;var mouseHandled=false;$(document).mouseup(function(){mouseHandled=false});var mouse=$.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");event.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(event){if(mouseHandled){return}this._mouseMoved=false;this._mouseStarted&&this._mouseUp(event);this._mouseDownEvent=event;var that=this,btnIsLeft=event.which===1,elIsCancel=typeof this.options.cancel==="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false;if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(event)!==false;if(!this._mouseStarted){event.preventDefault();return true}}if(true===$.data(event.target,this.widgetName+".preventClickEvent")){$.removeData(event.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(event){return that._mouseMove(event)};this._mouseUpDelegate=function(event){return that._mouseUp(event)};this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true},_mouseMove:function(event){if(this._mouseMoved){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button){return this._mouseUp(event)}else if(!event.which){return this._mouseUp(event)}}if(event.which||event.button){this._mouseMoved=true}if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault()}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==false;this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)}return!this._mouseStarted},_mouseUp:function(event){this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target===this._mouseDownEvent.target){$.data(event.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(event)}mouseHandled=false;return false},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}});(function(){$.ui=$.ui||{};var cachedScrollbarWidth,supportsOffsetFractions,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+(\.[\d]+)?%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseFloat(offsets[0])*(rpercent.test(offsets[0])?width/100:1),parseFloat(offsets[1])*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9){return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}}}if($.isWindow(raw)){return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}}}if(raw.preventDefault){return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}}}return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}}$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined){return cachedScrollbarWidth}var w1,w2,div=$("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2){w2=div[0].clientWidth}div.remove();return cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow||within.isDocument?"":within.element.css("overflow-x"),overflowY=within.isWindow||within.isDocument?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||overflowX==="auto"&&within.width<within.element[0].scrollWidth,hasOverflowY=overflowY==="scroll"||overflowY==="auto"&&within.height<within.element[0].scrollHeight;return{width:hasOverflowY?$.position.scrollbarWidth():0,height:hasOverflowX?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]),isDocument=!!withinElement[0]&&withinElement[0].nodeType===9;return{element:withinElement,isWindow:isWindow,isDocument:isDocument,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow||isDocument?withinElement.width():withinElement.outerWidth(),height:isWindow||isDocument?withinElement.height():withinElement.outerHeight()}}};$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments)}options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault){options.at="left top"}targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1){pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]}pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]});if(collision.length===1){collision[1]=collision[0]}if(options.at[0]==="right"){basePosition.left+=targetWidth}else if(options.at[0]==="center"){basePosition.left+=targetWidth/2}if(options.at[1]==="bottom"){basePosition.top+=targetHeight}else if(options.at[1]==="center"){basePosition.top+=targetHeight/2}atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right"){position.left-=elemWidth}else if(options.my[0]==="center"){position.left-=elemWidth/2}if(options.my[1]==="bottom"){position.top-=elemHeight}else if(options.my[1]==="center"){position.top-=elemHeight/2}position.left+=myOffset[0];position.top+=myOffset[1];if(!supportsOffsetFractions){position.left=round(position.left);position.top=round(position.top)}collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})}});if(options.using){using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth){feedback.horizontal="center"}if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight){feedback.vertical="middle"}if(max(abs(left),abs(right))>max(abs(top),abs(bottom))){feedback.important="horizontal"}else{feedback.important="vertical"}options.using.call(this,props,feedback)}}elem.offset($.extend(position,{using:using}))})};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth){if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight}else if(overRight>0&&overLeft<=0){position.left=withinOffset}else{if(overLeft>overRight){position.left=withinOffset+outerWidth-data.collisionWidth}else{position.left=withinOffset}}}else if(overLeft>0){position.left+=overLeft}else if(overRight>0){position.left-=overRight}else{position.left=max(position.left-collisionPosLeft,position.left)}},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight){if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom}else if(overBottom>0&&overTop<=0){position.top=withinOffset}else{if(overTop>overBottom){position.top=withinOffset+outerHeight-data.collisionHeight}else{position.top=withinOffset}}}else if(overTop>0){position.top+=overTop}else if(overBottom>0){position.top-=overBottom}else{position.top=max(position.top-collisionPosTop,position.top)}}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft)){position.left+=myOffset+atOffset+offset}}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight){position.left+=myOffset+atOffset+offset}}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(newOverBottom<0||newOverBottom<abs(overTop)){position.top+=myOffset+atOffset+offset}}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(newOverTop>0||abs(newOverTop)<overBottom){position.top+=myOffset+atOffset+offset}}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments)}}};(function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body){$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"})}for(i in testElementStyle){testElement.style[i]=testElementStyle[i]}testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;supportsOffsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement)})()})();var position=$.ui.position;$.extend($.ui,{datepicker:{version:"1.11.4"}});var datepicker_instActive;function datepicker_getZindex(elem){var position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value}}elem=elem.parent()}return 0}function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.regional.en=$.extend(true,{},this.regional[""]);this.regional["en-US"]=$.extend(true,{},this.regional.en);this.dpDiv=datepicker_bindHover($("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){datepicker_extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=nodeName==="div"||nodeName==="span";if(!target.id){this.uuid+=1;target.id="dp"+this.uuid}inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input"){this._connectDatepicker(target,inst)}else if(inline){this._inlineDatepicker(target,inst)}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");
return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:!inline?this.dpDiv:datepicker_bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return}this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(inst);$.data(target,"datepicker",inst);if(inst.settings.disabled){this._disableDatepicker(target)}},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove()}if(appendText){inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>");input[isRTL?"before":"after"](inst.append)}input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove()}showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both"){input.focus(this._showDatepicker)}if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(!buttonImage?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0]){$.datepicker._hideDatepicker()}else if($.datepicker._datepickerShowing&&$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0])}else{$.datepicker._showDatepicker(input[0])}return false})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i}}return maxI};date.setMonth(findMax(this._get(inst,dateFormat.match(/MM/)?"monthNames":"monthNamesShort")));date.setDate(findMax(this._get(inst,dateFormat.match(/DD/)?"dayNames":"dayNamesShort"))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return}divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,"datepicker",inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target)}inst.dpDiv.css("display","block")},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],"datepicker",inst)}datepicker_extendRemove(inst.settings,settings||{});date=date&&date.constructor===Date?this._formatDate(inst,date):date;this._dialogInput.val(date);this._pos=pos?pos.length?pos:[pos.pageX,pos.pageY]:null;if(!this._pos){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[browserWidth/2-100+scrollX,browserHeight/2-150+scrollY]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv)}$.data(this._dialogInput[0],"datepicker",inst);return this},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return}nodeName=target.nodeName.toLowerCase();$.removeData(target,"datepicker");if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(nodeName==="div"||nodeName==="span"){$target.removeClass(this.markerClassName).empty()}if(datepicker_instActive===inst){datepicker_instActive=null}},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return}nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value})},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,"datepicker");if(!$target.hasClass(this.markerClassName)){return}nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target){return false}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]===target){return true}}return false},_getInst:function(target){try{return $.data(target,"datepicker")}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string"){return name==="defaults"?$.extend({},$.datepicker._defaults):inst?name==="all"?$.extend({},inst.settings):this._get(inst,name):null}settings=name||{};if(typeof name==="string"){settings={};settings[name]=value}if(inst){if(this._curInst===inst){this._hideDatepicker()}date=this._getDateDatepicker(target,true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");datepicker_extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate)}if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate)}if("disabled"in settings){if(settings.disabled){this._disableDatepicker(target)}else{this._enableDatepicker(target)}}this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst)}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault)}return inst?this._getDate(inst):null},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0])}onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])}else{$.datepicker._hideDatepicker()}return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target)}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target)}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,isRTL?+1:-1,"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M")}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D")}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,isRTL?-1:+1,"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M")}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D")}handled=event.ctrlKey||event.metaKey;break;default:handled=false}}else if(event.keyCode===36&&event.ctrlKey){$.datepicker._showDatepicker(this)}else{handled=false}if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1)}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal){try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),inst.input?inst.input.val():null,$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst)}}catch(err){}}return true},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input"){input=$("input",input.parentNode)[0]}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input){return}var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0])}}beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return}datepicker_extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value=""}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight}isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")==="fixed";return!isFixed});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");inst.dpDiv.css("z-index",datepicker_getZindex($(input))+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration)}else{inst.dpDiv[showAnim||"show"](showAnim?duration:null)}if($.datepicker._shouldFocusInput(inst)){inst.input.focus()}$.datepicker._curInst=inst}},_updateDatepicker:function(inst){this.maxRows=4;datepicker_instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17,activeCell=inst.dpDiv.find("."+this._dayOverClass+" a");if(activeCell.length>0){datepicker_handleMouseover.apply(activeCell.get(0))}inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",width*cols+"em")}inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&$.datepicker._shouldFocusInput(inst)){inst.input.focus()}if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml)}origyearshtml=inst.yearshtml=null},0)}},_shouldFocusInput:function(inst){return inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&!inst.input.is(":focus")},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=this._get(inst,"isRTL")?dpWidth-inputWidth:0;offset.left-=isFixed&&offset.left===inst.input.offset().left?$(document).scrollLeft():0;offset.top-=isFixed&&offset.top===inst.input.offset().top+inputHeight?$(document).scrollTop():0;offset.left-=Math.min(offset.left,offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight):0);return offset},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type==="hidden"||obj.nodeType!==1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"]}position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var showAnim,duration,postProcess,onClose,inst=this._curInst;if(!inst||input&&inst!==$.data(input,"datepicker")){return}if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst)};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim])){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[showAnim==="slideDown"?"slideUp":showAnim==="fadeIn"?"fadeOut":"hide"](showAnim?duration:null,postProcess)}if(!showAnim){postProcess()}this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose){onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst){return}var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if($target[0].id!==$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length===0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)||$target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst){$.datepicker._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return}this._adjustInstDate(inst,offset+(period==="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{date=new Date;inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return}inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))},_clearDate:function(id){var target=$(id);this._selectDate(target,"")},_selectDate:function(id,dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=dateStr!=null?dateStr:this._formatDate(inst);if(inst.input){inst.input.val(dateStr)}this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])}else if(inst.input){inst.input.trigger("change")}if(inst.inline){this._updateDatepicker(inst)}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof inst.input[0]!=="object"){inst.input.focus()}this._lastInput=null}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[day>0&&day<6,""]},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/864e5)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments"}value=typeof value==="object"?value.toString():value+"";if(value===""){return null}var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=typeof shortYearCutoffTemp!=="string"?shortYearCutoffTemp:(new Date).getFullYear()%100+parseInt(shortYearCutoffTemp,10),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;if(matches){iFormat++}return matches},getNumber=function(match){var isDoubled=lookAhead(match),size=match==="@"?14:match==="!"?20:match==="y"&&isDoubled?4:match==="o"?3:2,minSize=match==="y"?size:1,digits=new RegExp("^\\d{"+minSize+","+size+"}"),num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue}iValue+=num[0].length;return parseInt(num[0],10)},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]]}).sort(function(a,b){return-(a[1].length-b[1].length)});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false}});if(index!==-1){return index+1}else{throw"Unknown name at position "+iValue}},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat)){throw"Unexpected literal at position "+iValue}iValue++};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false}else{checkLiteral()}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":date=new Date((getNumber("!")-this._ticksTo1970)/1e4);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral()}else{literal=true}break;default:checkLiteral()}}}if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra)){throw"Extra/unparsed characters found in date: "+extra}}if(year===-1){year=(new Date).getFullYear()}else if(year<100){year+=(new Date).getFullYear()-(new Date).getFullYear()%100+(year<=shortYearCutoff?0:-100)}if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,month-1);if(day<=dim){break}month++;day-=dim}while(true)}date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day){throw"Invalid date"}return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*1e7,formatDate:function(format,date,settings){if(!date){return""}var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;if(matches){iFormat++}return matches},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num}}return num},formatName=function(match,value,shortNames,longNames){return lookAhead(match)?longNames[value]:shortNames[value]},output="",literal=false;if(date){for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false}else{output+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/864e5),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100;break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*1e4+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'"}else{literal=true}break;default:output+=format.charAt(iFormat)}}}}return output},_possibleChars:function(format){var iFormat,chars="",literal=false,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;if(matches){iFormat++}return matches};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false}else{chars+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'"}else{literal=true}break;default:chars+=format.charAt(iFormat)}}}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal){return}var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){dates=noDefault?"":dates}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=dates?date.getDate():0;inst.currentMonth=dates?date.getMonth():0;inst.currentYear=dates?date.getFullYear():0;this._adjustInstDate(inst)},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date;date.setDate(date.getDate()+offset);return date},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date,year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)},newDate=date==null||date===""?defaultDate:typeof date==="string"?offsetString(date):typeof date==="number"?isNaN(date)?defaultDate:offsetNumeric(date):new Date(date.getTime());newDate=newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate;if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0)}return this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){if(!date){return null}date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange){this._notifyChange(inst)}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst))}},_getDate:function(inst){var startDate=!inst.currentYear||inst.input&&inst.input.val()===""?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return startDate},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){$.datepicker._adjustDate(id,-stepMonths,"M")},next:function(){$.datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){$.datepicker._hideDatepicker()},today:function(){$.datepicker._gotoToday(id)},selectDay:function(){$.datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){$.datepicker._selectMonthYear(id,this,"M");return false},selectYear:function(){$.datepicker._selectMonthYear(id,this,"Y");return false}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])})},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date,today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=numMonths[0]!==1||numMonths[1]!==1,currentDate=this._daylightSavingAdjust(!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate()));maxDraw=minDate&&maxDraw<minDate?minDate:maxDraw;while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst));prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>";
nextText=this._get(inst,"nextText");nextText=!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst));next=this._canAdjustMonth(inst,+1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>";currentText=this._get(inst,"currentText");gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today;currentText=!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst));controls=!inst.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(inst,"closeText")+"</button>":"";buttonPanel=showButtonPanel?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=isNaN(firstDay)?0:firstDay;showWeek=this._get(inst,"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";dow;for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="<div class='ui-datepicker-group";if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break}}calender+="'>"}calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+cornerClass+"'>"+(/all|left/.test(cornerClass)&&row===0?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&row===0?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";thead=showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"";for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="<th scope='col'"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)}leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows;this.maxRows=numRows;printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";tbody=!showWeek?"":"<td class='ui-datepicker-week-col'>"+this._get(inst,"calculateWeek")(printDate)+"</td>";for(dow=0;dow<7;dow++){daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[true,""];otherMonth=printDate.getMonth()!==drawMonth;unselectable=otherMonth&&!selectOtherMonths||!daySettings[0]||minDate&&printDate<minDate||maxDate&&printDate>maxDate;tbody+="<td class='"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2].replace(/'/g,"&#39;")+"'":"")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>")+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+(numMonths[0]>0&&col===numMonths[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");group+=calender}html+=group}html+=buttonPanel;inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth){monthHtml+="<span class='ui-datepicker-month'>"+monthNames[drawMonth]+"</span>"}else{inMinYear=minDate&&minDate.getFullYear()===drawYear;inMaxYear=maxDate&&maxDate.getFullYear()===drawYear;monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+="<option value='"+month+"'"+(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>"}}monthHtml+="</select>"}if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")}if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+="<span class='ui-datepicker-year'>"+drawYear+"</span>"}else{years=this._get(inst,"yearRange").split(":");thisYear=(new Date).getFullYear();determineYear=function(value){var year=value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10);return isNaN(year)?thisYear:year};year=determineYear(years[0]);endYear=Math.max(year,determineYear(years[1]||""));year=minDate?Math.max(year,minDate.getFullYear()):year;endYear=maxDate?Math.min(endYear,maxDate.getFullYear()):endYear;inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;year<=endYear;year++){inst.yearshtml+="<option value='"+year+"'"+(year===drawYear?" selected='selected'":"")+">"+year+"</option>"}inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null}}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml}html+="</div>";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period==="Y"?offset:0),month=inst.drawMonth+(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y"){this._notifyChange(inst)}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=minDate&&date<minDate?minDate:date;return maxDate&&newDate>maxDate?maxDate:newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply(inst.input?inst.input[0]:null,[inst.selectedYear,inst.selectedMonth+1,inst])}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return numMonths==null?[1,1]:typeof numMonths==="number"?[1,numMonths]:numMonths},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()))}return this._isInRange(inst,date)},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");if(years){yearSplit=years.split(":");currentYear=(new Date).getFullYear();minYear=parseInt(yearSplit[0],10);maxYear=parseInt(yearSplit[1],10);if(yearSplit[0].match(/[+\-].*/)){minYear+=currentYear}if(yearSplit[1].match(/[+\-].*/)){maxYear+=currentYear}}return(!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear)},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=typeof shortYearCutoff!=="string"?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10);return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=day?typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day)):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function datepicker_bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).removeClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).removeClass("ui-datepicker-next-hover")}}).delegate(selector,"mouseover",datepicker_handleMouseover)}function datepicker_handleMouseover(){if(!$.datepicker._isDisabledDatepicker(datepicker_instActive.inline?datepicker_instActive.dpDiv.parent()[0]:datepicker_instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1){$(this).addClass("ui-datepicker-prev-hover")}if(this.className.indexOf("ui-datepicker-next")!==-1){$(this).addClass("ui-datepicker-next-hover")}}}function datepicker_extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null){target[name]=props[name]}}return target}$.fn.datepicker=function(options){if(!this.length){return this}if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick);$.datepicker.initialized=true}if($("#"+$.datepicker._mainDivId).length===0){$("body").append($.datepicker.dpDiv)}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||options==="getDate"||options==="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}if(options==="option"&&arguments.length===2&&typeof arguments[1]==="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}return this.each(function(){typeof options==="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker;$.datepicker.initialized=false;$.datepicker.uuid=(new Date).getTime();$.datepicker.version="1.11.4";var datepicker=$.datepicker;var slider=$.widget("ui.slider",$.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=false},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var i,handleCount,options=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",handles=[];handleCount=options.values&&options.values.length||1;if(existingHandles.length>handleCount){existingHandles.slice(handleCount).remove();existingHandles=existingHandles.slice(0,handleCount)}for(i=existingHandles.length;i<handleCount;i++){handles.push(handle)}this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(i){$(this).data("ui-slider-handle-index",i)})},_createRange:function(){var options=this.options,classes="";if(options.range){if(options.range===true){if(!options.values){options.values=[this._valueMin(),this._valueMin()]}else if(options.values.length&&options.values.length!==2){options.values=[options.values[0],options.values[0]]}else if($.isArray(options.values)){options.values=options.values.slice(0)}}if(!this.range||!this.range.length){this.range=$("<div></div>").appendTo(this.element);classes="ui-slider-range"+" ui-widget-header ui-corner-all"}else{this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""})}this.range.addClass(classes+(options.range==="min"||options.range==="max"?" ui-slider-range-"+options.range:""))}else{if(this.range){this.range.remove()}this.range=null}},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();if(this.range){this.range.remove()}this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-widget"+" ui-widget-content"+" ui-corner-all");this._mouseDestroy()},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));if(distance>thisDistance||distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min)){distance=thisDistance;closestHandle=$(this);index=i}});allowed=this._start(event,index);if(allowed===false){return false}this._mouseSliding=true;this._handleIndex=index;closestHandle.addClass("ui-state-active").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(event,index,normValue)}this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);this._slide(event,this._handleIndex,normValue);return false},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}percentMouse=pixelMouse/pixelTotal;if(percentMouse>1){percentMouse=1}if(percentMouse<0){percentMouse=0}if(this.orientation==="vertical"){percentMouse=1-percentMouse}valueTotal=this._valueMax()-this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse)},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}return this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?0:1);if(this.options.values.length===2&&this.options.range===true&&(index===0&&newVal>otherVal||index===1&&newVal<otherVal)){newVal=otherVal}if(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);if(allowed!==false){this.values(index,newVal)}}}else{if(newVal!==this.value()){allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});if(allowed!==false){this.value(newVal)}}}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}this._lastChangedValue=index;this._trigger("change",event,uiHash)}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return}return this._value()},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return}if(arguments.length){if($.isArray(arguments[0])){vals=this.options.values;newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(index)}else{return this.value()}}}else{return this._values()}},_setOption:function(key,value){var i,valsLength=0;if(key==="range"&&this.options.range===true){if(value==="min"){this.options.value=this._values(0);this.options.values=null}else if(value==="max"){this.options.value=this._values(this.options.values.length-1);this.options.values=null}}if($.isArray(this.options.values)){valsLength=this.options.values.length}if(key==="disabled"){this.element.toggleClass("ui-state-disabled",!!value)}this._super(key,value);switch(key){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();this.handles.css(value==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(i=0;i<valsLength;i+=1){this._change(null,i)}this._animateOff=false;break;case"step":case"min":case"max":this._animateOff=true;this._calculateNewMax();this._refreshValue();this._animateOff=false;break;case"range":this._animateOff=true;this._refresh();this._animateOff=false;break}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val}else if(this.options.values&&this.options.values.length){vals=this.options.values.slice();for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(vals[i])}return vals}else{return[]}},_trimAlignValue:function(val){if(val<=this._valueMin()){return this._valueMin()}if(val>=this._valueMax()){return this._valueMax()}var step=this.options.step>0?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=valModStep>0?step:-step}return parseFloat(alignValue.toFixed(5))},_calculateNewMax:function(){var max=this.options.max,min=this._valueMin(),step=this.options.step,aboveMin=Math.floor(+(max-min).toFixed(this._precision())/step)*step;max=aboveMin+min;this.max=parseFloat(max.toFixed(this._precision()))},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null){precision=Math.max(precision,this._precisionOf(this.options.min))}return precision},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=!this._animateOff?o.animate:false,_set={};if(this.options.values&&this.options.values.length){this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===true){if(that.orientation==="horizontal"){if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate)}if(i===1){that.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:false,duration:o.animate})}}else{if(i===0){that.range.stop(1,1)[animate?"animate":"css"]({bottom:valPercent+"%"},o.animate)}if(i===1){that.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:false,duration:o.animate})}}}lastValPercent=valPercent})}else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=valueMax!==valueMin?(value-valueMin)/(valueMax-valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate)}if(oRange==="max"&&this.orientation==="horizontal"){this.range[animate?"animate":"css"]({width:100-valPercent+"%"},{queue:false,duration:o.animate})}if(oRange==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate)}if(oRange==="max"&&this.orientation==="vertical"){this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:false,duration:o.animate})}}},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=true;$(event.target).addClass("ui-state-active");allowed=this._start(event,index);if(allowed===false){return}}break}step=this.options.step;if(this.options.values&&this.options.values.length){curVal=newVal=this.values(index)}else{curVal=newVal=this.value()}switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+(this._valueMax()-this._valueMin())/this.numPages);break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-(this._valueMax()-this._valueMin())/this.numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax()){return}newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin()){return}newVal=this._trimAlignValue(curVal-step);break}this._slide(event,index,newVal)},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=false;this._stop(event,index);this._change(event,index);$(event.target).removeClass("ui-state-active")}}}})});(function(factory){if(typeof define==="function"&&define.amd){define(["../datepicker"],factory)}else{factory(jQuery.datepicker)}})(function(datepicker){datepicker.regional["de"]={closeText:"Schließen",prevText:"&#x3C;Zurück",nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};datepicker.setDefaults(datepicker.regional["de"]);return datepicker.regional["de"]});(function(factory){if(typeof define==="function"&&define.amd){define(["../datepicker"],factory)}else{factory(jQuery.datepicker)}})(function(datepicker){datepicker.regional["fr"]={closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],monthNamesShort:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],dayNames:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],dayNamesShort:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],dayNamesMin:["D","L","M","M","J","V","S"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};datepicker.setDefaults(datepicker.regional["fr"]);return datepicker.regional["fr"]});

(function(){'use strict';var l,aa=this;function ba(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return"array"==da(a)}function fa(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ga(a){return"string"==typeof a}function ha(a){return"number"==typeof a}function ia(a){return"function"==da(a)}function ja(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function r(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;
function na(a,b,c){return a.call.apply(a.bind,arguments)}function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var ra=Date.now||function(){return+new Date};function u(a,b){a=a.split(".");var c=aa;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&ba(b)?c[d]=b:c[d]?c=c[d]:c=c[d]={}}
function sa(a,b){function c(){}c.prototype=b.prototype;a.Fc=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Hq=function(a,c,f){for(var g=Array(arguments.length-2),h=2;h<arguments.length;h++)g[h-2]=arguments[h];return b.prototype[c].apply(a,g)}};var w=angular.module("ngeo",["gettext","ui.date","floatThead"]);u("ngeo.FeatureProperties",{ANGLE:"a",COLOR:"c",IS_CIRCLE:"l",IS_RECTANGLE:"r",IS_TEXT:"t",NAME:"n",OPACITY:"o",AZIMUT:"z",SHOW_MEASURE:"m",SIZE:"s",STROKE:"k"});u("ngeo.GeometryType",{CIRCLE:"Circle",LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon",RECTANGLE:"Rectangle",TEXT:"Text"});var z=angular.module("gmf",[w.name,"gettext","ngAnimate","ngTouch","ngSanitize","tmh.dynamicLocale","ui.date","ui.slider"]);z.config(["tmhDynamicLocaleProvider","angularLocaleScript",function(a,b){a.localeLocationPattern(b)}]);u("gmf.DATALAYERGROUP_NAME","data");u("gmf.COORDINATES_LAYER_NAME","gmfCoordinatesLayerName");var ua;var va=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function wa(a){if(!za.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Aa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ba,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ca,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Da,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Ea,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Fa,"&#0;"));return a}
var Aa=/&/g,Ba=/</g,Ca=/>/g,Da=/"/g,Ea=/'/g,Fa=/\x00/g,za=/[\x00&<>"']/,Ga=String.prototype.repeat?function(a,b){return a.repeat(b)}:function(a,b){return Array(b+1).join(a)};function Ha(a,b,c){a=ba(c)?a.toFixed(c):String(a);c=a.indexOf(".");-1==c&&(c=a.length);return Ga("0",Math.max(0,b-c))+a}function Ia(a){return Array.prototype.join.call(arguments,"")}function Ja(a,b){return a<b?-1:a>b?1:0};var Ka=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ga(a))return ga(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},La=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ga(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Na=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=ga(a)?a.split(""):a,h=0;h<d;h++)if(h in g){var k=g[h];b.call(c,k,h,a)&&(e[f++]=k)}return e};function Oa(a){return Array.prototype.concat.apply(Array.prototype,arguments)}function Pa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Qa(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)};function Ra(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Sa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Ta(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Ua(a){var b={},c;for(c in a)b[c]=a[c];return b}function Va(a){var b=da(a);if("object"==b||"array"==b){if(ia(a.clone))return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=Va(a[c]);return b}return a}var Wa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Xa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Wa.length;f++)c=Wa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Ya(a){if(a.jb&&"function"==typeof a.jb)return a.jb();if(ga(a))return a.split("");if(fa(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Sa(a)}
function Za(a,b,c){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,c);else if(fa(a)||ga(a))La(a,b,c);else{var d;if(a.hb&&"function"==typeof a.hb)d=a.hb();else if(a.jb&&"function"==typeof a.jb)d=void 0;else if(fa(a)||ga(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=Ta(a);for(var e=Ya(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};function $a(a){return function(){return a}}var ab=$a(!1),bb=$a(!0);function cb(a){var b;b=b||0;return function(){return a.apply(this,Array.prototype.slice.call(arguments,0,b))}};var db="StopIteration"in aa?aa.StopIteration:{message:"StopIteration",stack:""};function eb(){}eb.prototype.next=function(){throw db;};eb.prototype.Lc=function(){return this};function fb(a){if(a instanceof eb)return a;if("function"==typeof a.Lc)return a.Lc(!1);if(fa(a)){var b=0,c=new eb;c.next=function(){for(;;){if(b>=a.length)throw db;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function gb(a,b){if(fa(a))try{La(a,b,void 0)}catch(c){if(c!==db)throw c;}else{a=fb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==db)throw c;}}}function hb(a){if(fa(a))return Pa(a);a=fb(a);var b=[];gb(a,function(a){b.push(a)});return b};function ib(a,b){this.g={};this.b=[];this.f=this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof ib?(c=a.hb(),d=a.jb()):(c=Ta(a),d=Sa(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}l=ib.prototype;l.Mb=function(){return this.c};l.jb=function(){jb(this);for(var a=[],b=0;b<this.b.length;b++)a.push(this.g[this.b[b]]);return a};l.hb=function(){jb(this);return this.b.concat()};
l.equals=function(a,b){if(this===a)return!0;if(this.c!=a.Mb())return!1;b=b||kb;jb(this);for(var c,d=0;c=this.b[d];d++)if(!b(this.get(c),a.get(c)))return!1;return!0};function kb(a,b){return a===b}l.Cb=function(){return 0==this.c};l.clear=function(){this.g={};this.f=this.c=this.b.length=0};l.remove=function(a){return lb(this.g,a)?(delete this.g[a],this.c--,this.f++,this.b.length>2*this.c&&jb(this),!0):!1};
function jb(a){if(a.c!=a.b.length){for(var b=0,c=0;b<a.b.length;){var d=a.b[b];lb(a.g,d)&&(a.b[c++]=d);b++}a.b.length=c}if(a.c!=a.b.length){for(var e={},c=b=0;b<a.b.length;)d=a.b[b],lb(e,d)||(a.b[c++]=d,e[d]=1),b++;a.b.length=c}}l.get=function(a,b){return lb(this.g,a)?this.g[a]:b};l.set=function(a,b){lb(this.g,a)||(this.c++,this.b.push(a),this.f++);this.g[a]=b};l.forEach=function(a,b){for(var c=this.hb(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};l.clone=function(){return new ib(this)};
l.transpose=function(){for(var a=new ib,b=0;b<this.b.length;b++){var c=this.b[b];a.set(this.g[c],c)}return a};l.Lc=function(a){jb(this);var b=0,c=this.f,d=this,e=new eb;e.next=function(){if(c!=d.f)throw Error("The map has changed since the iterator was created");if(b>=d.b.length)throw db;var e=d.b[b++];return a?e:d.g[e]};return e};function lb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var mb=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function nb(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e,f=null;0<=d?(e=a[c].substring(0,d),f=a[c].substring(d+1)):e=a[c];b(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}}
function ob(a,b,c){a=[a,"&",b];null!=c&&a.push("=",encodeURIComponent(String(c)));a[1]&&(c=a[0],b=c.indexOf("#"),0<=b&&(a.push(c.substr(b)),a[0]=c=c.substr(0,b)),b=c.indexOf("?"),0>b?a[1]="?":b==c.length-1&&(a[1]=void 0));return a.join("")}function pb(a,b,c,d){for(var e=c.length;0<=(b=a.indexOf(c,b))&&b<d;){var f=a.charCodeAt(b-1);if(38==f||63==f)if(f=a.charCodeAt(b+e),!f||61==f||38==f||35==f)return b;b+=e+1}return-1}var qb=/#|$/,rb=/[?&]($|#)/;
function sb(a,b,c){for(var d=a.search(qb),e=0,f,g=[];0<=(f=pb(a,e,b,d));)g.push(a.substring(e,f)),e=Math.min(a.indexOf("&",f)+1||d,d);g.push(a.substr(e));a=g.join("").replace(rb,"$1");return ob(a,b,c)}function tb(a,b){var c=a.length-1;0<=c&&a.indexOf("/",c)==c&&(a=a.substr(0,a.length-1));0==b.lastIndexOf("/",0)&&(b=b.substr(1));return Ia(a,"/",b)};function ub(a,b){this.g=this.o=this.f="";this.j=null;this.c=this.s="";this.i=!1;var c;a instanceof ub?(this.i=ba(b)?b:a.i,wb(this,a.f),this.o=a.o,this.g=a.g,xb(this,a.j),this.Dc(a.ib()),yb(this,a.b.clone()),this.c=a.c):a&&(c=String(a).match(mb))?(this.i=!!b,wb(this,c[1]||"",!0),this.o=zb(c[2]||""),this.g=zb(c[3]||"",!0),xb(this,c[4]),this.Dc(c[5]||"",!0),yb(this,c[6]||"",!0),this.c=zb(c[7]||"")):(this.i=!!b,this.b=new Ab(null,0,this.i))}l=ub.prototype;
l.toString=function(){var a=[],b=this.f;b&&a.push(Bb(b,Cb,!0),":");var c=this.g;if(c||"file"==b)a.push("//"),(b=this.o)&&a.push(Bb(b,Cb,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.j,null!=c&&a.push(":",String(c));if(c=this.ib())this.g&&"/"!=c.charAt(0)&&a.push("/"),a.push(Bb(c,"/"==c.charAt(0)?Db:Fb,!0));(c=this.b.toString())&&a.push("?",c);(c=this.c)&&a.push("#",Bb(c,Gb));return a.join("")};
l.resolve=function(a){var b=this.clone(),c=!!a.f;c?wb(b,a.f):c=!!a.o;c?b.o=a.o:c=!!a.g;c?b.g=a.g:c=null!=a.j;var d=a.ib();if(c)xb(b,a.j);else if(c=!!a.s){if("/"!=d.charAt(0))if(this.g&&!this.s)d="/"+d;else{var e=b.ib().lastIndexOf("/");-1!=e&&(d=b.ib().substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(-1!=e.indexOf("./")||-1!=e.indexOf("/.")){for(var d=0==e.lastIndexOf("/",0),e=e.split("/"),f=[],g=0;g<e.length;){var h=e[g++];"."==h?d&&g==e.length&&f.push(""):".."==h?((1<f.length||1==f.length&&
""!=f[0])&&f.pop(),d&&g==e.length&&f.push("")):(f.push(h),d=!0)}d=f.join("/")}else d=e}c?b.Dc(d):c=""!==a.b.toString();c?yb(b,zb(a.b.toString())):c=!!a.c;c&&(b.c=a.c);return b};l.clone=function(){return new ub(this)};function wb(a,b,c){a.f=c?zb(b,!0):b;a.f&&(a.f=a.f.replace(/:$/,""))}function xb(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.j=b}else a.j=null}l.ib=function(){return this.s};l.Dc=function(a,b){this.s=b?zb(a,!0):a;return this};
function yb(a,b,c){b instanceof Ab?(a.b=b,Hb(a.b,a.i)):(c||(b=Bb(b,Ib)),a.b=new Ab(b,0,a.i))}function Jb(a){return a instanceof ub?a.clone():new ub(a,void 0)}function zb(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Bb(a,b,c){return ga(a)?(a=encodeURI(a).replace(b,Kb),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Kb(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}
var Cb=/[#\/\?@]/g,Fb=/[\#\?:]/g,Db=/[\#\?]/g,Ib=/[\#\?@]/g,Gb=/#/g;function Ab(a,b,c){this.g=this.b=null;this.c=a||null;this.f=!!c}function Lb(a){a.b||(a.b=new ib,a.g=0,a.c&&nb(a.c,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))}l=Ab.prototype;l.Mb=function(){Lb(this);return this.g};l.add=function(a,b){Lb(this);this.c=null;a=Mb(this,a);var c=this.b.get(a);c||this.b.set(a,c=[]);c.push(b);this.g=this.g+1;return this};
l.remove=function(a){Lb(this);a=Mb(this,a);return lb(this.b.g,a)?(this.c=null,this.g=this.g-this.b.get(a).length,this.b.remove(a)):!1};l.clear=function(){this.b=this.c=null;this.g=0};l.Cb=function(){Lb(this);return 0==this.g};function Nb(a,b){Lb(a);b=Mb(a,b);return lb(a.b.g,b)}l.hb=function(){Lb(this);for(var a=this.b.jb(),b=this.b.hb(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};
l.jb=function(a){Lb(this);var b=[];if(ga(a))Nb(this,a)&&(b=Oa(b,this.b.get(Mb(this,a))));else{a=this.b.jb();for(var c=0;c<a.length;c++)b=Oa(b,a[c])}return b};l.set=function(a,b){Lb(this);this.c=null;a=Mb(this,a);Nb(this,a)&&(this.g=this.g-this.b.get(a).length);this.b.set(a,[b]);this.g=this.g+1;return this};l.get=function(a,b){a=a?this.jb(a):[];return 0<a.length?String(a[0]):b};
l.toString=function(){if(this.c)return this.c;if(!this.b)return"";for(var a=[],b=this.b.hb(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.jb(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}return this.c=a.join("&")};l.clone=function(){var a=new Ab;a.c=this.c;this.b&&(a.b=this.b.clone(),a.g=this.g);return a};function Mb(a,b){b=String(b);a.f&&(b=b.toLowerCase());return b}
function Hb(a,b){b&&!a.f&&(Lb(a),a.c=null,a.b.forEach(function(a,b){var e=b.toLowerCase();b!=e&&(this.remove(b),this.remove(e),0<a.length&&(this.c=null,this.b.set(Mb(this,e),Pa(a)),this.g=this.g+a.length))},a));a.f=b}l.extend=function(a){for(var b=0;b<arguments.length;b++)Za(arguments[b],function(a,b){this.add(b,a)},this)};var Ob=angular.module("app",[z.name]);Ob.config(["$compileProvider",function(a){Nb(Jb(location).b,"debug")||a.debugInfoEnabled(!1)}]);function Pb(a){this.type=a;this.target=null}Pb.prototype.preventDefault=Pb.prototype.stopPropagation=function(){this.So=!0};function Qb(a){a.stopPropagation()};function A(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function Rb(){}function Sb(a){return a.zo||(a.zo=++Tb)}var Tb=0;if("undefined"!==typeof window)var Ub=window;else"undefined"!==typeof global?Ub=global:"undefined"!==typeof self&&(Ub=self);function Vb(){}Vb.prototype.jc=!1;Vb.prototype.Va=function(){this.jc||(this.jc=!0,this.sa())};Vb.prototype.sa=Rb;var Wb="function"===typeof Object.assign?Object.assign:function(a,b){if(!a||!a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1,e=arguments.length;d<e;++d){var f=arguments[d];if(void 0!==f&&null!==f)for(var g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}return c};function Xb(a){for(var b in a)delete a[b]}function Yb(a){var b=[],c;for(c in a)b.push(a[c]);return b}function Zb(a){for(var b in a)return!1;return!b};function $b(a){function b(b){var d=a.listener,e=a.uh||a.target;a.mc&&B(a);return d.call(e,b)}return a.vh=b}function ac(a,b,c,d){for(var e,f=0,g=a.length;f<g;++f)if(e=a[f],e.listener===b&&e.uh===c)return d&&(e.deleteIndex=f),e}function bc(a,b){return(a=a.Ta)?a[b]:void 0}function cc(a){var b=a.Ta;b||(b=a.Ta={});return b}
function dc(a,b){var c=bc(a,b);if(c){for(var d=0,e=c.length;d<e;++d)a.removeEventListener(b,c[d].vh),Xb(c[d]);c.length=0;if(c=a.Ta)delete c[b],0===Object.keys(c).length&&delete a.Ta}}function E(a,b,c,d,e){var f=cc(a),g=f[b];g||(g=f[b]=[]);(f=ac(g,c,d,!1))?e||(f.mc=!1):(f={uh:d,mc:!!e,listener:c,target:a,type:b},a.addEventListener(b,$b(f)),g.push(f));return f}function ec(a,b,c,d){(a=bc(a,b))&&(c=ac(a,c,d,!0))&&B(c)}
function B(a){if(a&&a.target){a.target.removeEventListener(a.type,a.vh);var b=bc(a.target,a.type);if(b){var c="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==c&&b.splice(c,1);0===b.length&&dc(a.target,a.type)}Xb(a)}};function fc(){this.pa={};this.T={};this.O={}}A(fc,Vb);fc.prototype.addEventListener=function(a,b){var c=this.O[a];c||(c=this.O[a]=[]);-1===c.indexOf(b)&&c.push(b)};function F(a,b){var c="string"===typeof b?new Pb(b):b;b=c.type;c.target=a;var d=a.O[b],e;if(d){b in a.T||(a.T[b]=0,a.pa[b]=0);++a.T[b];for(var f=0,g=d.length;f<g;++f)if(!1===d[f].call(a,c)||c.So){e=!1;break}--a.T[b];if(0===a.T[b]){c=a.pa[b];for(delete a.pa[b];c--;)a.removeEventListener(b,Rb);delete a.T[b]}return e}}
fc.prototype.sa=function(){var a=cc(this),b;for(b in a)dc(this,b)};function gc(a,b){return b?b in a.O:0<Object.keys(a.O).length}fc.prototype.removeEventListener=function(a,b){var c=this.O[a];c&&(b=c.indexOf(b),a in this.pa?(c[b]=Rb,++this.pa[a]):(c.splice(b,1),0===c.length&&delete this.O[a]))};z.value("gmfUser",{functionalities:null,is_password_changed:null,role_id:null,role_name:null,username:null});function hc(a,b){Pb.call(this,a);this.Wj=b}A(hc,Pb);function ic(a,b,c){fc.call(this);this.ia=a;this.g=b;this.b=c;a=tb(this.g,"loginuser");this.ia.get(a,{withCredentials:!0}).then(this.c.bind(this,!0))}A(ic,fc);ic.$inject=["$http","authenticationBaseUrl","gmfUser"];
ic.prototype.ke=function(a,b,c){var d=tb(this.g,"loginchange");return this.ia.post(d,$.param({oldPassword:a,newPassword:b,confirmNewPassword:c}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0})};ic.prototype.changePassword=ic.prototype.ke;ic.prototype.He=function(a,b){var c=tb(this.g,"login");return this.ia.post(c,$.param({login:a,password:b}),{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0}).then(this.c.bind(this,!1))};
ic.prototype.login=ic.prototype.He;ic.prototype.Ie=function(){var a=tb(this.g,"logout");return this.ia.get(a,{withCredentials:!0}).then(this.f.bind(this))};ic.prototype.logout=ic.prototype.Ie;ic.prototype.Xe=function(a){var b=tb(this.g,"loginresetpassword"),c=function(a){return a.data}.bind(this);return this.ia.post(b,$.param({login:a}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(c)};ic.prototype.resetPassword=ic.prototype.Xe;
ic.prototype.c=function(a,b){var c=b.data,d=!a;if(void 0!==c.username){for(var e in c)this.b[e]=c[e];d&&F(this,new hc("login",this.b))}a&&F(this,new hc("ready",this.b));return b};ic.prototype.f=function(){for(var a in this.b)this.b[a]=null;F(this,new hc("logout",this.b))};z.service("gmfAuthentication",ic);u("ngeo.MessageType",{ERROR:"error",INFORMATION:"information",SUCCESS:"success",WARNING:"warning"});function jc(){}jc.prototype.show=function(a){kc(this,a).forEach(this.c,this)};jc.prototype.show=jc.prototype.show;jc.prototype.error=function(a){this.show(kc(this,a,"error"))};jc.prototype.error=jc.prototype.error;jc.prototype.info=function(a){this.show(kc(this,a,"information"))};jc.prototype.info=jc.prototype.info;jc.prototype.success=function(a){this.show(kc(this,a,"success"))};
jc.prototype.success=jc.prototype.success;jc.prototype.warn=function(a){this.show(kc(this,a,"warning"))};jc.prototype.warn=jc.prototype.warn;function kc(a,b,c){var d=[],e=null;"string"===typeof b?d.push({msg:b,type:void 0!==c?c:"information"}):Array.isArray(b)?b.forEach(function(a){"string"===typeof b?e={msg:a,type:void 0!==c?c:"information"}:(e=a,void 0!==c&&(e.type=c));d.push(e)},a):(e=b,void 0!==c&&(e.type=c),void 0===e.type&&(e.type="information"),d.push(e));return d};function lc(a){this.g=a;a=angular.element('<div class="ngeo-notification"></div>');angular.element(document.body).append(a);this.f=a;this.b={}}A(lc,jc);lc.$inject=["$timeout"];lc.prototype.notify=function(a){this.show(a)};lc.prototype.notify=lc.prototype.notify;lc.prototype.clear=function(){for(var a in this.b){var b=this.b[parseInt(a,10)],c=b.ql,b=b.promise,d=r(c);c.alert("close");this.g.cancel(b);delete this.b[d]}};lc.prototype.clear=lc.prototype.clear;
lc.prototype.c=function(a){var b=["alert","fade"];switch(a.type){case "error":b.push("alert-danger");break;case "information":b.push("alert-info");break;case "success":b.push("alert-success");break;case "warning":b.push("alert-warning")}var c=angular.element('<div class="'+b.join(" ")+'"></div>'),d;a.target?d=angular.element(a.target):d=this.f;d.append(c);c.html(a.msg).addClass("in");a=void 0!==a.delay?a.delay:7E3;var b={ql:c},e=r(c);b.promise=this.g(function(){c.alert("close");delete this.b[e]}.bind(this),
a);this.b[e]=b};w.service("ngeoNotification",lc);function mc(){return{template:'<div class="modal fade" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"></div></div></div>',restrict:"E",require:"ngModel",transclude:!0,link:function(a,b,c,d,e){function f(){k=a.$new();e(k,function(a){h.find(".modal-content").append(a)})}function g(){k.$destroy();h.find(".modal-content").empty()}var h=b.children();b="true"===c.ngeoModalDestroyContentOnHide;var k=a.$new();angular.element(document.body).append(h);d.$render=function(){h.modal(d.$viewValue?
"show":"hide")};h.on("shown.bs.modal hidden.bs.modal",function(b){var c=b.type;a.$apply(function(){d.$setViewValue("shown"==c)})});b?(h.on("hide.bs.modal",g),h.on("show.bs.modal",f)):h.find(".modal-content").append(e())}}}mc.$inject=["$parse"];w.directive("ngeoModal",mc);z.value("gmfAuthenticationTemplateUrl",function(a,b){a=b.gmfAuthenticationTemplateurl;return void 0!==a?a:"gmf/authentication.html"});function nc(a){return{scope:!0,controller:"GmfAuthenticationController",controllerAs:"authCtrl",templateUrl:a}}nc.$inject=["gmfAuthenticationTemplateUrl"];z.directive("gmfAuthentication",nc);
function oc(a,b,c,d,e){this.gmfUser=d;this.b=a;this.f=c;this.Sb=e;this.error=this.resetPasswordModalShown=this.changePasswordModalShown=this.changingPassword=!1;this.newPwdConfVal=this.newPwdVal=this.oldPwdVal=this.pwdVal=this.loginVal=""}oc.$inject=["gettextCatalog","$scope","gmfAuthentication","gmfUser","ngeoNotification"];
oc.prototype.ke=function(){var a=this.oldPwdVal,b=this.newPwdVal,c=this.newPwdConfVal,d=[];""===a&&d.push(this.b.getString("The old password is required."));""===b&&d.push(this.b.getString("The new password is required."));""===c&&d.push(this.b.getString("The password confirmation is required."));d.length?this.g(d):(a===b&&d.push(this.b.getString("The old and new passwords are the same.")),b!==c&&d.push(this.b.getString("The passwords don't match.")),d.length?this.g(d):(d=this.b.getString("Incorrect old password."),
this.f.ke(a,b,c).then(function(){this.changePasswordModalShown=!0;this.xh()}.bind(this),this.g.bind(this,d))))};oc.prototype.changePassword=oc.prototype.ke;oc.prototype.He=function(){var a=[];""===this.loginVal&&a.push(this.b.getString("The username is required."));""===this.pwdVal&&a.push(this.b.getString("The password is required."));a.length?this.g(a):(a=this.b.getString("Incorrect username or password."),this.f.He(this.loginVal,this.pwdVal).then(this.c.bind(this),this.g.bind(this,a)))};
oc.prototype.login=oc.prototype.He;oc.prototype.Ie=function(){var a=this.b.getString("Could not log out.");this.f.Ie().then(this.c.bind(this),this.g.bind(this,a))};oc.prototype.logout=oc.prototype.Ie;oc.prototype.Xe=function(){if(this.loginVal){var a=this.b.getString("An error occured while reseting the password."),b=function(){this.resetPasswordModalShown=!0;this.c()}.bind(this);this.f.Xe(this.loginVal).then(b,this.g.bind(this,a))}else this.g(this.b.getString("Please, input a login..."))};
oc.prototype.resetPassword=oc.prototype.Xe;oc.prototype.xh=function(){this.c();this.changingPassword=!1;this.newPwdConfVal=this.newPwdVal=this.oldPwdVal=""};oc.prototype.changePasswordReset=oc.prototype.xh;oc.prototype.g=function(a){this.error&&this.c();this.error=!0;var b=angular.element(".gmf-authentication-error");Array.isArray(a)||(a=[a]);a.forEach(function(a){this.Sb.notify({msg:a,target:b,type:"error"})},this)};oc.prototype.c=function(){this.Sb.clear();this.error=!1};
z.controller("GmfAuthenticationController",oc);function pc(){fc.call(this);this.g=0}A(pc,fc);function qc(a){if(Array.isArray(a))for(var b=0,c=a.length;b<c;++b)B(a[b]);else B(a)}pc.prototype.b=function(){++this.g;F(this,"change")};pc.prototype.on=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=E(this,a[f],b,c);return e}return E(this,a,b,c)};function rc(a,b){if(Array.isArray("change:source"))for(var c=Array(13),d=0;13>d;++d)c[d]=E(a,"change:source"[d],b,void 0,!0);else E(a,"change:source",b,void 0,!0)}
pc.prototype.Rj=qc;function tc(a,b,c){Pb.call(this,a);this.key=b;this.oldValue=c}A(tc,Pb);function uc(a){pc.call(this);Sb(this);this.K={};void 0!==a&&this.Ma(a)}A(uc,pc);var vc={};function I(a){return vc.hasOwnProperty(a)?vc[a]:vc[a]="change:"+a}l=uc.prototype;l.get=function(a){var b;this.K.hasOwnProperty(a)&&(b=this.K[a]);return b};l.hb=function(){return Object.keys(this.K)};function wc(a){return Wb({},a.K)}l.notify=function(a,b){var c;c=I(a);F(this,new tc(c,a,b));F(this,new tc("propertychange",a,b))};
l.set=function(a,b,c){c?this.K[a]=b:(c=this.K[a],this.K[a]=b,c!==b&&this.notify(a,c))};l.Ma=function(a,b){for(var c in a)this.set(c,a[c],b)};function xc(a){uc.call(this);this.c=a?a:[];yc(this)}A(xc,uc);l=xc.prototype;l.clear=function(){for(;0<zc(this);)this.pop()};l.extend=function(a){var b,c;b=0;for(c=a.length;b<c;++b)this.push(a[b]);return this};l.forEach=function(a,b){this.c.forEach(a,b)};l.item=function(a){return this.c[a]};function zc(a){return a.get("length")}function Ac(a,b,c){a.c.splice(b,0,c);yc(a);F(a,new Bc(Cc,c))}l.pop=function(){return Dc(this,zc(this)-1)};l.push=function(a){var b=this.c.length;Ac(this,b,a);return b};
l.remove=function(a){var b=this.c,c,d;c=0;for(d=b.length;c<d;++c)if(b[c]===a)return Dc(this,c)};function Dc(a,b){var c=a.c[b];a.c.splice(b,1);yc(a);F(a,new Bc(Ec,c));return c}function yc(a){a.set("length",a.c.length)}var Cc="add",Ec="remove";function Bc(a,b){Pb.call(this,a);this.element=b}A(Bc,Pb);function Fc(a,b){return a>b?1:a<b?-1:0}function Gc(a,b){return 0<=a.indexOf(b)}function Hc(a,b,c){var d=a.length;if(a[0]<=b)return 0;if(!(b<=a[d-1]))if(0<c)for(c=1;c<d;++c){if(a[c]<b)return c-1}else if(0>c)for(c=1;c<d;++c){if(a[c]<=b)return c}else for(c=1;c<d;++c){if(a[c]==b)return c;if(a[c]<b)return a[c-1]-b<b-a[c]?c-1:c}return d-1}function Ic(a,b){var c=Array.isArray(b)?b:[b],d=c.length;for(b=0;b<d;b++)a[a.length]=c[b]}function Jc(a,b){b=a.indexOf(b);var c=-1<b;c&&a.splice(b,1);return c}
function Kc(a,b){for(var c=a.length>>>0,d,e=0;e<c;e++)if(d=a[e],b(d,e,a))return d;return null}function Lc(a,b){var c=a.length;if(c!==b.length)return!1;for(var d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}function Mc(a){var b=Nc,c=a.length,d=Array(a.length),e;for(e=0;e<c;e++)d[e]={index:e,value:a[e]};d.sort(function(a,c){return b(a.value,c.value)||a.index-c.index});for(e=0;e<a.length;e++)a[e]=d[e].value}function Oc(a,b){var c;return a.every(function(d,e){c=e;return!b(d,e,a)})?-1:c}
function Pc(a,b){var c=b||Fc;return a.every(function(b,e){if(0===e)return!0;b=c(a[e-1],b);return!(0<b||0===b)})};function Qc(a){this.message="Assertion failed. See /doc/errors/#"+a+" for details.";this.code=a;this.name="AssertionError"}A(Qc,Error);function Rc(a,b){if(!a)throw new Qc(b);};function Sc(a){for(var b=Tc(),c=0,d=a.length;c<d;++c)Uc(b,a[c]);return b}function Vc(a,b,c){return c?(c[0]=a[0]-b,c[1]=a[1]-b,c[2]=a[2]+b,c[3]=a[3]+b,c):[a[0]-b,a[1]-b,a[2]+b,a[3]+b]}function Wc(a,b){return b?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b):a.slice()}function Xc(a,b,c){b=b<a[0]?a[0]-b:a[2]<b?b-a[2]:0;a=c<a[1]?a[1]-c:a[3]<c?c-a[3]:0;return b*b+a*a}function Yc(a,b){return a[0]<=b[0]&&b[2]<=a[2]&&a[1]<=b[1]&&b[3]<=a[3]}function Zc(a,b,c){return a[0]<=b&&b<=a[2]&&a[1]<=c&&c<=a[3]}
function $c(a,b){var c=a[1],d=a[2],e=a[3],f=b[0];b=b[1];var g=0;f<a[0]?g|=16:f>d&&(g|=4);b<c?g|=8:b>e&&(g|=2);0===g&&(g=1);return g}function Tc(){return[Infinity,Infinity,-Infinity,-Infinity]}function ad(a,b,c,d,e){return e?(e[0]=a,e[1]=b,e[2]=c,e[3]=d,e):[a,b,c,d]}function bd(a){return ad(Infinity,Infinity,-Infinity,-Infinity,a)}function cd(a,b){var c=a[0];a=a[1];return ad(c,a,c,a,b)}function dd(a,b){return a[0]==b[0]&&a[2]==b[2]&&a[1]==b[1]&&a[3]==b[3]}
function ed(a,b){b[0]<a[0]&&(a[0]=b[0]);b[2]>a[2]&&(a[2]=b[2]);b[1]<a[1]&&(a[1]=b[1]);b[3]>a[3]&&(a[3]=b[3]);return a}function Uc(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])}function fd(a,b,c,d,e){for(;c<d;c+=e){var f=a,g=b[c],h=b[c+1];f[0]=Math.min(f[0],g);f[1]=Math.min(f[1],h);f[2]=Math.max(f[2],g);f[3]=Math.max(f[3],h)}return a}
function gd(a,b,c){var d;return(d=b.call(c,hd(a)))||(d=b.call(c,[a[2],a[1]]))||(d=b.call(c,[a[2],a[3]]))?d:(d=b.call(c,id(a)))?d:!1}function jd(a){var b=0;kd(a)||(b=ld(a)*md(a));return b}function hd(a){return[a[0],a[1]]}function nd(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}
function od(a,b,c,d,e){var f=b*d[0]/2;d=b*d[1]/2;b=Math.cos(c);var g=Math.sin(c);c=f*b;f*=g;b*=d;var h=d*g,k=a[0],m=a[1];a=k-c+h;d=k-c-h;g=k+c-h;c=k+c+h;var h=m-f-b,k=m-f+b,n=m+f+b,f=m+f-b;return ad(Math.min(a,d,g,c),Math.min(h,k,n,f),Math.max(a,d,g,c),Math.max(h,k,n,f),e)}function md(a){return a[3]-a[1]}function pd(a,b){var c=Tc();qd(a,b)&&(c[0]=a[0]>b[0]?a[0]:b[0],c[1]=a[1]>b[1]?a[1]:b[1],c[2]=a[2]<b[2]?a[2]:b[2],c[3]=a[3]<b[3]?a[3]:b[3]);return c}function id(a){return[a[0],a[3]]}
function ld(a){return a[2]-a[0]}function qd(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]}function kd(a){return a[2]<a[0]||a[3]<a[1]};function rd(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")};var sd=document.implementation.createDocument("","",null);function td(a,b){return sd.createElementNS(a,b)}function ud(a){return vd(a,!1,[]).join("")}function vd(a,b,c){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)b?c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)vd(a,b,c);return c}function wd(a){return a instanceof Document}function xd(a){return a instanceof Node}
function yd(a){return(new DOMParser).parseFromString(a,"application/xml")}function zd(a,b){return function(c,d){c=a.call(b,c,d);void 0!==c&&Ic(d[d.length-1],c)}}function Ad(a,b){return function(c,d){c=a.call(void 0!==b?b:this,c,d);void 0!==c&&d[d.length-1].push(c)}}function Bd(a,b){return function(c,d){c=a.call(void 0!==b?b:this,c,d);void 0!==c&&(d[d.length-1]=c)}}
function Cd(a){return function(b,c){var d=a.call(this,b,c);if(void 0!==d){c=c[c.length-1];b=b.localName;var e;b in c?e=c[b]:e=c[b]=[];e.push(d)}}}function L(a,b){return function(c,d){var e=a.call(this,c,d);void 0!==e&&(d[d.length-1][void 0!==b?b:c.localName]=e)}}function M(a,b){return function(c,d,e){a.call(void 0!==b?b:this,c,d,e);e[e.length-1].node.appendChild(c)}}
function Dd(a){var b,c;return function(d,e,f){if(!b){b={};var g={};g[d.localName]=a;b[d.namespaceURI]=g;c=Ed(d.localName)}Fd(b,c,e,f)}}function Ed(a,b){return function(c,d,e){c=d[d.length-1].node;d=a;void 0===d&&(d=e);e=b;void 0===b&&(e=c.namespaceURI);return td(e,d)}}var Gd=Ed();function Hd(a,b){for(var c=b.length,d=Array(c),e=0;e<c;++e)d[e]=a[b[e]];return d}function O(a,b,c){c=void 0!==c?c:{};var d,e;d=0;for(e=a.length;d<e;++d)c[a[d]]=b;return c}
function Id(a,b,c,d){for(b=b.firstElementChild;b;b=b.nextElementSibling){var e=a[b.namespaceURI];void 0!==e&&(e=e[b.localName])&&e.call(d,b,c)}}function P(a,b,c,d,e){d.push(a);Id(b,c,d,e);return d.pop()}function Fd(a,b,c,d,e,f){for(var g=(void 0!==e?e:c).length,h,k,m=0;m<g;++m)h=c[m],void 0!==h&&(k=b.call(f,h,d,void 0!==e?e[m]:void 0),void 0!==k&&a[k.namespaceURI][k.localName].call(f,k,h,d))}function Jd(a,b,c,d,e,f,g){e.push(a);Fd(b,c,d,e,f,g);e.pop()};function Kd(){}Kd.prototype.read=function(a){return wd(a)?this.g(a):xd(a)?this.b(a):"string"===typeof a?(a=yd(a),this.g(a)):null};function Ld(a){a=""+a;var b=a.indexOf("."),b=-1===b?a.length:b;return 2<b?a:Array(3-b).join("0")+a};function Md(a){a=ud(a);return Nd(a)}function Nd(a){if(a=/^\s*(true|1)|(false|0)\s*$/.exec(a))return void 0!==a[1]||!1}function Od(a){a=ud(a);a=Date.parse(a);return isNaN(a)?void 0:a/1E3}function Pd(a){a=ud(a);return Qd(a)}function Qd(a){if(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))return parseFloat(a[1])}function Rd(a){a=ud(a);return Sd(a)}function Sd(a){if(a=/^\s*(\d+)\s*$/.exec(a))return parseInt(a[1],10)}function R(a){return ud(a).trim()}function Td(a,b){Ud(a,b?"1":"0")}
function Vd(a,b){a.appendChild(sd.createTextNode(b.toPrecision()))}function Wd(a,b){a.appendChild(sd.createTextNode(b.toString()))}function Ud(a,b){a.appendChild(sd.createTextNode(b))};function Xd(){}A(Xd,Kd);Xd.prototype.g=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.b(a);return null};Xd.prototype.b=function(a){return(a=P({},Yd,a,[]))?a:null};
var Zd=[null,"http://www.opengis.net/ows/1.1"],Yd=O(Zd,{ServiceIdentification:L(function(a,b){return P({},$d,a,b)}),ServiceProvider:L(function(a,b){return P({},ae,a,b)}),OperationsMetadata:L(function(a,b){return P({},be,a,b)})}),ce=O(Zd,{DeliveryPoint:L(R),City:L(R),AdministrativeArea:L(R),PostalCode:L(R),Country:L(R),ElectronicMailAddress:L(R)}),de=O(Zd,{Value:Cd(function(a){return R(a)})}),ee=O(Zd,{AllowedValues:L(function(a,b){return P({},de,a,b)})}),ge=O(Zd,{Phone:L(function(a,b){return P({},
fe,a,b)}),Address:L(function(a,b){return P({},ce,a,b)})}),ie=O(Zd,{HTTP:L(function(a,b){return P({},he,a,b)})}),he=O(Zd,{Get:Cd(function(a,b){var c=rd(a);return c?P({href:c},je,a,b):void 0}),Post:void 0}),ke=O(Zd,{DCP:L(function(a,b){return P({},ie,a,b)})}),be=O(Zd,{Operation:function(a,b){var c=a.getAttribute("name");(a=P({},ke,a,b))&&(b[b.length-1][c]=a)}}),fe=O(Zd,{Voice:L(R),Facsimile:L(R)}),je=O(Zd,{Constraint:Cd(function(a,b){var c=a.getAttribute("name");return c?P({name:c},ee,a,b):void 0})}),
le=O(Zd,{IndividualName:L(R),PositionName:L(R),ContactInfo:L(function(a,b){return P({},ge,a,b)})}),$d=O(Zd,{Title:L(R),ServiceTypeVersion:L(R),ServiceType:L(R)}),ae=O(Zd,{ProviderName:L(R),ProviderSite:L(rd),ServiceContact:L(function(a,b){return P({},le,a,b)})});function me(){this.c=new Xd}A(me,Kd);me.prototype.g=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.b(a);return null};me.prototype.b=function(a){var b=a.getAttribute("version").trim(),c=this.c.b(a);if(!c)return null;c.version=b;return(c=P(c,ne,a,[]))?c:null};function oe(a){var b=R(a).split(" ");if(b&&2==b.length)return a=+b[0],b=+b[1],isNaN(a)||isNaN(b)?void 0:[a,b]}
var pe=[null,"http://www.opengis.net/wmts/1.0"],qe=[null,"http://www.opengis.net/ows/1.1"],ne=O(pe,{Contents:L(function(a,b){return P({},re,a,b)})}),re=O(pe,{Layer:Cd(function(a,b){return P({},se,a,b)}),TileMatrixSet:Cd(function(a,b){return P({},te,a,b)})}),se=O(pe,{Style:Cd(function(a,b){if(b=P({},ue,a,b))return a="true"===a.getAttribute("isDefault"),b.isDefault=a,b}),Format:Cd(R),TileMatrixSetLink:Cd(function(a,b){return P({},ve,a,b)}),Dimension:Cd(function(a,b){return P({},we,a,b)}),ResourceURL:Cd(function(a){var b=
a.getAttribute("format"),c=a.getAttribute("template");a=a.getAttribute("resourceType");var d={};b&&(d.format=b);c&&(d.template=c);a&&(d.resourceType=a);return d})},O(qe,{Title:L(R),Abstract:L(R),WGS84BoundingBox:L(function(a,b){a=P([],xe,a,b);return 2!=a.length?void 0:Sc(a)}),Identifier:L(R)})),ue=O(pe,{LegendURL:Cd(function(a){var b={};b.format=a.getAttribute("format");b.href=rd(a);return b})},O(qe,{Title:L(R),Identifier:L(R)})),ve=O(pe,{TileMatrixSet:L(R)}),we=O(pe,{Default:L(R),Value:Cd(R)},O(qe,
{Identifier:L(R)})),xe=O(qe,{LowerCorner:Ad(oe),UpperCorner:Ad(oe)}),te=O(pe,{WellKnownScaleSet:L(R),TileMatrix:Cd(function(a,b){return P({},ye,a,b)})},O(qe,{SupportedCRS:L(R),Identifier:L(R)})),ye=O(pe,{TopLeftCorner:L(oe),ScaleDenominator:L(Pd),TileWidth:L(Rd),TileHeight:L(Rd),MatrixWidth:L(Rd),MatrixHeight:L(Rd)},O(qe,{Identifier:L(R)}));function ze(a,b,c){return Math.min(Math.max(a,b),c)}var Ae=function(){var a;"cosh"in Math?a=Math.cosh:a=function(a){a=Math.exp(a);return(a+1/a)/2};return a}();function Be(a,b,c,d){a=c-a;b=d-b;return a*a+b*b}function Ce(a){return a*Math.PI/180}function De(a,b){a%=b;return 0>a*b?a+b:a};function Ee(a){uc.call(this);var b=Wb({},a);b.opacity=void 0!==a.opacity?a.opacity:1;b.visible=void 0!==a.visible?a.visible:!0;b.zIndex=void 0!==a.zIndex?a.zIndex:0;b.maxResolution=void 0!==a.Qb?a.Qb:Infinity;b.minResolution=void 0!==a.Db?a.Db:0;this.Ma(b)}A(Ee,uc);function Fe(a){var b=Ge(a),c=a.bg(),d=He(a),e=a.I(),f=a.get("zIndex"),g=a.get("maxResolution"),h=a.get("minResolution");return{layer:a,opacity:ze(b,0,1),Ep:c,visible:d,ng:!0,extent:e,zIndex:f,Qb:g,Db:Math.max(h,0)}}Ee.prototype.I=function(){return this.get("extent")};
function Ge(a){return a.get("opacity")}function He(a){return a.get("visible")}Ee.prototype.Ja=function(a){this.set("visible",a)};function Ie(a,b,c,d){this.X=a;this.Y=b;this.aa=c;this.ea=d}Ie.prototype.contains=function(a){return Je(this,a[1],a[2])};function Je(a,b,c){return a.X<=b&&b<=a.Y&&a.aa<=c&&c<=a.ea}Ie.prototype.equals=function(a){return this.X==a.X&&this.aa==a.aa&&this.Y==a.Y&&this.ea==a.ea};Ie.prototype.extend=function(a){a.X<this.X&&(this.X=a.X);a.Y>this.Y&&(this.Y=a.Y);a.aa<this.aa&&(this.aa=a.aa);a.ea>this.ea&&(this.ea=a.ea)};Ie.prototype.ka=function(){return[this.Y-this.X+1,this.ea-this.aa+1]};
function Ke(a,b){return a.X<=b.Y&&a.Y>=b.X&&a.aa<=b.ea&&a.ea>=b.aa};function Le(a,b){if(Array.isArray(a))return a;void 0===b?b=[a,a]:b[0]=b[1]=a;return b};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function Me(a){this.radius=a}function Ne(a,b,c){var d=Ce(b[1]),e=Ce(c[1]),f=(e-d)/2;b=Ce(c[0]-b[0])/2;d=Math.sin(f)*Math.sin(f)+Math.sin(b)*Math.sin(b)*Math.cos(d)*Math.cos(e);return 2*a.radius*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))}Me.prototype.offset=function(a,b,c){var d=Ce(a[1]);b/=this.radius;var e=Math.asin(Math.sin(d)*Math.cos(b)+Math.cos(d)*Math.sin(b)*Math.cos(c));return[180*(Ce(a[0])+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(d),Math.cos(b)-Math.sin(d)*Math.sin(e)))/Math.PI,180*e/Math.PI]};var Oe=new Me(6370997);var Pe={};Pe.degrees=2*Math.PI*Oe.radius/360;Pe.ft=.3048;Pe.m=1;Pe["us-ft"]=1200/3937;
function Qe(a){this.b=a.code;this.j=a.units;this.o=void 0!==a.extent?a.extent:null;this.g=void 0!==a.wf?a.wf:"enu";this.i=void 0!==a.global?a.global:!1;this.c=!(!this.i||!this.o);this.u=void 0!==a.sc?a.sc:this.v;this.s=null;this.B=a.Oi;var b=Re,c=a.code,d=Se||Ub.proj4;if("function"==typeof d&&void 0===b[c]){var e=d.defs(c);if(void 0!==e){void 0!==e.axis&&void 0===a.wf&&(this.g=e.axis);void 0===a.Oi&&(this.B=e.to_meter);void 0===a.units&&(this.j=e.units);var f,g;for(f in b)if(a=d.defs(f),void 0!==
a)if(b=Te(f),a===e)Ue([b,this]);else{g=d(f,c);a=g.forward;g=g.inverse;var b=Te(b),h=Te(this);Ve(b,h,We(a));Ve(h,b,We(g))}}}}Qe.prototype.I=function(){return this.o};Qe.prototype.f=function(){return this.j};function Xe(a){return a.B||Pe[a.j]}function Ye(a,b){a.o=b;a.c=!(!a.i||!b)}
Qe.prototype.v=function(a,b){if("degrees"==this.f())return a;var c=Ze(this,Te("EPSG:4326"));a=[b[0]-a/2,b[1],b[0]+a/2,b[1],b[0],b[1]-a/2,b[0],b[1]+a/2];a=c(a,a,2);c=Ne(Oe,a.slice(0,2),a.slice(2,4));a=Ne(Oe,a.slice(4,6),a.slice(6,8));c=(c+a)/2;a=Xe(this);void 0!==a&&(c/=a);return c};Qe.prototype.sc=function(a,b){return this.u(a,b)};var Re={},$e={},Se=null;function Ue(a){af(a);a.forEach(function(b){a.forEach(function(a){b!==a&&Ve(b,a,bf)})})}function cf(a){Re[a.b]=a;Ve(a,a,bf)}
function af(a){var b=[];a.forEach(function(a){b.push(cf(a))})}function df(a){return a?"string"===typeof a?Te(a):a:Te("EPSG:3857")}function Ve(a,b,c){a=a.b;b=b.b;a in $e||($e[a]={});$e[a][b]=c}function We(a){return function(b,c,d){var e=b.length;d=void 0!==d?d:2;c=void 0!==c?c:Array(e);var f,g;for(g=0;g<e;g+=d)for(f=a([b[g],b[g+1]]),c[g]=f[0],c[g+1]=f[1],f=d-1;2<=f;--f)c[g+f]=b[g+f];return c}}
function Te(a){var b;if(a instanceof Qe)b=a;else if("string"===typeof a){b=Re[a];var c=Se||Ub.proj4;void 0===b&&"function"==typeof c&&void 0!==c.defs(a)&&(b=new Qe({code:a}),cf(b))}return b||null}function ef(a,b){if(a===b)return!0;var c=a.f()===b.f();return a.b===b.b?c:Ze(a,b)===bf&&c}function ff(a,b){a=Te(a);b=Te(b);return Ze(a,b)}function Ze(a,b){a=a.b;b=b.b;var c;a in $e&&b in $e[a]&&(c=$e[a][b]);void 0===c&&(c=gf);return c}
function gf(a,b){if(void 0!==b&&a!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}return a}function bf(a,b){if(void 0!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}else a=a.slice();return a}function hf(a,b,c){return ff(b,c)(a,void 0,a.length)}
function jf(a,b,c){b=ff(b,c);a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];b(a,a,2);c=[a[0],a[2],a[4],a[6]];var d=[a[1],a[3],a[5],a[7]];a=Math.min.apply(null,c);b=Math.min.apply(null,d);c=Math.max.apply(null,c);d=Math.max.apply(null,d);return ad(a,b,c,d,void 0)};function kf(a){this.Rb=void 0!==a.Rb?a.Rb:0;this.g=a.Ra;Rc(Pc(this.g,function(a,b){return b-a}),17);this.ub=this.g.length-1;this.c=void 0!==a.origin?a.origin:null;this.f=null;void 0!==a.Oe&&(this.f=a.Oe,Rc(this.f.length==this.g.length,20));var b=a.extent;void 0===b||this.c||this.f||(this.c=id(b));Rc(!this.c&&this.f||this.c&&!this.f,18);this.i=null;void 0!==a.ff&&(this.i=a.ff,Rc(this.i.length==this.g.length,19));this.o=void 0!==a.tileSize?a.tileSize:this.i?null:256;Rc(!this.o&&this.i||this.o&&!this.i,
22);this.B=void 0!==b?b:null;this.b=null;this.j=[0,0];void 0!==a.sizes?this.b=a.sizes.map(function(a){return new Ie(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):b&&lf(this,b)}var mf=[0,0,0];function nf(a,b,c,d,e){e=of(a,b,e);for(b=b[0]-1;b>=a.Rb;){if(c.call(null,b,pf(a,e,b,d)))return!0;--b}return!1}kf.prototype.I=function(){return this.B};kf.prototype.Ab=function(a){return this.c?this.c:this.f[a]};kf.prototype.ca=function(a){return this.g[a]};
function qf(a,b,c,d){return b[0]<a.ub?(d=of(a,b,d),pf(a,d,b[0]+1,c)):null}function rf(a,b,c,d){sf(a,b[0],b[1],c,!1,mf);var e=mf[1],f=mf[2];sf(a,b[2],b[3],c,!0,mf);a=mf[1];b=mf[2];void 0!==d?(d.X=e,d.Y=a,d.aa=f,d.ea=b):d=new Ie(e,a,f,b);return d}function pf(a,b,c,d){c=a.ca(c);return rf(a,b,c,d)}function tf(a,b){var c=a.Ab(b[0]),d=a.ca(b[0]);a=Le(uf(a,b[0]),a.j);return[c[0]+(b[1]+.5)*a[0]*d,c[1]+(b[2]+.5)*a[1]*d]}
function of(a,b,c){var d=a.Ab(b[0]),e=a.ca(b[0]);a=Le(uf(a,b[0]),a.j);var f=d[0]+b[1]*a[0]*e;b=d[1]+b[2]*a[1]*e;return ad(f,b,f+a[0]*e,b+a[1]*e,c)}function sf(a,b,c,d,e,f){var g=vf(a,d),h=d/a.ca(g),k=a.Ab(g);a=Le(uf(a,g),a.j);b=h*Math.floor((b-k[0])/d+(e?.5:0))/a[0];c=h*Math.floor((c-k[1])/d+(e?0:.5))/a[1];e?(b=Math.ceil(b)-1,c=Math.ceil(c)-1):(b=Math.floor(b),c=Math.floor(c));e=b;void 0!==f?(f[0]=g,f[1]=e,f[2]=c):f=[g,e,c];return f}function wf(a,b,c,d){c=a.ca(c);return sf(a,b[0],b[1],c,!1,d)}
function uf(a,b){return a.o?a.o:a.i[b]}function vf(a,b,c){return ze(Hc(a.g,b,c||0),a.Rb,a.ub)}function lf(a,b){for(var c=a.g.length,d=Array(c),e=a.Rb;e<c;++e)d[e]=pf(a,b,e);a.b=d};function xf(a){var b=a.s;if(!b){for(var b=yf(a),c=md(b),d=ld(b),e=Le(256),c=Math.max(d/e[0],c/e[1]),d=Array(43),e=0;43>e;++e)d[e]=c/Math.pow(2,e);b=new kf({extent:b,origin:id(b),Ra:d,tileSize:void 0});a.s=b}return b}function yf(a){a=Te(a);var b=a.I();b||(a=180*Pe.degrees/Xe(a),b=ad(-a,-a,a,a));return b};function zf(a){this.g=a.html;this.b=a.Jp?a.Jp:null};function Af(a){uc.call(this);this.Oa=Te(a.projection);this.v=Bf(a.xa);this.ta=a.La;this.Ya=void 0!==a.state?a.state:"ready";this.B=void 0!==a.wrapX?a.wrapX:!1}A(Af,uc);function Bf(a){if("string"===typeof a)return[new zf({html:a})];if(a instanceof zf)return[a];if(Array.isArray(a)){for(var b=a.length,c=Array(b),d=0;d<b;d++){var e=a[d];c[d]="string"===typeof e?new zf({html:e}):e}return c}return null}Af.prototype.zb=Rb;Af.prototype.da=function(){return this.Oa};Af.prototype.ma=function(){return this.Ya};
Af.prototype.refresh=function(){this.b()};function Cf(a){var b=a||{};a=Wb({},b);delete a.layers;b=b.layers;Ee.call(this,a);this.c=[];this.listenerKeys_={};E(this,I("layers"),this.Bm,this);b?Array.isArray(b)?b=new xc(b.slice()):Rc(b instanceof xc,43):b=new xc;this.set("layers",b)}A(Cf,Ee);l=Cf.prototype;l.ye=function(){He(this)&&this.b()};
l.Bm=function(){this.c.forEach(B);this.c.length=0;var a=this.ha();this.c.push(E(a,Cc,this.ro,this),E(a,Ec,this.so,this));for(var b in this.listenerKeys_)this.listenerKeys_[b].forEach(B);Xb(this.listenerKeys_);var a=a.c,c,d;b=0;for(c=a.length;b<c;b++)d=a[b],this.listenerKeys_[Sb(d).toString()]=[E(d,"propertychange",this.ye,this),E(d,"change",this.ye,this)];this.b()};
l.ro=function(a){a=a.element;var b=Sb(a).toString();this.listenerKeys_[b]=[E(a,"propertychange",this.ye,this),E(a,"change",this.ye,this)];this.b()};l.so=function(a){a=Sb(a.element).toString();this.listenerKeys_[a].forEach(B);delete this.listenerKeys_[a];this.b()};l.ha=function(){return this.get("layers")};l.zd=function(a){var b=void 0!==a?a:[];this.ha().forEach(function(a){a.zd(b)});return b};
l.Tf=function(a){var b=void 0!==a?a:[],c=b.length;this.ha().forEach(function(a){a.Tf(b)});a=Fe(this);var d,e;for(d=b.length;c<d;c++)e=b[c],e.opacity*=a.opacity,e.visible=e.visible&&a.visible,e.Qb=Math.min(e.Qb,a.Qb),e.Db=Math.max(e.Db,a.Db),void 0!==a.extent&&(e.extent=void 0!==e.extent?pd(e.extent,a.extent):a.extent);return b};l.bg=function(){return"ready"};function Df(a,b,c,d,e){Pb.call(this,a);this.vectorContext=b;this.frameState=c;this.context=d;this.glContext=e}A(Df,Pb);function Ef(a){var b=Wb({},a);delete b.source;Ee.call(this,b);this.i=this.f=this.c=null;a.map&&this.setMap(a.map);E(this,I("source"),this.Pm,this);this.set("source",a.source?a.source:null)}A(Ef,Ee);l=Ef.prototype;l.zd=function(a){a=a?a:[];a.push(this);return a};l.Tf=function(a){a=a?a:[];a.push(Fe(this));return a};function S(a){return a.get("source")||null}l.bg=function(){var a=S(this);return a?a.ma():"undefined"};l.to=function(){this.b()};
l.Pm=function(){this.i&&(B(this.i),this.i=null);var a=S(this);a&&(this.i=E(a,"change",this.to,this));this.b()};l.setMap=function(a){this.c&&(B(this.c),this.c=null);a||this.b();this.f&&(B(this.f),this.f=null);a&&(this.c=E(a,"precompose",function(a){var c=Fe(this);c.ng=!1;c.zIndex=Infinity;a.frameState.Ee.push(c);a.frameState.De[Sb(this)]=c},this),this.f=E(this,"change",a.render,a),this.b())};function Ff(a){Ef.call(this,a?a:{})}A(Ff,Ef);function Gf(a){a=a?a:{};var b=Wb({},a);delete b.wg;delete b.Uj;Ef.call(this,b);this.set("preload",void 0!==a.wg?a.wg:0);this.set("useInterimTilesOnError",void 0!==a.Uj?a.Uj:!0)}A(Gf,Ef);function Hf(a,b,c,d,e){fc.call(this);this.i=e;this.extent=a;this.f=c;this.resolution=b;this.state=d}A(Hf,fc);function If(a){F(a,"change")}Hf.prototype.I=function(){return this.extent};Hf.prototype.ca=function(){return this.resolution};Hf.prototype.ma=function(){return this.state};function Jf(a,b,c,d,e,f,g){Hf.call(this,a,b,c,0,d);this.j=e;this.b=new Image;null!==f&&(this.b.crossOrigin=f);this.c={};this.g=null;this.state=0;this.o=g}A(Jf,Hf);Jf.prototype.Le=function(a){if(void 0!==a){var b;a=Sb(a);if(a in this.c)return this.c[a];Zb(this.c)?b=this.b:b=this.b.cloneNode(!1);return this.c[a]=b}return this.b};Jf.prototype.s=function(){this.state=3;this.g.forEach(B);this.g=null;If(this)};
Jf.prototype.B=function(){void 0===this.resolution&&(this.resolution=md(this.extent)/this.b.height);this.state=2;this.g.forEach(B);this.g=null;If(this)};Jf.prototype.load=function(){if(0==this.state||3==this.state)this.state=1,If(this),this.g=[E(this.b,"error",this.s,this,!0),E(this.b,"load",this.B,this,!0)],this.o(this,this.j)};var Kf;a:{var Lf=aa.navigator;if(Lf){var Mf=Lf.userAgent;if(Mf){Kf=Mf;break a}}Kf=""}function Nf(a){return-1!=Kf.indexOf(a)};var Of=Nf("Opera"),Pf=Nf("Trident")||Nf("MSIE"),Qf=Nf("Edge"),Rf=Nf("Gecko")&&!(-1!=Kf.toLowerCase().indexOf("webkit")&&!Nf("Edge"))&&!(Nf("Trident")||Nf("MSIE"))&&!Nf("Edge"),Sf=-1!=Kf.toLowerCase().indexOf("webkit")&&!Nf("Edge"),Tf=Nf("Macintosh");function Uf(){var a=aa.document;return a?a.documentMode:void 0}var Vf;
a:{var Wf="",Xf=function(){var a=Kf;if(Rf)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Qf)return/Edge\/([\d\.]+)/.exec(a);if(Pf)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Sf)return/WebKit\/(\S+)/.exec(a);if(Of)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Xf&&(Wf=Xf?Xf[1]:"");if(Pf){var Yf=Uf();if(null!=Yf&&Yf>parseFloat(Wf)){Vf=String(Yf);break a}}Vf=Wf}var Zf={};
function $f(a){var b;if(!(b=Zf[a])){b=0;for(var c=va(String(Vf)).split("."),d=va(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",k=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var n=k.exec(g)||["","",""],p=m.exec(h)||["","",""];if(0==n[0].length&&0==p[0].length)break;b=Ja(0==n[1].length?0:parseInt(n[1],10),0==p[1].length?0:parseInt(p[1],10))||Ja(0==n[2].length,0==p[2].length)||Ja(n[2],p[2])}while(0==b)}b=Zf[a]=0<=b}return b}
var ag=aa.document,bg=ag&&Pf?Uf()||("CSS1Compat"==ag.compatMode?parseInt(Vf,10):5):void 0;function cg(a,b){var c=document.createElement("CANVAS");a&&(c.width=a);b&&(c.height=b);return c.getContext("2d")}function dg(a){a&&a.parentNode&&a.parentNode.removeChild(a)};var eg,fg=Ub,gg=-1<fg.navigator.userAgent.indexOf("OPR"),hg=-1<fg.navigator.userAgent.indexOf("Edge");eg=!(!fg.navigator.userAgent.match("CriOS")&&null!==fg.chrome&&void 0!==fg.chrome&&"Google Inc."===fg.navigator.vendor&&0==gg&&0==hg);function ig(a,b,c,d){var e=hf(c,b,a);c=b.sc(d,c);b=Xe(b);void 0!==b&&(c*=b);b=Xe(a);void 0!==b&&(c/=b);a=a.sc(c,e)/c;isFinite(a)&&0<a&&(c/=a);return c}function jg(a,b,c,d){a=c-a;b=d-b;var e=Math.sqrt(a*a+b*b);return[Math.round(c+a/e),Math.round(d+b/e)]}
function kg(a,b,c,d,e,f,g,h,k,m,n){var p=cg(Math.round(c*a),Math.round(c*b));if(0===k.length)return p.canvas;p.scale(c,c);var q=Tc();k.forEach(function(a){ed(q,a.extent)});var t=cg(Math.round(c*ld(q)/d),Math.round(c*md(q)/d)),x=c/d;k.forEach(function(a){t.drawImage(a.image,m,m,a.image.width-2*m,a.image.height-2*m,(a.extent[0]-q[0])*x,-(a.extent[3]-q[3])*x,ld(a.extent)*x,md(a.extent)*x)});var v=id(g);h.f.forEach(function(a){var b=a.source,e=a.target,g=b[1][0],h=b[1][1],k=b[2][0],m=b[2][1];a=(e[0][0]-
v[0])/f;var n=-(e[0][1]-v[1])/f,x=(e[1][0]-v[0])/f,Q=-(e[1][1]-v[1])/f,W=(e[2][0]-v[0])/f,xa=-(e[2][1]-v[1])/f,e=b[0][0],b=b[0][1],g=g-e,h=h-b,k=k-e,m=m-b;a:{g=[[g,h,0,0,x-a],[k,m,0,0,W-a],[0,0,g,h,Q-n],[0,0,k,m,xa-n]];h=g.length;for(k=0;k<h;k++){for(var m=k,ka=Math.abs(g[k][k]),ya=k+1;ya<h;ya++){var Ma=Math.abs(g[ya][k]);Ma>ka&&(ka=Ma,m=ya)}if(0===ka){g=null;break a}ka=g[m];g[m]=g[k];g[k]=ka;for(m=k+1;m<h;m++)for(ka=-g[m][k]/g[k][k],ya=k;ya<h+1;ya++)g[m][ya]=k==ya?0:g[m][ya]+ka*g[k][ya]}k=Array(h);
for(m=h-1;0<=m;m--)for(k[m]=g[m][h]/g[m][m],ka=m-1;0<=ka;ka--)g[ka][h]-=g[ka][m]*k[m];g=k}g&&(p.save(),p.beginPath(),eg?(k=(a+x+W)/3,m=(n+Q+xa)/3,h=jg(k,m,a,n),x=jg(k,m,x,Q),W=jg(k,m,W,xa),p.moveTo(x[0],x[1]),p.lineTo(h[0],h[1]),p.lineTo(W[0],W[1])):(p.moveTo(x,Q),p.lineTo(a,n),p.lineTo(W,xa)),p.clip(),p.transform(g[0],g[2],g[1],g[3],a,n),p.translate(q[0]-e,q[3]-b),p.scale(d/c,-d/c),p.drawImage(t.canvas,0,0),p.restore())});n&&(p.save(),p.strokeStyle="black",p.lineWidth=1,h.f.forEach(function(a){var b=
a.target;a=(b[0][0]-v[0])/f;var c=-(b[0][1]-v[1])/f,d=(b[1][0]-v[0])/f,e=-(b[1][1]-v[1])/f,g=(b[2][0]-v[0])/f,b=-(b[2][1]-v[1])/f;p.beginPath();p.moveTo(d,e);p.lineTo(a,c);p.lineTo(g,b);p.closePath();p.stroke()}),p.restore());return p.canvas};function lg(a,b,c,d,e){this.c=a;this.i=b;var f={},g=ff(this.i,this.c);this.g=function(a){var b=a[0]+"/"+a[1];f[b]||(f[b]=g(a));return f[b]};this.o=d;this.u=e*e;this.f=[];this.s=!1;this.B=this.c.c&&!!d&&!!this.c.I()&&ld(d)==ld(this.c.I());this.b=this.c.I()?ld(this.c.I()):null;this.j=this.i.I()?ld(this.i.I()):null;a=id(c);b=[c[2],c[3]];d=[c[2],c[1]];c=hd(c);e=this.g(a);var h=this.g(b),k=this.g(d),m=this.g(c);mg(this,a,b,d,c,e,h,k,m,10);if(this.s){var n=Infinity;this.f.forEach(function(a){n=Math.min(n,
a.source[0][0],a.source[1][0],a.source[2][0])});this.f.forEach(function(a){if(Math.max(a.source[0][0],a.source[1][0],a.source[2][0])-n>this.b/2){var b=[[a.source[0][0],a.source[0][1]],[a.source[1][0],a.source[1][1]],[a.source[2][0],a.source[2][1]]];b[0][0]-n>this.b/2&&(b[0][0]-=this.b);b[1][0]-n>this.b/2&&(b[1][0]-=this.b);b[2][0]-n>this.b/2&&(b[2][0]-=this.b);Math.max(b[0][0],b[1][0],b[2][0])-Math.min(b[0][0],b[1][0],b[2][0])<this.b/2&&(a.source=b)}},this)}f={}}
function mg(a,b,c,d,e,f,g,h,k,m){var n=Sc([f,g,h,k]),p=a.b?ld(n)/a.b:null,q=a.b,t=a.c.c&&.5<p&&1>p,x=!1;if(0<m){if(a.i.i&&a.j)var v=Sc([b,c,d,e]),x=x|.25<ld(v)/a.j;!t&&a.c.i&&p&&(x|=.25<p)}if(x||!a.o||qd(n,a.o)){if(!(x||isFinite(f[0])&&isFinite(f[1])&&isFinite(g[0])&&isFinite(g[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(k[0])&&isFinite(k[1])))if(0<m)x=!0;else return;if(0<m&&(x||(n=a.g([(b[0]+d[0])/2,(b[1]+d[1])/2]),q=t?(De(f[0],q)+De(h[0],q))/2-De(n[0],q):(f[0]+h[0])/2-n[0],n=(f[1]+h[1])/2-n[1],
x=q*q+n*n>a.u),x)){Math.abs(b[0]-d[0])<=Math.abs(b[1]-d[1])?(t=[(c[0]+d[0])/2,(c[1]+d[1])/2],q=a.g(t),n=[(e[0]+b[0])/2,(e[1]+b[1])/2],p=a.g(n),mg(a,b,c,t,n,f,g,q,p,m-1),mg(a,n,t,d,e,p,q,h,k,m-1)):(t=[(b[0]+c[0])/2,(b[1]+c[1])/2],q=a.g(t),n=[(d[0]+e[0])/2,(d[1]+e[1])/2],p=a.g(n),mg(a,b,t,n,e,f,q,p,k,m-1),mg(a,t,c,d,n,q,g,h,p,m-1));return}if(t){if(!a.B)return;a.s=!0}a.f.push({source:[f,h,k],target:[b,d,e]});a.f.push({source:[f,g,h],target:[b,c,d]})}}
function ng(a){var b=Tc();a.f.forEach(function(a){a=a.source;Uc(b,a[0]);Uc(b,a[1]);Uc(b,a[2])});return b};function og(a,b,c,d,e,f){this.B=b;this.s=a.I();var g=b.I(),h=g?pd(c,g):c,g=ig(a,b,nd(h),d);this.o=new lg(a,b,h,this.s,.5*g);this.g=d;this.b=c;a=ng(this.o);this.j=(this.nb=f(a,g,e))?this.nb.f:1;this.Qd=this.c=null;e=2;f=[];this.nb&&(e=0,f=this.nb.i);Hf.call(this,c,d,this.j,e,f)}A(og,Hf);l=og.prototype;l.sa=function(){1==this.state&&(B(this.Qd),this.Qd=null);Hf.prototype.sa.call(this)};l.Le=function(){return this.c};l.da=function(){return this.B};
l.Md=function(){var a=this.nb.ma();2==a&&(this.c=kg(ld(this.b)/this.g,md(this.b)/this.g,this.j,this.nb.ca(),0,this.g,this.b,this.o,[{extent:this.nb.I(),image:this.nb.Le()}],0));this.state=a;If(this)};l.load=function(){if(0==this.state){this.state=1;If(this);var a=this.nb.ma();2==a||3==a?this.Md():(this.Qd=E(this.nb,"change",function(){var a=this.nb.ma();if(2==a||3==a)B(this.Qd),this.Qd=null,this.Md()},this),this.nb.load())}};function pg(a){Af.call(this,{xa:a.xa,extent:a.extent,La:a.La,projection:a.projection,state:a.state});this.s=void 0!==a.Ra?a.Ra:null;this.c=null;this.J=0}A(pg,Af);function qg(a,b,c,d,e){var f=a.da();if(f&&e&&!ef(f,e)){if(a.c){if(a.J==a.g&&ef(a.c.da(),e)&&a.c.ca()==c&&a.c.f==d&&dd(a.c.I(),b))return a.c;a.c.Va();a.c=null}a.c=new og(f,e,b,c,d,function(a,b,c){return rg(this,a,b,c,f)}.bind(a));a.J=a.g;return a.c}f&&(e=f);return rg(a,b,c,d,e)}
pg.prototype.M=function(a){a=a.target;switch(a.ma()){case 1:F(this,new sg(tg,a));break;case 2:F(this,new sg(ug,a));break;case 3:F(this,new sg(vg,a))}};function wg(a,b){a.Le().src=b}function sg(a,b){Pb.call(this,a);this.image=b}A(sg,Pb);var tg="imageloadstart",ug="imageloadend",vg="imageloaderror";function xg(a,b){var c=[];Object.keys(b).forEach(function(a){null!==b[a]&&void 0!==b[a]&&c.push(a+"="+encodeURIComponent(b[a]))});var d=c.join("&");a=a.replace(/[?&]$/,"");a=-1===a.indexOf("?")?a+"?":a+"&";return a+d};function yg(a){a=a||{};pg.call(this,{xa:a.xa,La:a.La,projection:a.projection,Ra:a.Ra});this.V=void 0!==a.crossOrigin?a.crossOrigin:null;this.f=a.url;this.Ca=void 0!==a.$m?a.$m:wg;this.Ha=a.params||{};this.j=!0;zg(this);this.H=a.serverType;this.ja=void 0!==a.Xm?a.Xm:!0;this.i=null;this.u=[0,0];this.D=0;this.o=void 0!==a.ratio?a.ratio:1.5}A(yg,pg);var Ag=[101,101];
function Bg(a,b,c,d,e){if(void 0!==a.f){var f=od(b,c,0,Ag),g={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:a.Ha.LAYERS};Wb(g,a.Ha,e);e=Math.floor((f[3]-b[1])/c);g[a.j?"I":"X"]=Math.floor((b[0]-f[0])/c);g[a.j?"J":"Y"]=e;return Cg(a,f,Ag,1,Te(d),g)}}
function rg(a,b,c,d,e){if(void 0===a.f)return null;a.s&&(c=a.s[Hc(a.s,c,0)]);1==d||a.ja&&void 0!==a.H||(d=1);b=b.slice();var f=(b[0]+b[2])/2,g=(b[1]+b[3])/2,h=c/d,k=ld(b)/h,h=md(b)/h,m=a.i;if(m&&a.D==a.g&&m.ca()==c&&m.f==d&&Yc(m.I(),b))return m;if(1!=a.o){var m=a.o*ld(b)/2,n=a.o*md(b)/2;b[0]=f-m;b[1]=g-n;b[2]=f+m;b[3]=g+n}f={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Wb(f,a.Ha);a.u[0]=Math.ceil(k*a.o);a.u[1]=Math.ceil(h*a.o);e=Cg(a,b,a.u,d,e,f);a.i=new Jf(b,
c,d,a.v,e,a.V,a.Ca);a.D=a.g;E(a.i,"change",a.M,a);return a.i}
function Cg(a,b,c,d,e,f){Rc(void 0!==a.f,9);f[a.j?"CRS":"SRS"]=e.b;"STYLES"in a.Ha||(f.STYLES="");if(1!=d)switch(a.H){case "geoserver":d=90*d+.5|0;f.FORMAT_OPTIONS="FORMAT_OPTIONS"in f?f.FORMAT_OPTIONS+(";dpi:"+d):"dpi:"+d;break;case "mapserver":f.MAP_RESOLUTION=90*d;break;case "carmentaserver":case "qgis":f.DPI=90*d;break;default:Rc(!1,8)}f.WIDTH=c[0];f.HEIGHT=c[1];c=e.g;var g;a.j&&"ne"==c.substr(0,2)?g=[b[1],b[0],b[3],b[2]]:g=b;f.BBOX=g.join(",");return xg(a.f,f)}yg.prototype.Gd=function(){return this.f};
yg.prototype.Pd=function(a){a!=this.f&&(this.f=a,this.i=null,this.b())};yg.prototype.updateParams=function(a){Wb(this.Ha,a);zg(this);this.i=null;this.b()};function zg(a){var b;a:{b=(""+(a.Ha.VERSION||"1.3.0")).split(".");for(var c=["1","3"],d=0;d<Math.max(b.length,c.length);d++){var e=parseInt(b[d]||"0",10),f=parseInt(c[d]||"0",10);if(e>f){b=1;break a}if(f>e){b=-1;break a}}b=0}a.j=0<=b};function Dg(a,b){var c=/\{z\}/g,d=/\{x\}/g,e=/\{y\}/g,f=/\{-y\}/g;return function(g){if(g)return a.replace(c,g[0].toString()).replace(d,g[1].toString()).replace(e,function(){return(-g[2]-1).toString()}).replace(f,function(){var a=b.b?b.b[g[0]]:null;Rc(a,55);return(a.ea-a.aa+1+g[2]).toString()})}}function Eg(a,b){for(var c=a.length,d=Array(c),e=0;e<c;++e)d[e]=Dg(a[e],b);return Fg(d)}function Fg(a){return 1===a.length?a[0]:function(b,c,d){if(b)return a[De((b[1]<<b[0])+b[2],a.length)](b,c,d)}}
function Gg(){}function Hg(a){var b=[],c=/\{(\d)-(\d)\}/.exec(a)||/\{([a-z])-([a-z])\}/.exec(a);if(c){var d=c[2].charCodeAt(0),e;for(e=c[1].charCodeAt(0);e<=d;++e)b.push(a.replace(c[0],String.fromCharCode(e)))}else b.push(a);return b};function Ig(a,b){fc.call(this);this.Gb=a;this.state=b;this.b=null;this.key=""}A(Ig,fc);function Jg(a){F(a,"change")}Ig.prototype.xc=function(){return this.key+"/"+this.Gb};Ig.prototype.ma=function(){return this.state};function Kg(a,b,c,d,e){Ig.call(this,a,b);this.i=c;this.g=new Image;null!==d&&(this.g.crossOrigin=d);this.c={};this.f=null;this.o=e}A(Kg,Ig);l=Kg.prototype;l.sa=function(){1==this.state&&Lg(this);this.b&&this.b.Va();this.state=5;Jg(this);Ig.prototype.sa.call(this)};l.Me=function(a){if(void 0!==a){var b=Sb(a);if(b in this.c)return this.c[b];a=Zb(this.c)?this.g:this.g.cloneNode(!1);return this.c[b]=a}return this.g};l.xc=function(){return this.i};l.eo=function(){this.state=3;Lg(this);Jg(this)};
l.fo=function(){this.state=this.g.naturalWidth&&this.g.naturalHeight?2:4;Lg(this);Jg(this)};l.load=function(){if(0==this.state||3==this.state)this.state=1,Jg(this),this.f=[E(this.g,"error",this.eo,this,!0),E(this.g,"load",this.fo,this,!0)],this.o(this,this.i)};function Lg(a){a.f.forEach(B);a.f=null};function Mg(){this.f=0;this.c={};this.b=this.g=null}l=Mg.prototype;l.clear=function(){this.f=0;this.c={};this.b=this.g=null};l.forEach=function(a,b){for(var c=this.g;c;)a.call(b,c.Jc,c.ec,this),c=c.vb};l.get=function(a){a=this.c[a];Rc(void 0!==a,15);if(a===this.b)return a.Jc;a===this.g?(this.g=this.g.vb,this.g.fc=null):(a.vb.fc=a.fc,a.fc.vb=a.vb);a.vb=null;a.fc=this.b;this.b=this.b.vb=a;return a.Jc};l.Mb=function(){return this.f};
l.hb=function(){var a=Array(this.f),b=0,c;for(c=this.b;c;c=c.fc)a[b++]=c.ec;return a};l.jb=function(){var a=Array(this.f),b=0,c;for(c=this.b;c;c=c.fc)a[b++]=c.Jc;return a};l.pop=function(){var a=this.g;delete this.c[a.ec];a.vb&&(a.vb.fc=null);this.g=a.vb;this.g||(this.b=null);--this.f;return a.Jc};l.replace=function(a,b){this.get(a);this.c[a].Jc=b};l.set=function(a,b){Rc(!(a in this.c),16);b={ec:a,vb:null,fc:this.b,Jc:b};this.b?this.b.vb=b:this.g=b;this.b=b;this.c[a]=b;++this.f};function Ng(a){Mg.call(this);this.i=void 0!==a?a:2048}A(Ng,Mg);function Og(a){return a.Mb()>a.i}Ng.prototype.Uc=function(a){for(var b,c;Og(this)&&!(b=this.g.Jc,c=b.Gb[0].toString(),c in a&&a[c].contains(b.Gb));)this.pop().Va()};function Pg(a,b,c,d,e,f,g,h,k,m,n){Ig.call(this,e,0);this.K=void 0!==n?n:!1;this.v=g;this.u=h;this.f=null;this.c={};this.i=b;this.j=d;this.s=f?f:e;this.g=[];this.gd=null;this.o=0;f=of(d,this.s);h=this.j.I();e=this.i.I();f=h?pd(f,h):f;if(0===jd(f))this.state=4;else if((h=a.I())&&(e?e=pd(e,h):e=h),d=d.ca(this.s[0]),d=ig(a,c,nd(f),d),!isFinite(d)||0>=d)this.state=4;else if(this.B=new lg(a,c,f,e,d*(void 0!==m?m:.5)),0===this.B.f.length)this.state=4;else if(this.o=vf(b,d),c=ng(this.B),e&&(a.c?(c[1]=ze(c[1],
e[1],e[3]),c[3]=ze(c[3],e[1],e[3])):c=pd(c,e)),jd(c)){a=pf(b,c,this.o);for(b=a.X;b<=a.Y;b++)for(c=a.aa;c<=a.ea;c++)(m=k(this.o,b,c,g))&&this.g.push(m);0===this.g.length&&(this.state=4)}else this.state=4}A(Pg,Ig);Pg.prototype.sa=function(){1==this.state&&(this.gd.forEach(B),this.gd=null);Ig.prototype.sa.call(this)};Pg.prototype.Me=function(a){if(void 0!==a){var b=Sb(a);if(b in this.c)return this.c[b];a=Zb(this.c)?this.f:this.f.cloneNode(!1);return this.c[b]=a}return this.f};
Pg.prototype.Md=function(){var a=[];this.g.forEach(function(b){b&&2==b.ma()&&a.push({extent:of(this.i,b.Gb),image:b.Me()})},this);this.g.length=0;if(0===a.length)this.state=3;else{var b=this.s[0],c=uf(this.j,b),d="number"===typeof c?c:c[0],c="number"===typeof c?c:c[1],b=this.j.ca(b),e=this.i.ca(this.o),f=of(this.j,this.s);this.f=kg(d,c,this.v,e,this.i.I(),b,f,this.B,a,this.u,this.K);this.state=2}Jg(this)};
Pg.prototype.load=function(){if(0==this.state){this.state=1;Jg(this);var a=0;this.gd=[];this.g.forEach(function(b){var c=b.ma();if(0==c||1==c){a++;var d;d=E(b,"change",function(){var c=b.ma();if(2==c||3==c||4==c)B(d),a--,0===a&&(this.gd.forEach(B),this.gd=null,this.Md())},this);this.gd.push(d)}},this);this.g.forEach(function(a){0==a.ma()&&a.load()});0===a&&Ub.setTimeout(this.Md.bind(this),0)}};function Qg(a){Af.call(this,{xa:a.xa,extent:a.extent,La:a.La,projection:a.projection,state:a.state,wrapX:a.wrapX});this.ob=void 0!==a.Kd?a.Kd:!1;this.s=void 0!==a.Hc?a.Hc:1;this.Na=void 0!==a.Na?a.Na:null;this.c=new Ng(a.Qc);this.ja=[0,0];this.ec=""}A(Qg,Af);l=Qg.prototype;l.cj=function(){return Og(this.c)};l.Uc=function(a,b){(a=this.Ed(a))&&a.Uc(b)};
function Rg(a,b,c,d,e){b=a.Ed(b);if(!b)return!1;for(var f=!0,g,h,k=d.X;k<=d.Y;++k)for(var m=d.aa;m<=d.ea;++m)g=a.se(c,k,m),h=!1,b.c.hasOwnProperty(g)&&(g=b.get(g),(h=2===g.ma())&&(h=!1!==e(g))),h||(f=!1);return f}l.Zh=function(){return 0};function Sg(a,b){a.ec!==b&&(a.ec=b,a.b())}l.se=function(a,b,c){return a+"/"+b+"/"+c};l.Vf=function(){return this.ob};l.cc=function(a){return this.Na?this.Na:xf(a)};l.Ed=function(a){var b=this.da();return b&&!ef(b,a)?null:this.c};
function Tg(a,b,c){var d=void 0!==c?c:a.da();c=a.cc(d);if(a.B&&d.i){var e=b;b=e[0];a=tf(c,e);d=yf(d);Zc(d,a[0],a[1])?b=e:(e=ld(d),a[0]+=e*Math.ceil((d[0]-a[0])/e),b=wf(c,a,b))}e=b[0];d=b[1];a=b[2];if(c.Rb>e||e>c.ub)c=!1;else{var f=c.I();c=(c=f?pf(c,f,e):c.b?c.b[e]:null)?Je(c,d,a):!0}return c?b:null}l.refresh=function(){this.c.clear();this.b()};l.Vj=Rb;function Ug(a,b){Pb.call(this,a);this.tile=b}A(Ug,Pb);function Vg(a){Qg.call(this,{xa:a.xa,Qc:a.Qc,extent:a.extent,La:a.La,Kd:a.Kd,projection:a.projection,state:a.state,Na:a.Na,Hc:a.Hc,wrapX:a.wrapX});this.Gc=a.Gc;this.Ic=this.o?this.o.bind(this):Gg;this.Hb=null;if(a.Hb){var b=a.Hb;this.Hb=b;var c=b.join("\n");Wg(this,this.o?this.o.bind(this):Eg(b,this.Na),c)}else a.url&&this.Pd(a.url);a.Ic&&Wg(this,a.Ic)}A(Vg,Qg);
Vg.prototype.Ca=function(a){a=a.target;switch(a.ma()){case 1:F(this,new Ug("tileloadstart",a));break;case 2:F(this,new Ug("tileloadend",a));break;case 3:F(this,new Ug("tileloaderror",a))}};function Wg(a,b,c){a.Ic=b;"undefined"!==typeof c?Sg(a,c):a.b()}Vg.prototype.Pd=function(a){var b=this.Hb=Hg(a);Wg(this,this.o?this.o.bind(this):Eg(b,this.Na),a)};Vg.prototype.Vj=function(a,b,c){a=this.se(a,b,c);this.c.c.hasOwnProperty(a)&&this.c.get(a)};function Xg(a){Vg.call(this,{xa:a.xa,Qc:a.Qc,extent:a.extent,La:a.La,Kd:a.Kd,projection:a.projection,state:a.state,Na:a.Na,Gc:a.Gc?a.Gc:Yg,Hc:a.Hc,Ic:a.Ic,url:a.url,Hb:a.Hb,wrapX:a.wrapX});this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null;this.Sd=void 0!==a.Sd?a.Sd:Kg;this.f={};this.j={};this.pb=a.Dj}A(Xg,Vg);l=Xg.prototype;l.cj=function(){if(Og(this.c))return!0;for(var a in this.f)if(Og(this.f[a]))return!0;return!1};
l.Uc=function(a,b){a=this.Ed(a);this.c.Uc(this.c==a?b:{});for(var c in this.f){var d=this.f[c];d.Uc(d==a?b:{})}};l.Zh=function(a){return this.da()&&a&&ef(this.da(),a),0};l.Vf=function(a){return this.da()&&a&&!ef(this.da(),a)?!1:Vg.prototype.Vf.call(this,a)};l.cc=function(a){var b=this.da();return!this.Na||b&&!ef(b,a)?(b=Sb(a).toString(),b in this.j||(this.j[b]=xf(a)),this.j[b]):this.Na};
l.Ed=function(a){var b=this.da();if(!b||ef(b,a))return this.c;a=Sb(a).toString();a in this.f||(this.f[a]=new Ng);return this.f[a]};function Zg(a,b,c,d,e,f,g){b=[b,c,d];e=(c=Tg(a,b,f))?a.Ic(c,e,f):void 0;e=new a.Sd(b,void 0!==e?0:4,void 0!==e?e:"",a.crossOrigin,a.Gc);e.key=g;E(e,"change",a.Ca,a);return e}
function $g(a,b,c,d,e,f){if(a.da()&&f&&!ef(a.da(),f)){e=a.Ed(f);d=[b,c,d];var g;b=a.se.apply(a,d);e.c.hasOwnProperty(b)&&(g=e.get(b));c=a.ec;if(g&&g.key==c)return g;var h=a.da(),k=a.cc(h),m=a.cc(f),n=Tg(a,d,f);a=new Pg(h,k,f,m,d,n,a.s,0,function(a,b,c,d){return ah(this,a,b,c,d,h)}.bind(a),a.pb,!1);a.key=c;g?(a.b=g,e.replace(b,a)):e.set(b,a);return a}return ah(a,b,c,d,e,f)}
function ah(a,b,c,d,e,f){var g,h=a.se(b,c,d),k=a.ec;if(a.c.c.hasOwnProperty(h)){if(g=a.c.get(h),g.key!=k){var m=g;g.b&&g.b.key==k?(g=g.b,2==m.ma()&&(g.b=m)):(g=Zg(a,b,c,d,e,f,k),2==m.ma()?g.b=m:m.b&&2==m.b.ma()&&(g.b=m.b,m.b=null));g.b&&(g.b.b=null);a.c.replace(h,g)}}else g=Zg(a,b,c,d,e,f,k),a.c.set(h,g);return g}function Yg(a,b){a.Me().src=b};function bh(a){this.s=a.og;kf.call(this,{extent:a.extent,origin:a.origin,Oe:a.Oe,Ra:a.Ra,tileSize:a.tileSize,ff:a.ff,sizes:a.sizes})}A(bh,kf);
function ch(a,b){var c=[],d=[],e=[],f=[],g=[],h;h=Te(a.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var k=Xe(h),m="ne"==h.g.substr(0,2);a.TileMatrix.sort(function(a,b){return b.ScaleDenominator-a.ScaleDenominator});a.TileMatrix.forEach(function(a){d.push(a.Identifier);var b=2.8E-4*a.ScaleDenominator/k,h=a.TileWidth,t=a.TileHeight;m?e.push([a.TopLeftCorner[1],a.TopLeftCorner[0]]):e.push(a.TopLeftCorner);c.push(b);f.push(h==t?h:[h,t]);g.push([a.MatrixWidth,-a.MatrixHeight])});
return new bh({extent:b,Oe:e,Ra:c,og:d,ff:f,sizes:g})};function dh(a){function b(a){a="KVP"==d?xg(a,f):a.replace(/\{(\w+?)\}/g,function(a,b){return b.toLowerCase()in f?f[b.toLowerCase()]:a});return function(b){if(b){var c={TileMatrix:e.s[b[0]],TileCol:b[1],TileRow:-b[2]-1};Wb(c,g);b=a;return b="KVP"==d?xg(b,c):b.replace(/\{(\w+?)\}/g,function(a,b){return c[b]})}}}this.M=void 0!==a.version?a.version:"1.0.0";this.D=void 0!==a.format?a.format:"image/jpeg";this.i=void 0!==a.dimensions?a.dimensions:{};this.H=a.layer;this.u=a.matrixSet;this.J=a.style;var c=
a.Hb;void 0===c&&void 0!==a.url&&(c=Hg(a.url));var d=this.V=void 0!==a.requestEncoding?a.requestEncoding:"KVP",e=a.Na,f={layer:this.H,style:this.J,tilematrixset:this.u};"KVP"==d&&Wb(f,{Service:"WMTS",Request:"GetTile",Version:this.M,Format:this.D});var g=this.i,h=c&&0<c.length?Fg(c.map(b)):Gg;Xg.call(this,{xa:a.xa,Qc:a.Qc,crossOrigin:a.crossOrigin,La:a.La,projection:a.projection,Dj:a.Dj,Sd:a.Sd,Na:e,Gc:a.Gc,Hc:a.Hc,Ic:h,Hb:c,wrapX:void 0!==a.wrapX?a.wrapX:!1});Sg(this,eh(this))}A(dh,Xg);
dh.prototype.ya=function(){return this.H};dh.prototype.tc=function(){return this.J};function eh(a){var b=0,c=[],d;for(d in a.i)c[b++]=d+"-"+a.i[d];return c.join("/")}dh.prototype.jd=function(a){Wb(this.i,a);Sg(this,eh(this))};
function fh(a,b){var c=Kc(a.Contents.Layer,function(a){return a.Identifier==b.layer}),d=a.Contents.TileMatrixSet,e,f;e=1<c.TileMatrixSetLink.length?"projection"in b?Oc(c.TileMatrixSetLink,function(a){return Kc(d,function(b){return b.Identifier==a.TileMatrixSet}).SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3")==b.projection}):Oc(c.TileMatrixSetLink,function(a){return a.TileMatrixSet==b.matrixSet}):0;0>e&&(e=0);f=c.TileMatrixSetLink[e].TileMatrixSet;var g=c.Format[0];"format"in b&&
(g=b.format);e=Oc(c.Style,function(a){return"style"in b?a.Title==b.style:a.isDefault});0>e&&(e=0);e=c.Style[e].Identifier;var h={};"Dimension"in c&&c.Dimension.forEach(function(a){var b=a.Identifier,c=a.Default;void 0===c&&(c=a.Value[0]);h[b]=c});var k=Kc(a.Contents.TileMatrixSet,function(a){return a.Identifier==f}),m;m="projection"in b?Te(b.projection):Te(k.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var n=c.WGS84BoundingBox,p,q;void 0!==n&&(q=Te("EPSG:4326").I(),q=n[0]==
q[0]&&n[2]==q[2],p=jf(n,"EPSG:4326",m),(n=m.I())&&(Yc(n,p)||(p=void 0)));var k=ch(k,p),t=[];p=b.requestEncoding;p=void 0!==p?p:"";if("OperationsMetadata"in a&&"GetTile"in a.OperationsMetadata){a=a.OperationsMetadata.GetTile.DCP.HTTP.Get;for(var n=0,x=a.length;n<x;++n){var v=Kc(a[n].Constraint,function(a){return"GetEncoding"==a.name}).AllowedValues.Value;""===p&&(p=v[0]);if("KVP"===p)Gc(v,"KVP")&&t.push(a[n].href);else break}}0===t.length&&(p="REST",c.ResourceURL.forEach(function(a){"tile"===a.resourceType&&
(g=a.format,t.push(a.template))}));return{Hb:t,layer:b.layer,matrixSet:f,format:g,projection:m,requestEncoding:p,Na:k,style:e,dimensions:h,wrapX:q}};function gh(a,b){this.b=a;this.ia=b}gh.$inject=["$q","$http"];gh.prototype.ne=function(a,b,c,d,e){b={LAYERS:b};var f;d&&(b.TIME=d);c&&(b.SERVERTYPE=c,f=c.replace("qgisserver","qgis"));a=new yg({url:a,params:b,serverType:f});e&&a.updateParams(e);return new Ff({source:a})};gh.prototype.createBasicWMSLayer=gh.prototype.ne;
gh.prototype.Ff=function(a,b,c){var d=new me,e=new Gf({wg:Infinity}),f=this.b;return this.ia.get(a).then(function(g){var h;g.data&&(h=d.read(g.data));return void 0!==h?(g=fh(h,{layer:b}),g=new dh(g),c&&g.jd(c),e.set("source",g),h=Kc(h.Contents.Layer,function(a){return a.Identifier==b}),e.set("capabilitiesStyles",h.Style),f.resolve(e)):f.reject("Failed to get WMTS capabilities from "+a)})};gh.prototype.createWMTSLayerFromCapabilitites=gh.prototype.Ff;
gh.prototype.me=function(a){var b=new Cf;null!=a&&b.set("layers",a);return b};gh.prototype.createBasicGroup=gh.prototype.me;gh.prototype.qc=function(a,b){var c;hh(a).ha().c.some(function(a){return a.get("groupName")===b?(c=a,!0):!1});c||(c=this.me(),c.set("groupName",b),ih(a,c));return c};gh.prototype.getGroupFromMap=gh.prototype.qc;gh.prototype.yd=function(a){return jh(this,a,[])};gh.prototype.getFlatLayers=gh.prototype.yd;
function jh(a,b,c){b instanceof Cf?b.ha().forEach(function(a){jh(this,a,c)},a):0>c.indexOf(b)&&c.push(b);return c}gh.prototype.bc=function(a,b){var c=null;b.some(function(b){b instanceof Cf?(b=b.ha().c,c=this.bc(a,b)):b.get("layerNodeName")===a&&(c=b);return!!c},this);return c};gh.prototype.getLayerByName=gh.prototype.bc;gh.prototype.dg=function(a){var b;a=a.get("capabilitiesStyles");void 0!==a&&(a=a[0].legendURL,void 0!==a&&(b=a[0].href));return b||null};gh.prototype.getWMTSLegendURL=gh.prototype.dg;
gh.prototype.we=function(a,b,c,d){if(!a)return null;a=sb(a,"FORMAT","image/png");a=sb(a,"TRANSPARENT",!0);a=sb(a,"SERVICE","WMS");a=sb(a,"VERSION","1.1.1");a=sb(a,"REQUEST","GetLegendGraphic");a=sb(a,"LAYER",b);void 0!==c&&(a=sb(a,"SCALE",c));void 0!==d&&(a=sb(a,"RULE",d));return a};gh.prototype.getWMSLegendURL=gh.prototype.we;function kh(a,b){if(!He(a))return!1;b=T(b).ca();return b>a.get("minResolution")&&b<a.get("maxResolution")}
function lh(a){a=S(a);var b=a.Ha;b.random=Math.random();a.updateParams(b)}gh.prototype.kd=function(a,b,c){0>=b.length?a.Ja(!1):(a.Ja(!0),a=S(a),c?a.updateParams({LAYERS:b,TIME:c}):a.updateParams({LAYERS:b}))};gh.prototype.updateWMSLayerState=gh.prototype.kd;w.service("ngeoLayerHelper",gh);function mh(a,b,c,d,e){fc.call(this);this.j=c;this.ia=a;this.B=null;b.has("gmfTreeUrl")&&(this.B=b.get("gmfTreeUrl"));this.f="0";b.has("cacheVersion")&&(this.f=b.get("cacheVersion"));this.i=null;b.has("ngeoLocation")&&(this.i=b.get("ngeoLocation"));this.v=d;this.u=e;this.c=c.defer();this.b=this.c.promise;this.o=!1;this.g=null}A(mh,fc);mh.$inject=["$http","$injector","$q","ngeoLayerHelper","gettextCatalog"];
function nh(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],f=0,g=e.children.length;f<g;f++){var h=e.children[f],k=[];oh(h,k);for(var m=0,n=k.length;m<n;m++)if(k[m].name==b)return h}return null}function ph(a,b){return Kc(a,function(a){return a.name===b})}function qh(a){var b=a.mixed;return void 0!==a.children&&b?rh:void 0===a.children||b?"WMTS"===a.type?sh:th:uh}function oh(a,b){var c=a.children;if(void 0!==c)for(a=0;a<c.length;a++)oh(c[a],b);else b.push(a)}u("gmf.Themes.getFlatNodes",oh);
function vh(a,b){function c(a,b){a=b.children.map(function(a){return a}).reverse().map(d.bind(null,a));return f.all(a).then(function(a){var c;a&&(a=a.filter(function(a){return a}),c=new xc(a));a=g.me(c);e(b,a);return a})}function d(a,c){for(var d in c.dimensions)void 0!==b[d]&&(c.dimensions[d]=b[d]);if("WMTS"===c.type)return g.Ff(c.url,c.name,c.dimensions).then(e.bind(null,c)).then(null,function(a){console.error("unable to get capabilities",a.config.url);return f.resolve(void 0)});if("WMS"===c.type)return a=
a[c.ogcServer],e(c,g.ne(a.url,c.layers,a.type,void 0,c.dimensions))}function e(a,b){b.set("label",a.name);b.set("metadata",a.metadata);b.set("dimensions",a.dimensions);a=wh(a);b.set("querySourceIds",a);b.set("editableIds",[]);return b}if(a.g)return a.g;var f=a.j,g=a.v,h=function(a){var b=a.background_layers.map(function(b){var e=b.type;if("WMTS"===e||"WMS"===e)return d(a.ogcServers,b);if(b.children)return c(a.ogcServers,b)},this);return f.all(b)}.bind(a);a.g=a.b.then(h).then(function(a){var b=[];
b.push(new Gf({label:this.u.getString("blank"),metadata:{thumbnail:""}}));a.forEach(function(a){a&&b.push(a)});return b}.bind(a));return a.g}mh.prototype.ni=function(a){return this.b.then(function(b){return ph(b.themes,a)})};mh.prototype.getThemeObject=mh.prototype.ni;mh.prototype.Ob=function(){return this.b.then(function(a){return a.themes})};mh.prototype.getThemesObject=mh.prototype.Ob;function xh(a){return a.b.then(function(a){return a.background_layers})}
function yh(a){return a.b.then(function(a){return a.ogcServers})}mh.prototype.hasEditableLayers=function(){return this.b.then(this.K.bind(this))};mh.prototype.K=function(a){return a.themes.some(function(a){return a.children.some(this.s.bind(this))}.bind(this))};mh.prototype.s=function(a){if(a.editable)return!0;var b=!1;(a=a.children)&&a.length&&(b=a.some(this.s.bind(this)));return b};
mh.prototype.Ji=function(a){this.o&&(this.c=this.j.defer(),this.b=this.c.promise,this.g=null,this.o=!1);this.ia.get(this.B,{params:void 0!==a?{role:a,cache_version:this.f}:{cache_version:this.f},cache:!1,withCredentials:!0}).then(function(a){if(0!=a.data.errors.length){var c="The themes contain some errors:\n"+a.data.errors.join("\n");console.error(c);null!==this.i&&this.i.ig("debug")&&window.alert(c)}this.c.resolve(a.data);F(this,"change");this.o=!0}.bind(this),function(a){this.c.reject(a)}.bind(this))};
mh.prototype.loadThemes=mh.prototype.Ji;z.service("gmfThemes",mh);var rh="MixedGroup",uh="NotMixedGroup",sh="WMTS",th="WMS";function zh(a,b){Pb.call(this,a);this.previous=b}A(zh,Pb);function Ah(){pc.call(this);this.c={}}A(Ah,pc);Ah.prototype.get=function(a){return r(a).toString()in this.c?a.ha().item(0):null};Ah.prototype.get=Ah.prototype.get;
Ah.prototype.set=function(a,b){var c=r(a).toString(),d=this.get(a);if(null!==d)if(null!==b)if(a=a.ha(),c=zc(a),0<c)c=a.c[0],a.c[0]=b,F(a,new Bc(Ec,c)),F(a,new Bc(Cc,b));else{for(;0>c;++c)Ac(a,c,void 0);Ac(a,0,b)}else Dc(a.ha(),0),delete this.c[c];else null!==b&&(Ac(a.ha(),0,b),this.c[c]=!0);F(this,new zh("change",d));return d};Ah.prototype.set=Ah.prototype.set;
Ah.prototype.jd=function(a,b){if(a=this.get(a)){var c=[a];a instanceof Cf&&(c=a.ha().c);c.forEach(function(a){if(a){var c=!1,f={},g;for(g in a.get("dimensions")){var h=b[g];void 0!==h&&(f[g]=h,c=!0)}c&&(a=S(a),a instanceof dh?(a.jd(f),a.refresh()):a instanceof yg&&(a.updateParams(f),a.refresh()))}})}};Ah.prototype.updateDimensions=Ah.prototype.jd;w.service("ngeoBackgroundLayerMgr",Ah);z.value("gmfBackgroundlayerselectorTemplateUrl",function(a,b){a=b.gmfBackgroundlayerselectorTemplateurl;return void 0!==a?a:"gmf/backgroundlayerselector.html"});function Bh(a){return{restrict:"E",scope:{dimensions:"=gmfBackgroundlayerselectorDimensions",map:"=gmfBackgroundlayerselectorMap",select:"&?gmfBackgroundlayerselectorSelect"},bindToController:!0,controller:"GmfBackgroundlayerselectorController",controllerAs:"ctrl",templateUrl:a}}Bh.$inject=["gmfBackgroundlayerselectorTemplateUrl"];
z.directive("gmfBackgroundlayerselector",Bh);function Ch(a,b,c){this.b=c;this.listenerKeys_=[];this.listenerKeys_.push(E(c,"change",this.c,this));vh(c,this.dimensions).then(function(a){this.bgLayers=a}.bind(this));this.xf=b;this.listenerKeys_.push(E(this.xf,"change",function(){this.bgLayer=this.xf.get(this.map)},this));a.$on("$destroy",this.g.bind(this))}u("gmf.BackgroundlayerselectorController",Ch);Ch.$inject=["$scope","ngeoBackgroundLayerMgr","gmfThemes"];
z.controller("GmfBackgroundlayerselectorController",Ch);Ch.prototype.c=function(){vh(this.b,this.dimensions).then(function(a){this.bgLayers=a}.bind(this))};Ch.prototype.up=function(a,b){this.bgLayer=a;this.xf.set(this.map,a);!b&&this.select&&this.select()};Ch.prototype.setLayer=Ch.prototype.up;Ch.prototype.g=function(){this.listenerKeys_.forEach(B);this.listenerKeys_.length=0};function Dh(){return!0}function Eh(){return!1};function Fh(){uc.call(this);this.B=Tc();this.u=-1;this.i={};this.s=this.o=0}A(Fh,uc);Fh.prototype.V=function(a){return this.yc(a[0],a[1])};Fh.prototype.yc=Eh;Fh.prototype.I=function(a){this.u!=this.g&&(this.B=this.le(this.B),this.u=this.g);var b=this.B;a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b;return a};Fh.prototype.transform=function(a,b){this.od(ff(a,b));return this};function Gh(){this.Ua=null}function Hh(a,b,c){var d;c&&(d={yb:c.yb?c.yb:a.Ue(b),Lb:c.Lb});return Ih(a,d)}function Ih(a,b){var c;b&&(c={Lb:b.Lb,yb:b.yb?b.yb:a.Ua,Jg:b.Jg},b.decimals&&(c.decimals=b.decimals));return c}
function Jh(a,b,c){var d=c?Te(c.Lb):null,e=c?Te(c.yb):null,f;d&&e&&!ef(d,e)?a instanceof Fh?f=(b?a.clone():a).transform(b?d:e,b?e:d):f=jf(b?a.slice():a,b?d:e,b?e:d):f=a;if(b&&c&&c.decimals){var g=Math.pow(10,c.decimals);a=function(a){for(var b=0,c=a.length;b<c;++b)a[b]=Math.round(a[b]*g)/g;return a};Array.isArray(f)?a(f):f.od(a)}return f};var Kh=/^#(?:[0-9a-f]{3}){1,2}$/i,Lh=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,Mh=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i,Nh=/^([a-z]*)$/i;function Oh(a){return Array.isArray(a)?a:Ph(a)}function Qh(a){if("string"!==typeof a){var b=a[0];b!=(b|0)&&(b=b+.5|0);var c=a[1];c!=(c|0)&&(c=c+.5|0);var d=a[2];d!=(d|0)&&(d=d+.5|0);a="rgba("+b+","+c+","+d+","+(void 0===a[3]?1:a[3])+")"}return a}
var Ph=function(){var a={},b=0;return function(c){var d;if(a.hasOwnProperty(c))d=a[c];else{if(1024<=b){d=0;for(var e in a)0===(d++&3)&&(delete a[e],--b)}d=c;var f,g;Nh.exec(d)&&(e=document.createElement("div"),e.style.color=d,document.body.appendChild(e),d=window.getComputedStyle(e).color,document.body.removeChild(e));Kh.exec(d)?(f=d.length-1,Rc(3==f||6==f,54),g=3==f?1:2,f=parseInt(d.substr(1+0*g,g),16),e=parseInt(d.substr(1+1*g,g),16),d=parseInt(d.substr(1+2*g,g),16),1==g&&(f=(f<<4)+f,e=(e<<4)+e,
d=(d<<4)+d),f=[f,e,d,1]):(g=Mh.exec(d))?(f=Number(g[1]),e=Number(g[2]),d=Number(g[3]),g=Number(g[4]),f=Rh([f,e,d,g])):(g=Lh.exec(d))?(f=Number(g[1]),e=Number(g[2]),d=Number(g[3]),f=Rh([f,e,d,1])):Rc(!1,14);d=f;a[c]=d;++b}return d}}();function Rh(a){var b=[];b[0]=ze(a[0]+.5|0,0,255);b[1]=ze(a[1]+.5|0,0,255);b[2]=ze(a[2]+.5|0,0,255);b[3]=ze(a[3],0,1);return b};function Sh(a){return"string"===typeof a||a instanceof CanvasPattern||a instanceof CanvasGradient?a:Qh(a)};var Th="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",Vh=-1!==Th.indexOf("firefox"),Wh=-1!==Th.indexOf("safari")&&-1===Th.indexOf("chrom"),Xh=-1!==Th.indexOf("macintosh"),Yh=Ub.devicePixelRatio||1,Zh=!1,$h=function(){if(!("HTMLCanvasElement"in Ub))return!1;try{var a=cg();return a?(a.setLineDash&&(Zh=!0),!0):!1}catch(b){return!1}}(),ai="geolocation"in Ub.navigator,bi="ontouchstart"in Ub,ci="PointerEvent"in Ub,di=!!Ub.navigator.msPointerEnabled;var ei=[0,0,0,1],fi=[],gi=[0,0,0,1];function hi(a,b,c,d){0!==b&&(a.translate(c,d),a.rotate(b),a.translate(-c,-d))};function ii(a){this.O=a.opacity;this.D=a.gc;this.B=a.rotation;this.H=a.scale;this.J=a.Xb}ii.prototype.$a=function(){return this.H};ii.prototype.Od=function(a){this.B=a};ii.prototype.Ng=function(a){this.H=a};function ji(a){a=a||{};this.s=this.o=this.j=null;this.f=void 0!==a.fill?a.fill:null;this.g=void 0!==a.stroke?a.stroke:null;this.i=a.radius;this.K=[0,0];this.v=this.T=this.u=null;var b=a.Vk,c,d=null,e,f=0;this.g&&(e=Qh(this.g.qa()),f=this.g.b,void 0===f&&(f=1),d=this.g.g,Zh||(d=null));var g=2*(this.i+f)+1;e={strokeStyle:e,strokeWidth:f,size:g,W:d};if(void 0===b)b=cg(g,g),this.o=b.canvas,c=g=this.o.width,this.fj(e,b,0,0),this.f?this.s=this.o:(b=cg(e.size,e.size),this.s=b.canvas,this.ej(e,b,0,0));else{g=
Math.round(g);(d=!this.f)&&(c=this.ej.bind(this,e));var f=this.g?ki(this.g):"-",h=this.f?li(this.f):"-";this.j&&f==this.j[1]&&h==this.j[2]&&this.i==this.j[3]||(this.j=["c"+f+h+(void 0!==this.i?this.i.toString():"-"),f,h,this.i]);b=b.add(this.j[0],g,g,this.fj.bind(this,e),c);this.o=b.image;this.K=[b.offsetX,b.offsetY];c=b.image.width;this.s=d?b.b:this.o}this.u=[g/2,g/2];this.T=[g,g];this.v=[c,c];ii.call(this,{opacity:1,gc:!1,rotation:0,scale:1,Xb:void 0!==a.Xb?a.Xb:!0})}A(ji,ii);l=ji.prototype;
l.wd=function(){return this.u};l.Ea=function(){return this.f};l.sg=function(){return this.s};l.Ne=function(){return this.o};l.Jd=function(){return 2};l.re=function(){return this.v};l.Ab=function(){return this.K};l.ka=function(){return this.T};l.Fa=function(){return this.g};l.mg=Rb;l.load=Rb;l.Wg=Rb;
l.fj=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();b.arc(a.size/2,a.size/2,this.i,0,2*Math.PI,!0);this.f&&(b.fillStyle=Sh(this.f.qa()),b.fill());this.g&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.strokeWidth,a.W&&b.setLineDash(a.W),b.stroke());b.closePath()};
l.ej=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();b.arc(a.size/2,a.size/2,this.i,0,2*Math.PI,!0);b.fillStyle=Qh(ei);b.fill();this.g&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.strokeWidth,a.W&&b.setLineDash(a.W),b.stroke());b.closePath()};function mi(a){a=a||{};this.b=void 0!==a.color?a.color:null;this.g=void 0}mi.prototype.qa=function(){return this.b};mi.prototype.Nd=function(a){this.b=a;this.g=void 0};function li(a){void 0===a.g&&(a.g=a.b instanceof CanvasPattern||a.b instanceof CanvasGradient?Sb(a.b).toString():"f"+(a.b?Qh(a.b):"-"));return a.g};function ni(){this.g=-1};function oi(){this.g=64;this.b=Array(4);this.i=Array(this.g);this.b[0]=1732584193;this.b[1]=4023233417;this.b[2]=2562383102;this.b[3]=271733878;this.f=this.c=0}sa(oi,ni);
function pi(a,b,c){c||(c=0);var d=Array(16);if(ga(b))for(var e=0;16>e;++e)d[e]=b.charCodeAt(c++)|b.charCodeAt(c++)<<8|b.charCodeAt(c++)<<16|b.charCodeAt(c++)<<24;else for(e=0;16>e;++e)d[e]=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;b=a.b[0];c=a.b[1];var e=a.b[2],f=a.b[3],g;g=b+(f^c&(e^f))+d[0]+3614090360&4294967295;b=c+(g<<7&4294967295|g>>>25);g=f+(e^b&(c^e))+d[1]+3905402710&4294967295;f=b+(g<<12&4294967295|g>>>20);g=e+(c^f&(b^c))+d[2]+606105819&4294967295;e=f+(g<<17&4294967295|g>>>15);g=c+(b^e&(f^b))+
d[3]+3250441966&4294967295;c=e+(g<<22&4294967295|g>>>10);g=b+(f^c&(e^f))+d[4]+4118548399&4294967295;b=c+(g<<7&4294967295|g>>>25);g=f+(e^b&(c^e))+d[5]+1200080426&4294967295;f=b+(g<<12&4294967295|g>>>20);g=e+(c^f&(b^c))+d[6]+2821735955&4294967295;e=f+(g<<17&4294967295|g>>>15);g=c+(b^e&(f^b))+d[7]+4249261313&4294967295;c=e+(g<<22&4294967295|g>>>10);g=b+(f^c&(e^f))+d[8]+1770035416&4294967295;b=c+(g<<7&4294967295|g>>>25);g=f+(e^b&(c^e))+d[9]+2336552879&4294967295;f=b+(g<<12&4294967295|g>>>20);g=e+(c^f&
(b^c))+d[10]+4294925233&4294967295;e=f+(g<<17&4294967295|g>>>15);g=c+(b^e&(f^b))+d[11]+2304563134&4294967295;c=e+(g<<22&4294967295|g>>>10);g=b+(f^c&(e^f))+d[12]+1804603682&4294967295;b=c+(g<<7&4294967295|g>>>25);g=f+(e^b&(c^e))+d[13]+4254626195&4294967295;f=b+(g<<12&4294967295|g>>>20);g=e+(c^f&(b^c))+d[14]+2792965006&4294967295;e=f+(g<<17&4294967295|g>>>15);g=c+(b^e&(f^b))+d[15]+1236535329&4294967295;c=e+(g<<22&4294967295|g>>>10);g=b+(e^f&(c^e))+d[1]+4129170786&4294967295;b=c+(g<<5&4294967295|g>>>
27);g=f+(c^e&(b^c))+d[6]+3225465664&4294967295;f=b+(g<<9&4294967295|g>>>23);g=e+(b^c&(f^b))+d[11]+643717713&4294967295;e=f+(g<<14&4294967295|g>>>18);g=c+(f^b&(e^f))+d[0]+3921069994&4294967295;c=e+(g<<20&4294967295|g>>>12);g=b+(e^f&(c^e))+d[5]+3593408605&4294967295;b=c+(g<<5&4294967295|g>>>27);g=f+(c^e&(b^c))+d[10]+38016083&4294967295;f=b+(g<<9&4294967295|g>>>23);g=e+(b^c&(f^b))+d[15]+3634488961&4294967295;e=f+(g<<14&4294967295|g>>>18);g=c+(f^b&(e^f))+d[4]+3889429448&4294967295;c=e+(g<<20&4294967295|
g>>>12);g=b+(e^f&(c^e))+d[9]+568446438&4294967295;b=c+(g<<5&4294967295|g>>>27);g=f+(c^e&(b^c))+d[14]+3275163606&4294967295;f=b+(g<<9&4294967295|g>>>23);g=e+(b^c&(f^b))+d[3]+4107603335&4294967295;e=f+(g<<14&4294967295|g>>>18);g=c+(f^b&(e^f))+d[8]+1163531501&4294967295;c=e+(g<<20&4294967295|g>>>12);g=b+(e^f&(c^e))+d[13]+2850285829&4294967295;b=c+(g<<5&4294967295|g>>>27);g=f+(c^e&(b^c))+d[2]+4243563512&4294967295;f=b+(g<<9&4294967295|g>>>23);g=e+(b^c&(f^b))+d[7]+1735328473&4294967295;e=f+(g<<14&4294967295|
g>>>18);g=c+(f^b&(e^f))+d[12]+2368359562&4294967295;c=e+(g<<20&4294967295|g>>>12);g=b+(c^e^f)+d[5]+4294588738&4294967295;b=c+(g<<4&4294967295|g>>>28);g=f+(b^c^e)+d[8]+2272392833&4294967295;f=b+(g<<11&4294967295|g>>>21);g=e+(f^b^c)+d[11]+1839030562&4294967295;e=f+(g<<16&4294967295|g>>>16);g=c+(e^f^b)+d[14]+4259657740&4294967295;c=e+(g<<23&4294967295|g>>>9);g=b+(c^e^f)+d[1]+2763975236&4294967295;b=c+(g<<4&4294967295|g>>>28);g=f+(b^c^e)+d[4]+1272893353&4294967295;f=b+(g<<11&4294967295|g>>>21);g=e+(f^
b^c)+d[7]+4139469664&4294967295;e=f+(g<<16&4294967295|g>>>16);g=c+(e^f^b)+d[10]+3200236656&4294967295;c=e+(g<<23&4294967295|g>>>9);g=b+(c^e^f)+d[13]+681279174&4294967295;b=c+(g<<4&4294967295|g>>>28);g=f+(b^c^e)+d[0]+3936430074&4294967295;f=b+(g<<11&4294967295|g>>>21);g=e+(f^b^c)+d[3]+3572445317&4294967295;e=f+(g<<16&4294967295|g>>>16);g=c+(e^f^b)+d[6]+76029189&4294967295;c=e+(g<<23&4294967295|g>>>9);g=b+(c^e^f)+d[9]+3654602809&4294967295;b=c+(g<<4&4294967295|g>>>28);g=f+(b^c^e)+d[12]+3873151461&4294967295;
f=b+(g<<11&4294967295|g>>>21);g=e+(f^b^c)+d[15]+530742520&4294967295;e=f+(g<<16&4294967295|g>>>16);g=c+(e^f^b)+d[2]+3299628645&4294967295;c=e+(g<<23&4294967295|g>>>9);g=b+(e^(c|~f))+d[0]+4096336452&4294967295;b=c+(g<<6&4294967295|g>>>26);g=f+(c^(b|~e))+d[7]+1126891415&4294967295;f=b+(g<<10&4294967295|g>>>22);g=e+(b^(f|~c))+d[14]+2878612391&4294967295;e=f+(g<<15&4294967295|g>>>17);g=c+(f^(e|~b))+d[5]+4237533241&4294967295;c=e+(g<<21&4294967295|g>>>11);g=b+(e^(c|~f))+d[12]+1700485571&4294967295;b=c+
(g<<6&4294967295|g>>>26);g=f+(c^(b|~e))+d[3]+2399980690&4294967295;f=b+(g<<10&4294967295|g>>>22);g=e+(b^(f|~c))+d[10]+4293915773&4294967295;e=f+(g<<15&4294967295|g>>>17);g=c+(f^(e|~b))+d[1]+2240044497&4294967295;c=e+(g<<21&4294967295|g>>>11);g=b+(e^(c|~f))+d[8]+1873313359&4294967295;b=c+(g<<6&4294967295|g>>>26);g=f+(c^(b|~e))+d[15]+4264355552&4294967295;f=b+(g<<10&4294967295|g>>>22);g=e+(b^(f|~c))+d[6]+2734768916&4294967295;e=f+(g<<15&4294967295|g>>>17);g=c+(f^(e|~b))+d[13]+1309151649&4294967295;
c=e+(g<<21&4294967295|g>>>11);g=b+(e^(c|~f))+d[4]+4149444226&4294967295;b=c+(g<<6&4294967295|g>>>26);g=f+(c^(b|~e))+d[11]+3174756917&4294967295;f=b+(g<<10&4294967295|g>>>22);g=e+(b^(f|~c))+d[2]+718787259&4294967295;e=f+(g<<15&4294967295|g>>>17);g=c+(f^(e|~b))+d[9]+3951481745&4294967295;a.b[0]=a.b[0]+b&4294967295;a.b[1]=a.b[1]+(e+(g<<21&4294967295|g>>>11))&4294967295;a.b[2]=a.b[2]+e&4294967295;a.b[3]=a.b[3]+f&4294967295}
function qi(a,b){var c;ba(c)||(c=b.length);for(var d=c-a.g,e=a.i,f=a.c,g=0;g<c;){if(0==f)for(;g<=d;)pi(a,b,g),g+=a.g;if(ga(b))for(;g<c;){if(e[f++]=b.charCodeAt(g++),f==a.g){pi(a,e);f=0;break}}else for(;g<c;)if(e[f++]=b[g++],f==a.g){pi(a,e);f=0;break}}a.c=f;a.f+=c};function ri(a){a=a||{};this.j=void 0!==a.color?a.color:null;this.c=a.lineCap;this.g=void 0!==a.W?a.W:null;this.f=a.lineJoin;this.i=a.miterLimit;this.b=a.width;this.o=void 0}ri.prototype.qa=function(){return this.j};ri.prototype.Nd=function(a){this.j=a;this.o=void 0};ri.prototype.cf=function(a){this.b=a;this.o=void 0};
function ki(a){if(void 0===a.o){var b="s"+(a.j?Qh(a.j):"-")+","+(void 0!==a.c?a.c.toString():"-")+","+(a.g?a.g.toString():"-")+","+(void 0!==a.f?a.f:"-")+","+(void 0!==a.i?a.i.toString():"-")+","+(void 0!==a.b?a.b.toString():"-"),c=new oi;qi(c,b);b=Array((56>c.c?c.g:2*c.g)-c.c);b[0]=128;for(var d=1;d<b.length-8;++d)b[d]=0;for(var e=8*c.f,d=b.length-8;d<b.length;++d)b[d]=e&255,e/=256;qi(c,b);b=Array(16);for(d=e=0;4>d;++d)for(var f=0;32>f;f+=8)b[e++]=c.b[d]>>>f&255;if(8192>=b.length)c=String.fromCharCode.apply(null,
b);else for(c="",d=0;d<b.length;d+=8192)e=Qa(b,d,d+8192),c+=String.fromCharCode.apply(null,e);a.o=c}return a.o};function U(a){a=a||{};this.f=null;this.c=si;void 0!==a.geometry&&ti(this,a.geometry);this.i=void 0!==a.fill?a.fill:null;this.g=void 0!==a.image?a.image:null;this.o=void 0!==a.stroke?a.stroke:null;this.j=void 0!==a.text?a.text:null;this.b=a.zIndex}U.prototype.G=function(){return this.f};U.prototype.Ea=function(){return this.i};U.prototype.Fa=function(){return this.o};U.prototype.Ga=function(){return this.j};
function ti(a,b){"function"===typeof b?a.c=b:"string"===typeof b?a.c=function(a){return a.get(b)}:b?b&&(a.c=function(){return b}):a.c=si;a.f=b}function ui(a){if("function"!==typeof a){var b;Array.isArray(a)?b=a:(Rc(a instanceof U,41),b=[a]);a=function(){return b}}return a}var vi=null;function wi(){if(!vi){var a=new mi({color:"rgba(255,255,255,0.4)"}),b=new ri({color:"#3399CC",width:1.25});vi=[new U({image:new ji({fill:a,stroke:b,radius:5}),fill:a,stroke:b})]}return vi}
function xi(){var a={},b=[255,255,255,1],c=[0,153,255,1];a.Polygon=[new U({fill:new mi({color:[255,255,255,.5]})})];a.MultiPolygon=a.Polygon;a.LineString=[new U({stroke:new ri({color:b,width:5})}),new U({stroke:new ri({color:c,width:3})})];a.MultiLineString=a.LineString;a.Circle=a.Polygon.concat(a.LineString);a.Point=[new U({image:new ji({radius:6,fill:new mi({color:c}),stroke:new ri({color:b,width:1.5})}),zIndex:Infinity})];a.MultiPoint=a.Point;a.GeometryCollection=a.Polygon.concat(a.LineString,
a.Point);return a}function si(a){return a.G()};function yi(a){uc.call(this);this.i=void 0;this.mb="geometry";this.o=null;this.c=void 0;this.f=null;E(this,I(this.mb),this.xe,this);void 0!==a&&(a instanceof Fh||!a?zi(this,a):this.Ma(a))}A(yi,uc);l=yi.prototype;l.clone=function(){var a=new yi(wc(this));Ai(a,this.mb);var b=this.G();b&&zi(a,b.clone());(b=this.tc())&&a.setStyle(b);return a};l.G=function(){return this.get(this.mb)};l.Pa=function(){return this.i};l.tc=function(){return this.o};l.ao=function(){this.b()};
l.xe=function(){this.f&&(B(this.f),this.f=null);var a=this.G();a&&(this.f=E(a,"change",this.ao,this));this.b()};function zi(a,b){a.set(a.mb,b)}l.setStyle=function(a){this.c=(this.o=a)?Bi(a):void 0;this.b()};function Ci(a,b){a.i=b;a.b()}function Ai(a,b){ec(a,I(a.mb),a.xe,a);a.mb=b;E(a,I(a.mb),a.xe,a);a.xe()}function Bi(a){if("function"!==typeof a){var b;Array.isArray(a)?b=a:(Rc(a instanceof U,41),b=[a]);a=function(){return b}}return a};function Di(){this.f=new XMLSerializer;this.Ua=null}A(Di,Gh);l=Di.prototype;l.R=function(){return"xml"};l.readFeature=function(a,b){return wd(a)?Ei(this,a,b):xd(a)?this.qj(a,b):"string"===typeof a?(a=yd(a),Ei(this,a,b)):null};function Ei(a,b,c){a=Fi(a,b,c);return 0<a.length?a[0]:null}l.readFeatures=function(a,b){return wd(a)?Fi(this,a,b):xd(a)?this.zc(a,b):"string"===typeof a?(a=yd(a),Fi(this,a,b)):[]};
function Fi(a,b,c){var d=[];for(b=b.firstChild;b;b=b.nextSibling)b.nodeType==Node.ELEMENT_NODE&&Ic(d,a.zc(b,c));return d}l.readGeometry=function(a,b){return wd(a)?this.u(a,b):xd(a)?(b=this.Re(a,[Hh(this,a,b?b:{})]))?b:null:"string"===typeof a?(a=yd(a),this.u(a,b)):null};l.Ue=function(a){return wd(a)?this.Eg(a):xd(a)?this.Ve(a):"string"===typeof a?(a=yd(a),this.Eg(a)):null};l.Eg=function(){return this.Ua};l.Ve=function(){return this.Ua};l.writeFeature=function(a,b){a=this.K(a,b);return this.f.serializeToString(a)};
l.writeFeatures=function(a,b){a=this.c(a,b);return this.f.serializeToString(a)};l.writeGeometry=function(a,b){b=Ih(this,b);var c=td("http://www.opengis.net/gml","geom"),d={node:c,Ba:this.Ba,curve:this.o,df:this.B,qg:this.s,pg:this.j};b&&Wb(d,b);this.Wd(c,a,[d]);return this.f.serializeToString(c)};function Gi(a,b,c,d,e,f){for(var g=f?f:[],h=0;b<c;b+=d){var k=a[b],m=a[b+1];g[h++]=e[0]*k+e[2]*m+e[4];g[h++]=e[1]*k+e[3]*m+e[5]}f&&g.length!=h&&(g.length=h);return g};function Hi(){Fh.call(this);this.layout="XY";this.F=2;this.C=null}A(Hi,Fh);function Ii(a){var b;"XY"==a?b=2:"XYZ"==a||"XYM"==a?b=3:"XYZM"==a&&(b=4);return b}l=Hi.prototype;l.yc=Eh;l.le=function(a){var b=this.C,c=this.C.length,d=this.F;a=bd(a);return fd(a,b,0,c,d)};function Ji(a){return a.C.slice(a.C.length-a.F)}
l.ag=function(a){this.s!=this.g&&(Xb(this.i),this.o=0,this.s=this.g);if(0>a||0!==this.o&&a<=this.o)return this;var b=a.toString();if(this.i.hasOwnProperty(b))return this.i[b];var c=this.Wc(a);if(c.C.length<this.C.length)return this.i[b]=c;this.o=a;return this};l.Wc=function(){return this};function Ki(a,b,c){a.F=Ii(b);a.layout=b;a.C=c}
l.Eb=function(a,b,c){if(a)b=Ii(a);else{for(a=0;a<c;++a){if(0===b.length){this.layout="XY";this.F=2;return}b=b[0]}b=b.length;var d;2==b?d="XY":3==b?d="XYZ":4==b&&(d="XYZM");a=d}this.layout=a;this.F=b};l.od=function(a){this.C&&(a(this.C,this.C,this.F),this.b())};
l.rotate=function(a,b){var c=this.C;if(c){var d=c.length,e=this.F,f=c?c:[],g=Math.cos(a);a=Math.sin(a);var h=b[0];b=b[1];for(var k=0,m=0;m<d;m+=e){var n=c[m]-h,p=c[m+1]-b;f[k++]=h+n*g-p*a;f[k++]=b+n*a+p*g;for(n=m+2;n<m+e;++n)f[k++]=c[n]}c&&f.length!=k&&(f.length=k);this.b()}};
l.scale=function(a,b,c){var d=b;void 0===d&&(d=a);var e=c;e||(e=nd(this.I()));if(c=this.C){b=c.length;for(var f=this.F,g=c?c:[],h=e[0],e=e[1],k=0,m=0;m<b;m+=f){var n=c[m]-h,p=c[m+1]-e;g[k++]=h+a*n;g[k++]=e+d*p;for(n=m+2;n<m+f;++n)g[k++]=c[n]}c&&g.length!=k&&(g.length=k);this.b()}};l.translate=function(a,b){var c=this.C;if(c){var d=c.length,e=this.F,f=c?c:[],g=0,h,k;for(h=0;h<d;h+=e)for(f[g++]=c[h]+a,f[g++]=c[h+1]+b,k=h+2;k<h+e;++k)f[g++]=c[k];c&&f.length!=g&&(f.length=g);this.b()}};function Li(a,b,c,d,e,f,g){var h=a[b],k=a[b+1],m=a[c]-h,n=a[c+1]-k;if(0!==m||0!==n)if(f=((e-h)*m+(f-k)*n)/(m*m+n*n),1<f)b=c;else if(0<f){for(e=0;e<d;++e)h=a[b+e],g[e]=h+f*(a[c+e]-h);g.length=d;return}for(e=0;e<d;++e)g[e]=a[b+e];g.length=d}function Mi(a,b,c,d,e){var f=a[b],g=a[b+1];for(b+=d;b<c;b+=d){var h=a[b],k=a[b+1],f=Be(f,g,h,k);f>e&&(e=f);f=h;g=k}return e}function Ni(a,b,c,d,e){var f,g;f=0;for(g=c.length;f<g;++f){var h=c[f];e=Mi(a,b,h,d,e);b=h}return e}
function Oi(a,b,c,d,e,f,g,h,k,m,n){if(b==c)return m;var p;if(0===e){p=Be(g,h,a[b],a[b+1]);if(p<m){for(n=0;n<d;++n)k[n]=a[b+n];k.length=d;return p}return m}for(var q=n?n:[NaN,NaN],t=b+d;t<c;)if(Li(a,t-d,t,d,g,h,q),p=Be(g,h,q[0],q[1]),p<m){m=p;for(n=0;n<d;++n)k[n]=q[n];k.length=d;t+=d}else t+=d*Math.max((Math.sqrt(p)-Math.sqrt(m))/e|0,1);if(f&&(Li(a,c-d,b,d,g,h,q),p=Be(g,h,q[0],q[1]),p<m)){m=p;for(n=0;n<d;++n)k[n]=q[n];k.length=d}return m}
function Pi(a,b,c,d,e,f,g,h,k,m,n){n=n?n:[NaN,NaN];var p,q;p=0;for(q=c.length;p<q;++p){var t=c[p];m=Oi(a,b,t,d,e,f,g,h,k,m,n);b=t}return m};function Qi(a,b){var c=0,d,e;d=0;for(e=b.length;d<e;++d)a[c++]=b[d];return c}function Ri(a,b,c,d){var e,f;e=0;for(f=c.length;e<f;++e){var g=c[e],h;for(h=0;h<d;++h)a[b++]=g[h]}return b}function Si(a,b,c,d,e){e=e?e:[];var f=0,g,h;g=0;for(h=c.length;g<h;++g)b=Ri(a,b,c[g],d),e[f++]=b;e.length=f;return e};function Ti(a,b,c,d,e){e=void 0!==e?e:[];for(var f=0;b<c;b+=d)e[f++]=a.slice(b,b+d);e.length=f;return e}function Ui(a,b,c,d,e){e=void 0!==e?e:[];var f=0,g,h;g=0;for(h=c.length;g<h;++g){var k=c[g];e[f++]=Ti(a,b,k,d,e[f]);b=k}e.length=f;return e};function Vi(a,b,c,d,e){var f=NaN,g=NaN,h=(c-b)/d;if(0!==h)if(1==h)f=a[b],g=a[b+1];else if(2==h)f=.5*a[b]+.5*a[b+d],g=.5*a[b+1]+.5*a[b+d+1];else{var g=a[b],h=a[b+1],k=0,f=[0],m;for(m=b+d;m<c;m+=d){var n=a[m],p=a[m+1],k=k+Math.sqrt((n-g)*(n-g)+(p-h)*(p-h));f.push(k);g=n;h=p}c=.5*k;k=0;m=f.length;for(n=!1;k<m;)g=k+(m-k>>1),h=+Fc(f[g],c),0>h?k=g+1:(m=g,n=!h);g=n?k:~k;0>g?(c=(c-f[-g-2])/(f[-g-1]-f[-g-2]),b+=(-g-2)*d,f=a[b],f+=c*(a[b+d]-f),g=a[b+1],g+=c*(a[b+d+1]-g)):(f=a[b+g*d],g=a[b+g*d+1])}return e?
(e[0]=f,e[1]=g,e):[f,g]};function Wi(a,b,c,d,e){return!gd(e,function(e){return!Xi(a,b,c,d,e[0],e[1])})}function Xi(a,b,c,d,e,f){for(var g=!1,h=a[c-d],k=a[c-d+1];b<c;b+=d){var m=a[b],n=a[b+1];k>f!=n>f&&e<(m-h)*(f-k)/(n-k)+h&&(g=!g);h=m;k=n}return g}function Yi(a,b,c,d,e,f){if(0===c.length||!Xi(a,b,c[0],d,e,f))return!1;var g;b=1;for(g=c.length;b<g;++b)if(Xi(a,c[b-1],c[b],d,e,f))return!1;return!0};function Zi(a,b,c,d,e,f){for(var g=[a[b],a[b+1]],h=[],k;b+d<c;b+=d){h[0]=a[b+d];h[1]=a[b+d+1];if(k=e.call(f,g,h))return k;g[0]=h[0];g[1]=h[1]}return!1};function $i(a,b,c,d,e){var f=fd(Tc(),a,b,c,d);return qd(e,f)?Yc(e,f)||f[0]>=e[0]&&f[2]<=e[2]||f[1]>=e[1]&&f[3]<=e[3]?!0:Zi(a,b,c,d,function(a,b){var c=!1,d=$c(e,a),f=$c(e,b);if(1===d||1===f)c=!0;else{var p=e[0],q=e[1],t=e[2],x=e[3],v=b[0];b=b[1];a=(b-a[1])/(v-a[0]);f&2&&!(d&2)&&(c=v-(b-x)/a,c=c>=p&&c<=t);c||!(f&4)||d&4||(c=b-(v-t)*a,c=c>=q&&c<=x);c||!(f&8)||d&8||(c=v-(b-q)/a,c=c>=p&&c<=t);c||!(f&16)||d&16||(c=b-(v-p)*a,c=c>=q&&c<=x)}return c}):!1}
function aj(a,b,c,d,e){var f=c[0];if(!($i(a,b,f,d,e)||Xi(a,b,f,d,e[0],e[1])||Xi(a,b,f,d,e[0],e[3])||Xi(a,b,f,d,e[2],e[1])||Xi(a,b,f,d,e[2],e[3])))return!1;if(1===c.length)return!0;b=1;for(f=c.length;b<f;++b)if(Wi(a,c[b-1],c[b],d,e))return!1;return!0};function bj(a,b,c,d,e,f,g){var h=(c-b)/d;if(3>h){for(;b<c;b+=d)f[g++]=a[b],f[g++]=a[b+1];return g}var k=Array(h);k[0]=1;k[h-1]=1;c=[b,c-d];for(var m=0,n;0<c.length;){var p=c.pop(),q=c.pop(),t=0,x=a[q],v=a[q+1],C=a[p],N=a[p+1];for(n=q+d;n<p;n+=d){var J;J=a[n];var G=a[n+1],D=x,H=v,y=C-D,K=N-H;if(0!==y||0!==K){var X=((J-D)*y+(G-H)*K)/(y*y+K*K);1<X?(D=C,H=N):0<X&&(D+=y*X,H+=K*X)}J=Be(J,G,D,H);J>t&&(m=n,t=J)}t>e&&(k[(m-b)/d]=1,q+d<m&&c.push(q,m),m+d<p&&c.push(m,p))}for(n=0;n<h;++n)k[n]&&(f[g++]=a[b+n*
d],f[g++]=a[b+n*d+1]);return g}
function cj(a,b,c,d,e,f,g,h){var k,m;k=0;for(m=c.length;k<m;++k){var n=c[k];a:{var p=a,q=n,t=d,x=e,v=f;if(b!=q){var C=x*Math.round(p[b]/x),N=x*Math.round(p[b+1]/x);b+=t;v[g++]=C;v[g++]=N;var J,G;do if(J=x*Math.round(p[b]/x),G=x*Math.round(p[b+1]/x),b+=t,b==q){v[g++]=J;v[g++]=G;break a}while(J==C&&G==N);for(;b<q;){var D,H;D=x*Math.round(p[b]/x);H=x*Math.round(p[b+1]/x);b+=t;if(D!=J||H!=G){var y=J-C,K=G-N,X=D-C,Q=H-N;y*Q==K*X&&(0>y&&X<y||y==X||0<y&&X>y)&&(0>K&&Q<K||K==Q||0<K&&Q>K)||(v[g++]=J,v[g++]=
G,C=J,N=G);J=D;G=H}}v[g++]=J;v[g++]=G}}h.push(g);b=n}return g};function dj(a,b){Hi.call(this);this.f=null;this.v=this.D=this.j=-1;this.fa(a,b)}A(dj,Hi);l=dj.prototype;l.clone=function(){var a=new dj(null);a.S(this.layout,this.C.slice());return a};l.wb=function(a,b,c,d){if(d<Xc(this.I(),a,b))return d;this.v!=this.g&&(this.D=Math.sqrt(Mi(this.C,0,this.C.length,this.F,0)),this.v=this.g);return Oi(this.C,0,this.C.length,this.F,this.D,!1,a,b,c,d)};function ej(a,b){Zi(a.C,0,a.C.length,a.F,b,void 0)}l.N=function(){return Ti(this.C,0,this.C.length,this.F)};
function fj(a,b){return Vi(a.C,0,a.C.length,a.F,b)}function gj(a){var b=a.C,c=a.F,d=b[0],e=b[1],f=0,g;for(g=0+c;g<a.C.length;g+=c)var h=b[g],k=b[g+1],f=f+Math.sqrt((h-d)*(h-d)+(k-e)*(k-e)),d=h,e=k;return f}function hj(a){a.j!=a.g&&(a.f=fj(a,a.f),a.j=a.g);return a.f}l.Wc=function(a){var b=[];b.length=bj(this.C,0,this.C.length,this.F,a,b,0);a=new dj(null);a.S("XY",b);return a};l.R=function(){return"LineString"};l.Bb=function(a){return $i(this.C,0,this.C.length,this.F,a)};
l.fa=function(a,b){a?(this.Eb(b,a,1),this.C||(this.C=[]),this.C.length=Ri(this.C,0,a,this.F),this.b()):this.S("XY",null)};l.S=function(a,b){Ki(this,a,b);this.b()};function ij(a,b){Hi.call(this);this.f=this.j=-1;this.fa(a,b)}A(ij,Hi);l=ij.prototype;l.clone=function(){var a=new ij(null);jj(a,this.layout,this.C.slice());return a};l.wb=function(a,b,c,d){if(d<Xc(this.I(),a,b))return d;this.f!=this.g&&(this.j=Math.sqrt(Mi(this.C,0,this.C.length,this.F,0)),this.f=this.g);return Oi(this.C,0,this.C.length,this.F,this.j,!0,a,b,c,d)};l.N=function(){return Ti(this.C,0,this.C.length,this.F)};
l.Wc=function(a){var b=[];b.length=bj(this.C,0,this.C.length,this.F,a,b,0);a=new ij(null);jj(a,"XY",b);return a};l.R=function(){return"LinearRing"};l.fa=function(a,b){a?(this.Eb(b,a,1),this.C||(this.C=[]),this.C.length=Ri(this.C,0,a,this.F),this.b()):jj(this,"XY",null)};function jj(a,b,c){Ki(a,b,c);a.b()};function kj(a,b){Hi.call(this);this.f=[];this.j=this.v=-1;this.fa(a,b)}A(kj,Hi);l=kj.prototype;l.clone=function(){var a=new kj(null);a.S(this.layout,this.C.slice(),this.f.slice());return a};l.wb=function(a,b,c,d){if(d<Xc(this.I(),a,b))return d;this.j!=this.g&&(this.v=Math.sqrt(Ni(this.C,0,this.f,this.F,0)),this.j=this.g);return Pi(this.C,0,this.f,this.F,this.v,!1,a,b,c,d)};l.N=function(){return Ui(this.C,0,this.f,this.F)};l.Nb=function(){return this.f};
function lj(a){var b=a.C,c=a.f;a=a.layout;var d=[],e=0,f,g;f=0;for(g=c.length;f<g;++f){var h=c[f],k=new dj(null);k.S(a,b.slice(e,h));d.push(k);e=h}return d}function mj(a){var b=[],c=a.C,d=0,e=a.f;a=a.F;var f,g;f=0;for(g=e.length;f<g;++f){var h=e[f],d=Vi(c,d,h,a);Ic(b,d);d=h}return b}l.Wc=function(a){var b=[],c=[],d=this.C,e=this.f,f=this.F,g=0,h=0,k,m;k=0;for(m=e.length;k<m;++k){var n=e[k],h=bj(d,g,n,f,a,b,h);c.push(h);g=n}b.length=h;a=new kj(null);a.S("XY",b,c);return a};l.R=function(){return"MultiLineString"};
l.Bb=function(a){a:{var b=this.C,c=this.f,d=this.F,e=0,f,g;f=0;for(g=c.length;f<g;++f){if($i(b,e,c[f],d,a)){a=!0;break a}e=c[f]}a=!1}return a};l.fa=function(a,b){a?(this.Eb(b,a,2),this.C||(this.C=[]),a=Si(this.C,0,a,this.F,this.f),this.C.length=0===a.length?0:a[a.length-1],this.b()):this.S("XY",null,this.f)};l.S=function(a,b,c){Ki(this,a,b);this.f=c;this.b()};
function nj(a,b){var c=a.layout,d=[],e=[],f,g;f=0;for(g=b.length;f<g;++f){var h=b[f];0===f&&(c=h.layout);Ic(d,h.C);e.push(d.length)}a.S(c,d,e)};function oj(a,b){Hi.call(this);this.fa(a,b)}A(oj,Hi);l=oj.prototype;l.clone=function(){var a=new oj(null);a.S(this.layout,this.C.slice());return a};l.wb=function(a,b,c,d){var e=this.C;a=Be(a,b,e[0],e[1]);if(a<d){d=this.F;for(b=0;b<d;++b)c[b]=e[b];c.length=d;return a}return d};l.N=function(){return this.C?this.C.slice():[]};l.le=function(a){return cd(this.C,a)};l.R=function(){return"Point"};l.Bb=function(a){return Zc(a,this.C[0],this.C[1])};
l.fa=function(a,b){a?(this.Eb(b,a,0),this.C||(this.C=[]),this.C.length=Qi(this.C,a),this.b()):this.S("XY",null)};l.S=function(a,b){Ki(this,a,b);this.b()};function pj(a,b){Hi.call(this);this.fa(a,b)}A(pj,Hi);l=pj.prototype;l.clone=function(){var a=new pj(null);a.S(this.layout,this.C.slice());return a};l.wb=function(a,b,c,d){if(d<Xc(this.I(),a,b))return d;var e=this.C,f=this.F,g,h,k;g=0;for(h=e.length;g<h;g+=f)if(k=Be(a,b,e[g],e[g+1]),k<d){d=k;for(k=0;k<f;++k)c[k]=e[g+k];c.length=f}return d};l.N=function(){return Ti(this.C,0,this.C.length,this.F)};
function qj(a){var b=a.C,c=a.layout;a=a.F;var d=[],e,f;e=0;for(f=b.length;e<f;e+=a){var g=new oj(null);g.S(c,b.slice(e,e+a));d.push(g)}return d}l.R=function(){return"MultiPoint"};l.Bb=function(a){var b=this.C,c=this.F,d,e,f,g;d=0;for(e=b.length;d<e;d+=c)if(f=b[d],g=b[d+1],Zc(a,f,g))return!0;return!1};l.fa=function(a,b){a?(this.Eb(b,a,1),this.C||(this.C=[]),this.C.length=Ri(this.C,0,a,this.F),this.b()):this.S("XY",null)};l.S=function(a,b){Ki(this,a,b);this.b()};function rj(a,b,c,d,e,f,g){var h,k,m,n,p,q=e[f+1],t=[],x=c[0];m=a[x-d];p=a[x-d+1];for(h=b;h<x;h+=d){n=a[h];k=a[h+1];if(q<=p&&k<=q||p<=q&&q<=k)m=(q-p)/(k-p)*(n-m)+m,t.push(m);m=n;p=k}x=NaN;p=-Infinity;t.sort(Fc);m=t[0];h=1;for(k=t.length;h<k;++h){n=t[h];var v=Math.abs(n-m);v>p&&(m=(m+n)/2,Yi(a,b,c,d,m,q)&&(x=m,p=v));m=n}isNaN(x)&&(x=e[f]);return g?(g.push(x,q),g):[x,q]};function sj(a,b,c,d){for(var e=0,f=a[c-d],g=a[c-d+1];b<c;b+=d)var h=a[b],k=a[b+1],e=e+(h-f)*(k+g),f=h,g=k;return 0<e}function tj(a,b,c,d){var e=0;d=void 0!==d?d:!1;var f,g;f=0;for(g=b.length;f<g;++f){var h=b[f],e=sj(a,e,h,c);if(0===f){if(d&&e||!d&&!e)return!1}else if(d&&!e||!d&&e)return!1;e=h}return!0}
function uj(a,b,c,d,e){e=void 0!==e?e:!1;var f,g;f=0;for(g=c.length;f<g;++f){var h=c[f],k=sj(a,b,h,d);if(0===f?e&&k||!e&&!k:e&&!k||!e&&k)for(var k=a,m=h,n=d;b<m-n;){var p;for(p=0;p<n;++p){var q=k[b+p];k[b+p]=k[m-n+p];k[m-n+p]=q}b+=n;m-=n}b=h}return b}function vj(a,b,c,d){var e=0,f,g;f=0;for(g=b.length;f<g;++f)e=uj(a,e,b[f],c,d);return e};function wj(a,b){Hi.call(this);this.f=[];this.v=-1;this.D=null;this.M=this.H=this.J=-1;this.j=null;this.fa(a,b)}A(wj,Hi);l=wj.prototype;l.clone=function(){var a=new wj(null);a.S(this.layout,this.C.slice(),this.f.slice());return a};l.wb=function(a,b,c,d){if(d<Xc(this.I(),a,b))return d;this.H!=this.g&&(this.J=Math.sqrt(Ni(this.C,0,this.f,this.F,0)),this.H=this.g);return Pi(this.C,0,this.f,this.F,this.J,!0,a,b,c,d)};l.yc=function(a,b){return Yi(xj(this),0,this.f,this.F,a,b)};
l.N=function(a){var b;void 0!==a?(b=xj(this).slice(),uj(b,0,this.f,this.F,a)):b=this.C;return Ui(b,0,this.f,this.F)};l.Nb=function(){return this.f};function yj(a){if(a.v!=a.g){var b=nd(a.I());a.D=rj(xj(a),0,a.f,a.F,b,0);a.v=a.g}return a.D}function zj(a){if(0>=a.f.length)return null;var b=new ij(null);jj(b,a.layout,a.C.slice(0,a.f[0]));return b}
function Aj(a){var b=a.layout,c=a.C;a=a.f;var d=[],e=0,f,g;f=0;for(g=a.length;f<g;++f){var h=a[f],k=new ij(null);jj(k,b,c.slice(e,h));d.push(k);e=h}return d}function xj(a){if(a.M!=a.g){var b=a.C;tj(b,a.f,a.F)?a.j=b:(a.j=b.slice(),a.j.length=uj(a.j,0,a.f,a.F));a.M=a.g}return a.j}l.Wc=function(a){var b=[],c=[];b.length=cj(this.C,0,this.f,this.F,Math.sqrt(a),b,0,c);a=new wj(null);a.S("XY",b,c);return a};l.R=function(){return"Polygon"};l.Bb=function(a){return aj(xj(this),0,this.f,this.F,a)};
l.fa=function(a,b){a?(this.Eb(b,a,2),this.C||(this.C=[]),a=Si(this.C,0,a,this.F,this.f),this.C.length=0===a.length?0:a[a.length-1],this.b()):this.S("XY",null,this.f)};l.S=function(a,b,c){Ki(this,a,b);this.f=c;this.b()};
function Bj(a){for(var b=a.F,c=a.layout,d=new wj(null,c),b=65*b,e=Array(b),f=0;f<b;f++)e[f]=0;d.S(c,e,[e.length]);c=a.la();a=Math.sqrt(Cj(a));for(var b=d.C,e=d.layout,f=d.F,g=d.Nb(),h=b.length/f-1,k,m,n=0;n<=h;++n)m=n*f,k=0+2*De(n,h)*Math.PI/h,b[m]=c[0]+a*Math.cos(k),b[m+1]=c[1]+a*Math.sin(k);d.S(e,b,g);return d};function Dj(a,b){Hi.call(this);this.f=[];this.v=-1;this.D=null;this.M=this.H=this.J=-1;this.j=null;this.fa(a,b)}A(Dj,Hi);l=Dj.prototype;l.clone=function(){for(var a=new Dj(null),b=this.f.length,c=Array(b),d=0;d<b;++d)c[d]=this.f[d].slice();Ej(a,this.layout,this.C.slice(),c);return a};
l.wb=function(a,b,c,d){if(d<Xc(this.I(),a,b))return d;if(this.H!=this.g){var e=this.f,f=0,g=0,h,k;h=0;for(k=e.length;h<k;++h)var m=e[h],g=Ni(this.C,f,m,this.F,g),f=m[m.length-1];this.J=Math.sqrt(g);this.H=this.g}e=Fj(this);f=this.f;g=this.F;h=this.J;k=0;var m=[NaN,NaN],n,p;n=0;for(p=f.length;n<p;++n){var q=f[n];d=Pi(e,k,q,g,h,!0,a,b,c,d,m);k=q[q.length-1]}return d};
l.yc=function(a,b){a:{var c=Fj(this),d=this.f,e=this.F,f=0;if(0!==d.length){var g,h;g=0;for(h=d.length;g<h;++g){var k=d[g];if(Yi(c,f,k,e,a,b)){a=!0;break a}f=k[k.length-1]}}a=!1}return a};l.N=function(a){var b;void 0!==a?(b=Fj(this).slice(),vj(b,this.f,this.F,a)):b=this.C;a=b;b=this.f;var c=this.F,d=0,e=[],f=0,g,h;g=0;for(h=b.length;g<h;++g){var k=b[g];e[f++]=Ui(a,d,k,c,e[f]);d=k[k.length-1]}e.length=f;return e};
function Gj(a){if(a.v!=a.g){var b=a.C,c=a.f,d=a.F,e=0,f=[],g,h,k;g=0;for(h=c.length;g<h;++g){var m=c[g];k=b;var n=m[0],p=d,q=bd(void 0);k=fd(q,k,e,n,p);f.push((k[0]+k[2])/2,(k[1]+k[3])/2);e=m[m.length-1]}b=Fj(a);c=a.f;d=a.F;g=0;h=[];m=0;for(k=c.length;m<k;++m)e=c[m],h=rj(b,g,e,d,f,2*m,h),g=e[e.length-1];a.D=h;a.v=a.g}return a.D}
function Fj(a){if(a.M!=a.g){var b=a.C,c;a:{c=a.f;var d,e;d=0;for(e=c.length;d<e;++d)if(!tj(b,c[d],a.F,void 0)){c=!1;break a}c=!0}c?a.j=b:(a.j=b.slice(),a.j.length=vj(a.j,a.f,a.F));a.M=a.g}return a.j}l.Wc=function(a){var b=[],c=[],d=this.C,e=this.f,f=this.F;a=Math.sqrt(a);var g=0,h=0,k,m;k=0;for(m=e.length;k<m;++k){var n=e[k],p=[],h=cj(d,g,n,f,a,b,h,p);c.push(p);g=n[n.length-1]}b.length=h;d=new Dj(null);Ej(d,"XY",b,c);return d};
function Hj(a){var b=a.layout,c=a.C;a=a.f;var d=[],e=0,f,g,h,k;f=0;for(g=a.length;f<g;++f){var m=a[f].slice(),n=m[m.length-1];if(0!==e)for(h=0,k=m.length;h<k;++h)m[h]-=e;h=new wj(null);h.S(b,c.slice(e,n),m);d.push(h);e=n}return d}l.R=function(){return"MultiPolygon"};l.Bb=function(a){a:{var b=Fj(this),c=this.f,d=this.F,e=0,f,g;f=0;for(g=c.length;f<g;++f){var h=c[f];if(aj(b,e,h,d,a)){a=!0;break a}e=h[h.length-1]}a=!1}return a};
l.fa=function(a,b){if(a){this.Eb(b,a,3);this.C||(this.C=[]);b=this.C;var c=this.F,d=this.f,e=0,d=d?d:[],f=0,g,h;g=0;for(h=a.length;g<h;++g)e=Si(b,e,a[g],c,d[f]),d[f++]=e,e=e[e.length-1];d.length=f;0===d.length?this.C.length=0:(a=d[d.length-1],this.C.length=0===a.length?0:a[a.length-1]);this.b()}else Ej(this,"XY",null,this.f)};function Ej(a,b,c,d){Ki(a,b,c);a.f=d;a.b()}
function Ij(a,b){var c=a.layout,d=[],e=[],f,g,h;f=0;for(g=b.length;f<g;++f){var k=b[f];0===f&&(c=k.layout);var m=d.length;h=k.Nb();var n,p;n=0;for(p=h.length;n<p;++n)h[n]+=m;Ic(d,k.C);e.push(h)}Ej(a,c,d,e)};function Jj(a){a=a?a:{};this.featureType=a.featureType;this.featureNS=a.featureNS;this.Ba=a.Ba;this.Vb="";this.b={};this.b["http://www.opengis.net/gml"]={featureMember:Bd(Jj.prototype.Ld),featureMembers:Bd(Jj.prototype.Ld)};Di.call(this)}A(Jj,Di);var Kj=/^[\s\xa0]*$/;l=Jj.prototype;
l.Ld=function(a,b){var c=a.localName,d=null;if("FeatureCollection"==c)"http://www.opengis.net/wfs"===a.namespaceURI?d=P([],this.b,a,b,this):d=P(null,this.b,a,b,this);else if("featureMembers"==c||"featureMember"==c){var e=b[0],f=e.featureType,g=e.featureNS,h,k;if(!f&&a.childNodes){f=[];g={};h=0;for(k=a.childNodes.length;h<k;++h){var m=a.childNodes[h];if(1===m.nodeType){var n=m.nodeName.split(":").pop();if(-1===f.indexOf(n)){var p="",q=0,m=m.namespaceURI,t;for(t in g){if(g[t]===m){p=t;break}++q}p||
(p="p"+q,g[p]=m);f.push(p+":"+n)}}}"featureMember"!=c&&(e.featureType=f,e.featureNS=g)}"string"===typeof g&&(h=g,g={},g.p0=h);var e={},f=Array.isArray(f)?f:[f],x;for(x in g){n={};h=0;for(k=f.length;h<k;++h)(-1===f[h].indexOf(":")?"p0":f[h].split(":")[0])===x&&(n[f[h].split(":").pop()]="featureMembers"==c?Ad(this.zg,this):Bd(this.zg,this));e[g[x]]=n}"featureMember"==c?d=P(void 0,e,a,b):d=P([],e,a,b)}null===d&&(d=[]);return d};
l.Re=function(a,b){var c=b[0];c.srsName=a.firstElementChild.getAttribute("srsName");if(a=P(null,this.bh,a,b,this))return Jh(a,!1,c)};
l.zg=function(a,b){var c;(c=a.getAttribute("fid"))||(c=a.getAttributeNS("http://www.opengis.net/gml","id")||"");var d={},e;for(a=a.firstElementChild;a;a=a.nextElementSibling){var f=a.localName;if(0===a.childNodes.length||1===a.childNodes.length&&(3===a.firstChild.nodeType||4===a.firstChild.nodeType)){var g=ud(a);Kj.test(g)&&(g=void 0);d[f]=g}else"boundedBy"!==f&&(e=f),d[f]=this.Re(a,b)}b=new yi(d);e&&Ai(b,e);c&&Ci(b,c);return b};
l.xj=function(a,b){if(a=this.Qe(a,b))return b=new oj(null),b.S("XYZ",a),b};l.vj=function(a,b){if(a=P([],this.tk,a,b,this))return new pj(a)};l.uj=function(a,b){if(a=P([],this.sk,a,b,this))return b=new kj(null),nj(b,a),b};l.wj=function(a,b){if(a=P([],this.uk,a,b,this))return b=new Dj(null),Ij(b,a),b};l.mj=function(a,b){Id(this.xk,a,b,this)};l.Ii=function(a,b){Id(this.qk,a,b,this)};l.nj=function(a,b){Id(this.yk,a,b,this)};l.Se=function(a,b){if(a=this.Qe(a,b))return b=new dj(null),b.S("XYZ",a),b};
l.Yo=function(a,b){if(a=P(null,this.Xd,a,b,this))return a};l.tj=function(a,b){if(a=this.Qe(a,b))return b=new ij(null),jj(b,"XYZ",a),b};l.Te=function(a,b){if((a=P([null],this.mf,a,b,this))&&a[0]){b=new wj(null);var c=a[0],d=[c.length],e,f;e=1;for(f=a.length;e<f;++e)Ic(c,a[e]),d.push(c.length);b.S("XYZ",c,d);return b}};l.Qe=function(a,b){return P(null,this.Xd,a,b,this)};l.tk={"http://www.opengis.net/gml":{pointMember:Ad(Jj.prototype.mj),pointMembers:Ad(Jj.prototype.mj)}};
l.sk={"http://www.opengis.net/gml":{lineStringMember:Ad(Jj.prototype.Ii),lineStringMembers:Ad(Jj.prototype.Ii)}};l.uk={"http://www.opengis.net/gml":{polygonMember:Ad(Jj.prototype.nj),polygonMembers:Ad(Jj.prototype.nj)}};l.xk={"http://www.opengis.net/gml":{Point:Ad(Jj.prototype.Qe)}};l.qk={"http://www.opengis.net/gml":{LineString:Ad(Jj.prototype.Se)}};l.yk={"http://www.opengis.net/gml":{Polygon:Ad(Jj.prototype.Te)}};l.Yd={"http://www.opengis.net/gml":{LinearRing:Bd(Jj.prototype.Yo)}};
l.zc=function(a,b){var c={featureType:this.featureType,featureNS:this.featureNS};b&&Wb(c,Hh(this,a,b));return this.Ld(a,[c])||[]};l.Ve=function(a){return Te(this.Ba?this.Ba:a.firstElementChild.getAttribute("srsName"))};function V(a){a=a?a:{};Jj.call(this,a);this.B=void 0!==a.df?a.df:!1;this.o=void 0!==a.curve?a.curve:!1;this.j=void 0!==a.pg?a.pg:!0;this.s=void 0!==a.qg?a.qg:!0;this.Vb=a.Vb?a.Vb:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd"}A(V,Jj);l=V.prototype;l.bp=function(a,b){if(a=P([],this.rk,a,b,this))return b=new kj(null),nj(b,a),b};l.cp=function(a,b){if(a=P([],this.vk,a,b,this))return b=new Dj(null),Ij(b,a),b};l.Jh=function(a,b){Id(this.jk,a,b,this)};
l.Pj=function(a,b){Id(this.Dk,a,b,this)};l.ep=function(a,b){return P([null],this.wk,a,b,this)};l.gp=function(a,b){return P([null],this.Ak,a,b,this)};l.fp=function(a,b){return P([null],this.mf,a,b,this)};l.ap=function(a,b){return P([null],this.Xd,a,b,this)};l.gn=function(a,b){(a=P(void 0,this.Yd,a,b,this))&&b[b.length-1].push(a)};l.rl=function(a,b){(a=P(void 0,this.Yd,a,b,this))&&(b[b.length-1][0]=a)};
l.yj=function(a,b){if((a=P([null],this.Ek,a,b,this))&&a[0]){b=new wj(null);var c=a[0],d=[c.length],e,f;e=1;for(f=a.length;e<f;++e)Ic(c,a[e]),d.push(c.length);b.S("XYZ",c,d);return b}};l.pj=function(a,b){if(a=P([null],this.kk,a,b,this))return b=new dj(null),b.S("XYZ",a),b};l.Xo=function(a,b){a=P([null],this.nk,a,b,this);return ad(a[1][0],a[1][1],a[2][0],a[2][1])};
l.Zo=function(a,b){var c=ud(a),d=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;a=[];for(var e;e=d.exec(c);)a.push(parseFloat(e[1])),c=c.substr(e[0].length);if(""===c){b=b[0].srsName;c="enu";b&&(c=Te(b).g);if("neu"===c)for(b=0,c=a.length;b<c;b+=3)d=a[b],a[b]=a[b+1],a[b+1]=d;b=a.length;2==b&&a.push(0);return 0===b?void 0:a}};
l.Bg=function(a,b){var c=ud(a).replace(/^\s*|\s*$/g,""),d=b[0].srsName,e=a.parentNode.getAttribute("srsDimension");b="enu";d&&(b=Te(d).g);c=c.split(/\s+/);d=2;a.getAttribute("srsDimension")?d=Sd(a.getAttribute("srsDimension")):a.getAttribute("dimension")?d=Sd(a.getAttribute("dimension")):e&&(d=Sd(e));for(var f,g=[],h=0,k=c.length;h<k;h+=d)a=parseFloat(c[h]),e=parseFloat(c[h+1]),f=3===d?parseFloat(c[h+2]):0,"en"===b.substr(0,2)?g.push(a,e,f):g.push(e,a,f);return g};
l.Xd={"http://www.opengis.net/gml":{pos:Bd(V.prototype.Zo),posList:Bd(V.prototype.Bg)}};l.mf={"http://www.opengis.net/gml":{interior:V.prototype.gn,exterior:V.prototype.rl}};
l.bh={"http://www.opengis.net/gml":{Point:Bd(Jj.prototype.xj),MultiPoint:Bd(Jj.prototype.vj),LineString:Bd(Jj.prototype.Se),MultiLineString:Bd(Jj.prototype.uj),LinearRing:Bd(Jj.prototype.tj),Polygon:Bd(Jj.prototype.Te),MultiPolygon:Bd(Jj.prototype.wj),Surface:Bd(V.prototype.yj),MultiSurface:Bd(V.prototype.cp),Curve:Bd(V.prototype.pj),MultiCurve:Bd(V.prototype.bp),Envelope:Bd(V.prototype.Xo)}};l.rk={"http://www.opengis.net/gml":{curveMember:Ad(V.prototype.Jh),curveMembers:Ad(V.prototype.Jh)}};
l.vk={"http://www.opengis.net/gml":{surfaceMember:Ad(V.prototype.Pj),surfaceMembers:Ad(V.prototype.Pj)}};l.jk={"http://www.opengis.net/gml":{LineString:Ad(Jj.prototype.Se),Curve:Ad(V.prototype.pj)}};l.Dk={"http://www.opengis.net/gml":{Polygon:Ad(Jj.prototype.Te),Surface:Ad(V.prototype.yj)}};l.Ek={"http://www.opengis.net/gml":{patches:Bd(V.prototype.ep)}};l.kk={"http://www.opengis.net/gml":{segments:Bd(V.prototype.gp)}};l.nk={"http://www.opengis.net/gml":{lowerCorner:Ad(V.prototype.Bg),upperCorner:Ad(V.prototype.Bg)}};
l.wk={"http://www.opengis.net/gml":{PolygonPatch:Bd(V.prototype.fp)}};l.Ak={"http://www.opengis.net/gml":{LineStringSegment:Bd(V.prototype.ap)}};function Lj(a,b,c){c=c[c.length-1].srsName;b=b.N();for(var d=b.length,e=Array(d),f,g=0;g<d;++g){f=b[g];var h=g,k="enu";c&&(k=Te(c).g);e[h]="en"===k.substr(0,2)?f[0]+" "+f[1]:f[1]+" "+f[0]}Ud(a,e.join(" "))}
l.fk=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=td(a.namespaceURI,"pos");a.appendChild(d);c=c[c.length-1].srsName;a="enu";c&&(a=Te(c).g);b=b.N();Ud(d,"en"===a.substr(0,2)?b[0]+" "+b[1]:b[1]+" "+b[0])};var Mj={"http://www.opengis.net/gml":{lowerCorner:M(Ud),upperCorner:M(Ud)}};l=V.prototype;l.bq=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);Jd({node:a},Mj,Gd,[b[0]+" "+b[1],b[2]+" "+b[3]],c,["lowerCorner","upperCorner"],this)};
l.ck=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=td(a.namespaceURI,"posList");a.appendChild(d);Lj(d,b,c)};l.zk=function(a,b){a=b[b.length-1];b=a.node;var c=a.exteriorWritten;void 0===c&&(a.exteriorWritten=!0);return td(b.namespaceURI,void 0!==c?"interior":"exterior")};
l.kf=function(a,b,c){var d=c[c.length-1].srsName;"PolygonPatch"!==a.nodeName&&d&&a.setAttribute("srsName",d);"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName?(b=Aj(b),Jd({node:a,Ba:d},Nj,this.zk,b,c,void 0,this)):"Surface"===a.nodeName&&(d=td(a.namespaceURI,"patches"),a.appendChild(d),a=td(d.namespaceURI,"PolygonPatch"),d.appendChild(a),this.kf(a,b,c))};
l.jf=function(a,b,c){var d=c[c.length-1].srsName;"LineStringSegment"!==a.nodeName&&d&&a.setAttribute("srsName",d);"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?(d=td(a.namespaceURI,"posList"),a.appendChild(d),Lj(d,b,c)):"Curve"===a.nodeName&&(d=td(a.namespaceURI,"segments"),a.appendChild(d),a=td(d.namespaceURI,"LineStringSegment"),d.appendChild(a),this.jf(a,b,c))};
l.ek=function(a,b,c){var d=c[c.length-1],e=d.srsName,d=d.surface;e&&a.setAttribute("srsName",e);b=Hj(b);Jd({node:a,Ba:e,df:d},Oj,this.i,b,c,void 0,this)};l.fq=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);b=qj(b);Jd({node:a,Ba:d},Pj,Ed("pointMember"),b,c,void 0,this)};l.dk=function(a,b,c){var d=c[c.length-1],e=d.srsName,d=d.curve;e&&a.setAttribute("srsName",e);b=lj(b);Jd({node:a,Ba:e,curve:d},Qj,this.i,b,c,void 0,this)};
l.gk=function(a,b,c){var d=td(a.namespaceURI,"LinearRing");a.appendChild(d);this.ck(d,b,c)};l.hk=function(a,b,c){var d=this.g(b,c);d&&(a.appendChild(d),this.kf(d,b,c))};l.gq=function(a,b,c){var d=td(a.namespaceURI,"Point");a.appendChild(d);this.fk(d,b,c)};l.bk=function(a,b,c){var d=this.g(b,c);d&&(a.appendChild(d),this.jf(d,b,c))};l.Wd=function(a,b,c){var d=c[c.length-1],e=Wb({},d);e.node=a;var f;Array.isArray(b)?d.yb?f=jf(b,d.Lb,d.yb):f=b:f=Jh(b,!0,d);Jd(e,Rj,this.g,[f],c,void 0,this)};
l.cq=function(a,b,c){var d=b.Pa();d&&a.setAttribute("fid",d);var d=c[c.length-1],e=d.featureNS,f=b.mb;d.Bc||(d.Bc={},d.Bc[e]={});var g=wc(b);b=[];var h=[],k;for(k in g){var m=g[k];null!==m&&(b.push(k),h.push(m),k==f||m instanceof Fh?k in d.Bc[e]||(d.Bc[e][k]=M(this.Wd,this)):k in d.Bc[e]||(d.Bc[e][k]=M(Ud)))}k=Wb({},d);k.node=a;Jd(k,d.Bc,Ed(void 0,e),h,c,b)};
var Oj={"http://www.opengis.net/gml":{surfaceMember:M(V.prototype.hk),polygonMember:M(V.prototype.hk)}},Pj={"http://www.opengis.net/gml":{pointMember:M(V.prototype.gq)}},Qj={"http://www.opengis.net/gml":{lineStringMember:M(V.prototype.bk),curveMember:M(V.prototype.bk)}},Nj={"http://www.opengis.net/gml":{exterior:M(V.prototype.gk),interior:M(V.prototype.gk)}},Rj={"http://www.opengis.net/gml":{Curve:M(V.prototype.jf),MultiCurve:M(V.prototype.dk),Point:M(V.prototype.fk),MultiPoint:M(V.prototype.fq),
LineString:M(V.prototype.jf),MultiLineString:M(V.prototype.dk),LinearRing:M(V.prototype.ck),Polygon:M(V.prototype.kf),MultiPolygon:M(V.prototype.ek),Surface:M(V.prototype.kf),MultiSurface:M(V.prototype.ek),Envelope:M(V.prototype.bq)}},Sj={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};V.prototype.i=function(a,b){return td("http://www.opengis.net/gml",Sj[b[b.length-1].node.nodeName])};
V.prototype.g=function(a,b){var c=b[b.length-1];b=c.multiSurface;var d=c.surface,e=c.curve,c=c.multiCurve;Array.isArray(a)?a="Envelope":(a=a.R(),"MultiPolygon"===a&&!0===b?a="MultiSurface":"Polygon"===a&&!0===d?a="Surface":"LineString"===a&&!0===e?a="Curve":"MultiLineString"===a&&!0===c&&(a="MultiCurve"));return td("http://www.opengis.net/gml",a)};
V.prototype.c=function(a,b){b=Ih(this,b);var c=td("http://www.opengis.net/gml","featureMembers");c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.Vb);var d={Ba:this.Ba,curve:this.o,df:this.B,qg:this.s,pg:this.j,featureNS:this.featureNS,featureType:this.featureType};b&&Wb(d,b);b=[d];var e=b[b.length-1],d=e.featureType,f=e.featureNS,g={};g[f]={};g[f][d]=M(this.cq,this);e=Wb({},e);e.node=c;Jd(e,g,Ed(d,f),a,b);return c};function Tj(a){this.ic=a};function Uj(a){this.ic=a}A(Uj,Tj);function Vj(a,b,c){this.ic=a;this.b=b;this.g=c}A(Vj,Uj);function Wj(a,b){Vj.call(this,"And",a,b)}A(Wj,Vj);function Xj(a,b,c){this.ic="BBOX";this.geometryName=a;this.extent=b;this.Ba=c}A(Xj,Tj);function Yj(a,b){this.ic=a;this.b=b}A(Yj,Tj);function Zj(a,b,c,d){Yj.call(this,a,b);this.c=c;this.g=d}A(Zj,Yj);function ak(a,b,c){Zj.call(this,"PropertyIsEqualTo",a,b,c)}A(ak,Zj);function bk(a,b){Vj.call(this,"Or",a,b)}A(bk,Vj);function ck(a,b){return new Wj(a,b)}function dk(a,b){return new bk(a,b)};function ek(a){a=a?a:{};this.i=a.featureType;this.g=a.featureNS;this.b=a.jm?a.jm:new V;this.v=a.Vb?a.Vb:"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd";Di.call(this)}A(ek,Di);ek.prototype.zc=function(a,b){var c={featureType:this.i,featureNS:this.g};Wb(c,Hh(this,a,b?b:{}));b=[c];this.b.b["http://www.opengis.net/gml"].featureMember=Ad(Jj.prototype.Ld);(a=P([],this.b.b,a,b,this.b))||(a=[]);return a};
function fk(a,b){for(b=b.firstChild;b;b=b.nextSibling)if(b.nodeType==Node.ELEMENT_NODE)return gk(a,b)}var hk={"http://www.opengis.net/gml":{boundedBy:L(Jj.prototype.Re,"bounds")}};function gk(a,b){var c={},d=Sd(b.getAttribute("numberOfFeatures"));c.numberOfFeatures=d;return P(c,hk,b,[],a.b)}
var ik={"http://www.opengis.net/wfs":{totalInserted:L(Rd),totalUpdated:L(Rd),totalDeleted:L(Rd)}},jk={"http://www.opengis.net/ogc":{FeatureId:Ad(function(a){return a.getAttribute("fid")})}},kk={"http://www.opengis.net/wfs":{Feature:function(a,b){Id(jk,a,b)}}};L(function(a,b){return P({},ik,a,b)},"transactionSummary");L(function(a,b){return P([],kk,a,b)},"insertIds");var lk={"http://www.opengis.net/wfs":{PropertyName:M(Ud)}};
function mk(a,b,c){a={node:a};var d=b.b;Jd(a,nk,Ed(d.ic),[d],c);b=b.g;Jd(a,nk,Ed(b.ic),[b],c)}function ok(a,b){void 0!==b.g&&a.setAttribute("matchCase",b.g.toString());pk(a,b.b);qk("Literal",a,""+b.c)}function qk(a,b,c){a=td("http://www.opengis.net/ogc",a);Ud(a,c);b.appendChild(a)}function pk(a,b){qk("PropertyName",a,b)}
var nk={"http://www.opengis.net/wfs":{Query:M(function(a,b,c){var d=c[c.length-1],e=d.featurePrefix,f=d.featureNS,g=d.propertyNames,h=d.srsName;a.setAttribute("typeName",(e?e+":":"")+b);h&&a.setAttribute("srsName",h);f&&a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+e,f);b=Wb({},d);b.node=a;Jd(b,lk,Ed("PropertyName"),g,c);if(d=d.filter)g=td("http://www.opengis.net/ogc","Filter"),a.appendChild(g),Jd({node:g},nk,Ed(d.ic),[d],c)})},"http://www.opengis.net/ogc":{And:M(mk),Or:M(mk),Not:M(function(a,
b,c){b=b.ua;Jd({node:a},nk,Ed(b.ic),[b],c)}),BBOX:M(function(a,b,c){c[c.length-1].srsName=b.Ba;pk(a,b.geometryName);V.prototype.Wd(a,b.extent,c)}),Intersects:M(function(a,b,c){c[c.length-1].srsName=b.Ba;pk(a,b.geometryName);V.prototype.Wd(a,b.geometry,c)}),Within:M(function(a,b,c){c[c.length-1].srsName=b.Ba;pk(a,b.geometryName);V.prototype.Wd(a,b.geometry,c)}),PropertyIsEqualTo:M(ok),PropertyIsNotEqualTo:M(ok),PropertyIsLessThan:M(ok),PropertyIsLessThanOrEqualTo:M(ok),PropertyIsGreaterThan:M(ok),
PropertyIsGreaterThanOrEqualTo:M(ok),PropertyIsNull:M(function(a,b){pk(a,b.b)}),PropertyIsBetween:M(function(a,b){pk(a,b.b);qk("LowerBoundary",a,""+b.g);qk("UpperBoundary",a,""+b.c)}),PropertyIsLike:M(function(a,b){a.setAttribute("wildCard",b.o);a.setAttribute("singleChar",b.i);a.setAttribute("escapeChar",b.c);void 0!==b.g&&a.setAttribute("matchCase",b.g.toString());pk(a,b.b);qk("Literal",a,""+b.f)})}};
function rk(a,b){var c=td("http://www.opengis.net/wfs","GetFeature");c.setAttribute("service","WFS");c.setAttribute("version","1.1.0");var d;if(b&&(b.handle&&c.setAttribute("handle",b.handle),b.tg&&c.setAttribute("outputFormat",b.tg),void 0!==b.maxFeatures&&c.setAttribute("maxFeatures",b.maxFeatures),b.resultType&&c.setAttribute("resultType",b.resultType),void 0!==b.Fp&&c.setAttribute("startIndex",b.Fp),void 0!==b.count&&c.setAttribute("count",b.count),d=b.filter,b.bbox)){Rc(b.geometryName,12);var e=
new Xj(b.geometryName,b.bbox,b.Ba);d?d=ck(d,e):d=e}c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",a.v);a={node:c,srsName:b.Ba,featureNS:b.featureNS?b.featureNS:a.g,featurePrefix:b.featurePrefix,geometryName:b.geometryName,filter:d,propertyNames:b.To?b.To:[]};Rc(Array.isArray(b.Of),11);b=b.Of;a=[a];d=Wb({},a[a.length-1]);d.node=c;Jd(d,nk,Ed("Query"),b,a);return c}
ek.prototype.Eg=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.Ve(a);return null};ek.prototype.Ve=function(a){if(a.firstElementChild&&a.firstElementChild.firstElementChild)for(a=a.firstElementChild.firstElementChild,a=a.firstElementChild;a;a=a.nextElementSibling)if(0!==a.childNodes.length&&(1!==a.childNodes.length||3!==a.firstChild.nodeType)){var b=[{}];this.b.Re(a,b);return Te(b.pop().Ba)}return null};function sk(a){a=a?a:{};Jj.call(this,a);this.b["http://www.opengis.net/gml"].featureMember=Ad(Jj.prototype.Ld);this.Vb=a.Vb?a.Vb:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}A(sk,Jj);l=sk.prototype;
l.rj=function(a,b){var c=ud(a).replace(/^\s*|\s*$/g,""),d=b[0].srsName,e=a.parentNode.getAttribute("srsDimension");b="enu";d&&(d=Te(d))&&(b=d.g);c=c.split(/[\s,]+/);d=2;a.getAttribute("srsDimension")?d=Sd(a.getAttribute("srsDimension")):a.getAttribute("dimension")?d=Sd(a.getAttribute("dimension")):e&&(d=Sd(e));for(var f,g=[],h=0,k=c.length;h<k;h+=d)a=parseFloat(c[h]),e=parseFloat(c[h+1]),f=3===d?parseFloat(c[h+2]):0,"en"===b.substr(0,2)?g.push(a,e,f):g.push(e,a,f);return g};
l.Vo=function(a,b){a=P([null],this.ik,a,b,this);return ad(a[1][0],a[1][1],a[1][3],a[1][4])};l.cn=function(a,b){(a=P(void 0,this.Yd,a,b,this))&&b[b.length-1].push(a)};l.Fo=function(a,b){(a=P(void 0,this.Yd,a,b,this))&&(b[b.length-1][0]=a)};l.Xd={"http://www.opengis.net/gml":{coordinates:Bd(sk.prototype.rj)}};l.mf={"http://www.opengis.net/gml":{innerBoundaryIs:sk.prototype.cn,outerBoundaryIs:sk.prototype.Fo}};l.ik={"http://www.opengis.net/gml":{coordinates:Ad(sk.prototype.rj)}};
l.bh={"http://www.opengis.net/gml":{Point:Bd(Jj.prototype.xj),MultiPoint:Bd(Jj.prototype.vj),LineString:Bd(Jj.prototype.Se),MultiLineString:Bd(Jj.prototype.uj),LinearRing:Bd(Jj.prototype.tj),Polygon:Bd(Jj.prototype.Te),MultiPolygon:Bd(Jj.prototype.wj),Box:Bd(sk.prototype.Vo)}};function tk(a){a=a?a:{};this.g="http://mapserver.gis.umn.edu/mapserver";this.b=new sk;this.i=a.layers?a.layers:null;Di.call(this)}A(tk,Di);
tk.prototype.zc=function(a,b){var c={};b&&Wb(c,Hh(this,a,b));c=[c];a.setAttribute("namespaceURI",this.g);var d=a.localName;b=[];if(0!==a.childNodes.length){if("msGMLOutput"==d)for(var e=0,f=a.childNodes.length;e<f;e++){var g=a.childNodes[e];if(g.nodeType===Node.ELEMENT_NODE){var h=c[0],k=g.localName.replace("_layer","");if(!this.i||Gc(this.i,k)){k+="_feature";h.featureType=k;h.featureNS=this.g;var m={};m[k]=Ad(this.b.zg,this.b);h=O([h.featureNS,null],m);g.setAttribute("namespaceURI",this.g);(g=P([],
h,g,c,this.b))&&Ic(b,g)}}}"FeatureCollection"==d&&(a=P([],this.b.b,a,[{}],this.b))&&(b=a)}return b};w.value("ngeoQueryResult",{sources:[],total:0,pending:!1});
function uk(a,b,c,d,e){d=void 0!==d?d:{};this.Ge=void 0!==d.limit?d.limit:50;this.B=void 0!==d.queryCountFirst?d.queryCountFirst:!1;this.u=void 0!==d.sourceIdsProperty?d.sourceIdsProperty:"querySourceIds";this.v=void 0!==d.tolerance?d.tolerance:3;this.c=void 0!==d.featureNS?d.featureNS:"http://mapserver.gis.umn.edu/mapserver";this.i=void 0!==d.featurePrefix?d.featurePrefix:"feature";this.j=void 0!==d.geometryName?d.geometryName:"the_geom";this.s=e;this.ia=a;this.o=b;this.Sa=c;this.f=[];this.b={};
this.g=[]}uk.$inject=["$http","$q","ngeoQueryResult","ngeoQueryOptions","ngeoLayerHelper"];
uk.prototype.ph=function(a){var b=a.id;if(!a.wmsSource)if(a.layer&&(a.layer instanceof Ff||a.layer instanceof Gf)){var c=S(a.layer);c&&c instanceof yg&&(a.wmsSource=c)}else a.wmsSource=new yg({url:a.url,params:a.params});a.format?!a.infoFormat&&a.format instanceof tk&&(a.infoFormat="application/vnd.ogc.gml"):(a.infoFormat||(a.infoFormat="application/vnd.ogc.gml"),c=a.wmsSource.Ha.LAYERS.split(","),"application/vnd.ogc.gml"===a.infoFormat&&(a.format=new tk({layers:c})));this.f.push(a);c={features:[],
id:b,identifierAttributeField:void 0!==a.identifierAttributeField?a.identifierAttributeField:b,label:void 0!==a.label?a.label:b,pending:!1,queried:!1};this.Sa.sources.push(c);this.b[b]={source:a,resultSource:c}};uk.prototype.addSource=uk.prototype.ph;uk.prototype.qh=function(a){a.forEach(this.ph,this)};uk.prototype.addSources=uk.prototype.qh;uk.prototype.clear=function(){vk(this)};uk.prototype.clear=uk.prototype.clear;uk.prototype.Aj=function(){this.Sa.sources.length=0;this.f.length=0;this.b={}};
uk.prototype.removeAllSources=uk.prototype.Aj;uk.prototype.$c=function(a,b){wk(this);vk(this);if(2===b.length){var c=xk(this,a,!1);yk(this,c.$p,b,a);var c=c.Xj,d=T(a),d=this.v*d.ca();b=Vc(cd(b),d);zk(this,c,b,a)}else c=xk(this,a,!0),zk(this,c.Xj,b,a);Ak(this)};uk.prototype.issue=uk.prototype.$c;
function xk(a,b,c){var d={},e={};a.s.yd(hh(b)).forEach(function(a){if(kh(a,b)){var g=(a.get(this.u)||[]).slice();if(0!==g.length)for(var h,k,m=0,n=g.length;m<n;m++)if(k=this.b[g[m]]){if(k.source.validateLayerParams){var p=S(a).Ha.LAYERS.split(",");if(!k.source.wmsSource.Ha.LAYERS.split(",").every(function(a){return-1!=p.indexOf(a)}))continue}k.source.wfsQuery?(h=k.source.urlWfs||k.source.wmsSource.Gd(),e[h]||(e[h]=[]),Bk(k,e[h])):c||(h=k.source.infoFormat,"application/vnd.ogc.gml"===h&&(h=k.source.wmsSource.Gd(),
d[h]||(d[h]=[]),Bk(k,d[h])))}}},a);return{$p:d,Xj:e}}function Bk(a,b){0>b.indexOf(a)&&b.push(a)}
function yk(a,b,c,d){d=T(d);var e=d.da().b,f=d.ca();angular.forEach(b,function(a){a.forEach(function(a){a.resultSource.pending=!0;a.resultSource.queried=!0});var b=Bg(a[0].source.wmsSource,c,f,e,{INFO_FORMAT:a[0].source.infoFormat,FEATURE_COUNT:this.Ge}),d=Ck(a).join(","),b=sb(b,"LAYERS",d),b=sb(b,"QUERY_LAYERS",d),d=Dk(this);this.ia.get(b,{timeout:d.promise}).then(function(a,b){a.forEach(function(a){a.resultSource.pending=!1;var c=a.source.format.readFeatures(b.data);Ek(c,a.source.id);a.resultSource.features=
c;this.Sa.total+=c.length},this);Ak(this)}.bind(this,a))},a)}
function zk(a,b,c,d){var e=T(d).da().b,f=new ek,g=new XMLSerializer;angular.forEach(b,function(a,b){a.forEach(function(a){var d=Fk(a);if(0!=d.length&&""!==d[0]){a.resultSource.pending=!0;a.resultSource.queried=!0;var h={Ba:e,featureNS:this.c,featurePrefix:this.i,Of:d,tg:"GML3",bbox:c,geometryName:this.j},q=new ek({featureType:d,featureNS:this.c}),t=function(){var c=Wb({maxFeatures:this.Ge},h),c=rk(f,c),c=g.serializeToString(c),d=Dk(this);this.ia.post(b,c,{timeout:d.promise}).then(function(b){a.resultSource.pending=
!1;b=q.readFeatures(b.data);Ek(b,a.source.id);a.resultSource.features=b;this.Sa.total+=b.length;Ak(this)}.bind(this))}.bind(this);if(this.B){var d=Wb({resultType:"hits"},h),d=rk(f,d),d=g.serializeToString(d),x=Dk(this);this.ia.post(b,d,{timeout:x.promise}).then(function(b){b=b.data;wd(b)?b=fk(q,b):xd(b)?b=gk(q,b):"string"===typeof b?(b=yd(b),b=fk(q,b)):b=void 0;b.numberOfFeatures>this.Ge?(a.resultSource.pending=!1,a.resultSource.features=[],a.resultSource.tooManyResults=!0,a.resultSource.totalFeatureCount=
b.numberOfFeatures,Ak(this)):t()}.bind(this))}else t()}}.bind(this))}.bind(a))}function vk(a){a.Sa.total=0;a.Sa.sources.forEach(function(a){a.features.length=0;a.pending=!1;a.queried=!1;a.tooManyResults=!1;a.totalFeatureCount=void 0},a);a.Sa.pending=!1}function Fk(a){return a.source.wmsSource.Ha.LAYERS.split(",")}function Ck(a){for(var b=Fk(a[0]),c=1,d=a.length;c<d;c++)b=b.concat(Fk(a[c]));return b}function Ek(a,b){a.forEach(function(a){void 0!==a.Pa()&&Ci(a,b+"_"+a.Pa())})}
function Dk(a){var b=a.o.defer();a.g.push(b);return b}function wk(a){a.g.forEach(function(a){a.resolve()});a.g.length=0}function Ak(a){var b=0;a.Sa.sources.forEach(function(a){a.pending&&b++});a.Sa.pending=0<b}w.service("ngeoQuery",uk);function Gk(a,b,c,d){this.f=a;this.b=b;this.o=c;this.i=d;this.c=[];this.g={};E(this.b,"change",this.j,this)}Gk.$inject=["ngeoQuery","gmfThemes","gmfWmsUrl","$q"];Gk.prototype.j=function(){this.c.length=0;this.g={};this.f.Aj();yh(this.b).then(function(a){var b=this.b.Ob().then(function(b){for(var c=0,f=b.length;c<f;c++)Hk(this,b[c],a)}.bind(this)),c=xh(this.b).then(function(b){for(var c=0,f=b.length;c<f;c++)Hk(this,b[c],a)}.bind(this));this.i.all([b,c]).then(function(){this.f.qh(this.c)}.bind(this))}.bind(this))};
function Hk(a,b,c){var d=b.metadata,e=b.children,f=b.id,g=d.identifierAttributeField,h=d.wmsLayers||d.queryLayers||b.layers,k=b.name,m=d.wmsUrl||b.url||a.o,n=!1,p=b.wfsSupport;if(0!==b.queryable||b.childLayers&&b.childLayers.length){if("WMTS"===b.type&&!d.wmsUrl)if(d.ogcServer&&c[d.ogcServer])d=c[d.ogcServer],m=d.urlWfs,p=d.wfsSupport;else return;if(e)for(f=0,b=e.length;f<b;f++)Hk(a,e[f],c);else if(!a.g[f]){if(b.childLayers&&b.childLayers.length){if(!b.childLayers.some(function(a){return a.queryable}))return;
var q=[];b.childLayers.forEach(function(a){a.queryable&&q.push(a.name)},a);h=q.join(",");n="WMS"===b.type}c={id:f,identifierAttributeField:g,label:k,params:{LAYERS:h},url:m,validateLayerParams:n,wfsQuery:p};a.g[f]=c;a.c.push(c)}}}z.service("gmfQueryManager",Gk);function Ik(){};function Jk(){}sa(Jk,Ik);Jk.prototype.Mb=function(){var a=0;gb(this.Lc(!0),function(){a++});return a};Jk.prototype.clear=function(){var a=hb(this.Lc(!0)),b=this;La(a,function(a){b.remove(a)})};function Kk(a){this.b=a}sa(Kk,Jk);function Lk(a){if(!a.b)return!1;try{return a.b.setItem("__sak","1"),a.b.removeItem("__sak"),!0}catch(b){return!1}}l=Kk.prototype;l.set=function(a,b){try{this.b.setItem(a,b)}catch(c){if(0==this.b.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded";}};l.get=function(a){a=this.b.getItem(a);if(!ga(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};l.remove=function(a){this.b.removeItem(a)};l.Mb=function(){return this.b.length};
l.Lc=function(a){var b=0,c=this.b,d=new eb;d.next=function(){if(b>=c.length)throw db;var d=c.key(b++);if(a)return d;d=c.getItem(d);if(!ga(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};l.clear=function(){this.b.clear()};l.key=function(a){return this.b.key(a)};function Mk(){var a=null;try{a=window.localStorage||null}catch(b){}this.b=a}sa(Mk,Kk);function Y(a,b){this.g=b;this.b=Jb(a)}Y.prototype.Tl=function(){return this.b};Y.prototype.getUri=Y.prototype.Tl;Y.prototype.ib=function(){return this.b.ib()};Y.prototype.getPath=Y.prototype.ib;Y.prototype.Fd=function(a){var b;void 0!==a?(b=this.b.clone(),b.b.extend(a)):b=this.b;return b.toString()};Y.prototype.getUriString=Y.prototype.Fd;Y.prototype.ig=function(a){return Nb(this.b.b,a)};Y.prototype.hasParam=Y.prototype.ig;Y.prototype.Vm=function(a){return Nb(Nk(this).b,a)};
Y.prototype.hasFragmentParam=Y.prototype.Vm;Y.prototype.rc=function(a){return this.b.b.get(a)};Y.prototype.getParam=Y.prototype.rc;Y.prototype.Xh=function(a){return Nk(this).b.get(a)};Y.prototype.getFragmentParam=Y.prototype.Xh;Y.prototype.ji=function(a){a=this.rc(a);if(void 0!==a)return a=parseInt(a,10),isNaN(a)?void 0:a};Y.prototype.getParamAsInt=Y.prototype.ji;Y.prototype.Cl=function(a){a=this.Xh(a);if(void 0!==a)return a=parseInt(a,10),isNaN(a)?void 0:a};Y.prototype.getFragmentParamAsInt=Y.prototype.Cl;
Y.prototype.Wf=function(){return this.b.b.hb()};Y.prototype.getParamKeys=Y.prototype.Wf;Y.prototype.Yh=function(){return Nk(this).b.hb()};Y.prototype.getFragmentParamKeys=Y.prototype.Yh;Y.prototype.Xf=function(a){return this.Wf().filter(function(b){return 0==b.indexOf(a)})};Y.prototype.getParamKeysWithPrefix=Y.prototype.Xf;Y.prototype.Dl=function(a){return this.Yh().filter(function(b){return 0==b.indexOf(a)})};Y.prototype.getFragmentParamKeysWithPrefix=Y.prototype.Dl;
Y.prototype.updateParams=function(a){var b=this.b.b;Ra(a,function(a,d){b.set(d,a)})};Y.prototype.updateParams=Y.prototype.updateParams;Y.prototype.Wp=function(a){var b=Nk(this),c=b.b;Ra(a,function(a,b){c.set(b,a)});Ok(this,b)};Y.prototype.updateFragmentParams=Y.prototype.Wp;Y.prototype.Sc=function(a){this.b.b.remove(a)};Y.prototype.deleteParam=Y.prototype.Sc;Y.prototype.jl=function(a){var b=Nk(this);b.b.remove(a);Ok(this,b)};Y.prototype.deleteFragmentParam=Y.prototype.jl;
Y.prototype.refresh=function(){this.g.replaceState(null,"",this.Fd())};Y.prototype.refresh=Y.prototype.refresh;Y.prototype.Dc=function(a){this.b.Dc(a)};Y.prototype.setPath=Y.prototype.Dc;function Nk(a){a=a.b.c;var b=new ub(null);yb(b,a);return b}function Ok(a,b){b=zb(b.b.toString());a.b.c=b}
function Pk(a,b){var c=b.history,d=new Y(b.location,b.history),e=d.Fd();a.$watch(function(){var b=d.Fd();e!==b&&a.$evalAsync(function(){e=b;c&&c.replaceState&&c.replaceState(null,"",b);a.$broadcast("ngeoLocationChange")})});return d}Pk.$inject=["$rootScope","$window"];w.factory("ngeoLocation",Pk);function Qk(a){this.b={};this.c=a;this.g=new Mk;this.Rh=["theme"];var b=a.Wf(),c,d=new RegExp(/\/theme\/([^\?\/]*)/),e=a.ib(),f={};if(0===b.length||1===b.length&&"debug"==b[0]){if(Lk(this.g)){b=this.g.Mb();for(a=0;a<b;++a){c=this.g.key(a);var d=this.b,g=c,h;e=this.g.get(c);try{h=angular.fromJson(e)}catch(k){h=e}d[g]=h;0>this.Rh.indexOf(c)&&(f[c]=this.b[c])}this.c.updateParams(f)}}else{for(a=0;a<b.length;++a){c=b[a];h=this.b;f=c;c=this.c.rc(c);try{g=angular.fromJson(c)}catch(k){g=c}h[f]=g}(a=e.match(d))&&
(this.b.theme=a[1])}}Qk.$inject=["ngeoLocation"];function Rk(a,b){var c={};Object.keys(b).forEach(function(a){0>this.Rh.indexOf(a)&&(c[a]=b[a])},a);a.c.updateParams(c);if(Lk(a.g))for(var d in b)a.g.set(d,angular.toJson(b[d]))}Qk.prototype.Sc=function(a){this.c.Sc(a);Lk(this.g)&&this.g.remove(a)};w.service("ngeoStateManager",Qk);z.value("gmfTreeManagerModeFlush",!0);function Sk(a,b,c,d,e,f,g){this.$timeout_=a;this.na=b;this.g=c;this.o=d;this.i=e;this.b=f;this.tree={children:[],name:""};this.f=0;this.c=g}Sk.$inject="$timeout gettextCatalog ngeoLayerHelper ngeoNotification gmfThemes gmfTreeManagerModeFlush ngeoStateManager".split(" ");Sk.prototype.kn=function(){return this.b};Sk.prototype.isModeFlush=Sk.prototype.kn;Sk.prototype.vp=function(a){this.b=a;this.tree.name=""};Sk.prototype.setModeFlush=Sk.prototype.vp;
Sk.prototype.fe=function(a,b){var c=a.children,d,e,f=this.c.b.tree_groups;this.b&&(Rk(this.c,{theme:a.name}),this.tree.name=a.name);if(b&&void 0!==f){if(d=0<f.length?f.split(","):[])this.b?(e=c.map(function(a){return a.name}),(a=d.every(function(a){return 0<=e.indexOf(a)}))?d.forEach(function(a){this.ee(a,!0)},this):this.ld(c)):(d.reverse(),d.forEach(function(a){this.ee(a,!0,d.length)},this))}else this.ld(c.reverse())};Sk.prototype.addTheme=Sk.prototype.fe;
Sk.prototype.ld=function(a,b,c,d){var e=[];this.f=d||a.length;this.b&&!0!==b&&(this.tree.children.length=0,this.c.Sc("tree_groups"));a.forEach(function(a){Tk(this,a)||e.push(a)}.bind(this));0<e.length&&!c&&Uk(this,e);Vk(this,this.tree.children);return 0===e.length};Sk.prototype.addGroups=Sk.prototype.ld;function Vk(a,b){var c={};c.tree_groups=b.map(function(a){return a.name}).join(",");Rk(a.c,c)}
function Tk(a,b){var c=a.tree.children,d=!1;c.some(function(a){if(b.id===a.id)return--this.f,d=!0},a);if(d)return!1;c.unshift(b);return!0}Sk.prototype.de=function(a,b,c){var d=[];this.f=c||a.length;this.b&&!0!==b&&(this.tree.children.length=0);a.forEach(function(a){a=this.Bh(a.node,a.layers);Tk(this,a)||d.push(a)}.bind(this));0<d.length&&Uk(this,d);Vk(this,this.tree.children)};Sk.prototype.addCustomGroups=Sk.prototype.de;Sk.prototype.rh=function(a){this.i.Ob().then(function(b){(b=ph(b,a))&&this.fe(b)}.bind(this))};
Sk.prototype.addThemeByName=Sk.prototype.rh;Sk.prototype.ee=function(a,b,c){this.i.Ob().then(function(d){a:{for(var e=0,f=d.length;e<f;e++)for(var g=d[e],h=0,k=g.children.length;h<k;h++){var m=g.children[h];if(m.name==a){d=m;break a}}d=null}d&&this.ld([d],b,!1,c)}.bind(this))};Sk.prototype.addGroupByName=Sk.prototype.ee;Sk.prototype.nh=function(a,b,c,d){this.i.Ob().then(function(e){var f=nh(e,a);if(f){var g=this.ld([f],b,c);d&&this.$timeout_(function(){Wk(this,a,f,g,d)}.bind(this))}}.bind(this))};
Sk.prototype.addGroupByLayerName=Sk.prototype.nh;function Wk(a,b,c,d,e){var f;if(c.mixed){var g;f=a.g.qc(e,"data").zd();d?c.children.forEach(function(a){g=this.g.bc(a.name,f);a.name!=b?g.Ja(!1):g.Ja(!0)}.bind(a)):(g=a.g.bc(b,f),g.Ja(!0))}else{var h=[],k;f=hh(e).zd();e=a.g.bc(c.name,f);d?h.push(b):(d=S(e),k=He(e)?d.Ha.LAYERS:"",d=[],oh(c,d),d.map(function(a){return a.layers}).forEach(function(a){(a===b||-1<k.indexOf(a))&&h.push(a)}));a.g.kd(e,h.reverse().join(","))}}
Sk.prototype.Ig=function(a){var b=this.tree.children,c=0,d=!1;b.some(function(b){if(b.name===a.name)return d=!0;c++}.bind(this));d&&(b.splice(c,1),Vk(this,b))};Sk.prototype.removeGroup=Sk.prototype.Ig;Sk.prototype.removeAll=function(){for(;this.tree.children.length;)this.Ig(this.tree.children[0])};Sk.prototype.removeAll=Sk.prototype.removeAll;Sk.prototype.Bh=function(a,b){a=Va(a);this.Tg(a,b);return a};Sk.prototype.cloneGroupNode_=Sk.prototype.Bh;
Sk.prototype.Tg=function(a,b){a.children&&a.children.forEach(function(a){a.children?this.Tg(a,b):a.metadata&&(a.metadata.isChecked=Gc(b,a.name))},this)};Sk.prototype.toggleNodeCheck_=Sk.prototype.Tg;function Uk(a,b){var c=[],d=a.na;b.forEach(function(a){c.push(a.name)});b=2>c.length?d.getString("group is already loaded."):d.getString("groups are already loaded.");a.o.notify({msg:c.join(", ")+" "+b,type:"information"})}z.service("gmfTreeManager",Sk);w.value("ngeoPopupTemplateUrl",function(a,b){a=b.ngeoPopupTemplateurl;return void 0!==a?a:"ngeo/popup.html"});function Xk(a){return{restrict:"A",templateUrl:a,link:function(a,c){c.addClass("popover");a.close=function(a){a&&(a.stopPropagation(),a.preventDefault());c.addClass("hidden")};a.$watch("open",function(a){c.css("display",a?"block":"none")})}}}Xk.$inject=["ngeoPopupTemplateUrl"];w.directive("ngeoPopup",Xk);function Yk(a,b,c,d){this.scope=b.$new(!0);this.scope.$watch(function(){return this.scope.open}.bind(this),function(a){!a&&this.g&&this.f(function(){this.destroy()}.bind(this))}.bind(this));this.c=c;this.f=d;this.b=angular.element("<div ngeo-popup></div>");this.g=!1;a(this.b)(this.scope);angular.element(document.body).append(this.b)}Yk.prototype.gi=function(){return this.scope.open};Yk.prototype.getOpen=Yk.prototype.gi;Yk.prototype.af=function(a){this.scope.open=a};Yk.prototype.setOpen=Yk.prototype.af;
Yk.prototype.destroy=function(){this.scope.$destroy();this.b.remove()};Yk.prototype.destroy=Yk.prototype.destroy;Yk.prototype.Og=function(a){a=this.c.trustAsHtml(a);this.scope.title=a};Yk.prototype.setTitle=Yk.prototype.Og;Yk.prototype.Ze=function(a){this.scope.content=a};Yk.prototype.setContent=Yk.prototype.Ze;Yk.prototype.Pd=function(a){a=this.c.trustAsHtml('<iframe src="'+a+'" width="100%" height="100%"></iframe>');this.Ze(a)};Yk.prototype.setUrl=Yk.prototype.Pd;
Yk.prototype.cf=function(a){this.b.width(a);this.b.css("max-width",a)};Yk.prototype.setWidth=Yk.prototype.cf;Yk.prototype.Lg=function(a){this.b.height(a)};Yk.prototype.setHeight=Yk.prototype.Lg;Yk.prototype.bf=function(a,b){this.cf(a);this.Lg(b)};Yk.prototype.setSize=Yk.prototype.bf;Yk.prototype.Hj=function(a){this.g=a};Yk.prototype.setAutoDestroy=Yk.prototype.Hj;Yk.prototype.addClass=function(a){this.b.addClass(a)};Yk.prototype.addClass=Yk.prototype.addClass;
Yk.prototype.open=function(a){a.url?this.Pd(a.url):a.content&&this.Ze(a.content);void 0!==a.autoDestroy&&this.Hj(a.autoDestroy);void 0!==a.cls&&this.addClass(a.cls);void 0!==a.height&&this.Lg(a.height);void 0!==a.title&&this.Og(a.title);void 0!==a.width&&this.cf(a.width);this.af(!0)};Yk.prototype.open=Yk.prototype.open;function Zk(a,b,c,d){return function(){return new Yk(a,b,c,d)}}Zk.$inject=["$compile","$rootScope","$sce","$timeout"];w.factory("ngeoCreatePopup",Zk);function $k(a,b,c){this.o=a;this.na=b;this.i=c;a=angular.element('<div class="ngeo-disclaimer"></div>');angular.element(document.body).append(a);this.f=a;this.b={}}A($k,jc);$k.$inject=["$sce","gettextCatalog","ngeoCreatePopup"];$k.prototype.alert=function(a){this.show(a)};$k.prototype.alert=$k.prototype.alert;$k.prototype.close=function(a){kc(this,a).forEach(this.g,this)};$k.prototype.close=$k.prototype.close;
$k.prototype.c=function(a){var b=a.type,c=a.msg+"-"+a.type;if(void 0===this.b[c])if(!0===a.modal){var d=this.i(),b=this.o.trustAsHtml(a.msg);d.open({autoDestroy:!0,content:b,title:"&nbsp;"});d.scope.$watch("open",function(b){b||this.g(a)}.bind(this));this.b[c]=d}else{var e=["alert","fade","alert-dismissible"];switch(b){case "error":e.push("alert-danger");break;case "information":e.push("alert-info");break;case "success":e.push("alert-success");break;case "warning":e.push("alert-warning")}var b=angular.element('<div role="alert" class="'+
e.join(" ")+'"></div>'),e=angular.element('<button type="button" class="close" data-dismiss="alert" aria-label="'+this.na.getString("Close")+'"><span aria-hidden="true" class="fa fa-times"></span></button>'),f=angular.element("<span />").html(a.msg);b.append(e).append(f);a.target?d=angular.element(a.target):d=this.f;d.append(b);b.addClass("in");b.on("closed.bs.alert",function(){this.g(a)}.bind(this));this.b[c]=b}};
$k.prototype.g=function(a){a=a.msg+"-"+a.type;var b=this.b[a];void 0!==b&&(b instanceof Yk?b.gi()&&b.af(!1):b.hasClass("in")&&b.alert("close"),delete this.b[a])};w.service("ngeoDisclaimer",$k);function al(){this.listenerKeys_={}}al.prototype.Jb=function(a,b,c){this.listenerKeys_[a]||bl(this,a);(void 0!==c?c:1)?this.listenerKeys_[a].Tb.push(b):this.listenerKeys_[a].Pb.push(b)};al.prototype.addListenerKey=al.prototype.Jb;al.prototype.Rc=function(a){bl(this,a)};al.prototype.clearListenerKey=al.prototype.Rc;
function bl(a,b){a.listenerKeys_[b]?(a.listenerKeys_[b].Pb.length&&(a.listenerKeys_[b].Pb.forEach(function(a){cl(a)},a),a.listenerKeys_[b].Pb.length=0),a.listenerKeys_[b].Tb.length&&(a.listenerKeys_[b].Tb.forEach(function(a){B(a)},a),a.listenerKeys_[b].Tb.length=0)):a.listenerKeys_[b]={Pb:[],Tb:[]}}w.service("ngeoEventHelper",al);z.directive("gmfDisclaimer",function(){return{restrict:"E",scope:{modalIn:"<?gmfDisclaimerModal",map:"=gmfDisclaimerMap"},bindToController:!0,controller:"GmfDisclaimerController",controllerAs:"dclCtrl"}});function dl(a,b,c,d,e,f){this.modal=!0===this.modalIn;this.i=a;this.c=d;this.b=e;this.f=f.qc(this.map,"data");el(this,this.f);b.$on("$destroy",this.o.bind(this))}u("gmf.DisclaimerController",dl);dl.$inject="$element $scope ngeoCreatePopup ngeoDisclaimer ngeoEventHelper ngeoLayerHelper".split(" ");
dl.prototype.j=function(a){el(this,a.element)};dl.prototype.s=function(a){this.g(a.element)};function el(a,b){var c=r(b);b instanceof Cf?(a.b.Jb(c,E(b.ha(),Cc,a.j,a)),a.b.Jb(c,E(b.ha(),Ec,a.s,a)),b.ha().forEach(function(a){el(this,a)},a)):(b=b.get("disclaimers"))&&Array.isArray(b)&&b.forEach(function(a){this.c.alert({modal:this.modal,msg:a,target:this.i,type:"warning"})},a)}
dl.prototype.g=function(a){var b=r(a);a instanceof Cf?(this.b.Rc(b),a.ha().forEach(this.g,this)):(a=a.get("disclaimers"))&&Array.isArray(a)&&a.forEach(function(a){this.c.close({modal:this.modal,msg:a,target:this.i,type:"warning"})},this)};dl.prototype.o=function(){this.g(this.f)};z.controller("GmfDisclaimerController",dl);function fl(a){a=a?a:{};var b=Wb({},a);delete b.style;delete b.Bj;delete b.Yb;delete b.Zb;Ef.call(this,b);this.s=void 0!==a.Bj?a.Bj:100;this.j=null;this.o=void 0;this.setStyle(a.style);this.B=void 0!==a.Yb?a.Yb:!1;this.u=void 0!==a.Zb?a.Zb:!1}A(fl,Ef);fl.prototype.tc=function(){return this.j};fl.prototype.setStyle=function(a){this.j=void 0!==a?a:wi;this.o=null===a?void 0:ui(this.j);this.b()};function gl(a,b,c){return function(d,e,f){var g=new XMLHttpRequest;g.open("GET","function"===typeof a?a(d,e,f):a,!0);"arraybuffer"==b.R()&&(g.responseType="arraybuffer");g.onload=function(){if(!g.status||200<=g.status&&300>g.status){var a=b.R(),d;"json"==a||"text"==a?d=g.responseText:"xml"==a?(d=g.responseXML)||(d=yd(g.responseText)):"arraybuffer"==a&&(d=g.response);d&&c.call(this,b.readFeatures(d,{Lb:f}),b.Ue(d))}}.bind(this);g.send()}}function hl(a,b){return gl(a,b,function(a){il(this,a)})};function jl(){return[[-Infinity,-Infinity,Infinity,Infinity]]};var kl;
(function(){var a={},b={ga:a};(function(c){if("object"===typeof a&&"undefined"!==typeof b)b.ga=c();else{var d;"undefined"!==typeof window?d=window:"undefined"!==typeof global?d=global:"undefined"!==typeof self?d=self:d=this;d.Nq=c()}})(function(){return function d(a,b,g){function h(m,p){if(!b[m]){if(!a[m]){var q="function"==typeof require&&require;if(!p&&q)return q(m,!0);if(k)return k(m,!0);p=Error("Cannot find module '"+m+"'");throw p.code="MODULE_NOT_FOUND",p;}p=b[m]={ga:{}};a[m][0].call(p.ga,function(b){var d=
a[m][1][b];return h(d?d:b)},p,p.ga,d,a,b,g)}return b[m].ga}for(var k="function"==typeof require&&require,m=0;m<g.length;m++)h(g[m]);return h}({1:[function(a,b){function f(a,b){if(!(this instanceof f))return new f(a,b);this.rf=Math.max(4,a||9);this.jh=Math.max(2,Math.ceil(.4*this.rf));b&&this.Nk(b);this.clear()}function g(a,b){h(a,0,a.children.length,b,a)}function h(a,b,d,e,f){f||(f=v(null));f.X=Infinity;f.aa=Infinity;f.Y=-Infinity;f.ea=-Infinity;for(var g;b<d;b++)g=a.children[b],k(f,a.Xa?e(g):g);
return f}function k(a,b){a.X=Math.min(a.X,b.X);a.aa=Math.min(a.aa,b.aa);a.Y=Math.max(a.Y,b.Y);a.ea=Math.max(a.ea,b.ea)}function m(a,b){return a.X-b.X}function n(a,b){return a.aa-b.aa}function p(a){return(a.Y-a.X)*(a.ea-a.aa)}function q(a){return a.Y-a.X+(a.ea-a.aa)}function t(a,b){return a.X<=b.X&&a.aa<=b.aa&&b.Y<=a.Y&&b.ea<=a.ea}function x(a,b){return b.X<=a.Y&&b.aa<=a.ea&&b.Y>=a.X&&b.ea>=a.aa}function v(a){return{children:a,height:1,Xa:!0,X:Infinity,aa:Infinity,Y:-Infinity,ea:-Infinity}}function C(a,
b,d,e,f){for(var g=[b,d],h;g.length;)d=g.pop(),b=g.pop(),d-b<=e||(h=b+Math.ceil((d-b)/e/2)*e,N(a,h,b,d,f),g.push(b,h,h,d))}b.ga=f;var N=a("quickselect");f.prototype={all:function(){return this.eh(this.data,[])},search:function(a){var b=this.data,d=[],e=this.cb;if(!x(a,b))return d;for(var f=[],g,h,k,m;b;){g=0;for(h=b.children.length;g<h;g++)k=b.children[g],m=b.Xa?e(k):k,x(a,m)&&(b.Xa?d.push(k):t(a,m)?this.eh(k,d):f.push(k));b=f.pop()}return d},load:function(a){if(!a||!a.length)return this;if(a.length<
this.jh){for(var b=0,d=a.length;b<d;b++)this.insert(a[b]);return this}a=this.gh(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this.mh(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this.ih(a,this.data.height-a.height-1,!0)):this.data=a;return this},insert:function(a){a&&this.ih(a,this.data.height-1);return this},clear:function(){this.data=v([]);return this},remove:function(a,b){if(!a)return this;for(var d=this.data,e=this.cb(a),f=[],g=[],h,
k,m,n;d||f.length;){d||(d=f.pop(),k=f[f.length-1],h=g.pop(),n=!0);if(d.Xa){a:{m=a;var p=d.children,q=b;if(q){for(var v=0;v<p.length;v++)if(q(m,p[v])){m=v;break a}m=-1}else m=p.indexOf(m)}if(-1!==m){d.children.splice(m,1);f.push(d);this.Kk(f);break}}n||d.Xa||!t(d,e)?k?(h++,d=k.children[h],n=!1):d=null:(f.push(d),g.push(h),h=0,k=d,d=d.children[0])}return this},cb:function(a){return a},Bf:m,Cf:n,toJSON:function(){return this.data},eh:function(a,b){for(var d=[];a;)a.Xa?b.push.apply(b,a.children):d.push.apply(d,
a.children),a=d.pop();return b},gh:function(a,b,d,e){var f=d-b+1,h=this.rf,k;if(f<=h)return k=v(a.slice(b,d+1)),g(k,this.cb),k;e||(e=Math.ceil(Math.log(f)/Math.log(h)),h=Math.ceil(f/Math.pow(h,e-1)));k=v([]);k.Xa=!1;k.height=e;var f=Math.ceil(f/h),h=f*Math.ceil(Math.sqrt(h)),m,n,p;for(C(a,b,d,h,this.Bf);b<=d;b+=h)for(n=Math.min(b+h-1,d),C(a,b,n,f,this.Cf),m=b;m<=n;m+=f)p=Math.min(m+f-1,n),k.children.push(this.gh(a,m,p,e-1));g(k,this.cb);return k},Jk:function(a,b,d,e){for(var f,g,h,k,m,n,q,t;;){e.push(b);
if(b.Xa||e.length-1===d)break;q=t=Infinity;f=0;for(g=b.children.length;f<g;f++)h=b.children[f],m=p(h),n=(Math.max(h.Y,a.Y)-Math.min(h.X,a.X))*(Math.max(h.ea,a.ea)-Math.min(h.aa,a.aa))-m,n<t?(t=n,q=m<q?m:q,k=h):n===t&&m<q&&(q=m,k=h);b=k||b.children[0]}return b},ih:function(a,b,d){var e=this.cb;d=d?a:e(a);var e=[],f=this.Jk(d,this.data,b,e);f.children.push(a);for(k(f,d);0<=b;)if(e[b].children.length>this.rf)this.Sk(e,b),b--;else break;this.Gk(d,e,b)},Sk:function(a,b){var d=a[b],e=d.children.length,
f=this.jh;this.Hk(d,f,e);e=this.Ik(d,f,e);e=v(d.children.splice(e,d.children.length-e));e.height=d.height;e.Xa=d.Xa;g(d,this.cb);g(e,this.cb);b?a[b-1].children.push(e):this.mh(d,e)},mh:function(a,b){this.data=v([a,b]);this.data.height=a.height+1;this.data.Xa=!1;g(this.data,this.cb)},Ik:function(a,b,d){var e,f,g,k,m,n,q;m=n=Infinity;for(e=b;e<=d-b;e++)f=h(a,0,e,this.cb),g=h(a,e,d,this.cb),k=Math.max(0,Math.min(f.Y,g.Y)-Math.max(f.X,g.X))*Math.max(0,Math.min(f.ea,g.ea)-Math.max(f.aa,g.aa)),f=p(f)+p(g),
k<m?(m=k,q=e,n=f<n?f:n):k===m&&f<n&&(n=f,q=e);return q},Hk:function(a,b,d){var e=a.Xa?this.Bf:m,f=a.Xa?this.Cf:n,g=this.fh(a,b,d,e);b=this.fh(a,b,d,f);g<b&&a.children.sort(e)},fh:function(a,b,d,e){a.children.sort(e);e=this.cb;var f=h(a,0,b,e),g=h(a,d-b,d,e),m=q(f)+q(g),n,p;for(n=b;n<d-b;n++)p=a.children[n],k(f,a.Xa?e(p):p),m+=q(f);for(n=d-b-1;n>=b;n--)p=a.children[n],k(g,a.Xa?e(p):p),m+=q(g);return m},Gk:function(a,b,d){for(;0<=d;d--)k(b[d],a)},Kk:function(a){for(var b=a.length-1,d;0<=b;b--)0===a[b].children.length?
0<b?(d=a[b-1].children,d.splice(d.indexOf(a[b]),1)):this.clear():g(a[b],this.cb)},Nk:function(a){var b=["return a"," - b",";"];this.Bf=new Function("a","b",b.join(a[0]));this.Cf=new Function("a","b",b.join(a[1]));this.cb=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}}},{quickselect:2}],2:[function(a,b){function f(a,b,d,e,q){d=d||0;e=e||a.length-1;for(q=q||h;e>d;){if(600<e-d){var t=e-d+1,x=b-d+1,v=Math.log(t),C=.5*Math.exp(2*v/3),v=.5*Math.sqrt(v*
C*(t-C)/t)*(0>x-t/2?-1:1);f(a,b,Math.max(d,Math.floor(b-x*C/t+v)),Math.min(e,Math.floor(b+(t-x)*C/t+v)),q)}t=a[b];x=d;C=e;g(a,d,b);for(0<q(a[e],t)&&g(a,d,e);x<C;){g(a,x,C);x++;for(C--;0>q(a[x],t);)x++;for(;0<q(a[C],t);)C--}0===q(a[d],t)?g(a,d,C):(C++,g(a,C,e));C<=b&&(d=C+1);b<=C&&(e=C-1)}}function g(a,b,d){var e=a[b];a[b]=a[d];a[d]=e}function h(a,b){return a<b?-1:a>b?1:0}b.ga=f},{}]},{},[1])(1)});kl=b.ga})();function ll(a){this.b=kl(a);this.kb={}}l=ll.prototype;l.insert=function(a,b){a={X:a[0],aa:a[1],Y:a[2],ea:a[3],value:b};this.b.insert(a);this.kb[Sb(b)]=a};l.load=function(a,b){for(var c=Array(b.length),d=0,e=b.length;d<e;d++){var f=a[d],g=b[d],f={X:f[0],aa:f[1],Y:f[2],ea:f[3],value:g};c[d]=f;this.kb[Sb(g)]=f}this.b.load(c)};l.remove=function(a){a=Sb(a);var b=this.kb[a];delete this.kb[a];return null!==this.b.remove(b)};
function ml(a,b,c){var d=a.kb[Sb(c)];dd([d.X,d.aa,d.Y,d.ea],b)||(a.remove(c),a.insert(b,c))}function nl(a){return a.b.all().map(function(a){return a.value})}function ol(a,b){return a.b.search({X:b[0],aa:b[1],Y:b[2],ea:b[3]}).map(function(a){return a.value})}l.forEach=function(a,b){return pl(nl(this),a,b)};function ql(a,b,c,d){return pl(ol(a,b),c,d)}function pl(a,b,c){for(var d,e=0,f=a.length;e<f&&!(d=b.call(c,a[e]));e++);return d}l.Cb=function(){return Zb(this.kb)};
l.clear=function(){this.b.clear();this.kb={}};l.I=function(){var a=this.b.data;return[a.X,a.aa,a.Y,a.ea]};function rl(a){a=a||{};Af.call(this,{xa:a.xa,La:a.La,projection:void 0,state:"ready",wrapX:void 0!==a.wrapX?a.wrapX:!0});this.u=Rb;this.J=a.format;this.M=void 0==a.ug?!0:a.ug;this.D=a.url;void 0!==a.tn?this.u=a.tn:void 0!==this.D&&(Rc(this.J,7),this.u=hl(this.D,this.J));this.V=void 0!==a.Gp?a.Gp:jl;var b=void 0!==a.$b?a.$b:!0;this.c=b?new ll:null;this.H=new ll;this.f={};this.i={};this.j={};this.s={};this.o=null;var c,d;a.features instanceof xc?(c=a.features,d=c.c):Array.isArray(a.features)&&(d=a.features);
b||void 0!==c||(c=new xc(d));void 0!==d&&sl(this,d);void 0!==c&&tl(this,c)}A(rl,Af);l=rl.prototype;l.ra=function(a){var b=Sb(a).toString();if(ul(this,b,a)){vl(this,b,a);var c=a.G();c?(b=c.I(),this.c&&this.c.insert(b,a)):this.f[b]=a;F(this,new wl("addfeature",a))}this.b()};function vl(a,b,c){a.s[b]=[E(c,"change",a.dj,a),E(c,"propertychange",a.dj,a)]}function ul(a,b,c){var d=!0,e=c.Pa();void 0!==e?e.toString()in a.i?d=!1:a.i[e.toString()]=c:(Rc(!(b in a.j),30),a.j[b]=c);return d}
function il(a,b){sl(a,b);a.b()}function sl(a,b){var c,d,e,f,g=[],h=[],k=[];d=0;for(e=b.length;d<e;d++)f=b[d],c=Sb(f).toString(),ul(a,c,f)&&h.push(f);d=0;for(e=h.length;d<e;d++)f=h[d],c=Sb(f).toString(),vl(a,c,f),(b=f.G())?(c=b.I(),g.push(c),k.push(f)):a.f[c]=f;a.c&&a.c.load(g,k);d=0;for(e=h.length;d<e;d++)F(a,new wl("addfeature",h[d]))}
function tl(a,b){var c=!1;E(a,"addfeature",function(a){c||(c=!0,b.push(a.feature),c=!1)});E(a,"removefeature",function(a){c||(c=!0,b.remove(a.feature),c=!1)});E(b,Cc,function(a){c||(c=!0,this.ra(a.element),c=!1)},a);E(b,Ec,function(a){c||(c=!0,this.Ia(a.element),c=!1)},a);a.o=b}
l.clear=function(a){if(a){for(var b in this.s)this.s[b].forEach(B);this.o||(this.s={},this.i={},this.j={})}else if(this.c){this.c.forEach(this.Hg,this);for(var c in this.f)this.Hg(this.f[c])}this.o&&this.o.clear();this.c&&this.c.clear();this.H.clear();this.f={};F(this,new wl("clear"));this.b()};function xl(a,b,c,d){a.c?ql(a.c,b,c,d):a.o&&a.o.forEach(c,d)}l.pc=function(){var a;this.o?a=this.o.c:this.c&&(a=nl(this.c),Zb(this.f)||Ic(a,Yb(this.f)));return a};l.I=function(){return this.c.I()};l.Gd=function(){return this.D};
l.dj=function(a){a=a.target;var b=Sb(a).toString(),c=a.G();c?(c=c.I(),b in this.f?(delete this.f[b],this.c&&this.c.insert(c,a)):this.c&&ml(this.c,c,a)):b in this.f||(this.c&&this.c.remove(a),this.f[b]=a);c=a.Pa();void 0!==c?(c=c.toString(),b in this.j?(delete this.j[b],this.i[c]=a):this.i[c]!==a&&(yl(this,a),this.i[c]=a)):b in this.j||(yl(this,a),this.j[b]=a);this.b();F(this,new wl("changefeature",a))};l.Cb=function(){return this.c.Cb()&&Zb(this.f)};
function zl(a,b,c,d){var e=a.H;b=a.V(b,c);var f,g;f=0;for(g=b.length;f<g;++f){var h=b[f];ql(e,h,function(a){return Yc(a.extent,h)})||(a.u.call(a,h,c,d),e.insert(h,{extent:h.slice()}))}}l.Ia=function(a){var b=Sb(a).toString();b in this.f?delete this.f[b]:this.c&&this.c.remove(a);this.Hg(a);this.b()};l.Hg=function(a){var b=Sb(a).toString();this.s[b].forEach(B);delete this.s[b];var c=a.Pa();void 0!==c?delete this.i[c.toString()]:delete this.j[b];F(this,new wl("removefeature",a))};
function yl(a,b){for(var c in a.i)if(a.i[c]===b){delete a.i[c];break}}function wl(a,b){Pb.call(this,a);this.feature=b}A(wl,Pb);function Al(){this.g={};this.b=[];this.c=new rl({$b:!1});this.f=new fl({source:this.c,style:this.i.bind(this),Yb:!0,Zb:!0})}Al.prototype.ra=function(a,b){var c=r(a).toString();this.g[c]=b;this.b[b].features[c]=a;this.c.ra(a)};Al.prototype.Ia=function(a,b){var c=r(a).toString();delete this.g[c];delete this.b[b].features[c];this.c.Ia(a)};Al.prototype.clear=function(a){var b=this.b[a],c;for(c in b.features)this.Ia(b.features[c],a)};Al.prototype.ya=function(){return this.f};Al.prototype.getLayer=Al.prototype.ya;
Al.prototype.gb=function(){var a=this.b.length;this.b.push({Oj:wi,features:{}});return new Bl(this,a)};Al.prototype.getFeatureOverlay=Al.prototype.gb;Al.prototype.tb=function(a){this.f.setMap(a)};Al.prototype.init=Al.prototype.tb;Al.prototype.setStyle=function(a,b){this.b[b].Oj=null===a?wi:ui(a)};Al.prototype.i=function(a,b){var c=r(a).toString();return this.b[this.g[c]].Oj(a,b)};function Bl(a,b){this.g=a;this.b=null;this.c=b}Bl.prototype.ra=function(a){this.g.ra(a,this.c)};
Bl.prototype.addFeature=Bl.prototype.ra;Bl.prototype.Ia=function(a){this.g.Ia(a,this.c)};Bl.prototype.removeFeature=Bl.prototype.Ia;Bl.prototype.clear=function(){this.g.clear(this.c)};Bl.prototype.clear=Bl.prototype.clear;Bl.prototype.Cc=function(a){null!==this.b&&(this.b.clear(),ec(this.b,Cc,this.f,this),ec(this.b,Ec,this.i,this));null!==a&&(a.forEach(function(a){this.ra(a)},this),E(a,Cc,this.f,this),E(a,Ec,this.i,this));this.b=a};Bl.prototype.setFeatures=Bl.prototype.Cc;
Bl.prototype.setStyle=function(a){this.g.setStyle(a,this.c)};Bl.prototype.setStyle=Bl.prototype.setStyle;Bl.prototype.f=function(a){this.ra(a.element)};Bl.prototype.i=function(a){this.Ia(a.element)};w.service("ngeoFeatureOverlayMgr",Al);w.value("gmfDisplayquerywindowTemplateUrl",function(a,b){a=b.gmfDisplayquerywindowTemplateurl;return void 0!==a?a:"gmf/displayquerywindow.html"});
function Cl(a){return{bindToController:!0,controller:"GmfDisplayquerywindowController",controllerAs:"ctrl",templateUrl:a,replace:!0,restrict:"E",scope:{featuresStyleFn:"&gmfDisplayquerywindowFeaturesstyle",selectedFeatureStyleFn:"&gmfDisplayquerywindowSelectedfeaturestyle",defaultCollapsedFn:"&?gmfDisplayquerywindowDefaultcollapsed",desktopIn:"=gmfDisplayquerywindowDesktop",showUnqueriedLayersIn:"=gmfDisplayquerywindowShowunqueriedlayers"}}}Cl.$inject=["gmfDisplayquerywindowTemplateUrl"];
z.directive("gmfDisplayquerywindow",Cl);
function Dl(a,b,c,d){this.desktop=!0===this.desktopIn;this.collapsed=void 0!==this.defaultCollapsedFn?!0===this.defaultCollapsedFn():!this.desktop;this.sourcesFilter=this.f?{}:{queried:!0};this.ngeoQueryResult=b;this.ngeoFeatureHelper_=c;this.selectedSource=null;this.b=new xc;c=d.gb();var e=this.featuresStyleFn();void 0!==e&&c.setStyle(e);c.Cc(this.b);this.c=d.gb();this.g=new xc;this.c.Cc(this.g);d=this.selectedFeatureStyleFn();void 0===d&&(d=new mi({color:[255,0,0,.6]}),c=new ri({color:[255,0,0,
1],width:2}),d=new U({fill:d,image:new ji({fill:d,radius:5,stroke:c}),stroke:c}));this.c.setStyle(d);this.feature=this.source=null;this.currentResult=-1;this.isNext=!0;this.animate=0;this.open=!1;a.$watchCollection(function(){return b},function(a,b){0<a.total?this.show():b!==a&&this.close()}.bind(this))}u("gmf.DisplayquerywindowController",Dl);Dl.$inject=["$scope","ngeoQueryResult","ngeoFeatureHelper","ngeoFeatureOverlayMgr"];Dl.prototype.show=function(){this.clear();El(this)};Dl.prototype.show=Dl.prototype.show;
function El(a){Fl(a,0,!1);if(null!==a.source){var b=a.ngeoQueryResult.sources;a.b.clear();for(var c=0;c<b.length;c++){var d=b[c];if(null===a.selectedSource||a.selectedSource===d)for(var d=d.features,e=0;e<d.length;e++)a.b.push(d[e])}Gl(a);a.open=!0}}
function Fl(a,b,c){var d=!1;if(b!==a.currentResult){var e,f,g,h=a.feature,k=a.ngeoQueryResult.sources;a.currentResult=b;for(e=0;e<k.length;e++)if(f=k[e],null===a.selectedSource||a.selectedSource===f)if(g=f.features,b>=g.length)b-=g.length;else{a.source=f;a.feature=f.features[b];d=!0;break}c&&Gl(a,h)}return d}Dl.prototype.previous=function(){var a=this.currentResult-1;0>a&&(a=this.te()-1);Fl(this,a,!0)&&(this.isNext=!1,this.animate++)};Dl.prototype.previous=Dl.prototype.previous;
Dl.prototype.next=function(){var a=this.currentResult+1;a>this.te()-1&&(a=0);Fl(this,a,!0)&&(this.isNext=!0,this.animate++)};Dl.prototype.next=Dl.prototype.next;Dl.prototype.te=function(){return null===this.selectedSource?this.ngeoQueryResult.total:this.selectedSource.features.length};Dl.prototype.getResultLength=Dl.prototype.te;Dl.prototype.hn=function(){return 0==this.currentResult};Dl.prototype.isFirst=Dl.prototype.hn;Dl.prototype.jn=function(){return this.currentResult==this.te()-1};
Dl.prototype.isLast=Dl.prototype.jn;Dl.prototype.Al=function(){return this.feature?this.ngeoFeatureHelper_.Sf(this.feature):null};Dl.prototype.getFeatureValues=Dl.prototype.Al;function Gl(a,b){a.g.clear();a.b.remove(a.feature);a.g.push(a.feature);void 0!==b&&a.b.push(b)}Dl.prototype.close=function(){this.open=!1;this.clear()};Dl.prototype.close=Dl.prototype.close;Dl.prototype.clear=function(){this.source=this.feature=null;this.currentResult=-1;this.b.clear();this.g.clear();this.selectedSource=null};
Dl.prototype.clear=Dl.prototype.clear;Dl.prototype.xp=function(a){a&&0>=a.features.length||(this.clear(),this.selectedSource=a,El(this))};Dl.prototype.setSelectedSource=Dl.prototype.xp;z.controller("GmfDisplayquerywindowController",Dl);w.value("ngeoSyncArrays",function(a,b,c,d,e){var f=d.$watchCollection(function(){return a},function(){var d,f,g;if(c)for(d=a.length-1,g=0;0<=d;--d)e(a[d])&&(b[g++]=a[d]);else for(d=0,f=a.length,g=0;d<f;++d)e(a[d])&&(b[g++]=a[d]);b.length=g}),g=d.$watchCollection(function(){return b},function(){var d,f,g;if(c)for(d=0,f=a.length,g=b.length-1;d<f;++d)e(a[d])&&(a[d]=b[g--]);else for(d=0,f=a.length,g=0;d<f;++d)e(a[d])&&(a[d]=b[g++])});return function(){f();g()}});function Hl(){}Hl.prototype.Ad=function(a){var b=new Date(a.minValue),c=new Date(a.maxValue),d=a.minDefValue?new Date(a.minDefValue):b,e=a.maxDefValue?new Date(a.maxDefValue):c;return{Pi:b.getTime(),Mi:c.getTime(),values:"range"===a.mode?[d.getTime(),e.getTime()]:d.getTime()}};Hl.prototype.getOptions=Hl.prototype.Ad;Hl.prototype.getUTCDate=function(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate())};Hl.prototype.getUTCDate=Hl.prototype.getUTCDate;w.service("ngeoTime",Hl);function Il(a){this.$filter_=a}A(Il,Hl);Il.$inject=["$filter"];function Jl(a,b,c,d){b=new Date(b);d=d?"UTC":void 0;switch(c){case "year":return a.$filter_("date")(b,"yyyy",d);case "month":return a.$filter_("date")(b,"yyyy-MM",d);case "day":return a.$filter_("date")(b,"yyyy-MM-dd",d);default:return b.toISOString().replace(/\.\d{3}/,"")}}Il.prototype.pe=function(a,b,c){return"range"===a.mode?Jl(this,b.start,a.resolution,c)+"/"+Jl(this,b.end,a.resolution,c):Jl(this,b.start,a.resolution,c)};
Il.prototype.formatWMSTimeParam=Il.prototype.pe;z.service("gmfWMSTime",Il);w.value("ngeoDecorateLayer",function(a){Object.defineProperty(a,"visible",{configurable:!0,get:function(){return He(a)},set:function(b){a.Ja(b)}});Object.defineProperty(a,"opacity",{configurable:!0,get:function(){return Math.round(100*Ge(a))/100+""},set:function(b){a.set("opacity",+b)}})});w.value("ngeoDecorateLayerLoading",function(a,b){function c(a){var b=a.get("load_count"),d=a.get("parent_group");a.set("load_count",++b,!0);d&&c(d)}function d(a){var b=a.get("load_count"),c=a.get("parent_group");a.set("load_count",--b,!0);c&&d(c)}var e,f=null,g=null;a.set("load_count",0,!0);if(a instanceof Cf)a.ha().on("add",function(b){b.element.set("parent_group",a)});if(a instanceof Ef){e=S(a);if(null===e)return;e instanceof Qg?(f=["tileloadstart"],g=["tileloadend","tileloaderror"]):e instanceof
pg&&(f=["imageloadstart"],g=["imageloadend","imageloaderror"]);e.on(f,function(){c(a);b.$applyAsync()});e.on(g,function(){d(a);b.$applyAsync()})}Object.defineProperty(a,"loading",{configurable:!0,get:function(){return 0<a.get("load_count")}})});w.value("ngeoLayertreeTemplateUrl",function(a,b){a=b.ngeoLayertreeTemplateurl;return void 0!==a?a:"ngeo/layertree.html"});function Kl(a,b){return{restrict:"A",scope:!0,templateUrl:b,controller:"NgeoLayertreeController"}}Kl.$inject=["$compile","ngeoLayertreeTemplateUrl"];w.directive("ngeoLayertree",Kl);
function Ll(a,b,c,d,e){this.isRoot=b=void 0===c.ngeoLayertreeNotroot;var f=c.ngeoLayertree;this.node=void 0;b?a.$watch(f,function(a){this.node=a}.bind(this)):this.node=a.$eval(f);f=a.$eval(c.ngeoLayertreeMap);this.parent=a.$parent.layertreeCtrl;this.uid=r(this);this.depth=b?0:this.parent.depth+1;a.uid=this.uid;a.depth=this.depth;this.map=f;f=c.ngeoLayertreeNodelayer;void 0===f&&(f=a.$eval(c.ngeoLayertreeNodelayerexpr));this.nodelayerExpr=f;if(this.layer=b?null:a.$eval(f,{node:this.node,depth:this.depth,
parentCtrl:this.parent}))e(this.layer,a),d(this.layer);d=c.ngeoLayertreeListeners;void 0===d&&(d=a.$eval(c.ngeoLayertreeListenersexpr));this.listenersExpr=d;null!=d&&a.$eval(d,{treeScope:a,treeCtrl:this});a.layertreeCtrl=this}u("ngeo.LayertreeController",Ll);Ll.$inject=["$scope","$element","$attrs","ngeoDecorateLayer","ngeoDecorateLayerLoading"];Ll.prototype.Kl=function(a){var b=this.layer,c=this.map;if(void 0!==a)a?ih(c,b):hh(c).ha().remove(b);else return 0<=c.ha().c.indexOf(b)};
Ll.prototype.getSetActive=Ll.prototype.Kl;w.controller("NgeoLayertreeController",Ll);function Ml(a){function b(a){this.anchorElm[0]!==a.target&&this.bodyElm.parent()[0]!==a.target&0===this.bodyElm.parent().find(a.target).length&&this.shown&&this.Kf()}this.shown=!1;this.bodyElm=this.anchorElm=void 0;angular.element("body").on("mousedown",b.bind(this));a.$on("$destroy",function(){angular.element("body").off("mousedown",b)})}u("ngeo.PopoverController",Ml);Ml.$inject=["$scope"];Ml.prototype.Kf=function(){this.shown=!1;this.anchorElm.popover("hide")};Ml.prototype.dismissPopover=Ml.prototype.Kf;
w.controller("NgeoPopoverController",Ml);
w.directive("ngeoPopover",function(){return{restrict:"A",scope:!0,controller:"NgeoPopoverController",controllerAs:"popoverCtrl",link:function(a,b,c,d){d.anchorElm.on("hidden.bs.popover",function(){d.anchorElm.data("bs.popover").inState.click=!1});d.anchorElm.on("inserted.bs.popover",function(){d.bodyElm.show();d.shown=!0});d.anchorElm.popover({container:"body",html:!0,content:d.bodyElm,placement:c.ngeoPopoverPlacement||"right"});if(c.ngeoPopoverDismiss)$(c.ngeoPopoverDismiss).on("scroll",function(){d.Kf()});
a.$on("$destroy",function(){d.anchorElm.popover("destroy");d.anchorElm.unbind("inserted.bs.popover");d.anchorElm.unbind("hidden.bs.popover")})}}});w.directive("ngeoPopoverAnchor",function(){return{restrict:"A",require:"^^ngeoPopover",link:function(a,b,c,d){d.anchorElm=b}}});w.directive("ngeoPopoverContent",function(){return{restrict:"A",require:"^^ngeoPopover",link:function(a,b,c,d){d.bodyElm=b;b.hide()}}});z.value("gmfLayertreeTemplate",function(){return'<div ngeo-layertree="gmfLayertreeCtrl.tree" ngeo-layertree-map="gmfLayertreeCtrl.map" ngeo-layertree-nodelayer="gmfLayertreeCtrl.getLayer(node, parentCtrl, depth)" ngeo-layertree-listeners="gmfLayertreeCtrl.listeners(treeScope, treeCtrl)" ngeo-layertree-templateurl="gmf/layertree.html"></div>'});w.value("ngeoLayertreeTemplateUrl",function(){return"gmf/layertree.html"});
function Nl(a){return{scope:{map:"=gmfLayertreeMap",tree:"=gmfLayertreeSource",dimensions:"=?gmfLayertreeDimensions",openLinksInNewWindowFn:"&gmfLayertreeOpenlinksinnewwindow"},bindToController:!0,controller:"GmfLayertreeController",controllerAs:"gmfLayertreeCtrl",template:a}}Nl.$inject=["gmfLayertreeTemplate"];z.directive("gmfLayertree",Nl);
function Ol(a,b,c,d,e,f,g,h,k){this.ia=a;this.B=b;this.i=f;this.b=e;this.f=g;this.c=k;this.u=d();this.j={};this.s={};this.openLinksInNewWindow=!0===this.openLinksInNewWindowFn()?!0:!1;this.o=this.b.qc(this.map,"data");this.layers=[];h(this.o.ha().c,this.layers,!0,c,function(){return!0});c.$watchCollection(function(){return this.layers}.bind(this),function(){this.map.render()}.bind(this));c.$watchCollection(function(){return this.dimensions}.bind(this),function(){Pl(this,this.f.tree)}.bind(this))}
u("gmf.LayertreeController",Ol);Ol.$inject="$http $sce $scope ngeoCreatePopup ngeoLayerHelper gmfWmsUrl gmfTreeManager ngeoSyncArrays gmfWMSTime".split(" ");function Pl(a,b){b.children.forEach(function(a){if(a.children)Pl(this,a);else if(a.dimensions){var b=hh(this.map).zd();(b=this.b.bc(a.name,b))&&Ql(this,b,a)}},a)}
function Ql(a,b,c){if(a.dimensions&&c.dimensions){var d={},e;for(e in c.dimensions){var f=a.dimensions[e];void 0!==f&&(d[e]=f)}Zb(d)||(e=S(b),e instanceof dh?e.jd(d):e instanceof yg?e.updateParams(d):rc(b,function(){Ql(this,b,c)}.bind(a)))}}
function Rl(a,b,c){var d=qh(b),e=wh(b),f=wh(b,!0),g=[];c.set("querySourceIds",e);c.set("editableIds",f);c.set("layerNodeName",b.name);c.set("disclaimers",Sl(a,b));a=d===uh;c.set("isMerged",a);d=b.metadata;a?(oh(b,g),(b=g.every(function(a){return!a.metadata||!a.metadata.isChecked}))&&c.Ja(!1)):void 0===b.children&&null!=d&&(d.isChecked||c.Ja(!1))}
Ol.prototype.ya=function(a,b,c){var d=qh(a),e;if(1===c){switch(d){case rh:e=Tl(this);break;case uh:e=Ul(this,a);Rl(this,a,e);break;default:throw Error("Node wrong type: "+d);}a=this.f.tree.children.length-this.f.f|0;Ac(this.o.ha(),a,e);return e}if(!b||qh(b.node)!==rh)return null;switch(d){case rh:e=Tl(this);break;case uh:e=Ul(this,a);break;case sh:e=Vl(this,a);break;case th:c=a.url||this.i;a.time&&(d=a.time,e=this.c.Ad(d).values,e=this.c.pe(d,{start:e[0]||e,end:e[1]}));e=this.b.ne(c,a.layers,a.serverType,
e);break;default:throw Error("Node wrong type: "+d);}Rl(this,a,e);Ql(this,e,a);Ac(b.layer.ha(),0,e);return e};Ol.prototype.getLayer=Ol.prototype.ya;function Tl(a){var b=a.b.me();a.s[r(b)]=[];return b}
function Ul(a,b){var c=[],d;oh(b,c);var e=c.map(function(a){return a.layers}).reverse().join(","),f=b.url||a.i,g=b.children[0].serverType;b=[b].concat(c).filter(function(a){return a.time&&a.time.minValue});b.length&&(b=b[0].time,d=a.c.Ad(b).values,d=a.c.pe(b,{start:d[0]||d,end:d[1]}));e=a.b.ne(f,e,g,d);a.s[r(e)]=[];return e}
function Vl(a,b){var c=new Gf;a.b.Ff(b.url,b.layer,b.dimensions).then(function(a){var b=S(a);c.set("source",b);c.set("capabilitiesStyles",a.get("capabilitiesStyles"))});return c}function Wl(a){for(;1<a.depth;)a=a.parent;return a}Ol.prototype.listeners=function(a,b){var c=this.o;a.$on("$destroy",function(){c.ha().remove(b.layer)}.bind(b))};Ol.prototype.listeners=Ol.prototype.listeners;
Ol.prototype.Il=function(a){var b,c=T(this.map).ca(),d=a.maxResolutionHint;a=a.minResolutionHint;if(void 0!==a&&c<a||void 0!==d&&c>d)b="out-of-resolution";return b||null};Ol.prototype.getResolutionStyle=Ol.prototype.Il;
Ol.prototype.Kp=function(a){var b=a.node,c=[],d=qh(b),e=a.layer,f;f=Wl(a);var g=f.layer;a="on"===this.ei(a)?!0:!1;switch(d){case th:case sh:if(g instanceof Cf)e.Ja(!a);else{d=S(g);f=f.node;var e=He(g)?d.Ha.LAYERS:"",h=[];oh(f,c);for(f=0;f<c.length;f++)d=this.g(c[f]),d===this.g(b)?a||h.push(d):Xl(e,d)&&h.push(d);this.b.kd(g,h.reverse().join(","))}break;case rh:e=[];oh(b,c);d=c.map(this.g).join(",");b=this.b.yd(g);for(f=0;f<b.length;f++)c=b[f],g=S(b[f]),g instanceof dh?Xl(d,g.ya())&&e.push(c):g instanceof
yg&&Xl(d,g.Ha.LAYERS)&&e.push(c);for(f=0;f<e.length;f++)e[f].Ja(!a);break;case uh:a?this.b.kd(g,""):(oh(b,c),d=c.map(this.g),this.b.kd(g,d.reverse().join(",")))}};Ol.prototype.toggleActive=Ol.prototype.Kp;function Xl(a,b){var c=a.split(",");return b.split(",").every(function(a){return 0<=c.indexOf(a)})}Ol.prototype.g=function(a){var b=qh(a);switch(b){case th:return a.layers;case sh:return a.layer;default:throw Error("Node wrong type to get layer(s) name(s): "+b);}};
Ol.prototype.ei=function(a){var b,c=a.layer,d=a.node,e=qh(d),f=Wl(a).layer;a=this.s[r(f)];switch(e){case th:case sh:f instanceof Cf?b=null!=c&&He(c)?"on":"off":(b=S(f),b=Xl(b.Ha.LAYERS,this.g(d))&&He(f)?"on":"off");"on"===b?Gc(a,d.name)||a.push(d.name):Jc(a,d.name);break;case rh:case uh:b=[];c=[];oh(d,c);for(e=0;e<c.length;e++)d=c[e],b.push(d.name);for(d=c=0;d<b.length;d++)0<=a.indexOf(b[d])&&c++;b=0===c?"off":c===b.length?"on":"indeterminate"}return b||"off"};Ol.prototype.getNodeState=Ol.prototype.ei;
Ol.prototype.Xp=function(a,b){var c=a.node.time;if(b&&(a=a.layer||Wl(a).layer)){var d=S(a);b=this.c.pe(c,b);this.b.kd(a,d.Ha.LAYERS,b)}};Ol.prototype.updateWMSTimeLayerState=Ol.prototype.Xp;Ol.prototype.Gl=function(a){a=a.node;var b=a.metadata.iconUrl;if(void 0!==b)return b;b=a.metadata.legendRule;return void 0!==a.children||void 0===b||"WMTS"===a.type||"external WMS"===a.type||void 0!==a.childLayers&&1<a.childLayers.length?null:this.b.we(a.url||this.i,a.layers.split(",")[0],void 0,b)};
Ol.prototype.getLegendIconURL=Ol.prototype.Gl;Ol.prototype.Hl=function(a){var b=a.node;if(void 0!==b.children)return null;if(b.metadata.legendImage)return b.metadata.legendImage;a=a.layer;if("WMTS"===b.type&&null!=a)return this.b.dg(a);a=b.url||this.i;b=b.layers.split(",");return 1<b.length?null:this.b.we(a,b[0],Yl(this))};Ol.prototype.getLegendURL=Ol.prototype.Hl;function Yl(a){var b=T(a.map);a=b.ca();b=Xe(b.da());return 25.4/.28*b*39.37*a}
Ol.prototype.kl=function(a){var b=a.uid.toString(),c=a.node;a=c.metadata.metadataUrl;if(void 0!==a){b in this.j||(this.j[b]=this.ia.get(a).then(function(a){return this.B.trustAsHtml(a.data)}.bind(this)));var d=this.u;this.j[b].then(function(a){d.Og(c.name);d.Ze(a);d.af(!0)})}};Ol.prototype.displayMetadata=Ol.prototype.kl;Ol.prototype.removeNode=function(a){this.f.Ig(a)};Ol.prototype.removeNode=Ol.prototype.removeNode;
Ol.prototype.mq=function(a){var b=a.node;a=T(this.map);b=b.minResolutionHint||b.maxResolutionHint;void 0!==b&&(b=a.Za(b,0,1),a.set(Zl,b))};Ol.prototype.zoomToResolution=Ol.prototype.mq;function wh(a,b){var c=!0===b,d=[];(b=a.children||a)&&b.length?b.forEach(function(a){d=d.concat(wh(a,c))}):void 0===a.id||c&&!a.editable||d.push(a.id);return d}Ol.prototype.Mp=function(a){$(a).toggle({toggle:!0})};Ol.prototype.toggleNodeLegend=Ol.prototype.Mp;
function Sl(a,b){var c=[],d=b.children||b;d&&d.length?d.forEach(function(a){Sl(this,a).forEach(function(a){-1===c.indexOf(a)&&c.push(a)})},a):void 0!==b.metadata&&void 0!==b.metadata.disclaimer&&-1===c.indexOf(b.metadata.disclaimer)&&c.push(b.metadata.disclaimer);return c}z.controller("GmfLayertreeController",Ol);function $l(){}$l.prototype.Nj=function(a){var b=a.match(/([\d\.']+)[\s,]+([\d\.']+)/);return!b||(a=parseFloat(b[1].replace("'","")),b=parseFloat(b[2].replace("'","")),isNaN(a)||isNaN(b))?null:[a,b]};$l.prototype.stringToCoordinates=$l.prototype.Nj;$l.prototype.Yf=function(a){var b,c,d=[];a.forEach(function(a){b=a.toUpperCase();"EPSG:"!=b.substr(0,5)&&(b="EPSG:"+b);c=Te(b);null!==c?d.push(c):console.error("The projection "+b+" is not defined in ol.proj.")});return d};
$l.prototype.getProjectionList=$l.prototype.Yf;$l.prototype.Ug=function(a,b,c,d){var e;void 0===d&&(d=[c]);d.some(function(d){e=hf(a,d,c);if(Zc(b,e[0],e[1]))return!0;e=null});return e};$l.prototype.tryProjections=$l.prototype.Ug;$l.prototype.Vg=function(a,b,c,d){var e=this.Ug(a,b,c,d);null===e&&(e=this.Ug(a.reverse(),b,c,d));return e};$l.prototype.tryProjectionsWithInversion=$l.prototype.Vg;w.service("ngeoAutoProjection",$l);function am(a){return function(b,c,d){var e=null;return function(){var f=this,g=arguments;null!==e&&a.cancel(e);e=a(function(){e=null;b.apply(f,g)},c,d)}}}am.$inject=["$timeout"];w.factory("ngeoDebounce",am);function bm(a){var b=a("number");return function(a){return(a=b(a,0))?"1\u00a0:\u00a0"+a:""}}bm.$inject=["$filter"];w.filter("ngeoScalify",bm);
function cm(a){var b=a.NUMBER_FORMATS;return function(a,d){var e=b.GROUP_SEP,f=b.DECIMAL_SEP;void 0===d&&(d=3);if(Infinity===a)return"\u221e";if(-Infinity===a)return"-\u221e";if(0===a)return"0";var g=0>a;a=Math.abs(a);var h=d-Math.floor(Math.log(a)/Math.log(10))-1,k=Math.pow(10,h);a=Math.round(a*k);d="";k=Math.floor(a/k);if(0<h){for(d=a+"";d.length<h;)d="0"+d;for(d=d.substring(d.length-h);"0"===d[d.length-1];)d=d.substring(0,d.length-1)}a=[];for(h=k+"";3<h.length;)k=h.length-3,a.unshift(h.substring(k)),
h=h.substring(0,k);a.unshift(h);return(g?"-":"")+a.join(e)+(0===d.length?"":f+d)}}cm.$inject=["$locale"];w.filter("ngeoNumber",cm);function dm(a){var b=a("ngeoNumber"),c=" k M G T P".split(" "),d=" Ki Mi Gi Ti Pi".split(" ");return function(a,f,g,h){void 0===f&&(f="");var k=1E3,m=c;"square"===g?k=1E6:"binary"===g&&(k=1024,m=d);g=0;for(var n=m.length-1;a>=k&&g<n;)a/=k,g++;f=m[g]+f;k=0==f.length?"":"\u00a0";return b(a,h)+k+f}}dm.$inject=["$filter"];w.filter("ngeoUnitPrefix",dm);
function em(a){return function(b,c,d){d=d?d:"{x} {y}";var e=b[0];b=b[1];c=parseInt(c,10)|0;e=a("number")(e,c);b=a("number")(b,c);return d.replace("{x}",e).replace("{y}",b)}}em.$inject=["$filter"];w.filter("ngeoNumberCoordinates",em);
w.filter("ngeoDMSCoordinates",function(){function a(a,c,d){a=(a+180)%360;a=(0>360*a?a+360:a)-180;var e=Math.abs(3600*a),f=e%60;return Math.floor(e/3600)+"\u00b0 "+Ha(Math.floor(e/60%60),2)+"\u2032 "+Ha(f,2,d)+"\u2033 "+c.charAt(0>a?1:0)}return function(b,c,d){c=parseInt(c,10)|0;d=d?d:"{x} {y}";var e=a(b[1],"NS",c);b=a(b[0],"EW",c);return d.replace("{x}",e).replace("{y}",b)}});function fm(a){return function(b){return void 0!==b&&null!==b?a.trustAsHtml(""+b):a.trustAsHtml("&nbsp;")}}fm.$inject=["$sce"];
w.filter("ngeoTrustHtml",fm);var gm=!Pf||9<=Number(bg),hm=!Rf&&!Pf||Pf&&9<=Number(bg)||Rf&&$f("1.9.1");Pf&&$f("9");function im(a,b){this.x=ba(a)?a:0;this.y=ba(b)?b:0}l=im.prototype;l.clone=function(){return new im(this.x,this.y)};l.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};l.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};l.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};l.translate=function(a,b){a instanceof im?(this.x+=a.x,this.y+=a.y):(this.x+=Number(a),ha(b)&&(this.y+=b));return this};
l.scale=function(a,b){b=ha(b)?b:a;this.x*=a;this.y*=b;return this};function jm(a,b){this.width=a;this.height=b}l=jm.prototype;l.clone=function(){return new jm(this.width,this.height)};l.area=function(){return this.width*this.height};l.Cb=function(){return!this.area()};l.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};l.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};l.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
l.scale=function(a,b){b=ha(b)?b:a;this.width*=a;this.height*=b;return this};function km(a){return a?new lm(mm(a)):ua||(ua=new lm)}function nm(a,b){var c=b||document,d=null;c.getElementsByClassName?d=c.getElementsByClassName(a)[0]:c.querySelectorAll&&c.querySelector?d=c.querySelector("."+a):d=om(a,b)[0];return d||null}
function om(a,b){var c,d,e;c=document;b=b||c;if(b.querySelectorAll&&b.querySelector&&a)return b.querySelectorAll(""+(a?"."+a:""));if(a&&b.getElementsByClassName){var f=b.getElementsByClassName(a);return f}f=b.getElementsByTagName("*");if(a){e={};for(c=d=0;b=f[c];c++){var g=b.className,h;if(h="function"==typeof g.split)h=0<=Ka(g.split(/\s+/),a);h&&(e[d++]=b)}e.length=d;return e}return f}
function pm(a,b){Ra(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:qm.hasOwnProperty(d)?a.setAttribute(qm[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var qm={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function rm(a){var b=a.scrollingElement?a.scrollingElement:Sf?a.body||a.documentElement:a.documentElement;a=a.parentWindow||a.defaultView;return Pf&&$f("10")&&a.pageYOffset!=b.scrollTop?new im(b.scrollLeft,b.scrollTop):new im(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)}
function sm(a,b,c){var d=arguments,e=document,f=String(d[0]),g=d[1];if(!gm&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',wa(g.name),'"');if(g.type){f.push(' type="',wa(g.type),'"');var h={};Xa(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=e.createElement(f);g&&(ga(g)?f.className=g:ea(g)?f.className=g.join(" "):pm(f,g));2<d.length&&tm(e,f,d,2);return f}
function tm(a,b,c,d){function e(c){c&&b.appendChild(ga(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];!fa(f)||ja(f)&&0<f.nodeType?e(f):La(um(f)?Pa(f):f,e)}}function vm(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function wm(a){return hm&&a.children?a.children:Na(a.childNodes,function(a){return 1==a.nodeType})}function xm(a){if(ba(a.nextElementSibling))a=a.nextElementSibling;else for(a=a.nextSibling;a&&1!=a.nodeType;)a=a.nextSibling;return a}
function ym(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function mm(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function um(a){if(a&&"number"==typeof a.length){if(ja(a))return"function"==typeof a.item||"string"==typeof a.item;if(ia(a))return"function"==typeof a.item}return!1}
function lm(a){this.b=a||aa.document||document}l=lm.prototype;l.Ma=pm;l.createElement=function(a){return this.b.createElement(String(a))};l.appendChild=function(a,b){a.appendChild(b)};l.append=function(a,b){tm(mm(a),a,arguments,1)};l.removeNode=vm;l.isElement=function(a){return ja(a)&&1==a.nodeType};l.contains=ym;function zm(a){if(a.classList)return a.classList;a=a.className;return ga(a)&&a.match(/\S+/g)||[]}function Am(a,b){a.classList?b=a.classList.contains(b):(a=zm(a),b=0<=Ka(a,b));return b}function Bm(a,b){a.classList?a.classList.add(b):Am(a,b)||(a.className+=0<a.className.length?" "+b:b)}function Cm(a,b){if(a.classList)La(b,function(b){Bm(a,b)});else{var c={};La(zm(a),function(a){c[a]=!0});La(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function Dm(a,b){a.classList?a.classList.remove(b):Am(a,b)&&(a.className=Na(zm(a),function(a){return a!=b}).join(" "))}function Em(a,b){a.classList?La(b,function(b){Dm(a,b)}):a.className=Na(zm(a),function(a){return!(0<=Ka(b,a))}).join(" ")};function Fm(a,b,c){Pb.call(this,a);this.map=b;this.frameState=void 0!==c?c:null}A(Fm,Pb);function Gm(a,b){this.b=a;this.i=b};function Hm(a){Gm.call(this,a,{mousedown:this.uo,mousemove:this.vo,mouseup:this.yo,mouseover:this.xo,mouseout:this.wo});this.g=a.g;this.c=[]}A(Hm,Gm);function Im(a,b){a=a.c;var c=b.clientX;b=b.clientY;for(var d=0,e=a.length,f;d<e&&(f=a[d]);d++){var g=Math.abs(b-f[1]);if(25>=Math.abs(c-f[0])&&25>=g)return!0}return!1}function Jm(a){var b=Km(a,a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=1;b.isPrimary=!0;b.pointerType="mouse";return b}l=Hm.prototype;
l.uo=function(a){if(!Im(this,a)){(1).toString()in this.g&&this.cancel(a);var b=Jm(a);this.g[(1).toString()]=a;Lm(this.b,Mm,b,a)}};l.vo=function(a){if(!Im(this,a)){var b=Jm(a);this.b.move(b,a)}};l.yo=function(a){if(!Im(this,a)){var b=this.g[(1).toString()];b&&b.button===a.button&&(b=Jm(a),Lm(this.b,Nm,b,a),delete this.g[(1).toString()])}};l.xo=function(a){if(!Im(this,a)){var b=Jm(a);Om(this.b,b,a)}};l.wo=function(a){if(!Im(this,a)){var b=Jm(a);Pm(this.b,b,a)}};
l.cancel=function(a){var b=Jm(a);this.b.cancel(b,a);delete this.g[(1).toString()]};function Qm(a){Gm.call(this,a,{MSPointerDown:this.Bn,MSPointerMove:this.Cn,MSPointerUp:this.Fn,MSPointerOut:this.Dn,MSPointerOver:this.En,MSPointerCancel:this.An,MSGotPointerCapture:this.yn,MSLostPointerCapture:this.zn});this.g=a.g;this.c=["","unavailable","touch","pen","mouse"]}A(Qm,Gm);function Rm(a,b){var c=b;"number"===typeof b.pointerType&&(c=Km(b,b),c.pointerType=a.c[b.pointerType]);return c}l=Qm.prototype;l.Bn=function(a){this.g[a.pointerId.toString()]=a;var b=Rm(this,a);Lm(this.b,Mm,b,a)};
l.Cn=function(a){var b=Rm(this,a);this.b.move(b,a)};l.Fn=function(a){var b=Rm(this,a);Lm(this.b,Nm,b,a);delete this.g[a.pointerId.toString()]};l.Dn=function(a){var b=Rm(this,a);Pm(this.b,b,a)};l.En=function(a){var b=Rm(this,a);Om(this.b,b,a)};l.An=function(a){var b=Rm(this,a);this.b.cancel(b,a);delete this.g[a.pointerId.toString()]};l.zn=function(a){F(this.b,new Sm("lostpointercapture",a,a))};l.yn=function(a){F(this.b,new Sm("gotpointercapture",a,a))};function Tm(a){Gm.call(this,a,{pointerdown:this.Ko,pointermove:this.Lo,pointerup:this.Oo,pointerout:this.Mo,pointerover:this.No,pointercancel:this.Jo,gotpointercapture:this.lm,lostpointercapture:this.un})}A(Tm,Gm);l=Tm.prototype;l.Ko=function(a){Um(this.b,a)};l.Lo=function(a){Um(this.b,a)};l.Oo=function(a){Um(this.b,a)};l.Mo=function(a){Um(this.b,a)};l.No=function(a){Um(this.b,a)};l.Jo=function(a){Um(this.b,a)};l.un=function(a){Um(this.b,a)};l.lm=function(a){Um(this.b,a)};function Sm(a,b,c){Pb.call(this,a);this.b=b;a=c?c:{};this.buttons=Vm(a);this.pressure=Wm(a,this.buttons);this.bubbles="bubbles"in a?a.bubbles:!1;this.cancelable="cancelable"in a?a.cancelable:!1;this.view="view"in a?a.view:null;this.detail="detail"in a?a.detail:null;this.screenX="screenX"in a?a.screenX:0;this.screenY="screenY"in a?a.screenY:0;this.clientX="clientX"in a?a.clientX:0;this.clientY="clientY"in a?a.clientY:0;this.button="button"in a?a.button:0;this.relatedTarget="relatedTarget"in a?a.relatedTarget:
null;this.pointerId="pointerId"in a?a.pointerId:0;this.width="width"in a?a.width:0;this.height="height"in a?a.height:0;this.pointerType="pointerType"in a?a.pointerType:"";this.isPrimary="isPrimary"in a?a.isPrimary:!1;b.preventDefault&&(this.preventDefault=function(){b.preventDefault()})}A(Sm,Pb);function Vm(a){if(a.buttons||Xm)a=a.buttons;else switch(a.which){case 1:a=1;break;case 2:a=4;break;case 3:a=2;break;default:a=0}return a}
function Wm(a,b){var c=0;a.pressure?c=a.pressure:c=b?.5:0;return c}var Xm=!1;try{Xm=1===(new MouseEvent("click",{buttons:1})).buttons}catch(a){};function Ym(a,b){Gm.call(this,a,{touchstart:this.Rp,touchmove:this.Qp,touchend:this.Pp,touchcancel:this.Op});this.g=a.g;this.j=b;this.c=void 0;this.o=0;this.f=void 0}A(Ym,Gm);l=Ym.prototype;l.Ej=function(){this.o=0;this.f=void 0};
function Zm(a,b,c){b=Km(b,c);b.pointerId=c.identifier+2;b.bubbles=!0;b.cancelable=!0;b.detail=a.o;b.button=0;b.buttons=1;b.width=c.webkitRadiusX||c.radiusX||0;b.height=c.webkitRadiusY||c.radiusY||0;b.pressure=c.webkitForce||c.force||.5;b.isPrimary=a.c===c.identifier;b.pointerType="touch";b.clientX=c.clientX;b.clientY=c.clientY;b.screenX=c.screenX;b.screenY=c.screenY;return b}
function $m(a,b,c){function d(){b.preventDefault()}var e=Array.prototype.slice.call(b.changedTouches),f=e.length,g,h;for(g=0;g<f;++g)h=Zm(a,b,e[g]),h.preventDefault=d,c.call(a,b,h)}
l.Rp=function(a){var b=a.touches,c=Object.keys(this.g),d=c.length;if(d>=b.length){var e=[],f,g,h;for(f=0;f<d;++f){g=c[f];h=this.g[g];var k;if(!(k=1==g))a:{k=b.length;for(var m,n=0;n<k;n++)if(m=b[n],m.identifier===g-2){k=!0;break a}k=!1}k||e.push(h.out)}for(f=0;f<e.length;++f)this.zf(a,e[f])}b=a.changedTouches[0];c=Object.keys(this.g).length;if(0===c||1===c&&(1).toString()in this.g)this.c=b.identifier,b=Ub,void 0!==this.f&&b.clearTimeout(this.f);an(this,a);this.o++;$m(this,a,this.Go)};
l.Go=function(a,b){this.g[b.pointerId]={target:b.target,out:b,ij:b.target};var c=this.b;b.bubbles=!0;Lm(c,bn,b,a);this.b.enter(b,a);Lm(this.b,Mm,b,a)};l.Qp=function(a){a.preventDefault();$m(this,a,this.xn)};l.xn=function(a,b){var c=this.g[b.pointerId];if(c){var d=c.out,e=c.ij;this.b.move(b,a);d&&e!==b.target&&(d.relatedTarget=b.target,b.relatedTarget=e,d.target=e,b.target?(Pm(this.b,d,a),Om(this.b,b,a)):(b.target=e,b.relatedTarget=null,this.zf(a,b)));c.out=b;c.ij=b.target}};
l.Pp=function(a){an(this,a);$m(this,a,this.Vp)};l.Vp=function(a,b){Lm(this.b,Nm,b,a);this.b.out(b,a);this.b.leave(b,a);delete this.g[b.pointerId];b.isPrimary&&(this.c=void 0,this.f=Ub.setTimeout(this.Ej.bind(this),200))};l.Op=function(a){$m(this,a,this.zf)};l.zf=function(a,b){this.b.cancel(b,a);this.b.out(b,a);this.b.leave(b,a);delete this.g[b.pointerId];b.isPrimary&&(this.c=void 0,this.f=Ub.setTimeout(this.Ej.bind(this),200))};
function an(a,b){var c=a.j.c;b=b.changedTouches[0];if(a.c===b.identifier){var d=[b.clientX,b.clientY];c.push(d);Ub.setTimeout(function(){Jc(c,d)},2500)}};function cn(a){fc.call(this);this.f=a;this.g={};this.c={};this.b=[];ci?dn(this,new Tm(this)):di?dn(this,new Qm(this)):(a=new Hm(this),dn(this,a),bi&&dn(this,new Ym(this,a)));a=this.b.length;for(var b,c=0;c<a;c++)b=this.b[c],en(this,Object.keys(b.i))}A(cn,fc);function dn(a,b){var c=Object.keys(b.i);c&&(c.forEach(function(a){var c=b.i[a];c&&(this.c[a]=c.bind(b))},a),a.b.push(b))}l=cn.prototype;l.bj=function(a){var b=this.c[a.type];b&&b(a)};
function en(a,b){b.forEach(function(a){E(this.f,a,this.bj,this)},a)}function fn(a,b){b.forEach(function(a){ec(this.f,a,this.bj,this)},a)}function Km(a,b){for(var c={},d,e=0,f=gn.length;e<f;e++)d=gn[e][0],c[d]=a[d]||b[d]||gn[e][1];return c}l.move=function(a,b){Lm(this,hn,a,b)};l.enter=function(a,b){a.bubbles=!1;Lm(this,jn,a,b)};l.leave=function(a,b){a.bubbles=!1;Lm(this,kn,a,b)};l.out=function(a,b){a.bubbles=!0;Lm(this,ln,a,b)};l.cancel=function(a,b){Lm(this,mn,a,b)};
function Pm(a,b,c){a.out(b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||a.leave(b,c)}function Om(a,b,c){b.bubbles=!0;Lm(a,bn,b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||a.enter(b,c)}function Lm(a,b,c,d){F(a,new Sm(b,d,c))}function Um(a,b){F(a,new Sm(b.type,b,b))}l.sa=function(){for(var a=this.b.length,b,c=0;c<a;c++)b=this.b[c],fn(this,Object.keys(b.i));fc.prototype.sa.call(this)};
var hn="pointermove",Mm="pointerdown",Nm="pointerup",bn="pointerover",ln="pointerout",jn="pointerenter",kn="pointerleave",mn="pointercancel",gn=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",
!1],["type",""],["target",null],["currentTarget",null],["which",0]];function nn(a,b,c,d,e){Fm.call(this,a,b,e);this.originalEvent=c;this.pixel=on(b,c);this.coordinate=b.va(this.pixel);this.dragging=void 0!==d?d:!1}A(nn,Fm);nn.prototype.preventDefault=function(){Fm.prototype.preventDefault.call(this);this.originalEvent.preventDefault()};nn.prototype.stopPropagation=function(){Fm.prototype.stopPropagation.call(this);this.originalEvent.stopPropagation()};function pn(a,b,c,d,e){nn.call(this,a,b,c.b,d,e);this.b=c}A(pn,nn);
function qn(a){fc.call(this);this.c=a;this.o=0;this.j=!1;this.f=[];this.g=null;a=this.c.c;this.v=0;this.u={};this.i=new cn(a);this.b=null;this.s=E(this.i,Mm,this.Jm,this);this.B=E(this.i,hn,this.kp,this)}A(qn,fc);function rn(a,b){var c;c=new pn(sn,a.c,b);F(a,c);0!==a.o?(Ub.clearTimeout(a.o),a.o=0,c=new pn(tn,a.c,b),F(a,c)):a.o=Ub.setTimeout(function(){this.o=0;var a=new pn(un,this.c,b);F(this,a)}.bind(a),250)}
function vn(a,b){b.type==wn||b.type==xn?delete a.u[b.pointerId]:b.type==yn&&(a.u[b.pointerId]=!0);a.v=Object.keys(a.u).length}l=qn.prototype;l.Ei=function(a){vn(this,a);var b=new pn(wn,this.c,a);F(this,b);!this.j&&0===a.button&&rn(this,this.g);0===this.v&&(this.f.forEach(B),this.f.length=0,this.j=!1,this.g=null,this.b.Va(),this.b=null)};
l.Jm=function(a){vn(this,a);var b=new pn(yn,this.c,a);F(this,b);this.g=a;0===this.f.length&&(this.b=new cn(document),this.f.push(E(this.b,zn,this.ho,this),E(this.b,wn,this.Ei,this),E(this.i,xn,this.Ei,this)))};l.ho=function(a){if(a.clientX!=this.g.clientX||a.clientY!=this.g.clientY){this.j=!0;var b=new pn(An,this.c,a,this.j);F(this,b)}a.preventDefault()};l.kp=function(a){F(this,new pn(a.type,this.c,a,!(!this.g||a.clientX==this.g.clientX&&a.clientY==this.g.clientY)))};
l.sa=function(){this.B&&(B(this.B),this.B=null);this.s&&(B(this.s),this.s=null);this.f.forEach(B);this.f.length=0;this.b&&(this.b.Va(),this.b=null);this.i&&(this.i.Va(),this.i=null);fc.prototype.sa.call(this)};var un="singleclick",sn="click",tn="dblclick",An="pointerdrag",zn="pointermove",yn="pointerdown",wn="pointerup",xn="pointercancel",Bn={Cq:un,qq:sn,rq:tn,uq:An,xq:zn,tq:yn,Aq:wn,zq:"pointerover",yq:"pointerout",vq:"pointerenter",wq:"pointerleave",sq:xn};function Cn(a){return function(b){if(b)return[ze(b[0],a[0],a[2]),ze(b[1],a[1],a[3])]}}function Dn(a){return a};function En(a,b,c){this.center=a;this.resolution=b;this.rotation=c};function Fn(a){return function(b,c,d){if(void 0!==b)return b=Hc(a,b,d),b=ze(b+c,0,a.length-1),c=Math.floor(b),b!=c&&c<a.length-1?a[c]/Math.pow(a[c]/a[c+1],b-c):a[c]}}function Gn(a,b,c){return function(d,e,f){if(void 0!==d)return d=Math.max(Math.floor(Math.log(b/d)/Math.log(a)+(-f/2+.5))+e,0),void 0!==c&&(d=Math.min(d,c)),b/Math.pow(a,d)}};function Hn(a){if(void 0!==a)return 0}function In(a,b){if(void 0!==a)return a+b}function Jn(a){var b=2*Math.PI/a;return function(a,d){if(void 0!==a)return a=Math.floor((a+d)/b+.5)*b}}function Kn(){var a=Ce(5);return function(b,c){if(void 0!==b)return Math.abs(b+c)<=a?0:b+c}};function Ln(a,b){a[0]+=b[0];a[1]+=b[1]}function Mn(a,b){var c=a[0];a=a[1];var d=b[0],e=b[1];b=d[0];var d=d[1],f=e[0],e=e[1],g=f-b,h=e-d,c=0===g&&0===h?0:(g*(c-b)+h*(a-d))/(g*g+h*h||0);0>=c?(a=b,c=d):1<=c?(a=f,c=e):(a=b+c*g,c=d+c*h);return[a,c]}function Nn(a,b){for(var c=!0,d=a.length-1;0<=d;--d)if(a[d]!=b[d]){c=!1;break}return c}function On(a,b){var c=Math.cos(b);b=Math.sin(b);var d=a[1]*c+a[0]*b;a[0]=a[0]*c-a[1]*b;a[1]=d}function Pn(a,b){var c=a[0]-b[0];a=a[1]-b[1];return c*c+a*a};function Qn(a){uc.call(this);a=a||{};this.f=[0,0];var b={};b[Rn]=void 0!==a.center?a.center:null;this.B=df(a.projection);var c,d,e,f=void 0!==a.Rb?a.Rb:0;c=void 0!==a.ub?a.ub:28;var g=void 0!==a.g?a.g:2;if(void 0!==a.Ra)c=a.Ra,d=c[0],e=c[c.length-1],c=Fn(c);else{d=df(a.projection);e=d.I();var h=(e?Math.max(ld(e),md(e)):360*Pe.degrees/Xe(d))/256/Math.pow(2,0),k=h/Math.pow(2,28);d=a.Qb;void 0!==d?f=0:d=h/Math.pow(g,f);e=a.Db;void 0===e&&(e=void 0!==a.ub?void 0!==a.Qb?d/Math.pow(g,c):h/Math.pow(g,c):
k);c=f+Math.floor(Math.log(d/e)/Math.log(g));e=d/Math.pow(g,c-f);c=Gn(g,d,c-f)}this.i=d;this.s=e;this.u=g;this.o=a.Ra;this.j=f;f=void 0!==a.extent?Cn(a.extent):Dn;(void 0!==a.b?a.b:1)?(g=a.Ef,g=void 0===g||!0===g?Kn():!1===g?In:"number"===typeof g?Jn(g):In):g=Hn;this.c=new En(f,c,g);void 0!==a.resolution?b[Zl]=a.resolution:void 0!==a.zoom&&(b[Zl]=this.Za(this.i,a.zoom-this.j));b[Sn]=void 0!==a.rotation?a.rotation:0;this.Ma(b)}A(Qn,uc);l=Qn.prototype;
l.Za=function(a,b,c){return this.c.resolution(a,b||0,c||0)};l.Ef=function(a,b){return this.c.rotation(a,b||0)};l.la=function(){return this.get(Rn)};function Tn(a,b){return void 0!==b?(b[0]=a.f[0],b[1]=a.f[1],b):a.f.slice()}function Un(a,b){var c=a.la();Rc(c,1);var d=a.ca();Rc(void 0!==d,2);a=Vn(a);Rc(void 0!==a,3);return od(c,d,a,b)}l.da=function(){return this.B};l.ca=function(){return this.get(Zl)};function Wn(a,b){return Math.max(ld(a)/b[0],md(a)/b[1])}function Vn(a){return a.get(Sn)}
l.ma=function(){var a=this.la(),b=this.da(),c=this.ca(),d=Vn(this);return{center:a.slice(),projection:void 0!==b?b:null,resolution:c,rotation:d}};function Xn(a){var b,c=a.ca();if(void 0!==c&&c>=a.s&&c<=a.i){b=a.j||0;var d;if(a.o){var e=Hc(a.o,c,1);b+=e;if(e==a.o.length-1)return b;d=a.o[e];a=d/a.o[e+1]}else d=a.i,a=a.u;b+=Math.log(d/c)/Math.log(a)}return b}
function Yn(a,b,c,d){if(!(b instanceof Hi)){Rc(Array.isArray(b),24);Rc(!kd(b),25);var e=b[0],f=b[1],g=b[2],h=b[3],e=[e,f,e,h,g,h,g,f,e,f],f=new wj(null);f.S("XY",e,[e.length]);b=f}e=d||{};d=void 0!==e.padding?e.padding:[0,0,0,0];var h=void 0!==e.Za?e.Za:!0,f=void 0!==e.Gn?e.Gn:!1,k;void 0!==e.Db?k=e.Db:void 0!==e.ub?k=a.Za(a.i,e.ub-a.j,0):k=0;var m=b.C,g=Vn(a),e=Math.cos(-g),g=Math.sin(-g),n=Infinity,p=Infinity,q=-Infinity,t=-Infinity;b=b.F;for(var x=0,v=m.length;x<v;x+=b)var C=m[x]*e-m[x+1]*g,N=
m[x]*g+m[x+1]*e,n=Math.min(n,C),p=Math.min(p,N),q=Math.max(q,C),t=Math.max(t,N);c=Wn([n,p,q,t],[c[0]-d[1]-d[3],c[1]-d[0]-d[2]]);c=isNaN(c)?k:Math.max(c,k);h&&(k=a.Za(c,0,0),!f&&k<c&&(k=a.Za(k,-1,0)),c=k);a.set(Zl,c);g=-g;k=(n+q)/2+(d[1]-d[3])/2*c;c=(p+t)/2+(d[0]-d[2])/2*c;Zn(a,[k*e-c*g,c*e+k*g])}l.rotate=function(a,b){if(void 0!==b){var c,d=this.la();void 0!==d&&(c=[d[0]-b[0],d[1]-b[1]],On(c,a-Vn(this)),Ln(c,b));Zn(this,c)}this.Od(a)};function Zn(a,b){a.set(Rn,b)}function $n(a,b){a.f[1]+=b}
l.Od=function(a){this.set(Sn,a)};function ao(a,b){b=a.Za(a.i,b-a.j,0);a.set(Zl,b)}var Rn="center",Zl="resolution",Sn="rotation";function bo(a){return 1-Math.pow(1-a,3)}function co(a){return 3*a*a-2*a*a*a}function eo(a){return a};function fo(a){var b=a.source,c=a.start?a.start:Date.now(),d=b[0],e=b[1],f=void 0!==a.duration?a.duration:1E3,g=a.Wa?a.Wa:co;return function(a,b){if(b.time<c)return b.animate=!0,b.Ka[0]+=1,!0;if(b.time<c+f){a=1-g((b.time-c)/f);var m=d-b.Z.center[0],n=e-b.Z.center[1];b.animate=!0;b.Z.center[0]+=a*m;b.Z.center[1]+=a*n;b.Ka[0]+=1;return!0}return!1}}
function go(a){var b=a.rotation?a.rotation:0,c=a.start?a.start:Date.now(),d=void 0!==a.duration?a.duration:1E3,e=a.Wa?a.Wa:co,f=a.anchor?a.anchor:null;return function(a,h){if(h.time<c)return h.animate=!0,h.Ka[0]+=1,!0;if(h.time<c+d){a=1-e((h.time-c)/d);a*=b-h.Z.rotation;h.animate=!0;h.Z.rotation+=a;if(f){var k=h.Z.center;k[0]-=f[0];k[1]-=f[1];On(k,a);Ln(k,f)}h.Ka[0]+=1;return!0}return!1}}
function ho(a){var b=a.resolution,c=a.start?a.start:Date.now(),d=void 0!==a.duration?a.duration:1E3,e=a.Wa?a.Wa:co;return function(a,g){if(g.time<c)return g.animate=!0,g.Ka[0]+=1,!0;if(g.time<c+d){a=1-e((g.time-c)/d);var h=b-g.Z.resolution;g.animate=!0;g.Z.resolution+=a*h;g.Ka[0]+=1;return!0}return!1}};function io(a){uc.call(this);this.V=a.id;this.J=void 0!==a.dn?a.dn:!0;this.ja=void 0!==a.Rg?a.Rg:!0;this.f=document.createElement("DIV");this.f.className="ol-overlay-container";this.f.style.position="absolute";this.ge=void 0!==a.ge?a.ge:!1;this.j=void 0!==a.th?a.th:{};this.u=void 0!==a.Xk?a.Xk:20;this.c={he:"",Fe:"",Ye:"",gf:"",visible:!0};this.o=null;E(this,I("element"),this.vm,this);E(this,I("map"),this.Cm,this);E(this,I("offset"),this.Im,this);E(this,I("position"),this.Km,this);E(this,I("positioning"),
this.Lm,this);void 0!==a.element&&this.set("element",a.element);this.set("offset",void 0!==a.offset?a.offset:[0,0]);this.set("positioning",void 0!==a.dd?a.dd:"top-left");void 0!==a.position&&this.setPosition(a.position)}A(io,uc);function jo(a){return a.get("element")}l=io.prototype;l.Pa=function(){return this.V};l.vm=function(){for(var a=this.f;a.lastChild;)a.removeChild(a.lastChild);(a=jo(this))&&this.f.appendChild(a)};
l.Cm=function(){this.o&&(dg(this.f),B(this.o),this.o=null);var a=this.get("map");a&&(this.o=E(a,"postrender",this.render,this),ko(this),a=this.ja?a.u:a.v,this.J?a.insertBefore(this.f,a.childNodes[0]||null):a.appendChild(this.f))};l.render=function(){ko(this)};l.Im=function(){ko(this)};
l.Km=function(){ko(this);if(void 0!==this.get("position")&&this.ge){var a=this.get("map");if(void 0!==a&&lo(a)){var b=mo(lo(a),a.ka()),c=jo(this),d=c.offsetWidth,e=c.currentStyle||Ub.getComputedStyle(c),d=d+(parseInt(e.marginLeft,10)+parseInt(e.marginRight,10)),e=c.offsetHeight,f=c.currentStyle||Ub.getComputedStyle(c),e=e+(parseInt(f.marginTop,10)+parseInt(f.marginBottom,10)),g=mo(c,[d,e]),c=this.u;Yc(b,g)||(d=g[0]-b[0],e=b[2]-g[2],f=g[1]-b[1],g=b[3]-g[3],b=[0,0],0>d?b[0]=d-c:0>e&&(b[0]=Math.abs(e)+
c),0>f?b[1]=f-c:0>g&&(b[1]=Math.abs(g)+c),0===b[0]&&0===b[1])||(c=T(a).la(),d=no(a,c),b=[d[0]+b[0],d[1]+b[1]],this.j&&(this.j.source=c,a.fb(fo(this.j))),Zn(T(a),a.va(b)))}}};l.Lm=function(){ko(this)};l.setMap=function(a){this.set("map",a)};l.setPosition=function(a){this.set("position",a)};function mo(a,b){var c=a.getBoundingClientRect();a=c.left+Ub.pageXOffset;c=c.top+Ub.pageYOffset;return[a,c,a+b[0],c+b[1]]}l.Ja=function(a){this.c.visible!==a&&(this.f.style.display=a?"":"none",this.c.visible=a)};
function ko(a){var b=a.get("map"),c=a.get("position");if(void 0!==b&&b.o&&void 0!==c){var c=no(b,c),d=b.ka(),b=a.f.style,e=a.get("offset"),f=a.get("positioning"),g=e[0],e=e[1];if("bottom-right"==f||"center-right"==f||"top-right"==f)""!==a.c.Fe&&(a.c.Fe=b.left=""),g=Math.round(d[0]-c[0]-g)+"px",a.c.Ye!=g&&(a.c.Ye=b.right=g);else{""!==a.c.Ye&&(a.c.Ye=b.right="");if("bottom-center"==f||"center-center"==f||"top-center"==f)g-=a.f.offsetWidth/2;g=Math.round(c[0]+g)+"px";a.c.Fe!=g&&(a.c.Fe=b.left=g)}if("bottom-left"==
f||"bottom-center"==f||"bottom-right"==f)""!==a.c.gf&&(a.c.gf=b.top=""),c=Math.round(d[1]-c[1]-e)+"px",a.c.he!=c&&(a.c.he=b.bottom=c);else{""!==a.c.he&&(a.c.he=b.bottom="");if("center-left"==f||"center-center"==f||"center-right"==f)e-=a.f.offsetHeight/2;c=Math.round(c[1]+e)+"px";a.c.gf!=c&&(a.c.gf=b.top=c)}a.Ja(!0)}else a.Ja(!1)};function oo(a){a=a.originalEvent;return a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function po(a){a=a.originalEvent;return 0==a.button&&!(Sf&&Xh&&a.ctrlKey)}function qo(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey}function ro(a){a=a.originalEvent;return!a.altKey&&(Xh?a.metaKey:a.ctrlKey)&&!a.shiftKey}function so(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}
function to(a){a=a.originalEvent.target.tagName;return"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a}function uo(a){Rc(a.b,56);return"mouse"==a.b.pointerType}function vo(a){a=a.b;return a.isPrimary&&0===a.button};function wo(a,b,c){Hi.call(this);xo(this,a,b?b:0,c)}A(wo,Hi);l=wo.prototype;l.clone=function(){var a=new wo(null),b=this.C.slice();Ki(a,this.layout,b);a.b();return a};l.wb=function(a,b,c,d){var e=this.C;a-=e[0];var f=b-e[1];b=a*a+f*f;if(b<d){if(0===b)for(d=0;d<this.F;++d)c[d]=e[d];else for(d=Math.sqrt(Cj(this))/Math.sqrt(b),c[0]=e[0]+d*a,c[1]=e[1]+d*f,d=2;d<this.F;++d)c[d]=e[d];c.length=this.F;return b}return d};l.yc=function(a,b){var c=this.C;a-=c[0];b-=c[1];return a*a+b*b<=Cj(this)};
l.la=function(){return this.C.slice(0,this.F)};l.le=function(a){var b=this.C,c=b[this.F]-b[0];return ad(b[0]-c,b[1]-c,b[0]+c,b[1]+c,a)};function Cj(a){var b=a.C[a.F]-a.C[0];a=a.C[a.F+1]-a.C[1];return b*b+a*a}l.R=function(){return"Circle"};l.Bb=function(a){var b=this.I();return qd(a,b)?(b=this.la(),a[0]<=b[0]&&a[2]>=b[0]||a[1]<=b[1]&&a[3]>=b[1]?!0:gd(a,this.V,this)):!1};
function xo(a,b,c,d){if(b){a.Eb(d,b,0);a.C||(a.C=[]);d=a.C;b=Qi(d,b);d[b++]=d[0]+c;var e;c=1;for(e=a.F;c<e;++c)d[b++]=d[c];d.length=b}else Ki(a,"XY",null);a.b()};function yo(a){uc.call(this);this.c=null;this.setActive(!0);this.handleEvent=a.handleEvent}A(yo,uc);yo.prototype.getActive=function(){return this.get("active")};yo.prototype.setActive=function(a){this.set("active",a)};yo.prototype.setMap=function(a){this.c=a};function zo(a,b,c,d,e){if(void 0!==c){var f=Vn(b),g=b.la();void 0!==f&&g&&e&&0<e&&(a.fb(go({rotation:f,duration:e,Wa:bo})),d&&a.fb(fo({source:g,duration:e,Wa:bo})));b.rotate(c,d)}}
function Ao(a,b,c,d,e){var f=b.ca();c=b.Za(f,c,0);Bo(a,b,c,d,e)}function Bo(a,b,c,d,e){if(c){var f=b.ca(),g=b.la();void 0!==f&&g&&c!==f&&e&&0<e&&(a.fb(ho({resolution:f,duration:e,Wa:bo})),d&&a.fb(fo({source:g,duration:e,Wa:bo})));if(d){var h;a=b.la();e=b.ca();void 0!==a&&void 0!==e&&(h=[d[0]-c*(d[0]-a[0])/e,d[1]-c*(d[1]-a[1])/e]);Zn(b,h)}b.set(Zl,c)}};function Co(a){a=a?a:{};yo.call(this,{handleEvent:a.handleEvent?a.handleEvent:Do});this.Oc=a.ab?a.ab:Eh;this.Pc=a.sb?a.sb:Rb;this.yf=a.hg?a.hg:Rb;this.Gf=a.bb?a.bb:Eh;this.B=!1;this.V={};this.o=[]}A(Co,yo);function Eo(a){for(var b=a.length,c=0,d=0,e=0;e<b;e++)c+=a[e].clientX,d+=a[e].clientY;return[c/b,d/b]}
function Do(a){if(!(a instanceof pn))return!0;var b=!1,c=a.type;if(c===yn||c===An||c===wn)c=a.b,a.type==wn?delete this.V[c.pointerId]:a.type==yn?this.V[c.pointerId]=c:c.pointerId in this.V&&(this.V[c.pointerId]=c),this.o=Yb(this.V);this.B&&(a.type==An?this.Pc(a):a.type==wn&&(this.B=this.Gf(a)));a.type==yn?(this.B=a=this.Oc(a),b=this.Ec(a)):a.type==zn&&this.yf(a);return!b}Co.prototype.Ec=function(a){return a};function Fo(a,b){Pb.call(this,a);this.feature=b}A(Fo,Pb);
function Go(a){Co.call(this,{ab:Ho,handleEvent:Io,bb:Jo});this.ja=null;this.D=!1;this.kc=a.source?a.source:null;this.Ya=a.features?a.features:null;this.xl=a.Dp?a.Dp:12;this.M=a.type;this.i=Ko(this.M);this.pb=a.minPoints?a.minPoints:this.i===Lo?3:2;this.Oa=a.Ni?a.Ni:Infinity;this.Kc=a.vl?a.vl:Dh;var b=a.yl;if(!b)if("Circle"===this.M)b=function(a,b){b=b?b:new wo([NaN,NaN]);xo(b,a[0],Math.sqrt(Pn(a[0],a[1])));return b};else{var c,b=this.i;b===Mo?c=oj:b===No?c=dj:b===Lo&&(c=wj);b=function(a,b){b?b.fa(a):
b=new c(a);return b}}this.H=b;this.J=this.v=this.f=this.u=this.j=this.s=null;this.tl=a.Ah?a.Ah*a.Ah:36;this.ta=new fl({source:new rl({$b:!1,wrapX:a.wrapX?a.wrapX:!1}),style:a.style?a.style:Oo()});this.ob=a.geometryName;this.pl=a.ua?a.ua:qo;this.Ca=a.wl?a.wl:so;E(this,I("active"),this.Zi,this)}A(Go,Co);function Oo(){var a=xi();return function(b){return a[b.G().R()]}}l=Go.prototype;l.setMap=function(a){Co.prototype.setMap.call(this,a);this.Zi()};
function Io(a){this.i!==No&&this.i!==Lo||!this.Ca(a)||(this.D=!0);var b=!this.D;this.D&&a.type===An?(Po(this,a),b=!1):a.type===zn?b=Qo(this,a):a.type===tn&&(b=!1);return Do.call(this,a)&&b}function Ho(a){return this.pl(a)?(this.ja=a.pixel,!0):this.D?(this.ja=a.pixel,this.s||Ro(this,a),!0):!1}
function Jo(a){this.D=!1;var b=this.ja,c=a.pixel,d=b[0]-c[0],b=b[1]-c[1],c=!0;d*d+b*b<=this.tl&&(Qo(this,a),this.s?this.i===So?this.oc():To(this,a)?this.Kc(a)&&this.oc():Po(this,a):(Ro(this,a),this.i===Mo&&this.oc()),c=!1);return c}
function Qo(a,b){if(a.s){var c=b.coordinate,d=a.j.G(),e;a.i===Mo?e=a.f:a.i===Lo?(e=a.f[0],e=e[e.length-1],To(a,b)&&(c=a.s.slice())):(e=a.f,e=e[e.length-1]);e[0]=c[0];e[1]=c[1];a.H(a.f,d);a.u&&a.u.G().fa(c);d instanceof wj&&a.i!==Lo?(a.v||(a.v=new yi(new dj(null))),c=zj(d),b=a.v.G(),b.S(c.layout,c.C)):a.J&&(b=a.v.G(),b.fa(a.J));Uo(a)}else b=b.coordinate.slice(),a.u?a.u.G().fa(b):(a.u=new yi(new oj(b)),Uo(a));return!0}
function To(a,b){var c=!1;if(a.j){var d=!1,e=[a.s];a.i===No?d=a.f.length>a.pb:a.i===Lo&&(d=a.f[0].length>a.pb,e=[a.f[0][0],a.f[0][a.f[0].length-2]]);if(d)for(var d=b.map,f=0,g=e.length;f<g;f++){var h=e[f],k=no(d,h),m=b.pixel,c=m[0]-k[0],k=m[1]-k[1],m=a.D&&a.Ca(b)?1:a.xl;if(c=Math.sqrt(c*c+k*k)<=m){a.s=h;break}}}return c}
function Ro(a,b){b=b.coordinate;a.s=b;a.i===Mo?a.f=b.slice():a.i===Lo?(a.f=[[b.slice(),b.slice()]],a.J=a.f[0]):(a.f=[b.slice(),b.slice()],a.i===So&&(a.J=a.f));a.J&&(a.v=new yi(new dj(a.J)));b=a.H(a.f);a.j=new yi;a.ob&&Ai(a.j,a.ob);zi(a.j,b);Uo(a);F(a,new Fo("drawstart",a.j))}
function Po(a,b){b=b.coordinate;var c=a.j.G(),d,e;if(a.i===No)a.s=b.slice(),e=a.f,e.push(b.slice()),d=e.length>a.Oa,a.H(e,c);else if(a.i===Lo){e=a.f[0];e.push(b.slice());if(d=e.length>a.Oa)a.s=e[0];a.H(a.f,c)}Uo(a);d&&a.oc()}
l.oc=function(){var a=Vo(this),b=this.f,c=a.G();this.i===No?(b.pop(),this.H(b,c)):this.i===Lo&&(b[0].pop(),b[0].push(b[0][0]),this.H(b,c));"MultiPoint"===this.M?zi(a,new pj([b])):"MultiLineString"===this.M?zi(a,new kj([b])):"MultiPolygon"===this.M&&zi(a,new Dj([b]));F(this,new Fo("drawend",a));this.Ya&&this.Ya.push(a);this.kc&&this.kc.ra(a)};function Vo(a){a.s=null;var b=a.j;b&&(a.j=null,a.u=null,a.v=null,S(a.ta).clear(!0));return b}
l.extend=function(a){var b=a.G();this.j=a;this.f=b.N();a=this.f[this.f.length-1];this.s=a.slice();this.f.push(a.slice());Uo(this);F(this,new Fo("drawstart",this.j))};l.Ec=Eh;function Uo(a){var b=[];a.j&&b.push(a.j);a.v&&b.push(a.v);a.u&&b.push(a.u);a=S(a.ta);a.clear(!0);il(a,b)}l.Zi=function(){var a=this.c,b=this.getActive();a&&b||Vo(this);this.ta.setMap(b?a:null)};
function Ko(a){var b;"Point"===a||"MultiPoint"===a?b=Mo:"LineString"===a||"MultiLineString"===a?b=No:"Polygon"===a||"MultiPolygon"===a?b=Lo:"Circle"===a&&(b=So);return b}var Mo="Point",No="LineString",Lo="Polygon",So="Circle";var Wo=new Me(6378137);function Xo(a,b){Pb.call(this,a);this.feature=b}A(Xo,Pb);
function Yo(a){a=void 0!==a?a:{};yo.call(this,{handleEvent:Zo});this.continueMsg=this.o=this.wc=this.wa=this.s=this.i=null;this.decimals=void 0!==a.decimals?a.decimals:null;this.u=void 0!==a.Lf?a.Lf:!0;this.startMsg=void 0!==a.startMsg?a.startMsg:sm("SPAN",{},"Click to start drawing.");this.v=null;var b=void 0!==a.style?a.style:[new U({fill:new mi({color:"rgba(255, 255, 255, 0.2)"})}),new U({stroke:new ri({color:"white",width:5})}),new U({stroke:new ri({color:"#ffcc33",width:3})})];this.B=new fl({source:new rl,
style:b});this.f=this.j(a.sketchStyle,S(this.B));this.D=!0;E(this.f,I("active"),this.H,this);E(this.f,"drawstart",this.Co,this);E(this.f,"drawend",this.Bo,this);E(this,I("active"),this.In,this)}A(Yo,yo);function $o(a,b,c,d){a=zj(a.clone().transform(b,"EPSG:4326")).N();b=0;c=a.length;for(var e=a[c-1][0],f=a[c-1][1],g=0;g<c;g++){var h=a[g][0],k=a[g][1];b+=Ce(h-e)*(2+Math.sin(Ce(f))+Math.sin(Ce(k)));e=h;f=k}return d(Math.abs(b*Wo.radius*Wo.radius/2),"m\u00b2","square")}
u("ngeo.interaction.Measure.getFormattedArea",$o);u("ngeo.interaction.Measure.getFormattedCircleArea",function(a,b,c){return c(Math.PI*Math.pow(Math.sqrt(Cj(a)),2),"m\u00b2","square")});function ap(a,b,c,d){c=0;a=a.N();for(var e=0,f=a.length-1;e<f;++e){var g=hf(a[e],b,"EPSG:4326"),h=hf(a[e+1],b,"EPSG:4326");c+=Ne(Wo,g,h)}return d(c,"m")}u("ngeo.interaction.Measure.getFormattedLength",ap);
function bp(a,b){var c=a.N();a=c[0];c=c[1];b=null!==b?b:0;a=Ha(a,0,b);c=Ha(c,0,b);return["X: ",a,", Y: ",c].join("")}function Zo(a){if(a.type!=zn||a.dragging)return!0;var b=this.startMsg;null!==this.o&&(b=this.continueMsg);if(this.u){for(var c=this.i,d;d=c.firstChild;)c.removeChild(d);this.i.appendChild(b);this.s.setPosition(a.coordinate)}return!0}Yo.prototype.zl=function(){return this.f};Yo.prototype.getDrawInteraction=Yo.prototype.zl;l=Yo.prototype;
l.setMap=function(a){yo.prototype.setMap.call(this,a);this.B.setMap(a);var b=this.f.c;null!==b&&b.f.remove(this.f);null!==a&&a.f.push(this.f)};l.Co=function(a){this.o=a.feature;S(this.B).clear(!0);cp(this);a=this.o.G();this.v=E(a,"change",function(){this.Ae(function(a,c){null!==c&&(this.wa.innerHTML=a,this.wc.setPosition(c))}.bind(this))},this)};l.Bo=function(){Bm(this.wa,"ngeo-tooltip-static");this.wc.set("offset",[0,-7]);F(this,new Xo("measureend",this.o));this.o=null;null!==this.v&&B(this.v)};
function dp(a){a.u&&(a.c.i.remove(a.s),null!==a.i&&a.i.parentNode.removeChild(a.i),a.i=null,a.s=null)}function cp(a){ep(a);a.wa=sm("DIV");Cm(a.wa,["tooltip","ngeo-tooltip-measure"]);a.wc=new io({element:a.wa,offset:[0,-15],dd:"bottom-center",Rg:!1});a.c.i.push(a.wc)}function ep(a){null!==a.wa&&(a.wa.parentNode.removeChild(a.wa),a.wa=null,a.wc=null)}
l.In=function(){var a=this.getActive();this.D=!1;this.f.setActive(a);this.D=!0;this.c&&(a?this.wc||(cp(this),dp(this),this.u&&(this.i=sm("DIV"),Bm(this.i,"tooltip"),this.s=new io({element:this.i,offset:[15,0],dd:"center-left"}),this.c.i.push(this.s))):(S(this.B).clear(!0),this.c.i.remove(this.wc),ep(this),dp(this)))};l.Sl=function(){return this.wa};Yo.prototype.getTooltipElement=Yo.prototype.Sl;Yo.prototype.H=function(){this.D&&this.setActive(this.f.getActive())};function fp(a){Fh.call(this);this.c=a?a:null;gp(this)}A(fp,Fh);function hp(a){var b=[],c,d;c=0;for(d=a.length;c<d;++c)b.push(a[c].clone());return b}function ip(a){var b,c;if(a.c)for(b=0,c=a.c.length;b<c;++b)ec(a.c[b],"change",a.b,a)}function gp(a){var b,c;if(a.c)for(b=0,c=a.c.length;b<c;++b)E(a.c[b],"change",a.b,a)}l=fp.prototype;l.clone=function(){var a=new fp(null),b=hp(this.c);ip(a);a.c=b;gp(a);a.b();return a};
l.wb=function(a,b,c,d){if(d<Xc(this.I(),a,b))return d;var e=this.c,f,g;f=0;for(g=e.length;f<g;++f)d=e[f].wb(a,b,c,d);return d};l.yc=function(a,b){var c=this.c,d,e;d=0;for(e=c.length;d<e;++d)if(c[d].yc(a,b))return!0;return!1};l.le=function(a){bd(a);for(var b=this.c,c=0,d=b.length;c<d;++c)ed(a,b[c].I());return a};
l.ag=function(a){this.s!=this.g&&(Xb(this.i),this.o=0,this.s=this.g);if(0>a||0!==this.o&&a<this.o)return this;var b=a.toString();if(this.i.hasOwnProperty(b))return this.i[b];var c=[],d=this.c,e=!1,f,g;f=0;for(g=d.length;f<g;++f){var h=d[f],k=h.ag(a);c.push(k);k!==h&&(e=!0)}if(e)return a=new fp(null),ip(a),a.c=c,gp(a),a.b(),this.i[b]=a;this.o=a;return this};l.R=function(){return"GeometryCollection"};l.Bb=function(a){var b=this.c,c,d;c=0;for(d=b.length;c<d;++c)if(b[c].Bb(a))return!0;return!1};
l.Cb=function(){return 0===this.c.length};l.rotate=function(a,b){for(var c=this.c,d=0,e=c.length;d<e;++d)c[d].rotate(a,b);this.b()};l.scale=function(a,b,c){c||(c=nd(this.I()));for(var d=this.c,e=0,f=d.length;e<f;++e)d[e].scale(a,b,c);this.b()};l.od=function(a){var b=this.c,c,d;c=0;for(d=b.length;c<d;++c)b[c].od(a);this.b()};l.translate=function(a,b){var c=this.c,d,e;d=0;for(e=c.length;d<e;++d)c[d].translate(a,b);this.b()};l.sa=function(){ip(this);Fh.prototype.sa.call(this)};function jp(a,b){b=void 0!==b?b:{};Yo.call(this,b);this.continueMsg=void 0!==b.continueMsg?b.continueMsg:sm("SPAN",{},"Click to finish.");this.format=a}A(jp,Yo);u("ngeo.interaction.MeasureAzimut",jp);jp.prototype.j=function(a,b){return new kp({source:b,style:a})};jp.prototype.Ae=function(a){var b=hp(this.o.G().c)[0],c=lp(b,T(this.c).da(),this.format);a(c,Ji(b))};function lp(a,b,c){var d=mp(a)+"\u00b0";return d+=", "+ap(a,b,0,c)}
function mp(a){var b=a.N();a=b[1][0]-b[0][0];b=b[1][1]-b[0][1];return Math.round((0<a?1:-1)*Math.acos(b/Math.sqrt(a*a+b*b))*180/Math.PI)%360}function kp(a){Co.call(this,{ab:np,handleEvent:op,bb:pp});this.u=null;this.v=void 0!==a.source?a.source:null;this.j=!1;this.i=this.f=null;this.s=new fl({source:new rl({$b:!1,wrapX:!1}),style:void 0!==a.style?a.style:Oo()});E(this,I("active"),this.D,this)}A(kp,Co);u("ngeo.interaction.DrawAzimut",kp);function np(a){this.u=a.pixel;return!0}
function pp(a){var b=this.u,c=a.pixel,d=b[0]-c[0],b=b[1]-c[1],c=!0;4>=d*d+b*b&&(qp(this,a),this.j?(a=rp(this),null!==this.v&&this.v.ra(a),F(this,new Fo("drawend",a))):(d=a.coordinate,this.j=!0,a=new dj([d.slice(),d.slice()]),d=new wo(d,0),a=new fp([a,d]),this.f=new yi,zi(this.f,a),sp(this),F(this,new Fo("drawstart",this.f))),c=!1);return c}function op(a){var b=!0;a.type===zn?b=qp(this,a):a.type===tn&&(b=!1);return Do.call(this,a)&&b}
function qp(a,b){if(a.j){var c=b.coordinate,d=a.f.G().c;b=d[0];var e,f;e=b.N();a.i.G().fa(c);f=e[e.length-1];f[0]=c[0];f[1]=c[1];b.fa(e);c=d[1];c.C[c.F]=c.C[0]+gj(b);c.b();sp(a)}else b=b.coordinate.slice(),null===a.i?(a.i=new yi(new oj(b)),sp(a)):a.i.G().fa(b);return!0}function sp(a){var b=[];null!==a.f&&b.push(a.f);null!==a.i&&b.push(a.i);a=S(a.s);a.clear(!0);il(a,b)}function rp(a){a.j=!1;var b=a.f;null!==b&&(a.f=null,a.i=null,S(a.s).clear(!0));return b}kp.prototype.Ec=ab;
kp.prototype.D=function(){var a=this.c,b=this.getActive();null!==a&&b||rp(this);this.s.setMap(b?a:null)};kp.prototype.setMap=function(a){Co.prototype.setMap.call(this,a);this.D()};w.factory("ngeoDownload",function(){return function(a,b,c){saveAs(new Blob([a],{type:void 0!==c?c:"text/plain;charset=utf-8"}),b)}});function tp(a){a=a?a:{};Di.call(this);this.Ua=Te("EPSG:4326");this.b=a.Oq}A(tp,Di);var up=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];function vp(a,b,c){a.push(parseFloat(b.getAttribute("lon")),parseFloat(b.getAttribute("lat")));"ele"in c?(a.push(c.ele),delete c.ele):a.push(0);"time"in c?(a.push(c.time),delete c.time):a.push(0);return a}function wp(a,b){var c=b[b.length-1],d=a.getAttribute("href");null!==d&&(c.link=d);Id(xp,a,b)}
function yp(a,b){b[b.length-1].extensionsNode_=a}function zp(a,b){var c=b[0];if(a=P({flatCoordinates:[]},Ap,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var d=new dj(null);d.S("XYZM",b);Jh(d,!1,c);c=new yi(d);c.Ma(a);return c}}function Bp(a,b){var c=b[0];if(a=P({flatCoordinates:[],ends:[]},Cp,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var d=a.ends;delete a.ends;var e=new kj(null);e.S("XYZM",b,d);Jh(e,!1,c);c=new yi(e);c.Ma(a);return c}}
function Dp(a,b){var c=b[0];if(b=P({},Ep,a,b))return a=vp([],a,b),a=new oj(a,"XYZM"),Jh(a,!1,c),c=new yi(a),c.Ma(b),c}
var Fp={rte:zp,trk:Bp,wpt:Dp},Gp=O(up,{rte:Ad(zp),trk:Ad(Bp),wpt:Ad(Dp)}),xp=O(up,{text:L(R,"linkText"),type:L(R,"linkType")}),Ap=O(up,{name:L(R),cmt:L(R),desc:L(R),src:L(R),link:wp,number:L(Rd),extensions:yp,type:L(R),rtept:function(a,b){var c=P({},Hp,a,b);c&&vp(b[b.length-1].flatCoordinates,a,c)}}),Hp=O(up,{ele:L(Pd),time:L(Od)}),Cp=O(up,{name:L(R),cmt:L(R),desc:L(R),src:L(R),link:wp,number:L(Rd),type:L(R),extensions:yp,trkseg:function(a,b){var c=b[b.length-1];Id(Ip,a,b);c.ends.push(c.flatCoordinates.length)}}),
Ip=O(up,{trkpt:function(a,b){var c=P({},Jp,a,b);c&&vp(b[b.length-1].flatCoordinates,a,c)}}),Jp=O(up,{ele:L(Pd),time:L(Od)}),Ep=O(up,{ele:L(Pd),time:L(Od),magvar:L(Pd),geoidheight:L(Pd),name:L(R),cmt:L(R),desc:L(R),src:L(R),link:wp,sym:L(R),type:L(R),fix:L(R),sat:L(Rd),hdop:L(Pd),vdop:L(Pd),pdop:L(Pd),ageofdgpsdata:L(Pd),dgpsid:L(Rd),extensions:yp});
function Kp(a,b){b||(b=[]);for(var c=0,d=b.length;c<d;++c){var e=b[c];if(a.b){var f=e.get("extensionsNode_")||null;a.b(e,f)}e.set("extensionsNode_",void 0)}}tp.prototype.qj=function(a,b){if(!Gc(up,a.namespaceURI))return null;var c=Fp[a.localName];if(!c)return null;a=c(a,[Hh(this,a,b)]);if(!a)return null;Kp(this,[a]);return a};tp.prototype.zc=function(a,b){return Gc(up,a.namespaceURI)?"gpx"==a.localName&&(a=P([],Gp,a,[Hh(this,a,b)]))?(Kp(this,a),a):[]:[]};
function Lp(a,b,c){a.setAttribute("href",b);b=c[c.length-1].properties;Jd({node:a},Mp,Gd,[b.linkText,b.linkType],c,Np)}function Op(a,b,c){var d=c[c.length-1],e=d.node.namespaceURI,f=d.properties;a.setAttributeNS(null,"lat",b[1]);a.setAttributeNS(null,"lon",b[0]);switch(d.geometryLayout){case "XYZM":0!==b[3]&&(f.time=b[3]);case "XYZ":0!==b[2]&&(f.ele=b[2]);break;case "XYM":0!==b[2]&&(f.time=b[2])}b="rtept"==a.nodeName?Pp[e]:Qp[e];d=Hd(f,b);Jd({node:a,properties:f},Rp,Gd,d,c,b)}
var Np=["text","type"],Mp=O(up,{text:M(Ud),type:M(Ud)}),Sp=O(up,"name cmt desc src link number type rtept".split(" ")),Tp=O(up,{name:M(Ud),cmt:M(Ud),desc:M(Ud),src:M(Ud),link:M(Lp),number:M(Wd),type:M(Ud),rtept:Dd(M(Op))}),Pp=O(up,["ele","time"]),Up=O(up,"name cmt desc src link number type trkseg".split(" ")),Xp=O(up,{name:M(Ud),cmt:M(Ud),desc:M(Ud),src:M(Ud),link:M(Lp),number:M(Wd),type:M(Ud),trkseg:Dd(M(function(a,b,c){Jd({node:a,geometryLayout:b.layout,properties:{}},Vp,Wp,b.N(),c)}))}),Wp=Ed("trkpt"),
Vp=O(up,{trkpt:M(Op)}),Qp=O(up,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),Rp=O(up,{ele:M(Vd),time:M(function(a,b){b=new Date(1E3*b);a.appendChild(sd.createTextNode(b.getUTCFullYear()+"-"+Ld(b.getUTCMonth()+1)+"-"+Ld(b.getUTCDate())+"T"+Ld(b.getUTCHours())+":"+Ld(b.getUTCMinutes())+":"+Ld(b.getUTCSeconds())+"Z"))}),magvar:M(Vd),geoidheight:M(Vd),name:M(Ud),cmt:M(Ud),desc:M(Ud),src:M(Ud),link:M(Lp),sym:M(Ud),type:M(Ud),fix:M(Ud),
sat:M(Wd),hdop:M(Vd),vdop:M(Vd),pdop:M(Vd),ageofdgpsdata:M(Vd),dgpsid:M(Wd)}),Yp={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Zp(a,b){if(a=a.G())if(a=Yp[a.R()])return td(b[b.length-1].node.namespaceURI,a)}
var $p=O(up,{rte:M(function(a,b,c){var d=c[0],e=wc(b);a={node:a,properties:e};if(b=b.G())b=Jh(b,!0,d),a.geometryLayout=b.layout,e.rtept=b.N();d=Sp[c[c.length-1].node.namespaceURI];e=Hd(e,d);Jd(a,Tp,Gd,e,c,d)}),trk:M(function(a,b,c){var d=c[0],e=wc(b);a={node:a,properties:e};if(b=b.G())b=Jh(b,!0,d),e.trkseg=lj(b);d=Up[c[c.length-1].node.namespaceURI];e=Hd(e,d);Jd(a,Xp,Gd,e,c,d)}),wpt:M(function(a,b,c){var d=c[0],e=c[c.length-1];e.properties=wc(b);if(b=b.G())b=Jh(b,!0,d),e.geometryLayout=b.layout,Op(a,
b.N(),c)})});tp.prototype.c=function(a,b){b=Ih(this,b);var c=td("http://www.topografix.com/GPX/1/1","gpx");c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance");c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd");c.setAttribute("version","1.1");c.setAttribute("creator","OpenLayers 3");Jd({node:c},$p,Zp,a,[b]);return c};function aq(){this.b={};this.g=0}aq.prototype.clear=function(){this.b={};this.g=0};aq.prototype.get=function(a,b,c){a=b+":"+a+":"+(c?Qh(c):"null");return a in this.b?this.b[a]:null};aq.prototype.set=function(a,b,c,d){this.b[b+":"+a+":"+(c?Qh(c):"null")]=d;++this.g};var bq=new aq;function cq(a,b,c,d,e,f){fc.call(this);this.j=null;this.b=a?a:new Image;null!==d&&(this.b.crossOrigin=d);this.f=f?document.createElement("CANVAS"):null;this.o=f;this.i=null;this.c=e;this.g=c;this.s=b;this.B=!1;2==this.c&&dq(this)}A(cq,fc);function dq(a){var b=cg(1,1);try{b.drawImage(a.b,0,0),b.getImageData(0,0,1,1)}catch(c){a.B=!0}}cq.prototype.u=function(){this.c=3;this.i.forEach(B);this.i=null;F(this,"change")};
cq.prototype.v=function(){this.c=2;this.g&&(this.b.width=this.g[0],this.b.height=this.g[1]);this.g=[this.b.width,this.b.height];this.i.forEach(B);this.i=null;dq(this);if(!this.B&&null!==this.o){this.f.width=this.b.width;this.f.height=this.b.height;var a=this.f.getContext("2d");a.drawImage(this.b,0,0);for(var b=a.getImageData(0,0,this.b.width,this.b.height),c=b.data,d=this.o[0]/255,e=this.o[1]/255,f=this.o[2]/255,g=0,h=c.length;g<h;g+=4)c[g]*=d,c[g+1]*=e,c[g+2]*=f;a.putImageData(b,0,0)}F(this,"change")};
cq.prototype.ka=function(){return this.g};cq.prototype.load=function(){if(0==this.c){this.c=1;this.i=[E(this.b,"error",this.u,this,!0),E(this.b,"load",this.v,this,!0)];try{this.b.src=this.s}catch(a){this.u()}}};function eq(a){a=a||{};this.j=void 0!==a.anchor?a.anchor:[.5,.5];this.o=null;this.g=void 0!==a.sf?a.sf:"top-left";this.u=void 0!==a.tf?a.tf:"fraction";this.v=void 0!==a.uf?a.uf:"fraction";var b=void 0!==a.crossOrigin?a.crossOrigin:null,c=void 0!==a.an?a.an:null,d=void 0!==a.bn?a.bn:null,e=a.src;Rc(!(void 0!==e&&c),4);Rc(!c||c&&d,5);void 0!==e&&0!==e.length||!c||(e=c.src||Sb(c).toString());Rc(void 0!==e&&0<e.length,6);var f=void 0!==a.src?0:2,g=void 0!==a.color?Oh(a.color):null,h=bq.get(e,b,g);h||
(h=new cq(c,e,d,b,f,g),bq.set(e,b,g,h));this.c=h;this.T=void 0!==a.offset?a.offset:[0,0];this.f=void 0!==a.Yi?a.Yi:"top-left";this.s=null;this.K=void 0!==a.size?a.size:null;ii.call(this,{opacity:void 0!==a.opacity?a.opacity:1,rotation:void 0!==a.rotation?a.rotation:0,scale:void 0!==a.scale?a.scale:1,Xb:void 0!==a.Xb?a.Xb:!0,gc:void 0!==a.gc?a.gc:!1})}A(eq,ii);l=eq.prototype;
l.wd=function(){if(this.o)return this.o;var a=this.j,b=this.ka();if("fraction"==this.u||"fraction"==this.v){if(!b)return null;a=this.j.slice();"fraction"==this.u&&(a[0]*=b[0]);"fraction"==this.v&&(a[1]*=b[1])}if("top-left"!=this.g){if(!b)return null;a===this.j&&(a=this.j.slice());if("top-right"==this.g||"bottom-right"==this.g)a[0]=-a[0]+b[0];if("bottom-left"==this.g||"bottom-right"==this.g)a[1]=-a[1]+b[1]}return this.o=a};l.Ne=function(){var a=this.c;return a.f?a.f:a.b};l.re=function(){return this.c.ka()};
l.Jd=function(){return this.c.c};l.sg=function(){var a=this.c;if(!a.j)if(a.B){var b=a.g[0],c=a.g[1],d=cg(b,c);d.fillRect(0,0,b,c);a.j=d.canvas}else a.j=a.b;return a.j};l.Ab=function(){if(this.s)return this.s;var a=this.T;if("top-left"!=this.f){var b=this.ka(),c=this.c.ka();if(!b||!c)return null;a=a.slice();if("top-right"==this.f||"bottom-right"==this.f)a[0]=c[0]-b[0]-a[0];if("bottom-left"==this.f||"bottom-right"==this.f)a[1]=c[1]-b[1]-a[1]}return this.s=a};l.ka=function(){return this.K?this.K:this.c.ka()};
l.mg=function(a,b){return E(this.c,"change",a,b)};l.load=function(){this.c.load()};l.Wg=function(a,b){ec(this.c,"change",a,b)};function fq(a){a=a||{};this.b=a.font;this.f=a.rotation;this.o=a.gc;this.j=a.scale;this.s=a.text;this.i=a.textAlign;this.B=a.textBaseline;this.u=void 0!==a.fill?a.fill:new mi({color:"#333"});this.v=void 0!==a.stroke?a.stroke:null;this.g=void 0!==a.offsetX?a.offsetX:0;this.c=void 0!==a.offsetY?a.offsetY:0}l=fq.prototype;l.Ea=function(){return this.u};l.$a=function(){return this.j};l.Fa=function(){return this.v};l.Ga=function(){return this.s};l.Od=function(a){this.f=a};l.Ng=function(a){this.j=a};function gq(a){a=a?a:{};Di.call(this);this.Ua=Te("EPSG:4326");var b;a.gl?b=a.gl:(b=hq)||(iq=[255,255,255,1],jq=new mi({color:iq}),kq=[20,2],lq=mq="pixels",nq=[64,64],oq="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",pq=.5,qq=new eq({anchor:kq,sf:"bottom-left",tf:mq,uf:lq,crossOrigin:"anonymous",rotation:0,scale:pq,size:nq,src:oq}),rq=new ri({color:iq,width:1}),sq=new ri({color:[51,51,51,1],width:2}),tq=new fq({font:"bold 16px Helvetica",fill:jq,stroke:sq,scale:.8}),uq=new U({fill:jq,
image:qq,text:tq,stroke:rq,zIndex:0}),b=hq=[uq]);this.g=b;this.i=void 0!==a.sl?a.sl:!0;this.O=void 0!==a.hq?a.hq:!0;this.b={};this.v=void 0!==a.Bp?a.Bp:!0}var hq,iq,jq,kq,mq,lq,nq,oq,pq,qq,rq,sq,tq,uq;A(gq,Di);var vq=["http://www.google.com/kml/ext/2.2"],wq=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],xq={fraction:"fraction",pixels:"pixels"};
function yq(a,b){var c=[0,0],d="start";if(a.g){var e=a.g.re();e&&2==e.length&&(c[0]=a.g.$a()*e[0]/2,c[1]=-a.g.$a()*e[1]/2,d="left")}Zb(a.Ga())?a=new fq({text:b,offsetX:c[0],offsetY:c[1],textAlign:d}):(a=Ua(a.Ga()),a.s=b,a.i=d,a.g=c[0],a.c=c[1]);return new U({text:a})}
function zq(a,b,c,d,e){return function(){var f=e,g="";f&&this.G()&&(f="Point"===this.G().R());f&&(g=this.get("name"),f=f&&g);if(a)return f?(f=yq(a[0],g),a.concat(f)):a;if(b){var h=Aq(b,c,d);return f?(f=yq(h[0],g),h.concat(f)):h}return f?(f=yq(c[0],g),c.concat(f)):c}}function Aq(a,b,c){return Array.isArray(a)?a:"string"===typeof a?(!(a in c)&&"#"+a in c&&(a="#"+a),Aq(c[a],b,c)):b}
function Bq(a){a=ud(a);if(a=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a))return a=a[1],[parseInt(a.substr(6,2),16),parseInt(a.substr(4,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(0,2),16)/255]}function Cq(a){a=ud(a);for(var b=[],c=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i,d;d=c.exec(a);)b.push(parseFloat(d[1]),parseFloat(d[2]),d[3]?parseFloat(d[3]):0),a=a.substr(d[0].length);return""!==a?void 0:b}
function Dq(a){var b=ud(a).trim();return a.baseURI?(new URL(b,a.baseURI)).href:b}function Eq(a){a=Pd(a);if(void 0!==a)return Math.sqrt(a)}function Fq(a,b){return P(null,Gq,a,b)}function Hq(a,b){if(b=P({C:[],Yj:[]},Iq,a,b)){a=b.C;b=b.Yj;var c,d;c=0;for(d=Math.min(a.length,b.length);c<d;++c)a[4*c+3]=b[c];b=new dj(null);b.S("XYZM",a);return b}}function Jq(a,b){var c=P({},Kq,a,b);if(a=P(null,Lq,a,b))return b=new dj(null),b.S("XYZ",a),b.Ma(c),b}
function Mq(a,b){var c=P({},Kq,a,b);if(a=P(null,Lq,a,b))return b=new wj(null),b.S("XYZ",a,[a.length]),b.Ma(c),b}
function Nq(a,b){a=P([],Oq,a,b);if(!a)return null;if(0===a.length)return new fp(a);var c,d=!0,e=a[0].R(),f,g;f=1;for(g=a.length;f<g;++f)if(b=a[f],b.R()!=e){d=!1;break}if(d)if("Point"==e){c=a[0];d=c.layout;e=c.C;f=1;for(g=a.length;f<g;++f)b=a[f],Ic(e,b.C);c=new pj(null);c.S(d,e);Pq(c,a)}else"LineString"==e?(c=new kj(null),nj(c,a),Pq(c,a)):"Polygon"==e?(c=new Dj(null),Ij(c,a),Pq(c,a)):"GeometryCollection"==e?c=new fp(a):Rc(!1,37);else c=new fp(a);return c}
function Qq(a,b){var c=P({},Kq,a,b);if(a=P(null,Lq,a,b))return b=new oj(null),b.S("XYZ",a),b.Ma(c),b}function Rq(a,b){var c=P({},Kq,a,b);if((a=P([null],Sq,a,b))&&a[0]){b=new wj(null);var d=a[0],e=[d.length],f,g;f=1;for(g=a.length;f<g;++f)Ic(d,a[f]),e.push(d.length);b.S("XYZ",d,e);b.Ma(c);return b}}
function Tq(a,b){b=P({},Uq,a,b);if(!b)return null;a="fillStyle"in b?b.fillStyle:jq;var c=b.fill;void 0===c||c||(a=null);var c="imageStyle"in b?b.imageStyle:qq,d="textStyle"in b?b.textStyle:tq,e="strokeStyle"in b?b.strokeStyle:rq;b=b.outline;void 0===b||b||(e=null);return[new U({fill:a,image:c,stroke:e,text:d,zIndex:void 0})]}
function Pq(a,b){var c=b.length,d=Array(b.length),e=Array(b.length),f,g,h,k;h=k=!1;for(g=0;g<c;++g)f=b[g],d[g]=f.get("extrude"),e[g]=f.get("altitudeMode"),h=h||void 0!==d[g],k=k||e[g];h&&a.set("extrude",d);k&&a.set("altitudeMode",e)}function Vq(a,b){Id(Wq,a,b)}
var Xq=O(wq,{value:Bd(R)}),Wq=O(wq,{Data:function(a,b){var c=a.getAttribute("name");null!==c&&(a=P(void 0,Xq,a,b))&&(b[b.length-1][c]=a)},SchemaData:function(a,b){Id(Yq,a,b)}}),Kq=O(wq,{extrude:L(Md),altitudeMode:L(R)}),Gq=O(wq,{coordinates:Bd(Cq)}),Sq=O(wq,{innerBoundaryIs:function(a,b){(a=P(void 0,Zq,a,b))&&b[b.length-1].push(a)},outerBoundaryIs:function(a,b){(a=P(void 0,$q,a,b))&&(b[b.length-1][0]=a)}}),Iq=O(wq,{when:function(a,b){b=b[b.length-1].Yj;a=ud(a);a=Date.parse(a);b.push(isNaN(a)?0:a)}},
O(vq,{coord:function(a,b){b=b[b.length-1].C;a=ud(a);(a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(a))?b.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),0):b.push(0,0,0,0)}})),Lq=O(wq,{coordinates:Bd(Cq)}),ar=O(wq,{href:L(Dq)},O(vq,{x:L(Pd),y:L(Pd),w:L(Pd),h:L(Pd)})),br=O(wq,{Icon:L(function(a,b){return(a=P({},ar,a,b))?a:null}),heading:L(Pd),hotSpot:L(function(a){var b=a.getAttribute("xunits"),c=a.getAttribute("yunits");
return{x:parseFloat(a.getAttribute("x")),Zg:xq[b],y:parseFloat(a.getAttribute("y")),$g:xq[c]}}),scale:L(Eq)}),Zq=O(wq,{LinearRing:Bd(Fq)}),cr=O(wq,{color:L(Bq),scale:L(Eq)}),dr=O(wq,{color:L(Bq),width:L(Pd)}),Oq=O(wq,{LineString:Ad(Jq),LinearRing:Ad(Mq),MultiGeometry:Ad(Nq),Point:Ad(Qq),Polygon:Ad(Rq)}),er=O(vq,{Track:Ad(Hq)});O(wq,{ExtendedData:Vq,Link:function(a,b){Id(fr,a,b)},address:L(R),description:L(R),name:L(R),open:L(Md),phoneNumber:L(R),visibility:L(Md)});
var fr=O(wq,{href:L(Dq)}),$q=O(wq,{LinearRing:Bd(Fq)}),gr=O(wq,{Style:L(Tq),key:L(R),styleUrl:L(Dq)}),ir=O(wq,{ExtendedData:Vq,MultiGeometry:L(Nq,"geometry"),LineString:L(Jq,"geometry"),LinearRing:L(Mq,"geometry"),Point:L(Qq,"geometry"),Polygon:L(Rq,"geometry"),Style:L(Tq),StyleMap:function(a,b){if(a=P(void 0,hr,a,b))b=b[b.length-1],Array.isArray(a)?b.Style=a:"string"===typeof a?b.styleUrl=a:Rc(!1,38)},address:L(R),description:L(R),name:L(R),open:L(Md),phoneNumber:L(R),styleUrl:L(Dq),visibility:L(Md)},
O(vq,{MultiTrack:L(function(a,b){if(a=P([],er,a,b))return b=new kj(null),nj(b,a),b},"geometry"),Track:L(Hq,"geometry")})),jr=O(wq,{color:L(Bq),fill:L(Md),outline:L(Md)}),Yq=O(wq,{SimpleData:function(a,b){var c=a.getAttribute("name");null!==c&&(a=R(a),b[b.length-1][c]=a)}}),Uq=O(wq,{IconStyle:function(a,b){if(a=P({},br,a,b)){b=b[b.length-1];var c="Icon"in a?a.Icon:{},d;d=(d=c.href)?d:oq;var e,f,g,h=a.hotSpot;h?(e=[h.x,h.y],f=h.Zg,g=h.$g):d===oq?(e=kq,f=mq,g=lq):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(d)&&
(e=[.5,0],g=f="fraction");var k,h=c.x,m=c.y;void 0!==h&&void 0!==m&&(k=[h,m]);var n,h=c.w,c=c.h;void 0!==h&&void 0!==c&&(n=[h,c]);var p,c=a.heading;void 0!==c&&(p=Ce(c));a=a.scale;d==oq&&(n=nq,void 0===a&&(a=pq));e=new eq({anchor:e,sf:"bottom-left",tf:f,uf:g,crossOrigin:"anonymous",offset:k,Yi:"bottom-left",rotation:p,scale:a,size:n,src:d});b.imageStyle=e}},LabelStyle:function(a,b){(a=P({},cr,a,b))&&(b[b.length-1].textStyle=new fq({fill:new mi({color:"color"in a?a.color:iq}),scale:a.scale}))},LineStyle:function(a,
b){(a=P({},dr,a,b))&&(b[b.length-1].strokeStyle=new ri({color:"color"in a?a.color:iq,width:"width"in a?a.width:1}))},PolyStyle:function(a,b){if(a=P({},jr,a,b)){b=b[b.length-1];b.fillStyle=new mi({color:"color"in a?a.color:iq});var c=a.fill;void 0!==c&&(b.fill=c);a=a.outline;void 0!==a&&(b.outline=a)}}}),hr=O(wq,{Pair:function(a,b){if(a=P({},gr,a,b)){var c=a.key;c&&"normal"==c&&((c=a.styleUrl)&&(b[b.length-1]=c),(a=a.Style)&&(b[b.length-1]=a))}}});l=gq.prototype;
l.xg=function(a,b){var c=O(wq,{Document:zd(this.xg,this),Folder:zd(this.xg,this),Placemark:Ad(this.Dg,this),Style:this.ip.bind(this),StyleMap:this.hp.bind(this)});if(a=P([],c,a,b,this))return a};l.Dg=function(a,b){var c=P({geometry:null},ir,a,b);if(c){var d=new yi;a=a.getAttribute("id");null!==a&&Ci(d,a);b=b[0];(a=c.geometry)&&Jh(a,!1,b);zi(d,a);delete c.geometry;this.i&&d.setStyle(zq(c.Style,c.styleUrl,this.g,this.b,this.v));delete c.Style;d.Ma(c);return d}};
l.ip=function(a,b){var c=a.getAttribute("id");null!==c&&(b=Tq(a,b))&&(a=a.baseURI?(new URL("#"+c,a.baseURI)).href:"#"+c,this.b[a]=b)};l.hp=function(a,b){var c=a.getAttribute("id");null!==c&&(b=P(void 0,hr,a,b))&&(a=a.baseURI?(new URL("#"+c,a.baseURI)).href:"#"+c,this.b[a]=b)};l.qj=function(a,b){return Gc(wq,a.namespaceURI)?(a=this.Dg(a,[Hh(this,a,b)]))?a:null:null};
l.zc=function(a,b){if(!Gc(wq,a.namespaceURI))return[];var c;c=a.localName;if("Document"==c||"Folder"==c)return(c=this.xg(a,[Hh(this,a,b)]))?c:[];if("Placemark"==c)return(b=this.Dg(a,[Hh(this,a,b)]))?[b]:[];if("kml"==c){c=[];for(a=a.firstElementChild;a;a=a.nextElementSibling){var d=this.zc(a,b);d&&Ic(c,d)}return c}return[]};function kr(a,b){b=Oh(b);b=[255*(4==b.length?b[3]:1),b[2],b[1],b[0]];var c;for(c=0;4>c;++c){var d=parseInt(b[c],10).toString(16);b[c]=1==d.length?"0"+d:d}Ud(a,b.join(""))}
function lr(a,b,c){a={node:a};var d=b.R(),e,f;"GeometryCollection"==d?(e=hp(b.c),f=mr):"MultiPoint"==d?(e=qj(b),f=nr):"MultiLineString"==d?(e=lj(b),f=or):"MultiPolygon"==d?(e=Hj(b),f=pr):Rc(!1,39);Jd(a,qr,f,e,c)}function rr(a,b,c){Jd({node:a},sr,tr,[b],c)}
function ur(a,b,c){var d={node:a};b.Pa()&&a.setAttribute("id",b.Pa());a=wc(b);var e=b.c;e&&(e=e.call(b,0))&&(e=Array.isArray(e)?e[0]:e,this.O&&(a.Style=e),(e=e.Ga())&&(a.name=e.Ga()));e=vr[c[c.length-1].node.namespaceURI];a=Hd(a,e);Jd(d,wr,Gd,a,c,e);a=c[0];(b=b.G())&&(b=Jh(b,!0,a));Jd(d,wr,mr,[b],c)}function xr(a,b,c){var d=b.C;a={node:a};a.layout=b.layout;a.stride=b.F;Jd(a,yr,zr,[d],c)}function Ar(a,b,c){b=Aj(b);var d=b.shift();a={node:a};Jd(a,Br,Cr,b,c);Jd(a,Br,Dr,[d],c)}
function Er(a,b){Vd(a,Math.round(b*b*1E6)/1E6)}
var Fr=O(wq,["Document","Placemark"]),Ir=O(wq,{Document:M(function(a,b,c){Jd({node:a},Gr,Hr,b,c,void 0,this)}),Placemark:M(ur)}),Gr=O(wq,{Placemark:M(ur)}),Jr={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Kr=O(wq,["href"],O(vq,["x","y","w","h"])),Lr=O(wq,{href:M(Ud)},O(vq,{x:M(Vd),y:M(Vd),w:M(Vd),h:M(Vd)})),Mr=O(wq,["scale","heading","Icon",
"hotSpot"]),Or=O(wq,{Icon:M(function(a,b,c){a={node:a};var d=Kr[c[c.length-1].node.namespaceURI],e=Hd(b,d);Jd(a,Lr,Gd,e,c,d);d=Kr[vq[0]];e=Hd(b,d);Jd(a,Lr,Nr,e,c,d)}),heading:M(Vd),hotSpot:M(function(a,b){a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("xunits",b.Zg);a.setAttribute("yunits",b.$g)}),scale:M(Er)}),Pr=O(wq,["color","scale"]),Qr=O(wq,{color:M(kr),scale:M(Er)}),Rr=O(wq,["color","width"]),Sr=O(wq,{color:M(kr),width:M(Vd)}),sr=O(wq,{LinearRing:M(xr)}),qr=O(wq,{LineString:M(xr),
Point:M(xr),Polygon:M(Ar),GeometryCollection:M(lr)}),vr=O(wq,"name open visibility address phoneNumber description styleUrl Style".split(" ")),wr=O(wq,{MultiGeometry:M(lr),LineString:M(xr),LinearRing:M(xr),Point:M(xr),Polygon:M(Ar),Style:M(function(a,b,c){a={node:a};var d={},e=b.Ea(),f=b.Fa(),g=b.g;b=b.Ga();g instanceof eq&&(d.IconStyle=g);b&&(d.LabelStyle=b);f&&(d.LineStyle=f);e&&(d.PolyStyle=e);b=Tr[c[c.length-1].node.namespaceURI];d=Hd(d,b);Jd(a,Ur,Gd,d,c,b)}),address:M(Ud),description:M(Ud),name:M(Ud),
open:M(Td),phoneNumber:M(Ud),styleUrl:M(Ud),visibility:M(Td)}),yr=O(wq,{coordinates:M(function(a,b,c){c=c[c.length-1];var d=c.layout;c=c.stride;var e;"XY"==d||"XYM"==d?e=2:"XYZ"==d||"XYZM"==d?e=3:Rc(!1,34);var f,g=b.length,h="";if(0<g){h+=b[0];for(d=1;d<e;++d)h+=","+b[d];for(f=c;f<g;f+=c)for(h+=" "+b[f],d=1;d<e;++d)h+=","+b[f+d]}Ud(a,h)})}),Br=O(wq,{outerBoundaryIs:M(rr),innerBoundaryIs:M(rr)}),Vr=O(wq,{color:M(kr)}),Tr=O(wq,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Ur=O(wq,{IconStyle:M(function(a,
b,c){a={node:a};var d={},e=b.c.s,f=b.ka(),g=b.re(),e={href:e};if(f){e.w=f[0];e.h=f[1];var h=b.wd(),k=b.Ab();k&&g&&0!==k[0]&&k[1]!==f[1]&&(e.x=k[0],e.y=g[1]-(k[1]+f[1]));h&&0!==h[0]&&h[1]!==f[1]&&(d.hotSpot={x:h[0],Zg:"pixels",y:f[1]-h[1],$g:"pixels"})}d.Icon=e;f=b.$a();1!==f&&(d.scale=f);b=b.B;0!==b&&(d.heading=b);b=Mr[c[c.length-1].node.namespaceURI];d=Hd(d,b);Jd(a,Or,Gd,d,c,b)}),LabelStyle:M(function(a,b,c){a={node:a};var d={},e=b.Ea();e&&(d.color=e.qa());(b=b.$a())&&1!==b&&(d.scale=b);b=Pr[c[c.length-
1].node.namespaceURI];d=Hd(d,b);Jd(a,Qr,Gd,d,c,b)}),LineStyle:M(function(a,b,c){a={node:a};var d=Rr[c[c.length-1].node.namespaceURI];b=Hd({color:b.qa(),width:b.b},d);Jd(a,Sr,Gd,b,c,d)}),PolyStyle:M(function(a,b,c){Jd({node:a},Vr,Wr,[b.qa()],c)})});function Nr(a,b,c){return td(vq[0],"gx:"+c)}function Hr(a,b){return td(b[b.length-1].node.namespaceURI,"Placemark")}function mr(a,b){if(a)return td(b[b.length-1].node.namespaceURI,Jr[a.R()])}
var Wr=Ed("color"),zr=Ed("coordinates"),Cr=Ed("innerBoundaryIs"),nr=Ed("Point"),or=Ed("LineString"),tr=Ed("LinearRing"),pr=Ed("Polygon"),Dr=Ed("outerBoundaryIs");
gq.prototype.c=function(a,b){b=Ih(this,b);var c=td(wq[4],"kml");c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:gx",vq[0]);c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance");c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var d={node:c},e={};1<a.length?e.Document=a:1==a.length&&(e.Placemark=a[0]);a=Fr[c.namespaceURI];
e=Hd(e,a);Jd(d,Ir,Gd,e,[b],a,this);return c};function Xr(a){this.K=this.v=this.o=null;this.s=void 0!==a.fill?a.fill:null;this.pa=[0,0];this.b=a.points;this.f=void 0!==a.radius?a.radius:a.Mq;this.j=void 0!==a.ed?a.ed:this.f;this.u=void 0!==a.angle?a.angle:0;this.g=void 0!==a.stroke?a.stroke:null;this.M=this.V=this.T=null;var b=a.Vk,c="",d="",e=0,f=null,g,h=0;this.g&&(g=Qh(this.g.qa()),h=this.g.b,void 0===h&&(h=1),f=this.g.g,Zh||(f=null),d=this.g.f,void 0===d&&(d="round"),c=this.g.c,void 0===c&&(c="round"),e=this.g.i,void 0===e&&(e=10));var k=
2*(this.f+h)+1,c={strokeStyle:g,strokeWidth:h,size:k,lineCap:c,W:f,lineJoin:d,miterLimit:e};if(void 0===b){var m=cg(k,k);this.v=m.canvas;b=k=this.v.width;this.hj(c,m,0,0);this.s?this.K=this.v:(m=cg(c.size,c.size),this.K=m.canvas,this.gj(c,m,0,0))}else k=Math.round(k),(d=!this.s)&&(m=this.gj.bind(this,c)),e=this.g?ki(this.g):"-",f=this.s?li(this.s):"-",this.o&&e==this.o[1]&&f==this.o[2]&&this.f==this.o[3]&&this.j==this.o[4]&&this.u==this.o[5]&&this.b==this.o[6]||(this.o=["r"+e+f+(void 0!==this.f?this.f.toString():
"-")+(void 0!==this.j?this.j.toString():"-")+(void 0!==this.u?this.u.toString():"-")+(void 0!==this.b?this.b.toString():"-"),e,f,this.f,this.j,this.u,this.b]),m=b.add(this.o[0],k,k,this.hj.bind(this,c),m),this.v=m.image,this.pa=[m.offsetX,m.offsetY],b=m.image.width,this.K=d?m.b:this.v;this.T=[k/2,k/2];this.V=[k,k];this.M=[b,b];ii.call(this,{opacity:1,gc:void 0!==a.gc?a.gc:!1,rotation:void 0!==a.rotation?a.rotation:0,scale:1,Xb:void 0!==a.Xb?a.Xb:!0})}A(Xr,ii);l=Xr.prototype;l.wd=function(){return this.T};
l.Ea=function(){return this.s};l.sg=function(){return this.K};l.Ne=function(){return this.v};l.re=function(){return this.M};l.Jd=function(){return 2};l.Ab=function(){return this.pa};l.ka=function(){return this.V};l.Fa=function(){return this.g};l.mg=Rb;l.load=Rb;l.Wg=Rb;
l.hj=function(a,b,c,d){var e;b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();this.j!==this.f&&(this.b*=2);for(c=0;c<=this.b;c++)d=2*c*Math.PI/this.b-Math.PI/2+this.u,e=0===c%2?this.f:this.j,b.lineTo(a.size/2+e*Math.cos(d),a.size/2+e*Math.sin(d));this.s&&(b.fillStyle=Sh(this.s.qa()),b.fill());this.g&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.strokeWidth,a.W&&b.setLineDash(a.W),b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.miterLimit=a.miterLimit,b.stroke());b.closePath()};
l.gj=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();this.j!==this.f&&(this.b*=2);var e;for(c=0;c<=this.b;c++)e=2*c*Math.PI/this.b-Math.PI/2+this.u,d=0===c%2?this.f:this.j,b.lineTo(a.size/2+d*Math.cos(e),a.size/2+d*Math.sin(e));b.fillStyle=ei;b.fill();this.g&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.strokeWidth,a.W&&b.setLineDash(a.W),b.stroke());b.closePath()};function Z(a,b){this.$filter_=b;this.f=null;a.has("ngeoMeasureDecimals")&&(this.f=a.get("ngeoMeasureDecimals"));this.g=a.get("$filter")("ngeoUnitPrefix");this.c=null;this.i=[];if(a.has("ngeoPointfilter")){b=a.get("ngeoPointfilter").split(":");var c=b.shift();this.c=this.$filter_(c);this.i=b}else this.c=null;this.o=a.get("ngeoDownload")}Z.$inject=["$injector","$filter"];Z.prototype.Fb=function(a){this.b=a};Z.prototype.setProjection=Z.prototype.Fb;
Z.prototype.setStyle=function(a,b){var c=this.tc(a);b&&(b=this.R(a),Gc(["LineString","Polygon","Rectangle"],b)&&c.push(this.Hd()),c.unshift(Yr(this,a)));a.setStyle(c)};Z.prototype.setStyle=Z.prototype.setStyle;
Z.prototype.tc=function(a){var b;switch(this.R(a)){case "LineString":var c=this.ve(a);b=this.Cd(a);var d=this.Bd(a),c={stroke:new ri({color:d,width:c})};b&&(c.text=Zr({text:this.Vc(a)}));b=new U(c);break;case "Point":b=this.Dd(a);c=this.Bd(a);c={image:new ji({radius:b,fill:new mi({color:c})})};this.Cd(a)&&(c.text=Zr({text:this.Vc(a),offsetY:-(b+9)}));b=new U(c);break;case "Circle":case "Polygon":case "Rectangle":b=this.ve(a);var e=this.fi(a),c=this.Bd(a),f=this.Cd(a),d=c.slice();d[3]=e;var e=a.get("z"),
g=[new U({fill:new mi({color:d}),stroke:new ri({color:c,width:b})})];f&&(void 0!==e?(a=$r(a,e),f=ap(a,this.b,0,this.g),g.push(new U({geometry:a,fill:new mi({color:d}),stroke:new ri({color:c,width:b}),text:Zr({text:f,angle:(e%180+180)%180-90})})),g.push(new U({geometry:new oj(Ji(a)),text:Zr({text:e+"\u00b0",size:10,offsetX:20*Math.cos((e-90)*Math.PI/180),offsetY:20*Math.sin((e-90)*Math.PI/180)})}))):g.push(new U({text:Zr({text:this.Vc(a)})})));b=g;break;case "Text":b=new U({text:Zr({text:this.Uf(a),
size:this.Dd(a),angle:this.Pf(a),color:this.Bd(a)})})}var h;b.constructor===Array?h=b:h=[b];return h};Z.prototype.getStyle=Z.prototype.tc;
Z.prototype.Dh=function(a){var b=[255,255,255,1],c=[0,153,255,1],d=[];a=a.G();console.assert(a);a=a.R();"Point"===a?d.push(new U({image:new ji({radius:6,fill:new mi({color:c}),stroke:new ri({color:b,width:1.5})}),zIndex:Infinity})):("LineString"===a?(d.push(new U({stroke:new ri({color:b,width:5})})),d.push(new U({stroke:new ri({color:c,width:3})}))):d.push(new U({stroke:new ri({color:c,width:1.5}),fill:new mi({color:[255,255,255,.5]})})),d.push(this.Hd(!0)));return d};
Z.prototype.createEditingStyles=Z.prototype.Dh;Z.prototype.Hd=function(a){a=void 0!==a?a:!0;var b={image:new Xr({radius:6,points:4,angle:Math.PI/4,fill:new mi({color:[255,255,255,.5]}),stroke:new ri({color:[0,0,0,1]})})};a&&(b.geometry=function(a){var b=a.G();if("Point"!=b.R())return b instanceof dj?(a=a.G().N(),new pj(a)):b instanceof wj?(a=a.G().N()[0],new pj(a)):a.G()});return new U(b)};Z.prototype.getVertexStyle=Z.prototype.Hd;
function Yr(a,b){var c;switch(a.R(b)){case "Point":a=a.Dd(b);c=new U({image:new ji({radius:a+3,fill:new mi({color:[255,255,255,1]})})});break;case "LineString":case "Circle":case "Polygon":case "Rectangle":a=a.ve(b);c=new U({stroke:new ri({color:[255,255,255,1],width:a+6})});break;case "Text":c=new U({text:Zr({text:a.Uf(b),size:a.Dd(b),angle:a.Pf(b),width:9})})}return c}Z.prototype.Sf=function(a){var b=wc(a);delete b.boundedBy;delete b[a.mb];return b};Z.prototype.getFilteredFeatureValues=Z.prototype.Sf;
Z.prototype.Pf=function(a){return+a.get("a")};Z.prototype.getAngleProperty=Z.prototype.Pf;Z.prototype.Rf=function(a){return a.get("c")};Z.prototype.getColorProperty=Z.prototype.Rf;Z.prototype.Bd=function(a){return Ph(this.Rf(a))};Z.prototype.getRGBAColorProperty=Z.prototype.Bd;Z.prototype.Uf=function(a){return a.get("n")};Z.prototype.getNameProperty=Z.prototype.Uf;Z.prototype.fi=function(a){a=a.get("o");return void 0!==a?+a:1};Z.prototype.getOpacityProperty=Z.prototype.fi;
Z.prototype.Cd=function(a){a=a.get("m");void 0===a?a=!1:"string"===typeof a&&(a="true"===a?!0:!1);return a};Z.prototype.getShowMeasureProperty=Z.prototype.Cd;Z.prototype.Dd=function(a){return+a.get("s")};Z.prototype.getSizeProperty=Z.prototype.Dd;Z.prototype.ve=function(a){return+a.get("k")};Z.prototype.getStrokeProperty=Z.prototype.ve;Z.prototype.Nf=function(a,b){switch(b){case as:this.Sh(a);break;case bs:this.Th(a)}};Z.prototype["export"]=Z.prototype.Nf;
Z.prototype.Sh=function(a){var b=new tp;cs(this,a,b,"export.gpx","application/gpx+xml")};Z.prototype.exportGPX=Z.prototype.Sh;Z.prototype.Th=function(a){var b=new gq;cs(this,a,b,"export.kml","application/vnd.google-earth.kml+xml")};Z.prototype.exportKML=Z.prototype.Th;function cs(a,b,c,d,e){e=void 0!==e?e:"text/plain";var f=[],g;b.forEach(function(a){g=new yi(wc(a));this.setStyle(g,!1);f.push(g)},a);b=c.writeFeatures(f,a.b?{yb:"EPSG:4326",Lb:a.b}:{});a.o(b,d,e+";charset=utf-8")}
function Zr(a){a.angle&&(a.rotation=(void 0!==a.angle?a.angle:0)*Math.PI/180,delete a.angle);a.font=["normal",(a.size||10)+"pt","Arial"].join(" ");a.color&&(a.fill=new mi({color:a.color||[0,0,0,1]}),delete a.color);a.stroke=new ri({color:[255,255,255,1],width:a.width||3});delete a.width;return new fq(a)}
Z.prototype.Vc=function(a){var b=a.G(),c="";b instanceof wj?"Circle"===this.R(a)?(b=a.get("z"),a=$r(a,b),c=lp(a,this.b,this.g)):c=$o(b,this.b,0,this.g):b instanceof dj?c=ap(b,this.b,0,this.g):b instanceof oj&&(null===this.c?c=bp(b,this.f):(a=b.N(),b=this.i.slice(0),b.unshift(a),c=this.c.apply(this,b)));return c};Z.prototype.getMeasure=Z.prototype.Vc;
Z.prototype.R=function(a){var b=a.G(),c;b instanceof oj?c=a.get("t")?"Text":"Point":b instanceof wj?c=a.get("l")?"Circle":a.get("r")?"Rectangle":"Polygon":b instanceof dj&&(c="LineString");return c};Z.prototype.getType=Z.prototype.R;Z.prototype.kj=function(a,b,c){c=void 0!==c?c:250;var d=b.ka(),e=T(b),d=Un(e,d);a=a.G();a.Bb(d)||(e=e.la(),b.fb(fo({source:e,duration:c})),c=a instanceof dj?fj(a):a instanceof wj?(new oj(yj(a))).N():a instanceof oj?a.N():nd(a.I()),Zn(T(b),c))};
Z.prototype.panMapToFeature=Z.prototype.kj;function $r(a,b){a=a.G();var c=a.I(),c=(c[3]-c[1])/2;a=nd(a.I());return new dj([a,[Math.cos((b-90)*Math.PI/180)*c+a[0],-Math.sin((b-90)*Math.PI/180)*c+a[1]]])}w.service("ngeoFeatureHelper",Z);var as="GPX",bs="KML";u("ngeo.FeatureHelper.FormatType",{GPX:as,KML:bs});w.value("ngeoFeatures",new xc);var ds=!Pf||9<=Number(bg),es=!Pf||9<=Number(bg),fs=Pf&&!$f("9");!Sf||$f("528");Rf&&$f("1.9b")||Pf&&$f("8")||Of&&$f("9.5")||Sf&&$f("528");Rf&&!$f("8")||Pf&&$f("9");function gs(){0!=hs&&(is[r(this)]=this);this.s=this.s;this.o=this.o}var hs=0,is={};gs.prototype.s=!1;gs.prototype.Va=function(){if(!this.s&&(this.s=!0,this.rb(),0!=hs)){var a=r(this);delete is[a]}};gs.prototype.rb=function(){if(this.o)for(;this.o.length;)this.o.shift()()};function js(a){a&&"function"==typeof a.Va&&a.Va()};function ks(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.g=!1;this.Fj=!0}ks.prototype.stopPropagation=function(){this.g=!0};ks.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Fj=!1};function ls(a){ls[" "](a);return a}ls[" "]=ca;function ms(a,b){ks.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.c=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.f=!1;this.b=this.state=null;a&&this.tb(a,b)}sa(ms,ks);var ns=[1,4,2];
ms.prototype.tb=function(a,b){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;if(b=a.relatedTarget){if(Rf){var e;a:{try{ls(b.nodeName);e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;null===d?(this.offsetX=Sf||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=Sf||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,
this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.c=a.keyCode||0;this.f=a.ctrlKey;this.state=a.state;this.b=a;a.defaultPrevented&&this.preventDefault()};
ms.prototype.stopPropagation=function(){ms.Fc.stopPropagation.call(this);this.b.stopPropagation?this.b.stopPropagation():this.b.cancelBubble=!0};ms.prototype.preventDefault=function(){ms.Fc.preventDefault.call(this);var a=this.b;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,fs)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var os="closure_listenable_"+(1E6*Math.random()|0),ps=0;function qs(a,b,c,d,e){this.listener=a;this.b=null;this.src=b;this.type=c;this.je=!!d;this.Be=e;this.key=++ps;this.fd=this.mc=!1}function rs(a){a.fd=!0;a.listener=null;a.b=null;a.src=null;a.Be=null};function ss(a){this.src=a;this.listeners={};this.b=0}ss.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.listeners[f];a||(a=this.listeners[f]=[],this.b++);var g=ts(a,b,d,e);-1<g?(b=a[g],c||(b.mc=!1)):(b=new qs(b,this.src,f,!!d,e),b.mc=c,a.push(b));return b};
ss.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.listeners))return!1;var e=this.listeners[a];b=ts(e,b,c,d);return-1<b?(rs(e[b]),Array.prototype.splice.call(e,b,1),0==e.length&&(delete this.listeners[a],this.b--),!0):!1};function us(a,b){var c=b.type;if(c in a.listeners){var d=a.listeners[c],e=Ka(d,b),f;(f=0<=e)&&Array.prototype.splice.call(d,e,1);f&&(rs(b),0==a.listeners[c].length&&(delete a.listeners[c],a.b--))}}
ss.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.listeners)if(!a||c==a){for(var d=this.listeners[c],e=0;e<d.length;e++)++b,rs(d[e]);delete this.listeners[c];this.b--}return b};function vs(a,b,c,d,e){a=a.listeners[b.toString()];b=-1;a&&(b=ts(a,c,d,e));return-1<b?a[b]:null}function ts(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.fd&&f.listener==b&&f.je==!!c&&f.Be==d)return e}return-1};var ws="closure_lm_"+(1E6*Math.random()|0),xs={},ys=0;
function As(a,b,c,d,e){if(ea(b)){for(var f=0;f<b.length;f++)As(a,b[f],c,d,e);return null}c=Bs(c);if(a&&a[os])a=a.lb(b,c,d,e);else{if(!b)throw Error("Invalid event type");var f=!!d,g=Cs(a);g||(a[ws]=g=new ss(a));c=g.add(b,c,!1,d,e);if(!c.b){d=Ds();c.b=d;d.src=a;d.listener=c;if(a.addEventListener)a.addEventListener(b.toString(),d,f);else if(a.attachEvent)a.attachEvent(Es(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");ys++}a=c}return a}
function Ds(){var a=Fs,b=es?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function Gs(a,b,c,d,e){if(ea(b))for(var f=0;f<b.length;f++)Gs(a,b[f],c,d,e);else c=Bs(c),a&&a[os]?a.hd(b,c,d,e):a&&(a=Cs(a))&&(b=vs(a,b,c,!!d,e))&&cl(b)}
function cl(a){if(!ha(a)&&a&&!a.fd){var b=a.src;if(b&&b[os])us(b.f,a);else{var c=a.type,d=a.b;b.removeEventListener?b.removeEventListener(c,d,a.je):b.detachEvent&&b.detachEvent(Es(c),d);ys--;(c=Cs(b))?(us(c,a),0==c.b&&(c.src=null,b[ws]=null)):rs(a)}}}function Es(a){return a in xs?xs[a]:xs[a]="on"+a}function Hs(a,b,c,d){var e=!0;if(a=Cs(a))if(b=a.listeners[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.je==c&&!f.fd&&(f=Is(f,d),e=e&&!1!==f)}return e}
function Is(a,b){var c=a.listener,d=a.Be||a.src;a.mc&&cl(a);return c.call(d,b)}
function Fs(a,b){if(a.fd)return!0;if(!es){if(!b)a:{b=["window","event"];for(var c=aa,d;d=b.shift();)if(null!=c[d])c=c[d];else{b=null;break a}b=c}d=b;b=new ms(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.g&&0<=e;e--){b.currentTarget=d[e];var f=Hs(d[e],a,!0,b),c=c&&f}for(e=0;!b.g&&e<d.length;e++)b.currentTarget=
d[e],f=Hs(d[e],a,!1,b),c=c&&f}return c}return Is(a,new ms(b,this))}function Cs(a){a=a[ws];return a instanceof ss?a:null}var Js="__closure_events_fn_"+(1E9*Math.random()>>>0);function Bs(a){if(ia(a))return a;a[Js]||(a[Js]=function(b){return a.handleEvent(b)});return a[Js]};function Ks(a){a=void 0!==a?a:{};this.i=null;var b;a.element?(b=a.element,delete a.element):b=$("<div />")[0];this.s=$("<button>",{"class":"close",html:"&times;"});this.B=$("<div/>").append(this.s).append(b);a.element=$("<div />")[0];io.call(this,a)}A(Ks,io);
Ks.prototype.setMap=function(a){var b=jo(this);this.get("map")&&(this.i&&(cl(this.i),this.i=null),$(b).popover("destroy"));io.prototype.setMap.call(this,a);if(a){var c=this.B;window.setTimeout(function(){$(b).popover({content:c,html:!0,placement:"top",template:'<div class="popover ngeo-popover" role="tooltip">  <div class="arrow"></div>  <h3 class="popover-title"></h3>  <div class="popover-content"></div></div>'}).popover("show")},0);this.i=As(this.s[0],"click",this.v,!1,this)}};
Ks.prototype.setMap=Ks.prototype.setMap;Ks.prototype.v=function(){var a=this.get("map");a&&a.i.remove(this)};function Ls(a,b,c){a=Number(a);b=Number(b);c=Number(c);if(a!=(a&255)||b!=(b&255)||c!=(c&255))throw Error('"('+a+","+b+","+c+'") is not a valid RGB color');a=Ms(a.toString(16));b=Ms(b.toString(16));c=Ms(c.toString(16));return"#"+a+b+c}function Ns(a){return Ls(a[0],a[1],a[2])}function Os(a,b,c){0>c?c+=1:1<c&&--c;return 1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}function Ms(a){return 1==a.length?"0"+a:a};function Ps(){this.Ua=null}A(Ps,Gh);function Qs(a){return"string"===typeof a?a:""}l=Ps.prototype;l.R=function(){return"text"};l.readFeature=function(a){return Rs(this,Qs(a))};l.readFeatures=function(a){a=Qs(a);var b=[];for(a=a.substring(1);0<a.length;){var c=a.indexOf(")"),d=Rs(this,a.substring(0,c+1));b.push(d);a=a.substring(c+1)}return b};l.readGeometry=function(a){return Ss(this,Qs(a))};l.Ue=function(){return this.Ua};l.writeFeature=function(a,b){return Ts(this,a,Ih(this,b))};
l.writeFeatures=function(a,b){b=Ih(this,b);var c=[];if(0<a.length){c.push("F");for(var d=0,e=a.length;d<e;++d)c.push(Ts(this,a[d],b))}return c.join("")};l.writeGeometry=function(a,b){return Us(this,a,Ih(this,b))};var Vs={LineString:"LineString",Point:"Point",Polygon:"Polygon",MultiLineString:"LineString",MultiPoint:"Point",MultiPolygon:"Polygon"},Ws={};function Xs(a){this.Ua=null;a=void 0!==a?a:{};this.c=void 0!==a.accuracy?a.accuracy:1;this.i=void 0!==a.encodeStyles?a.encodeStyles:!0;this.o=void 0!==a.properties?a.properties:Ys;this.f=void 0!==a.setStyle?a.setStyle:!0;this.g=this.b=0;Ws=void 0!==a.oj&&a.oj}A(Xs,Ps);u("ngeo.format.FeatureHash",Xs);function Ys(a){return wc(a)}
function Zs(a){var b=a<<1;0>a&&(b=~b);a=b;for(b="";32<=a;)b+=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz".charAt(32|a&31),a>>=5;return b+=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz".charAt(a)}
function $s(a,b,c){b=Vs[b];for(var d=0;d<a.length;++d){var e=a[d],f=e.Ea(),g=e.g,h=e.Fa(),e=e.Ga();"Polygon"==b?null!==f&&(g=h,h=c,at(f,h),null!==g&&bt(g,h)):"LineString"==b?null!==h&&bt(h,c):"Point"==b&&null!==g&&(f=c,g instanceof ji&&(h=g.i,0<f.length&&f.push("'"),f.push(encodeURIComponent("pointRadius*"+h)),h=g.Ea(),null!==h&&at(h,f),g=g.Fa(),null!==g&&bt(g,f)));null!==e&&(f=e,e=c,g=f.b,void 0!==g&&(g=g.split(" "),3<=g.length&&(0<e.length&&e.push("'"),e.push(encodeURIComponent("fontSize*"+g[1])))),
f=f.Ea(),null!==f&&at(f,e,"fontColor"))}}function at(a,b,c){c=void 0!==c?c:"fillColor";a=a.qa();null!==a&&(a=Oh(a),a=Ns(a),0<b.length&&b.push("'"),b.push(encodeURIComponent(c+"*"+a)))}function bt(a,b){var c=a.qa();null!==c&&(c=Oh(c),c=Ns(c),0<b.length&&b.push("'"),b.push(encodeURIComponent("strokeColor*"+c)));a=a.b;void 0!==a&&(0<b.length&&b.push("'"),b.push(encodeURIComponent("strokeWidth*"+a)))}
function ct(a,b){var c="l r t m isCircle isRectangle isLabel showMeasure".split(" ");return Gc("a o s k pointRadius strokeWidth".split(" "),a)?+b:Gc(c,a)?"true"===b?!0:!1:b}function dt(a){a=a.split("'");for(var b={},c=0;c<a.length;++c){var d=decodeURIComponent(a[c]).split("*"),e=d[0];b[e]=ct(e,d[1])}return b}function et(a,b,c,d,e){for(var f=d.length,g=0;g<f;++g)c=ft(this,a,b,c,d[g]-b),0!==g&&e.push("'"),e.push(c),c=d[g];return c}
var ht={P:function(a){a=a.substring(2,a.length-1);a=gt(this,a);var b=new pj(null);b.S("XY",a);return b},L:function(a){a=a.substring(2,a.length-1);var b=[],c=[];a=a.split("'");for(var d=0,e=a.length;d<e;++d)b=gt(this,a[d],b),c[d]=b.length;a=new kj(null);a.S("XY",b,c);return a},A:function(a){a=a.substring(2,a.length-1);var b=[],c=[];a=a.split(")(");for(var d=0,e=a.length;d<e;++d)for(var f=a[d].split("'"),g=c[d]=[],h=0,k=f.length;h<k;++h){var b=gt(this,f[h],b),m=b.length;0===h?(b[m++]=b[0],b[m++]=b[1]):
(b[m++]=b[g[h-1]],b[m++]=b[g[h-1]+1]);g[h]=m}a=new Dj(null);Ej(a,"XY",b,c);return a},l:function(a){a=a.substring(2,a.length-1);a=gt(this,a);var b=new dj(null);b.S("XY",a);return b},p:function(a){a=a.substring(2,a.length-1);a=gt(this,a);var b=new oj(null);b.S("XY",a);return b},a:function(a){a=a.substring(2,a.length-1);var b=[],c=[];a=a.split("'");for(var d=0,e=a.length;d<e;++d){var b=gt(this,a[d],b),f=b.length;0===d?(b[f++]=b[0],b[f++]=b[1]):(b[f++]=b[c[d-1]],b[f++]=b[c[d-1]+1]);c[d]=f}a=new wj(null);
a.S("XY",b,c);return a}},it={MultiLineString:function(a){var b=a.Nb(),c=b.length,d=a.C;a=a.F;for(var e=0,f=["L("],g=0;g<c;++g){var h=b[g],e=ft(this,d,a,e,h);0!==g&&f.push("'");f.push(e);e=h}f.push(")");return f.join("")},MultiPoint:function(a){var b=a.C;return"P("+ft(this,b,a.F,0,b.length)+")"},MultiPolygon:function(a){var b=a.C,c=a.F;a=a.f;for(var d=a.length,e=0,f=["A"],g=0;g<d;++g){var h=a[g];f.push("(");e=et.call(this,b,c,e,h,f);f.push(")")}return f.join("")},LineString:function(a){var b=a.C;return"l("+
ft(this,b,a.F,0,b.length)+")"},Point:function(a){var b=a.C;return"p("+ft(this,b,a.F,0,b.length)+")"},Polygon:function(a){var b=["a("];et.call(this,a.C,a.F,0,a.Nb(),b);b.push(")");return b.join("")}};
function gt(a,b,c){var d=b.length,e=0;c=void 0!==c?c:[];for(var f=c.length;e<d;){var g,h=0,k=0;do g=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz".indexOf(b.charAt(e++)),k|=(g&31)<<h,h+=5;while(32<=g);a.b+=k&1?~(k>>1):k>>1;k=h=0;do g=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz".indexOf(b.charAt(e++)),k|=(g&31)<<h,h+=5;while(32<=g);a.g+=k&1?~(k>>1):k>>1;c[f++]=a.b*a.c;c[f++]=a.g*a.c}return c}
function ft(a,b,c,d,e){for(var f="";d<e;d+=c){var g=b[d],h=b[d+1],g=Math.floor(g/a.c),h=Math.floor(h/a.c),k=g-a.b,m=h-a.g;a.b=g;a.g=h;f+=Zs(k)+Zs(m)}return f}
function Rs(a,b){var c=b.indexOf("~"),d=Ss(a,0<=c?b.substring(0,c)+")":b),d=new yi(d);if(0<=c){b=b.substring(c+1,b.length-1);var c=b.indexOf("~"),e=0<=c?b.substring(0,c):b;if(""!=e)for(var e=e.split("'"),f=0;f<e.length;++f){var g=decodeURIComponent(e[f]).split("*"),h=g[0],g=g[1];!a.f&&Ws[h]&&(h=Ws[h]);d.set(h,ct(h,g))}if(0<=c)if(c=b.substring(c+1),a.f){if(""!=c){var k;b=dt(c);f=b.fillColor;k=b.fontSize;a=b.fontColor;c=b.pointRadius;e=b.strokeColor;h=b.strokeWidth;b=null;void 0!==f&&(b=new mi({color:f}));
f=null;void 0!==e&&void 0!==h&&(f=new ri({color:e,width:h}));e=null;void 0!==c&&(e=new ji({radius:c,fill:b,stroke:f}),b=f=null);c=null;void 0!==k&&void 0!==a&&(c=new fq({font:k+" sans-serif",fill:new mi({color:a})}));d.setStyle(new U({fill:b,image:e,stroke:f,text:c}))}}else{a=dt(c);c=d.G();c instanceof oj?a.isLabel||a.t?(delete a.strokeColor,delete a.fillColor):(delete a.fontColor,delete a.fontSize):(delete a.fontColor,c instanceof dj&&(delete a.fillColor,delete a.fillOpacity));a.fontSize&&(c=parseFloat(a.fontSize),
-1!==a.fontSize.indexOf("px")&&(c=Math.round(c/1.333333)),a.fontSize=c);c={};for(k in a)b=a[k],Ws[k]?c[Ws[k]]=b:c[k]=b;d.Ma(c)}}return d}function Ss(a,b){var c=ht[b[0]];a.b=0;a.g=0;return c.call(a,b)}
function Ts(a,b,c){var d=[],e="",f=b.G();null!=f&&(e=Us(a,f,c));0<e.length&&(e=e.substring(0,e.length-1),d.push(e));var g=[];Ra(a.o(b),function(a,c){c!==b.mb&&(0!==g.length&&g.push("'"),a=encodeURIComponent(c.replace(/[()'*]/g,"_")+"*"+a.toString().replace(/[()'*]/g,"_")),g.push(a))});0<g.length&&(d.push("~"),Array.prototype.push.apply(d,g));a.i&&(a=b.c,void 0!==a&&(a=a.call(b,0),null!==a&&(c=[],a=Array.isArray(a)?a:[a],$s(a,f.R(),c),0<c.length&&(d.push("~"),Array.prototype.push.apply(d,c)))));d.push(")");
return d.join("")}function Us(a,b,c){var d=it[b.R()];b=Jh(b,!0,c);a.b=0;a.g=0;return d.call(a,b)};w.value("ngeoWfsPermalinkOptions",{url:"",wfsTypes:[],defaultFeatureNS:"",defaultFeaturePrefix:""});function jt(a,b,c){this.i=c.url;this.f=void 0!==c.maxFeatures?c.maxFeatures:50;this.b={};c.wfsTypes.forEach(function(a){this.b[a.featureType]=a}.bind(this));this.g=c.defaultFeatureNS;this.c=c.defaultFeaturePrefix;this.o=c.pointRecenterZoom;this.ia=a;this.Sa=b}jt.$inject=["$http","ngeoQueryResult","ngeoWfsPermalinkOptions"];jt.prototype.clear=function(){kt(this)};jt.prototype.clear=jt.prototype.clear;
jt.prototype.$c=function(a,b){kt(this);var c=a.Zp;if(this.b.hasOwnProperty(c)){var c=this.b[c],d=lt(a.ul);null!==d&&mt(this,c,d,b,a.Ap)}};jt.prototype.issue=jt.prototype.$c;
function mt(a,b,c,d,e){var f=new ek;c=rk(f,{Ba:T(d).da().b,featureNS:void 0!==b.featureNS?b.featureNS:a.g,featurePrefix:void 0!==b.featurePrefix?b.featurePrefix:a.c,Of:[b.featureType],tg:"GML3",filter:c,maxFeatures:a.f});c=(new XMLSerializer).serializeToString(c);a.ia.post(a.i,c).then(function(a){a=f.readFeatures(a.data);if(0!=a.length){var c=d.ka();void 0!==c&&Yn(T(d),nt(a),c,{ub:this.o,padding:[10,10,10,10]});e&&(this.Sa.sources.push({features:a,id:b.featureType,identifierAttributeField:b.label,
label:b.featureType,pending:!1}),this.Sa.total=a.length)}}.bind(a))}function nt(a){return a.reduce(function(a,c){return ed(a,c.G().I())},Tc())}function lt(a){return 0==a.length?null:ot(a.map(function(a){a=a.filters.map(function(a){var b=a.ua;return Array.isArray(b)?ot(b.map(function(b){return new ak(a.property,b,void 0)}),dk):new ak(a.property,a.ua,void 0)});return ot(a,ck)}),dk)}function ot(a,b){return a.reduce(function(a,d){return null===a?d:b(a,d)},null)}
function kt(a){a.Sa.total=0;a.Sa.sources.forEach(function(a){a.features.length=0},a)}w.service("ngeoWfsPermalink",jt);var pt={OPACITY:"opacity"};z.value("gmfPermalinkOptions",{});
function qt(a,b,c,d,e,f,g,h,k,m,n,p,q,t,x){this.B=null;this.listenerKeys_={};this.D=b;this.V=c;this.J=d.gb();this.T=e;this.i=f;this.s=g;this.b=h;this.M=k;this.j=m;this.H=x;this.g=p;this.Ta=q;this.v=this.f=this.c=null;this.pa=t;this.u=null;void 0!==n.projectionCodes&&(b=t.Yf(n.projectionCodes),0<b.length&&(this.u=b));void 0!==n.crosshairStyle?this.O=n.crosshairStyle:this.O=[new U({image:new Xr({stroke:new ri({color:"rgba(255, 255, 255, 0.8)",width:5}),points:4,radius:8,ed:0,angle:0})}),new U({image:new Xr({stroke:new ri({color:"rgba(255, 0, 0, 1)",
width:2}),points:4,radius:8,ed:0,angle:0})})];this.K=new Xs({setStyle:!1,encodeStyles:!1,oj:{fillColor:"c",fillOpacity:"o",fontColor:"c",fontSize:"s",isBox:"r",isCircle:"l",isLabel:"t",name:"n",pointRadius:"s",showMeasure:"m",strokeColor:"c",strokeWidth:"k"}});E(this.D,"change",this.mm,this);this.M.Ob().then(function(b){this.v=b;a(function(){rt(this)}.bind(this))}.bind(this));var v=this.pc();v.forEach(function(a){this.T.setStyle(a);st(this,a)},this);this.i.extend(v);E(this.i,Cc,this.Gm,this);E(this.i,
Ec,this.Hm,this);this.H.$on("$localeChangeSuccess",function(){v.forEach(function(a){this.T.setStyle(a)},this)}.bind(this))}qt.$inject="$timeout ngeoBackgroundLayerMgr ngeoDebounce ngeoFeatureOverlayMgr ngeoFeatureHelper ngeoFeatures ngeoLayerHelper ngeoStateManager gmfThemes gmfTreeManager gmfPermalinkOptions ngeoLocation ngeoWfsPermalink ngeoAutoProjection $rootScope".split(" ");
function tt(a,b){a.listenerKeys_[b]?(a.listenerKeys_[b].Pb.length&&(a.listenerKeys_[b].Pb.forEach(function(a){cl(a)},a),a.listenerKeys_[b].Pb.length=0),a.listenerKeys_[b].Tb.length&&(a.listenerKeys_[b].Tb.forEach(function(a){B(a)},a),a.listenerKeys_[b].Tb.length=0)):a.listenerKeys_[b]={Pb:[],Tb:[]}}function ut(a,b,c,d){a.listenerKeys_[b]||tt(a,b);(void 0!==d?d:1)?a.listenerKeys_[b].Tb.push(c):a.listenerKeys_[b].Pb.push(c)}
qt.prototype.ai=function(){var a=null,b=this.b.b.map_x,c=this.b.b.map_y;void 0!==b&&void 0!==c&&(a=[b,c],null!==this.u&&(b=T(this.c).da(),b=this.pa.Vg(a,b.I(),b,this.u),null!==b&&(a=b)));return a};qt.prototype.getMapCenter=qt.prototype.ai;qt.prototype.di=function(){var a=null,b=this.b.b.map_zoom;void 0!==b&&(a=b);return a};qt.prototype.getMapZoom=qt.prototype.di;qt.prototype.bi=function(){return"true"===this.b.b.map_crosshair?!0:!1};qt.prototype.getMapCrosshair=qt.prototype.bi;
qt.prototype.ci=function(){return this.b.b.map_tooltip||null};qt.prototype.getMapTooltip=qt.prototype.ci;qt.prototype.pc=function(){var a=[],b=this.b.b.rl_features;void 0!==b&&""!==b&&(a=this.K.readFeatures(b));return a};qt.prototype.getFeatures=qt.prototype.pc;qt.prototype.Ij=function(a){for(var b=this.g.Xf("dim_"),c=0;c<b.length;c++){var d=b[c],e=this.g.rc(d);a[d.slice(4)]=e}this.H.$watchCollection(function(){return a}.bind(this),function(a){var b={},c;for(c in a)b["dim_"+c]=a[c];this.g.updateParams(b)}.bind(this))};
qt.prototype.setDimensions=qt.prototype.Ij;qt.prototype.setMap=function(a){if(a!==this.c){if(this.c){B(this.B);this.B=null;this.o&&(this.o.setMap(null),S(this.o).clear(),this.o=null);var b=this.f.ha(),b=r(b);tt(this,b);this.c=this.f=null}a&&(this.c=a,vt(this,a))}};qt.prototype.setMap=qt.prototype.setMap;
function vt(a,b){var c=T(b),d=a.ai();null!==d&&Zn(c,d);var e=a.di();null!==e&&ao(c,e);a.B=E(c,"propertychange",a.V(function(){var a=c.la(),b=Xn(c),d={};d.map_x=Math.round(a[0]);d.map_y=Math.round(a[1]);d.map_zoom=b;Rk(this.b,d)}.bind(a),300,!0),a);if(a.bi()){var f;null!==d?f=d:f=c.la();e=new yi(new oj(f));e.setStyle(a.O);a.J.ra(e)}if(e=a.ci()){var g;null!==d?g=d:g=c.la();d=$("<div/>",{"class":"gmf-permalink-tooltip",text:e})[0];g=new Ks({element:d,position:g});b.i.push(g)}wt(a,b);g=xt(a);null!==g&&
a.Ta.$c(g,b)}qt.prototype.Wh=function(a){var b=null,c=this.b.b.baselayer_ref;if(void 0!==c)for(var d=0,e=a.length;d<e;d++)if(a[d].get("label")===c){b=a[d];break}return b};qt.prototype.getBackgroundLayer=qt.prototype.Wh;l=qt.prototype;l.mm=function(){if(this.c){var a=this.D.get(this.c).get("label"),b={};b.baselayer_ref=a;Rk(this.b,b)}};
function rt(a){if(a.v){var b=a.f.ha();a.v.forEach(function(a){a.children.forEach(this.Gi,this)},a);var c=r(b);ut(a,c,E(b,Cc,a.vi,a));ut(a,c,E(b,Ec,a.wi,a));b.forEach(function(a){yt(this,a,!0)},a)}}
l.Gi=function(a){var b,c,d,e=this.f.ha();if(a.mixed)d=[],a.children.forEach(function(a){a.mixed&&this.Gi(a);c=zt(a.name,qh(a)===uh);void 0!==this.b.b[c]&&(a=a.name,(b=this.s.bc(a,e.c))?At(this,b):d.push(a))},this),d.length&&this.j.de([{node:a,layers:d}]);else{c=zt(a.name,qh(a)===uh);var f=this.b.b[c];void 0!==f&&((b=this.s.bc(a.name,e.c))?(Bt(b,f),At(this,b)):""!==f?(d=f.split(","),this.j.de([{node:a,layers:d}])):this.j.de([{node:a,layers:[]}]))}};function Bt(a,b){S(a).updateParams({LAYERS:b})}
l.vi=function(a){yt(this,a.element,!0)};l.wi=function(a){this.xi(a.element)};function yt(a,b,c){var d=void 0!==c?c:!1,e=r(b);if(b instanceof Cf)ut(a,e,E(b.ha(),Cc,a.vi,a)),ut(a,e,E(b.ha(),Ec,a.wi,a)),b.ha().forEach(function(a){yt(this,a,c)},a);else{ut(a,e,E(b,I("visible"),a.Am,a));ut(a,e,E(b,I("opacity"),a.ym,a));if(b.get("isMerged")){var e=S(b),f=r(e);ut(a,f,E(e,"change",a.Um.bind(a,b,e),a));d||e.b()}else d||Ct(a,b);At(a,b)}}
l.xi=function(a){var b=r(a);tt(this,b);a instanceof Cf?a.ha().forEach(this.xi,this):(a.get("isMerged")&&(b=S(a),b=r(b),tt(this,b)),Dt(this,a))};l.Am=function(a){Ct(this,a.target)};l.ym=function(a){a=a.target;var b={},c=a.get("isMerged"),d=a.get("layerNodeName");b[zt(d,c,"opacity")]=Ge(a);Rk(this.b,b)};function Ct(a,b){var c=He(b),d;d=b.get("layerNodeName");var e=b.get("isMerged");d=zt(d,e);e={};b.get("isMerged")?!1===c&&(e[d]="",Rk(a.b,e)):(e[d]=c,Rk(a.b,e))}
function At(a,b){var c=b.get("layerNodeName"),d=b.get("isMerged"),e,f;Object.keys(pt).forEach(function(a){e=zt(c,d,pt[a]);f=this.b.b[e];void 0!==f&&b.set(pt[a],f)},a);e=zt(c,d);f=a.b.b[e];void 0!==f&&(d?b.Ja(0<f.length):b.Ja(f))}function Dt(a,b){var c=b.get("layerNodeName"),d=b.get("isMerged"),e;Object.keys(pt).forEach(function(a){e=zt(c,d,pt[a]);this.b.Sc(e)},a);e=zt(c,d);a.b.Sc(e)}
l.Um=function(a,b){b=b.Ha.LAYERS;Array.isArray(b)&&(b=b.join(","));a=a.get("layerNodeName");var c={};c["tree_group_layers_"+a]=b;Rk(this.b,c)};function zt(a,b,c){return(b?"opacity"===c?"tree_group_opacity_":"tree_group_layers_":"opacity"===c?"tree_opacity_":"tree_enable_")+a}function wt(a,b){a.f=a.s.qc(b,"data");rt(a)}l.Gm=function(a){st(this,a.element)};l.Hm=function(a){a=r(a.element);tt(this,a);this.Di()};function st(a,b){var c=r(b);ut(a,c,E(b,"change",a.Di,a),!0)}
l.Di=function(){var a=this.K.writeFeatures(this.i.c),b={};b.rl_features=a;Rk(this.b,b)};function xt(a){var b=a.g.rc("wfs_layer");if(!b)return null;var c=a.g.ji("wfs_ngroups"),d=a.g.Xf("wfs_"),e=[],f;if(void 0===c)f=Et(a,"wfs_",d),null!==f&&e.push(f);else for(var g=0;g<c;g++)f=Et(a,"wfs_"+g+"_",d),null!==f&&e.push(f);if(0==e.length)return null;a=a.g.rc("wfs_showFeatures");return{Zp:b,Ap:!("0"===a||"false"===a),ul:e}}
function Et(a,b,c){var d=[];c.forEach(function(a){if("wfs_layer"!=a&&"wfs_showFeatures"!=a&&"wfs_ngroups"!=a&&0==a.indexOf(b)){var c=this.g.rc(a);if(c){var g=c;-1<c.indexOf(",")&&(g=c.split(","));a={property:a.replace(b,""),ua:g};d.push(a)}}}.bind(a));return 0<d.length?{filters:d}:null}z.service("gmfPermalink",qt);var Ft;
function Gt(){var a=aa.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Nf("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!Nf("Trident")&&!Nf("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(ba(c.next)){c=c.next;var a=c.wh;c.wh=null;a()}};return function(a){d.next={wh:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){aa.setTimeout(a,0)}};var Ht=Array(6);function It(){return[1,0,0,1,0,0]}function Jt(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=b[0],m=b[1],n=b[2],p=b[3],q=b[4];b=b[5];a[0]=c*k+e*m;a[1]=d*k+f*m;a[2]=c*n+e*p;a[3]=d*n+f*p;a[4]=c*q+e*b+g;a[5]=d*q+f*b+h}function Kt(a,b,c,d,e){a[0]=b;a[1]=0;a[2]=0;a[3]=c;a[4]=d;a[5]=e;return a}function Lt(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function Mt(a,b){var c=b[0],d=b[1];b[0]=a[0]*c+a[2]*d+a[4];b[1]=a[1]*c+a[3]*d+a[5];return b}
function Nt(a,b,c,d,e,f,g,h){var k=Math.sin(f);f=Math.cos(f);a[0]=d*f;a[1]=e*k;a[2]=-d*k;a[3]=e*f;a[4]=g*d*f-h*d*k+b;a[5]=g*e*k+h*e*f+c;return a}function Pt(a){var b=a[0]*a[3]-a[1]*a[2];Rc(0!==b,32);var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5];a[0]=f/b;a[1]=-d/b;a[2]=-e/b;a[3]=c/b;a[4]=(e*h-f*g)/b;a[5]=-(c*h-d*g)/b};function Qt(a,b){this.o=b;this.g={};this.f={}}A(Qt,Vb);l=Qt.prototype;l.sa=function(){for(var a in this.g)this.g[a].Va()};function Rt(){if(32<bq.g){var a=0,b,c;for(b in bq.b)c=bq.b[b],0!==(a++&3)||gc(c)||(delete bq.b[b],--bq.g)}}
l.zb=function(a,b,c,d,e,f){function g(a,e){var f=Sb(a).toString(),g=b.De[Sb(e)].ng;if(!(f in b.Pg)||g)return c.call(d,a,g?e:null)}var h,k=b.Z,m=k.resolution,n=k.projection,k=a;if(n.c){var n=n.I(),p=ld(n),q=a[0];if(q<n[0]||q>n[2])k=[q+p*Math.ceil((n[0]-q)/p),a[1]]}n=b.Ee;for(p=n.length-1;0<=p;--p){var t=n[p],q=t.layer;if(t.visible&&m>=t.Db&&m<t.Qb&&e.call(f,q)&&(t=St(this,q),S(q)&&(h=t.zb(S(q).B?k:a,b,g,d)),h))return h}};
function St(a,b){var c=Sb(b).toString();if(c in a.g)return a.g[c];b=b instanceof Ff?new Tt(b):b instanceof Gf?new Ut(b):b instanceof fl?new Vt(b):null;a.g[c]=b;a.f[c]=E(b,"change",a.zm,a);return b}l.zm=function(){this.o.render()};l.Cj=Rb;l.lp=function(a,b){for(var c in this.g)if(!(b&&c in b.De)){a=c;var d=this.g[a];delete this.g[a];B(this.f[a]);delete this.f[a];d.Va()}};function Nc(a,b){return a.zIndex-b.zIndex};function Wt(a,b){this.B=a;this.f=b;this.b=[];this.g=[];this.c={}}Wt.prototype.clear=function(){this.b.length=0;this.g.length=0;Xb(this.c)};Wt.prototype.j=function(a){Rc(!(this.f(a)in this.c),31);var b=this.B(a);return Infinity!=b?(this.b.push(a),this.g.push(b),this.c[this.f(a)]=!0,Xt(this,0,this.b.length-1),!0):!1};Wt.prototype.Mb=function(){return this.b.length};Wt.prototype.Cb=function(){return 0===this.b.length};
function Yt(a,b){for(var c=a.b,d=a.g,e=c.length,f=c[b],g=d[b],h=b;b<e>>1;){var k=2*b+1,m=2*b+2,k=m<e&&d[m]<d[k]?m:k;c[b]=c[k];d[b]=d[k];b=k}c[b]=f;d[b]=g;Xt(a,h,b)}function Xt(a,b,c){var d=a.b;a=a.g;for(var e=d[c],f=a[c];c>b;){var g=c-1>>1;if(a[g]>f)d[c]=d[g],a[c]=a[g],c=g;else break}d[c]=e;a[c]=f};function Zt(a,b){Wt.call(this,function(b){return a.apply(null,b)},function(a){return a[0].xc()});this.u=b;this.o=0;this.i={}}A(Zt,Wt);Zt.prototype.j=function(a){var b=Wt.prototype.j.call(this,a);b&&E(a[0],"change",this.s,this);return b};Zt.prototype.s=function(a){a=a.target;var b=a.ma();if(2===b||3===b||4===b||5===b)ec(a,"change",this.s,this),a=a.xc(),a in this.i&&(delete this.i[a],--this.o),this.u()};function $t(a){uc.call(this);this.element=a.element?a.element:null;this.i=this.J=null;this.j=[];this.render=a.render?a.render:Rb;a.target&&au(this,a.target)}A($t,uc);$t.prototype.sa=function(){dg(this.element);uc.prototype.sa.call(this)};$t.prototype.setMap=function(a){this.i&&dg(this.element);for(var b=0,c=this.j.length;b<c;++b)B(this.j[b]);this.j.length=0;if(this.i=a)(this.J?this.J:a.u).appendChild(this.element),this.render!==Rb&&this.j.push(E(a,"postrender",this.render,this)),a.render()};
function au(a,b){a.J="string"===typeof b?document.getElementById(b):b};function bu(a){a=a?a:{};this.H=document.createElement("UL");this.s=document.createElement("LI");this.H.appendChild(this.s);this.s.style.display="none";this.o=void 0!==a.collapsed?a.collapsed:!0;this.v=void 0!==a.cl?a.cl:!0;this.v||(this.o=!1);var b=void 0!==a.className?a.className:"ol-attribution",c=void 0!==a.Sg?a.Sg:"Attributions",d=void 0!==a.bl?a.bl:"\u00bb";"string"===typeof d?(this.B=document.createElement("span"),this.B.textContent=d):this.B=d;d=void 0!==a.label?a.label:"i";"string"===typeof d?
(this.u=document.createElement("span"),this.u.textContent=d):this.u=d;var e=this.v&&!this.o?this.B:this.u,d=document.createElement("button");d.setAttribute("type","button");d.title=c;d.appendChild(e);E(d,"click",this.V,this);c=document.createElement("div");c.className=b+" ol-unselectable ol-control"+(this.o&&this.v?" ol-collapsed":"")+(this.v?"":" ol-uncollapsible");c.appendChild(this.H);c.appendChild(d);$t.call(this,{element:c,render:a.render?a.render:cu,target:a.target});this.D=!0;this.f={};this.c=
{};this.M={}}A(bu,$t);
function cu(a){if(a=a.frameState){var b,c,d,e,f,g,h,k,m,n,p,q=a.Ee,t=Wb({},a.xa),x={},v=a.Z.projection;c=0;for(b=q.length;c<b;c++)if(g=S(q[c].layer))if(n=Sb(g).toString(),m=g.v)for(d=0,e=m.length;d<e;d++)if(h=m[d],k=Sb(h).toString(),!(k in t)){if(f=a.Xg[n]){var C=g.cc(v);a:{p=h;var N=v;if(p.b){var J,G,D,H=void 0;for(H in f)if(H in p.b){D=f[H];var y;J=0;for(G=p.b[H].length;J<G;++J){y=p.b[H][J];if(Ke(y,D)){p=!0;break a}var K=pf(C,yf(N),parseInt(H,10)),X=K.Y-K.X+1;if(D.X<K.X||D.Y>K.Y)if(Ke(y,new Ie(De(D.X,
X),De(D.Y,X),D.aa,D.ea))||D.Y-D.X+1>X&&Ke(y,K)){p=!0;break a}}}p=!1}else p=!0}}else p=!1;p?(k in x&&delete x[k],t[k]=h):x[k]=h}b=[t,x];c=b[0];b=b[1];for(var Q in this.f)Q in c?(this.c[Q]||(this.f[Q].style.display="",this.c[Q]=!0),delete c[Q]):Q in b?(this.c[Q]&&(this.f[Q].style.display="none",delete this.c[Q]),delete b[Q]):(dg(this.f[Q]),delete this.f[Q],delete this.c[Q]);for(Q in c)d=document.createElement("LI"),d.innerHTML=c[Q].g,this.H.appendChild(d),this.f[Q]=d,this.c[Q]=!0;for(Q in b)d=document.createElement("LI"),
d.innerHTML=b[Q].g,d.style.display="none",this.H.appendChild(d),this.f[Q]=d;Q=!Zb(this.c)||!Zb(a.ad);this.D!=Q&&(this.element.style.display=Q?"":"none",this.D=Q);Q&&Zb(this.c)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only");var W;a=a.ad;Q=this.M;for(W in Q)W in a||(dg(Q[W]),delete Q[W]);for(var xa in a)b=a[xa],b instanceof HTMLElement&&(this.s.appendChild(b),Q[xa]=b),xa in Q||(W=new Image,W.src=xa,""===b?c=W:(c=document.createElement("a"),c.href=b,c.appendChild(W)),
this.s.appendChild(c),Q[xa]=c);this.s.style.display=Zb(a)?"none":""}else this.D&&(this.element.style.display="none",this.D=!1)}bu.prototype.V=function(a){a.preventDefault();this.element.classList.toggle("ol-collapsed");if(this.o){a=this.u;var b=a.parentNode;b&&b.replaceChild(this.B,a)}else a=this.B,(b=a.parentNode)&&b.replaceChild(this.u,a);this.o=!this.o};function du(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-rotate",c=void 0!==a.label?a.label:"\u21e7";this.c=null;"string"===typeof c?(this.c=document.createElement("span"),this.c.className="ol-compass",this.c.textContent=c):(this.c=c,this.c.classList.add("ol-compass"));var d=a.Sg?a.Sg:"Reset rotation",c=document.createElement("button");c.className=b+"-reset";c.setAttribute("type","button");c.title=d;c.appendChild(this.c);E(c,"click",du.prototype.u,this);d=document.createElement("div");d.className=
b+" ol-unselectable ol-control";d.appendChild(c);b=a.render?a.render:eu;this.o=a.op?a.op:void 0;$t.call(this,{element:d,render:b,target:a.target});this.s=void 0!==a.duration?a.duration:250;this.f=void 0!==a.Wk?a.Wk:!0;this.B=void 0;this.f&&this.element.classList.add("ol-hidden")}A(du,$t);
du.prototype.u=function(a){a.preventDefault();if(void 0!==this.o)this.o();else{a=this.i;var b=T(a);if(b){var c=Vn(b);void 0!==c&&(0<this.s&&(c%=2*Math.PI,c<-Math.PI&&(c+=2*Math.PI),c>Math.PI&&(c-=2*Math.PI),a.fb(go({rotation:c,duration:this.s,Wa:bo}))),b.Od(0))}}};
function eu(a){if(a=a.frameState){a=a.Z.rotation;if(a!=this.B){var b="rotate("+a+"rad)";if(this.f){var c=this.element.classList.contains("ol-hidden");c||0!==a?c&&0!==a&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.c.style.msTransform=b;this.c.style.webkitTransform=b;this.c.style.transform=b}this.B=a}};function fu(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-zoom",c=void 0!==a.nc?a.nc:1,d=void 0!==a.jq?a.jq:"+",e=void 0!==a.kq?a.kq:"\u2212",f=void 0!==a.ah?a.ah:"Zoom in",g=void 0!==a.lq?a.lq:"Zoom out",h=document.createElement("button");h.className=b+"-in";h.setAttribute("type","button");h.title=f;h.appendChild("string"===typeof d?document.createTextNode(d):d);E(h,"click",fu.prototype.f.bind(this,c));d=document.createElement("button");d.className=b+"-out";d.setAttribute("type","button");
d.title=g;d.appendChild("string"===typeof e?document.createTextNode(e):e);E(d,"click",fu.prototype.f.bind(this,-c));c=document.createElement("div");c.className=b+" ol-unselectable ol-control";c.appendChild(h);c.appendChild(d);$t.call(this,{element:c,target:a.target});this.c=void 0!==a.duration?a.duration:250}A(fu,$t);fu.prototype.f=function(a,b){b.preventDefault();var c=this.i;if(b=T(c)){var d=b.ca();d&&(0<this.c&&c.fb(ho({resolution:d,duration:this.c,Wa:bo})),a=b.Za(d,a),b.set(Zl,a))}};function gu(a,b,c){this.f=a;this.c=b;this.o=c;this.b=[];this.g=this.i=0}gu.prototype.end=function(){if(6>this.b.length)return!1;var a=Date.now()-this.o,b=this.b.length-3;if(this.b[b+2]<a)return!1;for(var c=b-3;0<c&&this.b[c+2]>a;)c-=3;var a=this.b[b+2]-this.b[c+2],d=this.b[b]-this.b[c],b=this.b[b+1]-this.b[c+1];this.i=Math.atan2(b,d);this.g=Math.sqrt(d*d+b*b)/a;return this.g>this.c};
function hu(a,b){var c=a.f,d=a.g,e=a.c-d,f=Math.log(a.c/a.g)/a.f;return fo({source:b,duration:f,Wa:function(a){return d*(Math.exp(c*a*f)-1)/e}})};function iu(a){a=a?a:{};this.f=a.nc?a.nc:1;yo.call(this,{handleEvent:ju});this.i=void 0!==a.duration?a.duration:250}A(iu,yo);function ju(a){var b=!1,c=a.originalEvent;if(a.type==tn){var b=a.map,d=a.coordinate,c=c.shiftKey?-this.f:this.f,e=T(b);Ao(b,e,c,d,this.i);a.preventDefault();b=!0}return!b};function ku(a){Co.call(this,{ab:lu,sb:mu,bb:nu});a=a?a:{};this.f=a.qn;this.i=this.j=null;this.u=a.ua?a.ua:qo;this.s=!1}A(ku,Co);function mu(a){var b=Eo(this.o);this.f&&this.f.b.push(b[0],b[1],Date.now());if(this.i){var c=this.i[0]-b[0],d=b[1]-this.i[1];a=T(a.map);var e=a.ma(),d=c=[c,d],f=e.resolution;d[0]*=f;d[1]*=f;On(c,e.rotation);Ln(c,e.center);c=a.c.center(c);Zn(a,c)}this.i=b}
function nu(a){var b=a.map;a=T(b);if(0===this.o.length){if(!this.s&&this.f&&this.f.end()){var c;c=this.f;c=(c.c-c.g)/c.f;var d=this.f.i,e=a.la();this.j=hu(this.f,e);b.fb(this.j);e=no(b,e);b=b.va([e[0]-c*Math.cos(d),e[1]-c*Math.sin(d)]);b=a.c.center(b);Zn(a,b)}else b.render();$n(a,-1);return!1}this.i=null;return!0}
function lu(a){if(0<this.o.length&&this.u(a)){var b=a.map,c=T(b);this.i=null;this.B||$n(c,1);this.j&&Jc(b.H,this.j)&&(Zn(c,a.frameState.Z.center),this.j=null);this.f&&(a=this.f,a.b.length=0,a.i=0,a.g=0);this.s=1<this.o.length;return!0}return!1}ku.prototype.Ec=Eh;function ou(a){a=a?a:{};Co.call(this,{ab:pu,sb:qu,bb:ru});this.i=a.ua?a.ua:oo;this.f=void 0;this.j=void 0!==a.duration?a.duration:250}A(ou,Co);function qu(a){if(uo(a)){var b=a.map,c=b.ka();a=a.pixel;c=Math.atan2(c[1]/2-a[1],a[0]-c[0]/2);if(void 0!==this.f){a=c-this.f;var d=T(b),e=Vn(d);zo(b,d,e-a)}this.f=c}}function ru(a){if(!uo(a))return!0;a=a.map;var b=T(a);$n(b,-1);var c=Vn(b),d=this.j,c=b.Ef(c,0);zo(a,b,c,void 0,d);return!1}
function pu(a){return uo(a)&&po(a)&&this.i(a)?($n(T(a.map),1),this.f=void 0,!0):!1}ou.prototype.Ec=Eh;function su(a){this.f=null;this.g=document.createElement("div");this.g.style.position="absolute";this.g.className="ol-box "+a;this.c=this.i=this.b=null}A(su,Vb);su.prototype.sa=function(){this.setMap(null)};function tu(a){var b=a.i,c=a.c;a=a.g.style;a.left=Math.min(b[0],c[0])+"px";a.top=Math.min(b[1],c[1])+"px";a.width=Math.abs(c[0]-b[0])+"px";a.height=Math.abs(c[1]-b[1])+"px"}
su.prototype.setMap=function(a){if(this.b){this.b.v.removeChild(this.g);var b=this.g.style;b.left=b.top=b.width=b.height="inherit"}(this.b=a)&&this.b.v.appendChild(this.g)};function uu(a){var b=a.i,c=a.c,b=[b,[b[0],c[1]],c,[c[0],b[1]]].map(a.b.va,a.b);b[4]=b[0].slice();a.f?a.f.fa([b]):a.f=new wj([b])}su.prototype.G=function(){return this.f};function vu(a,b,c){Pb.call(this,a);this.coordinate=b;this.mapBrowserEvent=c}A(vu,Pb);function wu(a){Co.call(this,{ab:xu,sb:yu,bb:zu});a=a?a:{};this.f=new su(a.className||"ol-dragbox");this.i=null;this.v=a.ua?a.ua:Dh;this.u=a.Yk?a.Yk:Au}A(wu,Co);function Au(a,b,c){a=c[0]-b[0];b=c[1]-b[1];return 64<=a*a+b*b}function yu(a){if(uo(a)){var b=this.f,c=a.pixel;b.i=this.i;b.c=c;uu(b);tu(b);F(this,new vu("boxdrag",a.coordinate,a))}}wu.prototype.G=function(){return this.f.G()};wu.prototype.s=Rb;
function zu(a){if(!uo(a))return!0;this.f.setMap(null);this.u(a,this.i,a.pixel)&&(this.s(a),F(this,new vu("boxend",a.coordinate,a)));return!1}function xu(a){if(uo(a)&&po(a)&&this.v(a)){this.i=a.pixel;this.f.setMap(a.map);var b=this.f,c=this.i;b.i=this.i;b.c=c;uu(b);tu(b);F(this,new vu("boxstart",a.coordinate,a));return!0}return!1};function Bu(a){a=a?a:{};var b=a.ua?a.ua:so;this.j=void 0!==a.duration?a.duration:200;this.D=void 0!==a.out?a.out:!1;wu.call(this,{ua:b,className:a.className||"ol-dragzoom"})}A(Bu,wu);
Bu.prototype.s=function(){var a=this.c,b=T(a),c=a.ka(),d=this.G().I();if(this.D){var e=Un(b,c),d=[no(a,hd(d)),no(a,[d[2],d[3]])],f=bd(void 0),g,h;g=0;for(h=d.length;g<h;++g)Uc(f,d[g]);f=1/Wn(f,c);d=(e[2]-e[0])/2*(f-1);f=(e[3]-e[1])/2*(f-1);e[0]-=d;e[2]+=d;e[1]-=f;e[3]+=f;d=e}c=b.Za(Wn(d,c));e=b.ca();f=b.la();a.fb(ho({resolution:e,duration:this.j,Wa:bo}));a.fb(fo({source:f,duration:this.j,Wa:bo}));Zn(b,nd(d));b.set(Zl,c)};function Cu(a){yo.call(this,{handleEvent:Du});a=a||{};this.f=function(a){return qo(a)&&to(a)};this.i=void 0!==a.ua?a.ua:this.f;this.o=void 0!==a.duration?a.duration:100;this.j=void 0!==a.Io?a.Io:128}A(Cu,yo);
function Du(a){var b=!1;if("keydown"==a.type){var c=a.originalEvent.keyCode;if(this.i(a)&&(40==c||37==c||39==c||38==c)){var d=a.map,b=T(d),e=b.ca()*this.j,f=0,g=0;40==c?g=-e:37==c?f=-e:39==c?f=e:g=e;c=[f,g];On(c,Vn(b));e=this.o;if(f=b.la())e&&0<e&&d.fb(fo({source:f,duration:e,Wa:eo})),d=b.c.center([f[0]+c[0],f[1]+c[1]]),Zn(b,d);a.preventDefault();b=!0}}return!b};function Eu(a){yo.call(this,{handleEvent:Fu});a=a?a:{};this.i=a.ua?a.ua:to;this.f=a.nc?a.nc:1;this.o=void 0!==a.duration?a.duration:100}A(Eu,yo);function Fu(a){var b=!1;if("keydown"==a.type||"keypress"==a.type){var c=a.originalEvent.charCode;if(this.i(a)&&(43==c||45==c)){var b=a.map,c=43==c?this.f:-this.f,d=T(b);Ao(b,d,c,void 0,this.o);a.preventDefault();b=!0}}return!b};function Gu(a){yo.call(this,{handleEvent:Hu});a=a||{};this.f=0;this.B=void 0!==a.duration?a.duration:250;this.u=void 0!==a.Yp?a.Yp:!0;this.o=null;this.j=this.i=void 0}A(Gu,yo);
function Hu(a){var b=!1;if("wheel"==a.type||"mousewheel"==a.type){var b=a.map,c=a.originalEvent;this.u&&(this.o=a.coordinate);var d;"wheel"==a.type?(d=c.deltaY,Vh&&c.deltaMode===Ub.WheelEvent.DOM_DELTA_PIXEL&&(d/=Yh),c.deltaMode===Ub.WheelEvent.DOM_DELTA_LINE&&(d*=40)):"mousewheel"==a.type&&(d=-c.wheelDeltaY,Wh&&(d/=3));this.f+=d;void 0===this.i&&(this.i=Date.now());d=Math.max(80-(Date.now()-this.i),0);Ub.clearTimeout(this.j);this.j=Ub.setTimeout(this.s.bind(this,b),d);a.preventDefault();b=!0}return!b}
Gu.prototype.s=function(a){var b=ze(this.f,-1,1),c=T(a);Ao(a,c,-b,this.o,this.B);this.f=0;this.o=null;this.j=this.i=void 0};function Iu(a){Co.call(this,{ab:Ju,sb:Ku,bb:Lu});a=a||{};this.i=null;this.j=void 0;this.f=!1;this.s=0;this.v=void 0!==a.threshold?a.threshold:.3;this.u=void 0!==a.duration?a.duration:250}A(Iu,Co);
function Ku(a){var b=0,c=this.o[0],d=this.o[1],c=Math.atan2(d.clientY-c.clientY,d.clientX-c.clientX);void 0!==this.j&&(b=c-this.j,this.s+=b,!this.f&&Math.abs(this.s)>this.v&&(this.f=!0));this.j=c;a=a.map;c=a.c.getBoundingClientRect();d=Eo(this.o);d[0]-=c.left;d[1]-=c.top;this.i=a.va(d);this.f&&(c=T(a),d=Vn(c),a.render(),zo(a,c,d+b,this.i))}function Lu(a){if(2>this.o.length){a=a.map;var b=T(a);$n(b,-1);if(this.f){var c=Vn(b),d=this.i,e=this.u,c=b.Ef(c,0);zo(a,b,c,d,e)}return!1}return!0}
function Ju(a){return 2<=this.o.length?(a=a.map,this.i=null,this.j=void 0,this.f=!1,this.s=0,this.B||$n(T(a),1),a.render(),!0):!1}Iu.prototype.Ec=Eh;function Mu(a){Co.call(this,{ab:Nu,sb:Ou,bb:Pu});a=a?a:{};this.i=null;this.s=void 0!==a.duration?a.duration:400;this.f=void 0;this.j=1}A(Mu,Co);function Ou(a){var b=1,c=this.o[0],d=this.o[1],e=c.clientX-d.clientX,c=c.clientY-d.clientY,e=Math.sqrt(e*e+c*c);void 0!==this.f&&(b=this.f/e);this.f=e;1!=b&&(this.j=b);a=a.map;var e=T(a),c=e.ca(),d=a.c.getBoundingClientRect(),f=Eo(this.o);f[0]-=d.left;f[1]-=d.top;this.i=a.va(f);a.render();Bo(a,e,c*b,this.i)}
function Pu(a){if(2>this.o.length){a=a.map;var b=T(a);$n(b,-1);var c=b.ca(),d=this.i,e=this.s,c=b.Za(c,0,this.j-1);Bo(a,b,c,d,e);return!1}return!0}function Nu(a){return 2<=this.o.length?(a=a.map,this.i=null,this.f=void 0,this.j=1,this.B||$n(T(a),1),a.render(),!0):!1}Mu.prototype.Ec=Eh;function Qu(a){a=a?a:{};var b=new xc,c=new gu(-.005,.05,100);(void 0!==a.sh?a.sh:1)&&b.push(new ou);(void 0!==a.ml?a.ml:1)&&b.push(new iu({nc:a.iq,duration:a.lf}));(void 0!==a.nl?a.nl:1)&&b.push(new ku({qn:c}));(void 0!==a.vg?a.vg:1)&&b.push(new Iu);(void 0!==a.Ho?a.Ho:1)&&b.push(new Mu({duration:a.lf}));if(void 0!==a.pn?a.pn:1)b.push(new Cu),b.push(new Eu({nc:a.iq,duration:a.lf}));(void 0!==a.wn?a.wn:1)&&b.push(new Gu({duration:a.lf}));(void 0!==a.zp?a.zp:1)&&b.push(new Bu({duration:a.lf}));return b}
;function Ru(a){Qe.call(this,{code:a,units:"m",extent:Su,global:!0,aq:Tu})}A(Ru,Qe);Ru.prototype.sc=function(a,b){return a/Ae(b[1]/6378137)};var Uu=6378137*Math.PI,Su=[-Uu,-Uu,Uu,Uu],Tu=[-180,-85,180,85],Vu="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(a){return new Ru(a)});
function Wu(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c)b[e]=6378137*Math.PI*a[e]/180,b[e+1]=6378137*Math.log(Math.tan(Math.PI*(a[e+1]+90)/360));return b}function Xu(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c)b[e]=180*a[e]/(6378137*Math.PI),b[e+1]=360*Math.atan(Math.exp(a[e+1]/6378137))/Math.PI-90;return b};function Yu(a,b){Qe.call(this,{code:a,units:"degrees",extent:Zu,wf:b,global:!0,Oi:$u,aq:Zu})}A(Yu,Qe);Yu.prototype.sc=function(a){return a};var Zu=[-180,-90,180,90],$u=Math.PI*Wo.radius/180,av=[new Yu("CRS:84"),new Yu("EPSG:4326","neu"),new Yu("urn:ogc:def:crs:EPSG::4326","neu"),new Yu("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Yu("urn:ogc:def:crs:OGC:1.3:CRS84"),new Yu("urn:ogc:def:crs:OGC:2:84"),new Yu("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Yu("urn:x-ogc:def:crs:EPSG:4326","neu")];function bv(){};function cv(a,b,c,d,e){this.f=a;this.K=b;this.j=c;this.T=d;this.Pc=e;this.i=this.b=this.g=this.ja=this.Ta=this.V=null;this.Ca=this.ta=this.v=this.J=this.H=this.D=0;this.Oa=!1;this.o=this.jc=0;this.Ya=!1;this.M=0;this.c="";this.pb=this.ob=0;this.kc=!1;this.B=this.Kc=0;this.pa=this.u=this.s=null;this.O=[];this.Oc=It()}A(cv,bv);
function dv(a,b,c){if(a.i){b=Gi(b,0,c,2,a.T,a.O);c=a.f;var d=a.Oc,e=c.globalAlpha;1!=a.v&&(c.globalAlpha=e*a.v);var f=a.jc;a.Oa&&(f+=a.Pc);var g,h;g=0;for(h=b.length;g<h;g+=2){var k=b[g]-a.D,m=b[g+1]-a.H;a.Ya&&(k=Math.round(k),m=Math.round(m));if(0!==f||1!=a.o){var n=k+a.D,p=m+a.H;Nt(d,n,p,a.o,a.o,f,-n,-p);c.setTransform.apply(c,d)}c.drawImage(a.i,a.ta,a.Ca,a.M,a.J,k,m,a.M,a.J)}0===f&&1==a.o||c.setTransform(1,0,0,1,0,0);1!=a.v&&(c.globalAlpha=e)}}
function ev(a,b,c,d){var e=0;if(a.pa&&""!==a.c){a.s&&fv(a,a.s);a.u&&gv(a,a.u);var f=a.pa,g=a.f,h=a.ja;h?(h.font!=f.font&&(h.font=g.font=f.font),h.textAlign!=f.textAlign&&(h.textAlign=g.textAlign=f.textAlign),h.textBaseline!=f.textBaseline&&(h.textBaseline=g.textBaseline=f.textBaseline)):(g.font=f.font,g.textAlign=f.textAlign,g.textBaseline=f.textBaseline,a.ja={font:f.font,textAlign:f.textAlign,textBaseline:f.textBaseline});b=Gi(b,e,c,d,a.T,a.O);f=a.f;g=a.Kc;for(a.kc&&(g+=a.Pc);e<c;e+=d){var h=b[e]+
a.ob,k=b[e+1]+a.pb;if(0!==g||1!=a.B){var m=Nt(a.Oc,h,k,a.B,a.B,g,-h,-k);f.setTransform.apply(f,m)}a.u&&f.strokeText(a.c,h,k);a.s&&f.fillText(a.c,h,k)}0===g&&1==a.B||f.setTransform(1,0,0,1,0,0)}}function hv(a,b,c,d,e,f){var g=a.f;a=Gi(b,c,d,e,a.T,a.O);g.moveTo(a[0],a[1]);b=a.length;f&&(b-=2);for(c=2;c<b;c+=2)g.lineTo(a[c],a[c+1]);f&&g.closePath();return d}function iv(a,b,c,d,e){var f,g;f=0;for(g=d.length;f<g;++f)c=hv(a,b,c,d[f],e,!0);return c}l=cv.prototype;
l.Lh=function(a){if(qd(this.j,a.I())){if(this.g||this.b){this.g&&fv(this,this.g);this.b&&gv(this,this.b);var b;b=this.T;var c=this.O,d=a.C;b=d?Gi(d,0,d.length,a.F,b,c):null;c=b[2]-b[0];d=b[3]-b[1];c=Math.sqrt(c*c+d*d);d=this.f;d.beginPath();d.arc(b[0],b[1],c,0,2*Math.PI);this.g&&d.fill();this.b&&d.stroke()}""!==this.c&&ev(this,a.la(),2,2)}};l.setStyle=function(a){this.hc(a.Ea(),a.Fa());this.$e(a.g);this.Wb(a.Ga())};
l.drawPoint=function(a){var b=a.C;a=a.F;this.i&&dv(this,b,b.length);""!==this.c&&ev(this,b,b.length,a)};l.Oh=function(a){var b=a.C;a=a.F;this.i&&dv(this,b,b.length);""!==this.c&&ev(this,b,b.length,a)};l.Mh=function(a){if(qd(this.j,a.I())){if(this.b){gv(this,this.b);var b=this.f,c=a.C;b.beginPath();hv(this,c,0,c.length,a.F,!1);b.stroke()}""!==this.c&&(a=hj(a),ev(this,a,2,2))}};
l.Nh=function(a){var b=a.I();if(qd(this.j,b)){if(this.b){gv(this,this.b);var b=this.f,c=a.C,d=0,e=a.Nb(),f=a.F;b.beginPath();var g,h;g=0;for(h=e.length;g<h;++g)d=hv(this,c,d,e[g],f,!1);b.stroke()}""!==this.c&&(a=mj(a),ev(this,a,a.length,2))}};l.Qh=function(a){if(qd(this.j,a.I())){if(this.b||this.g){this.g&&fv(this,this.g);this.b&&gv(this,this.b);var b=this.f;b.beginPath();iv(this,xj(a),0,a.Nb(),a.F);this.g&&b.fill();this.b&&b.stroke()}""!==this.c&&(a=yj(a),ev(this,a,2,2))}};
l.Ph=function(a){if(qd(this.j,a.I())){if(this.b||this.g){this.g&&fv(this,this.g);this.b&&gv(this,this.b);var b=this.f,c=Fj(a),d=0,e=a.f,f=a.F,g,h;g=0;for(h=e.length;g<h;++g){var k=e[g];b.beginPath();d=iv(this,c,d,k,f);this.g&&b.fill();this.b&&b.stroke()}}""!==this.c&&(a=Gj(a),ev(this,a,a.length,2))}};function fv(a,b){var c=a.f,d=a.V;d?d.fillStyle!=b.fillStyle&&(d.fillStyle=c.fillStyle=b.fillStyle):(c.fillStyle=b.fillStyle,a.V={fillStyle:b.fillStyle})}
function gv(a,b){var c=a.f,d=a.Ta;d?(d.lineCap!=b.lineCap&&(d.lineCap=c.lineCap=b.lineCap),Zh&&!Lc(d.W,b.W)&&c.setLineDash(d.W=b.W),d.lineJoin!=b.lineJoin&&(d.lineJoin=c.lineJoin=b.lineJoin),d.lineWidth!=b.lineWidth&&(d.lineWidth=c.lineWidth=b.lineWidth),d.miterLimit!=b.miterLimit&&(d.miterLimit=c.miterLimit=b.miterLimit),d.strokeStyle!=b.strokeStyle&&(d.strokeStyle=c.strokeStyle=b.strokeStyle)):(c.lineCap=b.lineCap,Zh&&c.setLineDash(b.W),c.lineJoin=b.lineJoin,c.lineWidth=b.lineWidth,c.miterLimit=
b.miterLimit,c.strokeStyle=b.strokeStyle,a.Ta={lineCap:b.lineCap,W:b.W,lineJoin:b.lineJoin,lineWidth:b.lineWidth,miterLimit:b.miterLimit,strokeStyle:b.strokeStyle})}l.hc=function(a,b){a?(a=a.qa(),this.g={fillStyle:Sh(a?a:ei)}):this.g=null;if(b){a=b.qa();var c=b.c,d=b.g,e=b.f,f=b.b;b=b.i;this.b={lineCap:void 0!==c?c:"round",W:d?d:fi,lineJoin:void 0!==e?e:"round",lineWidth:this.K*(void 0!==f?f:1),miterLimit:void 0!==b?b:10,strokeStyle:Qh(a?a:gi)}}else this.b=null};
l.$e=function(a){if(a){var b=a.wd(),c=a.Ne(1),d=a.Ab(),e=a.ka();this.D=b[0];this.H=b[1];this.J=e[1];this.i=c;this.v=a.O;this.ta=d[0];this.Ca=d[1];this.Oa=a.D;this.jc=a.B;this.o=a.$a();this.Ya=a.J;this.M=e[0]}else this.i=null};
l.Wb=function(a){if(a){var b=a.Ea();b?(b=b.qa(),this.s={fillStyle:Sh(b?b:ei)}):this.s=null;var c=a.Fa();if(c){var b=c.qa(),d=c.c,e=c.g,f=c.f,g=c.b,c=c.i;this.u={lineCap:void 0!==d?d:"round",W:e?e:fi,lineJoin:void 0!==f?f:"round",lineWidth:void 0!==g?g:1,miterLimit:void 0!==c?c:10,strokeStyle:Qh(b?b:gi)}}else this.u=null;var b=a.b,d=a.g,e=a.c,f=a.o,g=a.f,c=a.$a(),h=a.Ga(),k=a.i;a=a.B;this.pa={font:void 0!==b?b:"10px sans-serif",textAlign:void 0!==k?k:"center",textBaseline:void 0!==a?a:"middle"};this.c=
void 0!==h?h:"";this.ob=void 0!==d?this.K*d:0;this.pb=void 0!==e?this.K*e:0;this.kc=void 0!==f?f:!1;this.Kc=void 0!==g?g:0;this.B=this.K*(void 0!==c?c:1)}else this.c=""};function jv(a){pc.call(this);this.J=a}A(jv,pc);jv.prototype.zb=Rb;function kv(a,b,c){return function(d,e){return Rg(a,b,d,e,function(a){c[d]||(c[d]={});c[d][a.Gb.toString()]=a})}}jv.prototype.ya=function(){return this.J};jv.prototype.M=function(a){2===a.target.ma()&&lv(this)};function lv(a){var b=a.ya();He(b)&&"ready"==b.bg()&&a.b()}function mv(a,b){b.cj()&&(b=function(a,b,e){b=Sb(a).toString();a.Uc(e.Z.projection,e.Xg[b])}.bind(null,b),a.Pe.push(b))}
function nv(a,b){if(b){var c,d,e;d=0;for(e=b.length;d<e;++d)c=b[d],a[Sb(c).toString()]=c}}function ov(a,b){b=b.ta;void 0!==b&&("string"===typeof b?a.ad[b]="":b&&(Rc("string"==typeof b.href,44),Rc("string"==typeof b.src,45),a.ad[b.src]=b.href))}function pv(a,b,c,d){b=Sb(b).toString();c=c.toString();b in a?c in a[b]?a[b][c].extend(d):a[b][c]=d:(a[b]={},a[b][c]=d)}function qv(a,b,c){return[b*(Math.round(a[0]/b)+c[0]%2/2),b*(Math.round(a[1]/b)+c[1]%2/2)]}
function rv(a,b,c,d,e,f,g,h){var k=Sb(b).toString();k in a.Vd||(a.Vd[k]={});var m=a.Vd[k];a=a.Ip;var n=c.Rb,p,q,t,x,v,C;for(C=g;C>=n;--C)for(q=pf(c,f,C,q),t=c.ca(C),x=q.X;x<=q.Y;++x)for(v=q.aa;v<=q.ea;++v)g-C<=h?(p=$g(b,C,x,v,d,e),0==p.ma()&&(m[p.xc()]=!0,p.xc()in a.c||a.j([p,k,tf(c,p.Gb),t]))):b.Vj(C,x,v,e)};function sv(a){jv.call(this,a);this.V=It()}A(sv,jv);function tv(a,b,c){var d=b.Qa,e=b.size[0]*d,f=b.size[1]*d,g=b.Z.rotation,h=id(c),k=[c[2],c[3]],m=[c[2],c[1]];c=hd(c);Mt(b.xb,h);Mt(b.xb,k);Mt(b.xb,m);Mt(b.xb,c);a.save();hi(a,-g,e/2,f/2);a.beginPath();a.moveTo(h[0]*d,h[1]*d);a.lineTo(k[0]*d,k[1]*d);a.lineTo(m[0]*d,m[1]*d);a.lineTo(c[0]*d,c[1]*d);a.clip();hi(a,g,e/2,f/2)}
sv.prototype.o=function(a,b,c){uv(this,"precompose",c,a,void 0);var d=this.c?this.c.Le():null;if(d){var e=b.extent,f=void 0!==e;f&&tv(c,a,e);var e=this.B,g=c.globalAlpha;c.globalAlpha=b.opacity;c.drawImage(d,0,0,+d.width,+d.height,Math.round(e[4]),Math.round(e[5]),Math.round(d.width*e[0]),Math.round(d.height*e[3]));c.globalAlpha=g;f&&c.restore()}uv(this,"postcompose",c,a,void 0)};
function uv(a,b,c,d,e){var f=a.ya();if(gc(f,b)){var g=d.size[0]*d.Qa,h=d.size[1]*d.Qa,k=d.Z.rotation;hi(c,-k,g/2,h/2);a=void 0!==e?e:vv(a,d,0);F(f,new Df(b,new cv(c,d.Qa,d.extent,a,d.Z.rotation),d,c,null));hi(c,k,g/2,h/2)}}function vv(a,b,c){var d=b.Z,e=b.Qa,f=e/d.resolution;return Nt(a.V,e*b.size[0]/2,e*b.size[1]/2,f,-f,-d.rotation,-d.center[0]+c,-d.center[1])};function wv(){};var xv=["Polygon","LineString","Image","Text"];function yv(a,b,c,d){this.tolerance=a;this.Ta=b;this.ug=d;this.f=null;this.i=0;this.resolution=c;this.pa=this.M=null;this.g=[];this.coordinates=[];this.ta=It();this.b=[];this.ja=[];this.Ca=It();this.Oa=It()}A(yv,bv);
function zv(a,b,c,d,e,f){var g=a.coordinates.length,h=a.Qf(),k=[b[c],b[c+1]],m=[NaN,NaN],n=!0,p,q,t;for(p=c+e;p<d;p+=e)m[0]=b[p],m[1]=b[p+1],t=$c(h,m),t!==q?(n&&(a.coordinates[g++]=k[0],a.coordinates[g++]=k[1]),a.coordinates[g++]=m[0],a.coordinates[g++]=m[1],n=!1):1===t?(a.coordinates[g++]=m[0],a.coordinates[g++]=m[1],n=!1):n=!0,k[0]=m[0],k[1]=m[1],q=t;p===c+e&&(a.coordinates[g++]=k[0],a.coordinates[g++]=k[1]);f&&(a.coordinates[g++]=b[c],a.coordinates[g++]=b[c+1]);return g}
function Av(a,b){a.M=[0,b,0];a.g.push(a.M);a.pa=[0,b,0];a.b.push(a.pa)}
function Bv(a,b,c,d,e,f,g,h,k){var m;Lc(d,a.ta)?m=a.ja:(m=Gi(a.coordinates,0,a.coordinates.length,2,d,a.ja),Lt(a.ta,d));d=!Zb(f);var n=0,p=g.length,q,t,x=a.Ca,v=a.Oa,C,N,J,G,D=0,H=0;for(a=a.g!=g||a.ug?0:200;n<p;){var y=g[n],K,X,Q,W;switch(y[0]){case 0:q=y[1];d&&f[Sb(q).toString()]||!q.G()?n=y[2]:void 0===k||qd(k,q.G().I())?++n:n=y[2]+1;break;case 1:D>a&&(b.fill(),D=0);H>a&&(b.stroke(),H=0);D||H||b.beginPath();++n;break;case 2:q=y[1];t=m[q];y=m[q+1];J=m[q+2]-t;q=m[q+3]-y;q=Math.sqrt(J*J+q*q);b.moveTo(t+
q,y);b.arc(t,y,q,0,2*Math.PI,!0);++n;break;case 3:b.closePath();++n;break;case 4:q=y[1];t=y[2];K=y[3];X=y[4]*c;Q=y[5]*c;var xa=y[6],ka=y[7],ya=y[8],Ma=y[9];W=y[10];J=y[11];G=y[12];var ta=y[13],vb=y[14];for(W&&(J+=e);q<t;q+=2){y=m[q]-X;W=m[q+1]-Q;ta&&(y=Math.round(y),W=Math.round(W));if(1!=G||0!==J){var sc=y+X,Eb=W+Q;Nt(x,sc,Eb,G,G,J,-sc,-Eb);b.transform.apply(b,x)}sc=b.globalAlpha;1!=ka&&(b.globalAlpha=sc*ka);var Eb=vb+ya>K.width?K.width-ya:vb,zs=xa+Ma>K.height?K.height-Ma:xa;b.drawImage(K,ya,Ma,
Eb,zs,y,W,Eb*c,zs*c);1!=ka&&(b.globalAlpha=sc);if(1!=G||0!==J)Pt(Lt(v,x)),b.transform.apply(b,v)}++n;break;case 5:q=y[1];t=y[2];Q=y[3];xa=y[4]*c;ka=y[5]*c;J=y[6];G=y[7]*c;K=y[8];X=y[9];for((W=y[10])&&(J+=e);q<t;q+=2){y=m[q]+xa;W=m[q+1]+ka;if(1!=G||0!==J)Nt(x,y,W,G,G,J,-y,-W),b.transform.apply(b,x);ya=Q.split("\n");Ma=ya.length;1<Ma?(ta=Math.round(1.5*b.measureText("M").width),W-=(Ma-1)/2*ta):ta=0;for(vb=0;vb<Ma;vb++)sc=ya[vb],X&&b.strokeText(sc,y,W),K&&b.fillText(sc,y,W),W+=ta;if(1!=G||0!==J)Pt(Lt(v,
x)),b.transform.apply(b,v)}++n;break;case 6:if(void 0!==h&&(q=y[1],q=h(q)))return q;++n;break;case 7:a?D++:b.fill();++n;break;case 8:q=y[1];t=y[2];y=m[q];W=m[q+1];J=y+.5|0;G=W+.5|0;if(J!==C||G!==N)b.moveTo(y,W),C=J,N=G;for(q+=2;q<t;q+=2)if(y=m[q],W=m[q+1],J=y+.5|0,G=W+.5|0,q==t-2||J!==C||G!==N)b.lineTo(y,W),C=J,N=G;++n;break;case 9:D&&(b.fill(),D=0);b.fillStyle=y[1];++n;break;case 10:C=void 0!==y[7]?y[7]:!0;N=y[2];H&&(b.stroke(),H=0);b.strokeStyle=y[1];b.lineWidth=C?N*c:N;b.lineCap=y[3];b.lineJoin=
y[4];b.miterLimit=y[5];Zh&&b.setLineDash(y[6]);N=C=NaN;++n;break;case 11:b.font=y[1];b.textAlign=y[2];b.textBaseline=y[3];++n;break;case 12:a?H++:b.stroke();++n;break;default:++n}}D&&b.fill();H&&b.stroke()}yv.prototype.J=function(a,b,c,d,e){Bv(this,a,b,c,d,e,this.g,void 0,void 0)};function Cv(a){var b=a.b;b.reverse();var c,d=b.length,e,f,g=-1;for(c=0;c<d;++c)if(e=b[c],f=e[0],6==f)g=c;else if(0==f){e[2]=c;e=a.b;for(f=c;g<f;){var h=e[g];e[g]=e[f];e[f]=h;++g;--f}g=-1}}
function Dv(a,b){a.M[2]=a.g.length;a.M=null;a.pa[2]=a.b.length;a.pa=null;b=[6,b];a.g.push(b);a.b.push(b)}yv.prototype.finish=Rb;yv.prototype.Qf=function(){return this.Ta};function Ev(a,b,c,d){yv.call(this,a,b,c,d);this.s=this.V=null;this.H=this.D=this.T=this.K=this.O=this.v=this.u=this.B=this.j=this.o=this.c=void 0}A(Ev,yv);
Ev.prototype.drawPoint=function(a,b){if(this.s){Av(this,b);var c=a.C,d=this.coordinates.length;a=zv(this,c,0,c.length,a.F,!1);this.g.push([4,d,a,this.s,this.c,this.o,this.j,this.B,this.u,this.v,this.O,this.K,this.T,this.D,this.H]);this.b.push([4,d,a,this.V,this.c,this.o,this.j,this.B,this.u,this.v,this.O,this.K,this.T,this.D,this.H]);Dv(this,b)}};
Ev.prototype.Oh=function(a,b){if(this.s){Av(this,b);var c=a.C,d=this.coordinates.length;a=zv(this,c,0,c.length,a.F,!1);this.g.push([4,d,a,this.s,this.c,this.o,this.j,this.B,this.u,this.v,this.O,this.K,this.T,this.D,this.H]);this.b.push([4,d,a,this.V,this.c,this.o,this.j,this.B,this.u,this.v,this.O,this.K,this.T,this.D,this.H]);Dv(this,b)}};Ev.prototype.finish=function(){Cv(this);this.o=this.c=void 0;this.s=this.V=null;this.H=this.D=this.K=this.O=this.v=this.u=this.B=this.T=this.j=void 0};
Ev.prototype.$e=function(a){var b=a.wd(),c=a.ka(),d=a.sg(1),e=a.Ne(1),f=a.Ab();this.c=b[0];this.o=b[1];this.V=d;this.s=e;this.j=c[1];this.B=a.O;this.u=f[0];this.v=f[1];this.O=a.D;this.K=a.B;this.T=a.$a();this.D=a.J;this.H=c[0]};function Fv(a,b,c,d){yv.call(this,a,b,c,d);this.c={ud:void 0,pd:void 0,qd:null,rd:void 0,sd:void 0,td:void 0,lg:0,strokeStyle:void 0,lineCap:void 0,W:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}A(Fv,yv);
function Gv(a,b,c,d,e){var f=a.coordinates.length;b=zv(a,b,c,d,e,!1);f=[8,f,b];a.g.push(f);a.b.push(f);return d}l=Fv.prototype;l.Qf=function(){this.f||(this.f=Wc(this.Ta),0<this.i&&Vc(this.f,this.resolution*(this.i+1)/2,this.f));return this.f};
function Hv(a){var b=a.c,c=b.strokeStyle,d=b.lineCap,e=b.W,f=b.lineJoin,g=b.lineWidth,h=b.miterLimit;b.ud==c&&b.pd==d&&Lc(b.qd,e)&&b.rd==f&&b.sd==g&&b.td==h||(b.lg!=a.coordinates.length&&(a.g.push([12]),b.lg=a.coordinates.length),a.g.push([10,c,g,d,f,h,e],[1]),b.ud=c,b.pd=d,b.qd=e,b.rd=f,b.sd=g,b.td=h)}
l.Mh=function(a,b){var c=this.c,d=c.lineWidth;void 0!==c.strokeStyle&&void 0!==d&&(Hv(this),Av(this,b),this.b.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.W],[1]),c=a.C,Gv(this,c,0,c.length,a.F),this.b.push([12]),Dv(this,b))};
l.Nh=function(a,b){var c=this.c,d=c.lineWidth;if(void 0!==c.strokeStyle&&void 0!==d){Hv(this);Av(this,b);this.b.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.W],[1]);c=a.Nb();d=a.C;a=a.F;var e=0,f,g;f=0;for(g=c.length;f<g;++f)e=Gv(this,d,e,c[f],a);this.b.push([12]);Dv(this,b)}};l.finish=function(){this.c.lg!=this.coordinates.length&&this.g.push([12]);Cv(this);this.c=null};
l.hc=function(a,b){a=b.qa();this.c.strokeStyle=Qh(a?a:gi);a=b.c;this.c.lineCap=void 0!==a?a:"round";a=b.g;this.c.W=a?a:fi;a=b.f;this.c.lineJoin=void 0!==a?a:"round";a=b.b;this.c.lineWidth=void 0!==a?a:1;b=b.i;this.c.miterLimit=void 0!==b?b:10;this.c.lineWidth>this.i&&(this.i=this.c.lineWidth,this.f=null)};
function Iv(a,b,c,d){yv.call(this,a,b,c,d);this.c={Ih:void 0,ud:void 0,pd:void 0,qd:null,rd:void 0,sd:void 0,td:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,W:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}A(Iv,yv);
function Jv(a,b,c,d,e){var f=a.c,g=void 0!==f.fillStyle,f=void 0!=f.strokeStyle,h=d.length;if(!g&&!f)return d[h-1];var k=[1];a.g.push(k);a.b.push(k);for(k=0;k<h;++k){var m=d[k],n=a.coordinates.length;c=zv(a,b,c,m,e,!0);c=[8,n,c];a.g.push(c);a.b.push(c);f&&(c=[3],a.g.push(c),a.b.push(c));c=m}b=[7];a.b.push(b);g&&a.g.push(b);f&&(g=[12],a.g.push(g),a.b.push(g));return c}l=Iv.prototype;
l.Lh=function(a,b){var c=this.c,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){Kv(this);Av(this,b);this.b.push([9,Qh(ei)]);void 0!==c.strokeStyle&&this.b.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.W]);var e=a.C,d=this.coordinates.length;zv(this,e,0,e.length,a.F,!1);a=[1];d=[2,d];this.g.push(a,d);this.b.push(a,d);a=[7];this.b.push(a);void 0!==c.fillStyle&&this.g.push(a);void 0!==c.strokeStyle&&(c=[12],this.g.push(c),this.b.push(c));Dv(this,b)}};
l.Qh=function(a,b){var c=this.c,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d)Kv(this),Av(this,b),this.b.push([9,Qh(ei)]),void 0!==c.strokeStyle&&this.b.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.W]),c=a.Nb(),d=xj(a),Jv(this,d,0,c,a.F),Dv(this,b)};
l.Ph=function(a,b){var c=this.c,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){Kv(this);Av(this,b);this.b.push([9,Qh(ei)]);void 0!==c.strokeStyle&&this.b.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.W]);c=a.f;d=Fj(a);a=a.F;var e=0,f,g;f=0;for(g=c.length;f<g;++f)e=Jv(this,d,e,c[f],a);Dv(this,b)}};l.finish=function(){Cv(this);this.c=null;var a=this.tolerance;if(0!==a){var b=this.coordinates,c,d;c=0;for(d=b.length;c<d;++c)b[c]=a*Math.round(b[c]/a)}};
l.Qf=function(){this.f||(this.f=Wc(this.Ta),0<this.i&&Vc(this.f,this.resolution*(this.i+1)/2,this.f));return this.f};
l.hc=function(a,b){var c=this.c;a?(a=a.qa(),c.fillStyle=Sh(a?a:ei)):c.fillStyle=void 0;b?(a=b.qa(),c.strokeStyle=Qh(a?a:gi),a=b.c,c.lineCap=void 0!==a?a:"round",a=b.g,c.W=a?a.slice():fi,a=b.f,c.lineJoin=void 0!==a?a:"round",a=b.b,c.lineWidth=void 0!==a?a:1,b=b.i,c.miterLimit=void 0!==b?b:10,c.lineWidth>this.i&&(this.i=c.lineWidth,this.f=null)):(c.strokeStyle=void 0,c.lineCap=void 0,c.W=null,c.lineJoin=void 0,c.lineWidth=void 0,c.miterLimit=void 0)};
function Kv(a){var b=a.c,c=b.fillStyle,d=b.strokeStyle,e=b.lineCap,f=b.W,g=b.lineJoin,h=b.lineWidth,k=b.miterLimit;void 0!==c&&b.Ih!=c&&(a.g.push([9,c]),b.Ih=b.fillStyle);void 0===d||b.ud==d&&b.pd==e&&b.qd==f&&b.rd==g&&b.sd==h&&b.td==k||(a.g.push([10,d,h,e,g,k,f]),b.ud=d,b.pd=e,b.qd=f,b.rd=g,b.sd=h,b.td=k)}function Lv(a,b,c,d){yv.call(this,a,b,c,d);this.H=this.D=this.T=null;this.s="";this.u=this.B=0;this.v=void 0;this.K=this.O=0;this.j=this.o=this.c=null}A(Lv,yv);
Lv.prototype.drawText=function(a,b,c,d,e,f){if(""!==this.s&&this.j&&(this.c||this.o)){if(this.c){e=this.c;var g=this.T;if(!g||g.fillStyle!=e.fillStyle){var h=[9,e.fillStyle];this.g.push(h);this.b.push(h);g?g.fillStyle=e.fillStyle:this.T={fillStyle:e.fillStyle}}}this.o&&(e=this.o,g=this.D,g&&g.lineCap==e.lineCap&&g.W==e.W&&g.lineJoin==e.lineJoin&&g.lineWidth==e.lineWidth&&g.miterLimit==e.miterLimit&&g.strokeStyle==e.strokeStyle||(h=[10,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.W,
!1],this.g.push(h),this.b.push(h),g?(g.lineCap=e.lineCap,g.W=e.W,g.lineJoin=e.lineJoin,g.lineWidth=e.lineWidth,g.miterLimit=e.miterLimit,g.strokeStyle=e.strokeStyle):this.D={lineCap:e.lineCap,W:e.W,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle}));e=this.j;g=this.H;g&&g.font==e.font&&g.textAlign==e.textAlign&&g.textBaseline==e.textBaseline||(h=[11,e.font,e.textAlign,e.textBaseline],this.g.push(h),this.b.push(h),g?(g.font=e.font,g.textAlign=e.textAlign,
g.textBaseline=e.textBaseline):this.H={font:e.font,textAlign:e.textAlign,textBaseline:e.textBaseline});Av(this,f);e=this.coordinates.length;a=zv(this,a,b,c,d,!1);a=[5,e,a,this.s,this.B,this.u,this.O,this.K,!!this.c,!!this.o,this.v];this.g.push(a);this.b.push(a);Dv(this,f)}};
Lv.prototype.Wb=function(a){if(a){var b=a.Ea();b?(b=b.qa(),b=Sh(b?b:ei),this.c?this.c.fillStyle=b:this.c={fillStyle:b}):this.c=null;var c=a.Fa();if(c){var b=c.qa(),d=c.c,e=c.g,f=c.f,g=c.b,c=c.i,d=void 0!==d?d:"round",e=e?e.slice():fi,f=void 0!==f?f:"round",g=void 0!==g?g:1,c=void 0!==c?c:10,b=Qh(b?b:gi);if(this.o){var h=this.o;h.lineCap=d;h.W=e;h.lineJoin=f;h.lineWidth=g;h.miterLimit=c;h.strokeStyle=b}else this.o={lineCap:d,W:e,lineJoin:f,lineWidth:g,miterLimit:c,strokeStyle:b}}else this.o=null;var k=
a.b,b=a.g,d=a.c,e=a.o,g=a.f,c=a.$a(),f=a.Ga(),h=a.i,m=a.B;a=void 0!==k?k:"10px sans-serif";h=void 0!==h?h:"center";m=void 0!==m?m:"middle";this.j?(k=this.j,k.font=a,k.textAlign=h,k.textBaseline=m):this.j={font:a,textAlign:h,textBaseline:m};this.s=void 0!==f?f:"";this.B=void 0!==b?b:0;this.u=void 0!==d?d:0;this.v=void 0!==e?e:!1;this.O=void 0!==g?g:0;this.K=void 0!==c?c:1}else this.s=""};function Mv(a,b,c,d,e){this.s=a;this.g=b;this.o=d;this.j=c;this.c=e;this.b={};this.f=cg(1,1);this.i=It()}A(Mv,wv);
Mv.prototype.finish=function(){for(var a in this.b){var b=this.b[a],c;for(c in b)b[c].finish()}};Mv.prototype.zb=function(a,b,c,d,e){var f=Nt(this.i,.5,.5,1/b,-1/b,-c,-a[0],-a[1]),g=this.f;g.clearRect(0,0,1,1);var h;void 0!==this.c&&(h=Tc(),Uc(h,a),Vc(h,b*this.c,h));return Nv(this,g,f,c,d,function(a){if(0<g.getImageData(0,0,1,1).data[3]){if(a=e(a))return a;g.clearRect(0,0,1,1)}},h)};
function Ov(a,b,c){var d=void 0!==b?b.toString():"0";b=a.b[d];void 0===b&&(b={},a.b[d]=b);d=b[c];void 0===d&&(d=new Pv[c](a.s,a.g,a.j,a.o),b[c]=d);return d}Mv.prototype.Cb=function(){return Zb(this.b)};
Mv.prototype.J=function(a,b,c,d,e,f){var g=Object.keys(this.b).map(Number);g.sort(Fc);var h=this.g,k=h[0],m=h[1],n=h[2],h=h[3],k=[k,m,k,h,n,h,n,m];Gi(k,0,8,2,c,k);a.save();a.beginPath();a.moveTo(k[0],k[1]);a.lineTo(k[2],k[3]);a.lineTo(k[4],k[5]);a.lineTo(k[6],k[7]);a.clip();f=f?f:xv;for(var p,q,k=0,m=g.length;k<m;++k)for(p=this.b[g[k].toString()],n=0,h=f.length;n<h;++n)q=p[f[n]],void 0!==q&&q.J(a,b,c,d,e);a.restore()};
function Nv(a,b,c,d,e,f,g){var h=Object.keys(a.b).map(Number);h.sort(function(a,b){return b-a});var k,m,n,p,q;k=0;for(m=h.length;k<m;++k)for(p=a.b[h[k].toString()],n=xv.length-1;0<=n;--n)if(q=p[xv[n]],void 0!==q&&(q=Bv(q,b,1,c,d,e,q.b,f,g)))return q}var Pv={Image:Ev,LineString:Fv,Polygon:Iv,Text:Lv};function Qv(a,b){return Sb(a)-Sb(b)}function Rv(a,b){a=.5*a/b;return a*a}function Sv(a,b,c,d,e,f){var g=!1,h,k;if(h=c.g)k=h.Jd(),2==k||3==k?h.Wg(e,f):(0==k&&h.load(),h.mg(e,f),g=!0);if(e=(0,c.c)(b))d=e.ag(d),(0,Tv[d.R()])(a,d,c,b);return g}
var Tv={Point:function(a,b,c,d){var e=c.g;if(e){if(2!=e.Jd())return;var f=Ov(a,c.b,"Image");f.$e(e);f.drawPoint(b,d)}if(e=c.Ga())a=Ov(a,c.b,"Text"),a.Wb(e),a.drawText(b.C,0,2,2,b,d)},LineString:function(a,b,c,d){var e=c.Fa();if(e){var f=Ov(a,c.b,"LineString");f.hc(null,e);f.Mh(b,d)}if(e=c.Ga())a=Ov(a,c.b,"Text"),a.Wb(e),a.drawText(hj(b),0,2,2,b,d)},Polygon:function(a,b,c,d){var e=c.Ea(),f=c.Fa();if(e||f){var g=Ov(a,c.b,"Polygon");g.hc(e,f);g.Qh(b,d)}if(e=c.Ga())a=Ov(a,c.b,"Text"),a.Wb(e),a.drawText(yj(b),
0,2,2,b,d)},MultiPoint:function(a,b,c,d){var e=c.g;if(e){if(2!=e.Jd())return;var f=Ov(a,c.b,"Image");f.$e(e);f.Oh(b,d)}if(e=c.Ga())a=Ov(a,c.b,"Text"),a.Wb(e),c=b.C,a.drawText(c,0,c.length,b.F,b,d)},MultiLineString:function(a,b,c,d){var e=c.Fa();if(e){var f=Ov(a,c.b,"LineString");f.hc(null,e);f.Nh(b,d)}if(e=c.Ga())a=Ov(a,c.b,"Text"),a.Wb(e),c=mj(b),a.drawText(c,0,c.length,2,b,d)},MultiPolygon:function(a,b,c,d){var e=c.Ea(),f=c.Fa();if(f||e){var g=Ov(a,c.b,"Polygon");g.hc(e,f);g.Ph(b,d)}if(e=c.Ga())a=
Ov(a,c.b,"Text"),a.Wb(e),c=Gj(b),a.drawText(c,0,c.length,2,b,d)},GeometryCollection:function(a,b,c,d){b=b.c;var e,f;e=0;for(f=b.length;e<f;++e)(0,Tv[b[e].R()])(a,b[e],c,d)},Circle:function(a,b,c,d){var e=c.Ea(),f=c.Fa();if(e||f){var g=Ov(a,c.b,"Polygon");g.hc(e,f);g.Lh(b,d)}if(e=c.Ga())a=Ov(a,c.b,"Text"),a.Wb(e),a.drawText(b.la(),0,2,2,b,d)}};function Tt(a){sv.call(this,a);this.c=null;this.B=It()}A(Tt,sv);Tt.prototype.zb=function(a,b,c,d){var e=this.ya();return S(e).zb(a,b.Z.resolution,b.Z.rotation,b.Pg,function(a){return c.call(d,a,e)})};
Tt.prototype.j=function(a,b){var c=a.Qa,d=a.Z,e=d.center,f=d.resolution,g=S(this.ya()),h=a.Ka,k=a.extent;void 0!==b.extent&&(k=pd(k,b.extent));if(!h[0]&&!h[1]&&!kd(k)){if(d=b=qg(g,k,f,c,d.projection))d=b,h=d.ma(),2!=h&&3!=h&&E(d,"change",this.M,this),0==h&&(d.load(),h=d.ma()),d=2==h;d&&(this.c=b)}if(this.c){b=this.c;var d=b.I(),h=b.ca(),k=b.f,f=c*h/(f*k),m=Kt(this.B,1,1,0,0);Jt(m,Kt(Ht,1,1,c*a.size[0]/2,c*a.size[1]/2));Jt(m,Kt(Ht,f,f,0,0));Jt(m,Kt(Ht,1,1,k*(d[0]-e[0])/h,k*(e[1]-d[3])/h));nv(a.xa,
b.i);ov(a,g)}return!!this.c};function Ut(a){sv.call(this,a);this.context=cg();this.f=null;this.s=Tc();this.u=[0,0,0];this.i=It()}A(Ut,sv);
Ut.prototype.o=function(a,b,c){var d=vv(this,a,0);uv(this,"precompose",c,a,d);var e=a.Qa,f=a.Z,g=f.center,h=f.projection,k=f.rotation,m=a.size,n=Math.round(e*m[0]/2),m=Math.round(e*m[1]/2),f=e/f.resolution,p=this.ya(),q=S(p),t=e*q.Zh(h),x=q.cc(h),p=gc(p,"render"),v=c,C=1,N,J,G;if(k||p){v=this.context;N=v.canvas;var C=q.s/e,D=c.canvas.width*C;J=c.canvas.height*C;G=Math.round(Math.sqrt(D*D+J*J));N.width!=G?N.width=N.height=G:v.clearRect(0,0,G,G);N=(G-D)/2/C;J=(G-J)/2/C;f*=C;n=Math.round(C*(n+N));m=
Math.round(C*(m+J))}D=v.globalAlpha;v.globalAlpha=b.opacity;var H=this.f,y,K=q.Vf(h)&&1==b.opacity;K||(H.reverse(),y=[]);var X=b.extent;if(b=void 0!==X){var Q=id(X),W=[X[2],X[3]],xa=[X[2],X[1]],X=hd(X);Mt(a.xb,Q);Mt(a.xb,W);Mt(a.xb,xa);Mt(a.xb,X);var ka=N||0,ya=J||0;v.save();var Ma=v.canvas.width/2,ta=v.canvas.height/2;hi(v,-k,Ma,ta);v.beginPath();v.moveTo(C*(Q[0]*e+ka),C*(Q[1]*e+ya));v.lineTo(C*(W[0]*e+ka),C*(W[1]*e+ya));v.lineTo(C*(xa[0]*e+ka),C*(xa[1]*e+ya));v.lineTo(C*(X[0]*e+ka),C*(X[1]*e+ya));
v.clip();hi(v,k,Ma,ta)}e=0;for(Q=H.length;e<Q;++e){W=H[e];xa=W.Gb;ya=of(x,xa,this.s);Ma=xa[0];ta=hd(of(x,wf(x,g,Ma,this.u)));xa=Math.round(ld(ya)*f);X=Math.round(md(ya)*f);ka=Math.round((ya[0]-ta[0])*f/xa)*xa+n+Math.round((ta[0]-g[0])*f);ya=Math.round((ta[1]-ya[3])*f/X)*X+m+Math.round((g[1]-ta[1])*f);if(!K){ta=[ka,ya,ka+xa,ya+X];v.save();for(var vb=0,sc=y.length;vb<sc;++vb){var Eb=y[vb];qd(ta,Eb)&&(v.beginPath(),v.moveTo(ta[0],ta[1]),v.lineTo(ta[0],ta[3]),v.lineTo(ta[2],ta[3]),v.lineTo(ta[2],ta[1]),
v.moveTo(Eb[0],Eb[1]),v.lineTo(Eb[2],Eb[1]),v.lineTo(Eb[2],Eb[3]),v.lineTo(Eb[0],Eb[3]),v.closePath(),v.clip())}y.push(ta)}ta=q;vb=Ma;sc=ta.cc(h);Ma=ta.s;vb=Le(uf(sc,vb),ta.ja);1==Ma?Ma=vb:(ta=ta.ja,void 0===ta&&(ta=[0,0]),ta[0]=vb[0]*Ma+.5|0,ta[1]=vb[1]*Ma+.5|0,Ma=ta);v.drawImage(W.Me(),t,t,Ma[0],Ma[1],ka,ya,xa,X);K||v.restore()}b&&v.restore();p&&(h=N-n/C+n,n=J-m/C+m,g=Nt(this.i,G/2-h,G/2-n,f,-f,-k,-g[0]+h/f,-g[1]-n/f),uv(this,"render",v,a,g));(k||p)&&c.drawImage(v.canvas,-Math.round(N),-Math.round(J),
G/C,G/C);v.globalAlpha=D;uv(this,"postcompose",c,a,d)};
Ut.prototype.j=function(a,b){function c(a){a=a.ma();return 2==a||4==a||3==a&&!t}var d=a.Qa,e=a.Z,f=e.projection,g=this.ya(),h=S(g),k=h.cc(f),m=vf(k,e.resolution,0),n=k.ca(m),p=e.center;n==e.resolution?(p=qv(p,n,a.size),e=od(p,n,e.rotation,a.size)):e=a.extent;void 0!==b.extent&&(e=pd(e,b.extent));if(kd(e))return!1;b=rf(k,e,n);n={};n[m]={};var q=kv(h,f,n),t=g.get("useInterimTilesOnError"),x=Tc(),v=new Ie(0,0,0,0),C,N,J;for(N=b.X;N<=b.Y;++N)for(J=b.aa;J<=b.ea;++J)p=$g(h,m,N,J,d,f),!c(p)&&p.b&&(p=p.b),
c(p)?n[m][p.Gb.toString()]=p:(C=nf(k,p.Gb,q,v,x),C||(p=qf(k,p.Gb,v,x))&&q(m+1,p));q=Object.keys(n).map(Number);q.sort(Fc);var x=[],G,v=0;for(N=q.length;v<N;++v)for(G in p=q[v],J=n[p],J)p=J[G],2==p.ma()&&x.push(p);this.f=x;pv(a.Xg,h,m,b);rv(a,h,k,d,f,e,m,g.get("preload"));mv(a,h);ov(a,h);return!0};function Vt(a){sv.call(this,a);this.f=!1;this.D=-1;this.K=NaN;this.u=Tc();this.i=this.v=null;this.s=cg()}A(Vt,sv);
Vt.prototype.o=function(a,b,c){var d=a.extent,e=a.Qa,f=b.ng?a.Pg:{},g=a.Z,h=g.projection,g=g.rotation,k=h.I(),m=S(this.ya()),n=vv(this,a,0);uv(this,"precompose",c,a,n);var p=b.extent,q=void 0!==p;q&&tv(c,a,p);if((p=this.i)&&!p.Cb()){var t=0,x=0,v;if(gc(this.ya(),"render")){v=c.canvas.width;var C=c.canvas.height;if(g){var N=Math.round(Math.sqrt(v*v+C*C)),t=(N-v)/2,x=(N-C)/2;v=C=N}this.s.canvas.width=v;this.s.canvas.height=C;v=this.s}else v=c;C=v.globalAlpha;v.globalAlpha=b.opacity;v!=c&&v.translate(t,
x);b=a.size[0]*e;N=a.size[1]*e;hi(v,-g,b/2,N/2);p.J(v,e,n,g,f);if(m.B&&h.c&&!Yc(k,d)){for(var h=d[0],m=ld(k),J=0;h<k[0];)--J,n=m*J,n=vv(this,a,n),p.J(v,e,n,g,f),h+=m;J=0;for(h=d[2];h>k[2];)++J,n=m*J,n=vv(this,a,n),p.J(v,e,n,g,f),h-=m;n=vv(this,a,0)}hi(v,g,b/2,N/2);v!=c&&(uv(this,"render",v,a,n),c.drawImage(v.canvas,-t,-x),v.translate(-t,-x));v.globalAlpha=C}q&&c.restore();uv(this,"postcompose",c,a,n)};
Vt.prototype.zb=function(a,b,c,d){if(this.i){var e=b.Z.resolution;b=b.Z.rotation;var f=this.ya(),g={};return this.i.zb(a,e,b,{},function(a){var b=Sb(a).toString();if(!(b in g))return g[b]=!0,c.call(d,a,f)})}};Vt.prototype.H=function(){lv(this)};
Vt.prototype.j=function(a){function b(a){var b,d=a.c;d?b=d.call(a,m):(d=c.o)&&(b=d(a,m));if(b){if(b){d=!1;if(Array.isArray(b))for(var e=0,f=b.length;e<f;++e)d=Sv(q,a,b[e],Rv(m,n),this.H,this)||d;else d=Sv(q,a,b,Rv(m,n),this.H,this)||d;a=d}else a=!1;this.f=this.f||a}}var c=this.ya(),d=S(c);nv(a.xa,d.v);ov(a,d);var e=a.Ka[0],f=a.Ka[1],g=c.B,h=c.u;if(!this.f&&!g&&e||!h&&f)return!0;var k=a.extent,h=a.Z,e=h.projection,m=h.resolution,n=a.Qa,f=c.g,p=c.s,g=c.get("renderOrder");void 0===g&&(g=Qv);k=Vc(k,p*
m);p=h.projection.I();d.B&&h.projection.c&&!Yc(p,a.extent)&&(a=Math.max(ld(k)/2,ld(p)),k[0]=p[0]-a,k[2]=p[2]+a);if(!this.f&&this.K==m&&this.D==f&&this.v==g&&Yc(this.u,k))return!0;this.i=null;this.f=!1;var q=new Mv(.5*m/n,k,m,d.M,c.s);zl(d,k,m,e);if(g){var t=[];xl(d,k,function(a){t.push(a)},this);t.sort(g);t.forEach(b,this)}else xl(d,k,b,this);q.finish();this.K=m;this.D=f;this.v=g;this.u=k;this.i=q;return!0};function Uv(a,b){Qt.call(this,0,b);this.i=cg();this.b=this.i.canvas;this.b.style.width="100%";this.b.style.height="100%";this.b.className="ol-unselectable";a.insertBefore(this.b,a.childNodes[0]||null);this.c=!0;this.j=It()}A(Uv,Qt);function Vv(a,b,c){var d=a.o,e=a.i;if(gc(d,b)){var f=c.extent,g=c.Qa,h=c.Z.rotation,k=c.Z,m=c.Qa/k.resolution;a=Nt(a.j,a.b.width/2,a.b.height/2,m,-m,-k.rotation,-k.center[0],-k.center[1]);F(d,new Df(b,new cv(e,g,f,a,h),c,e,null))}}Uv.prototype.R=function(){return"canvas"};
Uv.prototype.Cj=function(a){if(a){var b=this.i,c=a.Qa,d=Math.round(a.size[0]*c),c=Math.round(a.size[1]*c);this.b.width!=d||this.b.height!=c?(this.b.width=d,this.b.height=c):b.clearRect(0,0,d,c);var e=a.Z.rotation,f=a.Z,g=a.xb,h=a.lj;Nt(g,a.size[0]/2,a.size[1]/2,1/f.resolution,-1/f.resolution,-f.rotation,-f.center[0],-f.center[1]);Pt(Lt(h,g));Vv(this,"precompose",a);f=a.Ee;Mc(f);hi(b,e,d/2,c/2);var g=a.Z.resolution,k,m,n,h=0;for(k=f.length;h<k;++h)n=f[h],m=n.layer,m=St(this,m),n.visible&&g>=n.Db&&
g<n.Qb&&"ready"==n.Ep&&m.j(a,n)&&m.o(a,n,b);hi(b,-e,d/2,c/2);Vv(this,"postcompose",a);this.c||(this.b.style.display="",this.c=!0);for(var p in this.g)if(!(p in a.De)){a.Pe.push(this.lp.bind(this));break}a.Pe.push(Rt)}else this.c&&(this.b.style.display="none",this.c=!1)};var Wv=["canvas","webgl","dom"];
function Xv(a){uc.call(this);var b=Yv(a);this.kc=void 0!==a.Ki?a.Ki:!1;this.Kc=void 0!==a.Li?a.Li:!1;this.Pc=void 0!==a.Qa?a.Qa:Yh;this.Oc=b.ad;this.vf=function(){this.Kb=void 0;this.mp.call(this,Date.now())}.bind(this);this.ob=It();this.yf=It();this.pb=0;this.o=null;this.Ya=Tc();this.D=this.M=null;this.c=document.createElement("DIV");this.c.className="ol-viewport"+(bi?" ol-touch":"");this.c.style.position="relative";this.c.style.overflow="hidden";this.c.style.width="100%";this.c.style.height="100%";
this.c.style.msTouchAction="none";this.c.style.touchAction="none";this.v=document.createElement("DIV");this.v.className="ol-overlaycontainer";this.c.appendChild(this.v);this.u=document.createElement("DIV");this.u.className="ol-overlaycontainer-stopevent";a=["click","dblclick","mousedown","touchstart","mspointerdown",yn,"mousewheel","wheel"];for(var c=0,d=a.length;c<d;++c)E(this.u,a[c],Qb);this.c.appendChild(this.u);this.ta=new qn(this);for(var e in Bn)E(this.ta,Bn[e],this.Bi,this);this.ja=b.Id;this.B=
null;E(this.c,"wheel",this.Xc,this);E(this.c,"mousewheel",this.Xc,this);this.s=b.controls;this.f=b.dc;this.i=b.cd;this.jj={};this.J=new b.np(this.c,this);this.V=null;this.H=[];this.Oa=[];this.Ca=new Zt(this.Rl.bind(this),this.Rm.bind(this));this.Gf={};E(this,I("layergroup"),this.xm,this);E(this,I("view"),this.Sm,this);E(this,I("size"),this.Om,this);E(this,I("target"),this.Qm,this);this.Ma(b.values);this.s.forEach(function(a){a.setMap(this)},this);E(this.s,Cc,function(a){a.element.setMap(this)},this);
E(this.s,Ec,function(a){a.element.setMap(null)},this);this.f.forEach(function(a){a.setMap(this)},this);E(this.f,Cc,function(a){a.element.setMap(this)},this);E(this.f,Ec,function(a){a.element.setMap(null)},this);this.i.forEach(this.oh,this);E(this.i,Cc,function(a){this.oh(a.element)},this);E(this.i,Ec,function(a){var b=a.element.Pa();void 0!==b&&delete this.jj[b.toString()];a.element.setMap(null)},this)}A(Xv,uc);function ih(a,b){hh(a).ha().push(b)}l=Xv.prototype;
l.oh=function(a){var b=a.Pa();void 0!==b&&(this.jj[b.toString()]=a);a.setMap(this)};l.fb=function(a){this.render();Array.prototype.push.apply(this.H,arguments)};l.sa=function(){this.ta.Va();this.J.Va();ec(this.c,"wheel",this.Xc,this);ec(this.c,"mousewheel",this.Xc,this);void 0!==this.j&&(Ub.removeEventListener("resize",this.j,!1),this.j=void 0);this.Kb&&(Ub.cancelAnimationFrame(this.Kb),this.Kb=void 0);this.set("target",null);uc.prototype.sa.call(this)};
function Zv(a,b,c,d,e){if(a.o)return b=a.va(b),a.J.zb(b,a.o,c,void 0!==d?d:null,void 0!==e?e:Dh,null)}function on(a,b){a=a.c.getBoundingClientRect();b=b.changedTouches?b.changedTouches[0]:b;return[b.clientX-a.left,b.clientY-a.top]}function lo(a){a=a.get("target");return void 0!==a?"string"===typeof a?document.getElementById(a):a:null}l.va=function(a){var b=this.o;return b?Mt(b.lj,a.slice()):null};function hh(a){return a.get("layergroup")}l.ha=function(){return hh(this).ha()};
function no(a,b){return(a=a.o)?Mt(a.xb,b.slice(0,2)):null}l.ka=function(){return this.get("size")};function T(a){return a.get("view")}l.Rl=function(a,b,c,d){var e=this.o;if(!(e&&b in e.Vd&&e.Vd[b][a.xc()]))return Infinity;a=c[0]-e.focus[0];c=c[1]-e.focus[1];return 65536*Math.log(d)+Math.sqrt(a*a+c*c)/d};l.Xc=function(a,b){a=new nn(b||a.type,this,a);this.Bi(a)};
l.Bi=function(a){if(this.o){this.V=a.coordinate;a.frameState=this.o;var b=this.f.c,c;if(!1!==F(this,a))for(c=b.length-1;0<=c;c--){var d=b[c];if(d.getActive()&&!d.handleEvent(a))break}}};
l.Mm=function(){var a=this.o,b=this.Ca;if(!b.Cb()){var c=16,d=c;if(a){var e=a.Ka;e[0]&&(c=this.kc?8:0,d=2);e[1]&&(c=this.Kc?8:0,d=2)}if(b.o<c){var e=b.B,f=b.b,g=b.g,h=0,k=f.length,m,n,p;for(n=0;n<k;++n)m=f[n],p=e(m),Infinity==p?delete b.c[b.f(m)]:(g[h]=p,f[h++]=m);f.length=h;g.length=h;for(e=(b.b.length>>1)-1;0<=e;e--)Yt(b,e);for(e=0;b.o<c&&e<d&&0<b.Mb();)f=b,h=f.b,k=f.g,g=h[0],1==h.length?(h.length=0,k.length=0):(h[0]=h.pop(),k[0]=k.pop(),Yt(f,0)),h=f.f(g),delete f.c[h],f=g[0],g=f.xc(),0!==f.ma()||
g in b.i||(b.i[g]=!0,++b.o,++e,f.load())}}b=this.Oa;d=0;for(c=b.length;d<c;++d)b[d](this,a);b.length=0};l.Om=function(){this.render()};
l.Qm=function(){var a;this.get("target")&&(a=lo(this));if(this.B){for(var b=0,c=this.B.length;b<c;++b)B(this.B[b]);this.B=null}a?(a.appendChild(this.c),a=this.ja?this.ja:a,this.B=[E(a,"keydown",this.Xc,this),E(a,"keypress",this.Xc,this)],this.j||(this.j=this.hf.bind(this),Ub.addEventListener("resize",this.j,!1))):(dg(this.c),void 0!==this.j&&(Ub.removeEventListener("resize",this.j,!1),this.j=void 0));this.hf()};l.Rm=function(){this.render()};l.Tm=function(){this.render()};
l.Sm=function(){this.M&&(B(this.M),this.M=null);var a=T(this);a&&(this.M=E(a,"propertychange",this.Tm,this));this.render()};l.xm=function(){this.D&&(this.D.forEach(B),this.D=null);var a=hh(this);a&&(this.D=[E(a,"propertychange",this.render,this),E(a,"change",this.render,this)]);this.render()};l.render=function(){void 0===this.Kb&&(this.Kb=Ub.requestAnimationFrame(this.vf))};
l.mp=function(a){var b,c,d,e=this.ka(),f=T(this),g=Tc(),h=null;if(b=void 0!==e&&0<e[0]&&0<e[1]&&f)b=!!f.la()&&void 0!==f.ca();if(b){var h=Tn(f,this.o?this.o.Ka:void 0),k=hh(this).Tf(),m={};b=0;for(c=k.length;b<c;++b)m[Sb(k[b].layer)]=k[b];d=f.ma();h={animate:!1,xa:{},xb:this.ob,extent:g,focus:this.V?this.V:d.center,index:this.pb++,De:m,Ee:k,ad:Wb({},this.Oc),Qa:this.Pc,lj:this.yf,Pe:[],size:e,Pg:this.Gf,Ip:this.Ca,time:a,Xg:{},Z:d,Ka:h,Vd:{}}}if(h){a=this.H;b=e=0;for(c=a.length;b<c;++b)f=a[b],f(this,
h)&&(a[e++]=f);a.length=e;h.extent=od(d.center,d.resolution,d.rotation,h.size,g)}this.o=h;this.J.Cj(h);h&&(h.animate&&this.render(),Array.prototype.push.apply(this.Oa,h.Pe),0!==this.H.length||h.Ka[0]||h.Ka[1]||dd(h.extent,this.Ya)||(F(this,new Fm("moveend",this,h)),Wc(h.extent,this.Ya)));F(this,new Fm("postrender",this,h));g=d=this.Mm;this&&(g=pa(d,this));!ia(aa.setImmediate)||aa.Window&&aa.Window.prototype&&!Nf("Edge")&&aa.Window.prototype.setImmediate==aa.setImmediate?(Ft||(Ft=Gt()),Ft(g)):aa.setImmediate(g)};
l.bf=function(a){this.set("size",a)};l.hf=function(){var a=lo(this);if(a){var b=Ub.getComputedStyle(a);this.bf([a.offsetWidth-parseFloat(b.borderLeftWidth)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight)-parseFloat(b.borderRightWidth),a.offsetHeight-parseFloat(b.borderTopWidth)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)-parseFloat(b.borderBottomWidth)])}else this.bf(void 0)};
function Yv(a){var b=null;void 0!==a.Id&&(b="string"===typeof a.Id?document.getElementById(a.Id):a.Id);var c={},d={};if(void 0===a.La||"boolean"===typeof a.La&&a.La)d["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]=
"http://openlayers.org/";else{var e=a.La;"string"===typeof e?d[e]="":e instanceof HTMLElement?d[Sb(e).toString()]=e:e&&(Rc("string"==typeof e.href,44),Rc("string"==typeof e.src,45),d[e.src]=e.href)}e=a.layers instanceof Cf?a.layers:new Cf({layers:a.layers});c.layergroup=e;c.target=a.target;c.view=void 0!==a.view?a.view:new Qn;var e=Qt,f;void 0!==a.We?Array.isArray(a.We)?f=a.We:"string"===typeof a.We?f=[a.We]:Rc(!1,46):f=Wv;var g,h;g=0;for(h=f.length;g<h;++g)if("canvas"==f[g]&&$h){e=Uv;break}void 0!==
a.controls?Array.isArray(a.controls)?f=new xc(a.controls.slice()):(Rc(a.controls instanceof xc,47),f=a.controls):(f={},g=new xc,(void 0!==f.zoom?f.zoom:1)&&g.push(new fu(f.Rq)),(void 0!==f.rotate?f.rotate:1)&&g.push(new du(f.Pq)),(void 0!==f.attribution?f.attribution:1)&&g.push(new bu(f.Gq)),f=g);void 0!==a.dc?Array.isArray(a.dc)?g=new xc(a.dc.slice()):(Rc(a.dc instanceof xc,48),g=a.dc):g=Qu();void 0!==a.cd?Array.isArray(a.cd)?a=new xc(a.cd.slice()):(Rc(a.cd instanceof xc,49),a=a.cd):a=new xc;return{controls:f,
dc:g,Id:b,ad:d,cd:a,np:e,values:c}}Ue(Vu);Ue(av);av.forEach(function(a){Vu.forEach(function(b){Ve(a,b,Wu);Ve(b,a,Xu)})});w.directive("ngeoMap",function(){return{restrict:"A",link:function(a,b,c){a.$eval(c.ngeoMap).set("target",b[0])}}});z.directive("gmfMap",function(){return{scope:{getMapFn:"&gmfMapMap"},controller:"GmfMapController",controllerAs:"ctrl",template:'<div ngeo-map="ctrl.map"></div>'}});function $v(a,b,c){this.map=a.getMapFn();b.tb(this.map);c.setMap(this.map)}$v.$inject=["$scope","ngeoFeatureOverlayMgr","gmfPermalink"];z.controller("GmfMapController",$v);function aw(){this.Ua=null}A(aw,Gh);function bw(a){return"string"===typeof a?(a=JSON.parse(a))?a:null:null!==a?a:null}l=aw.prototype;l.R=function(){return"json"};l.readFeature=function(a,b){return cw(this,bw(a),Hh(this,a,b))};l.readFeatures=function(a,b){var c=bw(a);a=Hh(this,a,b);var d;if("Feature"==c.type)d=[cw(this,c,a)];else if("FeatureCollection"==c.type){d=[];var c=c.features,e;b=0;for(e=c.length;b<e;++b)d.push(cw(this,c[b],a))}else Rc(!1,35);return d};
l.readGeometry=function(a,b){var c=bw(a);a=Hh(this,a,b);return dw(c,a)};l.Ue=function(a){a=bw(a).crs;var b;a?"name"==a.type?b=Te(a.properties.name):"EPSG"==a.type?b=Te("EPSG:"+a.properties.code):Rc(!1,36):b=this.Ua;return b};l.writeFeature=function(a,b){return JSON.stringify(ew(this,a,b))};l.writeFeatures=function(a,b){return JSON.stringify(fw(this,a,b))};l.writeGeometry=function(a,b){return JSON.stringify(gw(a,Ih(this,b)))};function hw(a){a=a?a:{};this.Ua=null;this.Ua=Te(a.Ua?a.Ua:"EPSG:4326");this.b=a.geometryName}A(hw,aw);function dw(a,b){return a?Jh((0,iw[a.type])(a),!1,b):null}function gw(a,b){return(0,jw[a.R()])(Jh(a,!0,b),b)}
var iw={Point:function(a){return new oj(a.coordinates)},LineString:function(a){return new dj(a.coordinates)},Polygon:function(a){return new wj(a.coordinates)},MultiPoint:function(a){return new pj(a.coordinates)},MultiLineString:function(a){return new kj(a.coordinates)},MultiPolygon:function(a){return new Dj(a.coordinates)},GeometryCollection:function(a,b){a=a.geometries.map(function(a){return dw(a,b)});return new fp(a)}},jw={Point:function(a){return{type:"Point",coordinates:a.N()}},LineString:function(a){return{type:"LineString",
coordinates:a.N()}},Polygon:function(a,b){var c;b&&(c=b.Jg);return{type:"Polygon",coordinates:a.N(c)}},MultiPoint:function(a){return{type:"MultiPoint",coordinates:a.N()}},MultiLineString:function(a){return{type:"MultiLineString",coordinates:a.N()}},MultiPolygon:function(a,b){var c;b&&(c=b.Jg);return{type:"MultiPolygon",coordinates:a.N(c)}},GeometryCollection:function(a,b){return{type:"GeometryCollection",geometries:a.c.map(function(a){var d=Wb({},b);delete d.Lb;return gw(a,d)})}},Circle:function(){return{type:"GeometryCollection",
geometries:[]}}};function cw(a,b,c){c=dw(b.geometry,c);var d=new yi;a.b&&Ai(d,a.b);zi(d,c);void 0!==b.id&&Ci(d,b.id);b.properties&&d.Ma(b.properties);return d}function ew(a,b,c){c=Ih(a,c);a={type:"Feature"};var d=b.Pa();void 0!==d&&(a.id=d);(d=b.G())?a.geometry=gw(d,c):a.geometry=null;c=wc(b);delete c[b.mb];Zb(c)?a.properties=null:a.properties=c;return a}function fw(a,b,c){c=Ih(a,c);var d=[],e,f;e=0;for(f=b.length;e<f;++e)d.push(ew(a,b[e],c));return{type:"FeatureCollection",features:d}};w.value("ngeoCreateGeoJSONBloodhound",function(a,b,c,d,e,f){var g=new hw;a={remote:{url:a,prepare:function(a,b){b.url=b.url.replace("%QUERY",a);return b},transform:function(a){void 0!==b&&(a={type:"FeatureCollection",features:a.features.filter(b)});return g.readFeatures(a,{Lb:c,yb:d})}},datumTokenizer:ca,queryTokenizer:Bloodhound.tokenizers.whitespace};e=Ua(e||{});f=Ua(f||{});e.remote&&(Xa(f,e.remote),delete e.remote);Xa(a,e);Xa(a.remote,f);return new Bloodhound(a)});w.value("ngeoColorpickerTemplateUrl",function(a,b){a=b.ngeoColorpickerTemplateurl;return void 0!==a?a:"ngeo/colorpicker.html"});function kw(a){return{restrict:"A",scope:{colors:"<?ngeoColorpicker",color:"=?ngeoColorpickerColor"},controller:"NgeoColorpickerController",controllerAs:"ctrl",bindToController:!0,templateUrl:a}}kw.$inject=["ngeoColorpickerTemplateUrl"];w.directive("ngeoColorpicker",kw);
var lw=["#F4EB37 #CDDC39 #62AF44 #009D57 #0BA9CC #4186F0 #3F5BA9 #7C3592 #A61B4A #DB4436 #F8971B #F4B400 #795046".split(" "),"#F9F7A6 #E6EEA3 #B7DBAB #7CCFA9 #93D7E8 #9FC3FF #A7B5D7 #C6A4CF #D698AD #EE9C96 #FAD199 #FFDD5E #B29189".split(" "),["#ffffff","#CCCCCC","#777","#000000"]];function mw(){this.colors=lw}u("ngeo.ColorpickerController",mw);mw.$inject=["$scope","$element","$attrs"];mw.prototype.Nd=function(a){this.color=a};mw.prototype.setColor=mw.prototype.Nd;
w.controller("NgeoColorpickerController",mw);function nw(){return{restrict:"A",link:function(a,b,c){var d=a.$eval(c.ngeoSearch),e=a.$eval(c.ngeoSearchDatasets).slice();e.unshift(d);b.typeahead.apply(b,e);c=a.$eval(c.ngeoSearchListeners);var f=nw.b(c);b.on("typeahead:open",function(){a.$apply(function(){f.open()})});b.on("typeahead:close",function(){a.$apply(function(){f.close()})});b.on("typeahead:cursorchange",function(b,c,d){a.$apply(function(){f.cursorchange(b,c,d)})});b.on("typeahead:select",function(b,c,d){a.$apply(function(){f.select(b,
c,d)})});b.on("typeahead:autocomplete",function(b,c,d){a.$apply(function(){f.autocomplete(b,c,d)})})}}}nw.b=function(a){var b;a?b={open:void 0!==a.open?a.open:ca,close:void 0!==a.close?a.close:ca,cursorchange:void 0!==a.cursorchange?a.cursorchange:ca,select:void 0!==a.select?a.select:ca,autocomplete:void 0!==a.autocomplete?a.autocomplete:ca}:b={open:ca,close:ca,cursorchange:ca,select:ca,autocomplete:ca};return b};w.directive("ngeoSearch",nw);z.value("gmfSearchTemplateUrl",function(a,b){a=b.gmfSearchTemplateurl;return void 0!==a?a:"gmf/search.html"});
function ow(a){return{restrict:"E",bindToController:{inputValue:"=?gmfSearchInputValue"},scope:{getMapFn:"&gmfSearchMap",getDatasourcesFn:"&gmfSearchDatasources",typeaheadOptions:"<?gmfSearchOptions",featuresStyles:"<?gmfSearchStyles",clearbutton:"=gmfSearchClearbutton",colorchooser:"=gmfSearchColorchooser",placeholder:"@?gmfSearchPlaceholder",coordinatesProjections:"=?gmfSearchCoordinatesprojections",additionalListeners:"=gmfSearchListeners"},controller:"GmfSearchController",controllerAs:"ctrl",
templateUrl:a,link:function(a,c){if(!a.clearbutton){var d=a.ctrl;c.find("input").on("focus blur",function(){d.clear()})}}}}ow.$inject=["gmfSearchTemplateUrl"];z.directive("gmfSearch",ow);
function pw(a,b,c,d,e,f,g,h){this.ba=a;this.j=b;this.u=c;this.na=d;this.i=h;this.v=f;this.O=g;this.o=e;this.b=this.ba.getMapFn();this.c={};this.clearButton=this.ba.clearbutton||!1;this.colorchooser=this.ba.colorchooser||!1;this.placeholder=this.ba.placeholder;b=this.ba.coordinatesProjections;void 0===b?b=[T(this.b).da()]:b=this.o.Yf(b);this.s=b;qw(this);this.g=g.gb();this.g.setStyle(this.B.bind(this));this.f=this.ba.getDatasourcesFn();this.options={highlight:!0};Xa(this.options,this.ba.typeaheadOptions||
{});this.datasets=[];this.inputValue="";for(g=0;g<this.f.length;g++){var k=this.f[g];b=void 0!==k.groupValues?k.groupValues:[];c=k.groupActions?k.groupActions:[];var m=[];0===b.length?m.push({title:"",filter:rw(null)}):b.forEach(function(a){m.push({title:a,filter:rw(a)})},this);c.forEach(function(a){m.push({title:d.getString(a.title),filter:sw(a.action)})},this);m.forEach(function(a){this.datasets.push(tw(this,{bloodhoundOptions:k.bloodhoundOptions,Hf:a.title,Iq:"layer_name",labelKey:k.labelKey,projection:k.projection,
typeaheadDatasetOptions:k.typeaheadDatasetOptions,url:k.url},a.filter))},this)}this.datasets.push({source:uw(this,T(this.b)),name:"coordinates",display:"label",templates:{header:function(){return'<div class="gmf-search-header" translate>'+d.getString("Recenter to")+"</div>"},suggestion:function(a){return'<div class="gmf-search-datum">'+('<p class="gmf-search-label">'+a.label+"</p>")+"</div>"}}});this.displayColorPicker=!1;a.$watch(function(){return this.color}.bind(this),this.Jj.bind(this));this.listeners=
vw(this.ba.additionalListeners,{select:ww.bind(this),close:xw.bind(this)})}u("gmf.SearchController",pw);pw.$inject="$scope $compile $timeout gettextCatalog ngeoAutoProjection ngeoCreateGeoJSONBloodhound ngeoFeatureOverlayMgr gmfTreeManager".split(" ");function vw(a,b){return a?{open:a.open,close:void 0===a.close?b.close:function(){b.close();a.close()},cursorchange:a.cursorchange,select:void 0===a.select?b.select:function(c,d,e){b.select(c,d,e);a.select(c,d,e)},autocomplete:a.autocomplete}:b}
function tw(a,b,c){var d=a.na,e=a.ba,f=a.j;a=yw(a,b,c);a={limit:Infinity,source:a.ttAdapter(),display:function(a){return a.get(b.labelKey)},templates:{header:function(){return void 0===b.Hf?"":'<div class="gmf-search-header">'+d.getString(b.Hf)+"</div>"},suggestion:function(a){var c=e.$new(!0);c.feature=a;var d='<p class="gmf-search-label">'+a.get(b.labelKey)+"</p>",d=d+('<p class="gmf-search-group">'+(a.get("layer_name")||b.Hf)+"</p>");return f('<div class="gmf-search-datum">'+d+"</div>")(c)}}};
b.typeaheadDatasetOptions&&Xa(a,b.typeaheadDatasetOptions);return a}function sw(a){return function(b){b=b.properties;return b.actions?!b.layer_name&&b.actions.some(function(b){return b.action===a}):!1}}function rw(a){return function(b){b=b.properties.layer_name;return void 0===b?!1:null===a?!0:b===a}}function yw(a,b,c){var d=T(a.b).da().b,e=zw(a);a=a.v(b.url,c,Te(d),Te(b.projection),b.bloodhoundOptions,e);a.initialize();return a}
function zw(a){var b=a.na;return{rateLimitWait:50,prepare:function(a,d){var e=d.url,f=b.currentLanguage,e=sb(e,"query",a),e=sb(e,"lang",f),e=sb(e,"interface","mobile");d.xhrFields={withCredentials:!0};d.url=e;return d}}}function uw(a,b){var c=b.da(),d=c.I();return function(a,b){var g=[];a=this.o.Nj(a);var h;null!==a&&(h=this.o.Vg(a,d,c,this.s),null!==h&&(g.push({label:a.join(" "),position:h,tt_source:"coordinates"}),b(g)))}.bind(a)}
function qw(a){a.c.gmfCoordinatesLayerName=new U({image:new Xr({stroke:new ri({color:[0,0,0,.7],width:2}),points:4,radius:8,ed:0,angle:0})});var b=new mi({color:[65,134,240,.5]}),c=new ri({color:[65,134,240,1],width:2});a.c["default"]=new U({fill:b,stroke:c,image:new ji({radius:5,fill:b,stroke:c})});Xa(a.c,a.ba.featuresStyles||{})}
pw.prototype.B=function(a){a=this.c[a.get("layer_name")]||this.c["default"];if(this.color){var b=Oh(this.color),c=a.Fa();if(c){var d=b.slice();d[3]=1;c.Nd(d);if(c=a.Ea())b=b.slice(),b[3]=.5,c.Nd(b)}}return a};pw.prototype.Jj=function(a){var b;if(b=a)b=Oh(a),b=0<=b[0]&&256>b[0]&&0<=b[1]&&256>b[1]&&0<=b[2]&&256>b[2]&&0<=b[3]&&1>=b[3];b&&(this.color=a,this.O.ya().b())};pw.prototype.setStyleColor=pw.prototype.Jj;
function Aw(a){if(a.clearButton){var b=$(".twitter-typeahead .tt-menu");a.inputValue?b.show():b.hide()}}pw.prototype.Ao=function(){this.g.clear();this.clear()};pw.prototype.onClearButton=pw.prototype.Ao;pw.prototype.clear=function(){var a=$(".twitter-typeahead"),b=a.children(".tt-menu"),a=a.children("input");this.inputValue="";$(a[1]).typeahead("val","");b.children(".tt-dataset").empty();Aw(this);this.displayColorPicker=!1};pw.prototype.clear=pw.prototype.clear;
pw.prototype.blur=function(){var a=$(".twitter-typeahead").children("input");this.u(function(){$(a[1]).blur()})};pw.prototype.blur=pw.prototype.blur;function ww(a,b){"coordinates"===b.tt_source?(a=new oj(b.position),this.g.clear(),this.g.ra(new yi({geometry:a,layer_name:"gmfCoordinatesLayerName"})),Zn(T(this.b),b.position),Bw(this)):Cw(this,b)}
function Cw(a,b){var c=b.get("actions"),d=b.G();if(c)for(var e=0,f=c.length;e<f;e++){var g=c[e],h=g.action,g=g.data;if("add_theme"==h)a.i.rh(g);else if("add_group"==h)a.i.ee(g,!0);else if("add_layer"==h){var k;a.f[0].groupActions.forEach(function(a){if("add_layer"===a.action)return k=!0});k&&a.i.nh(g,!0,null!=d,a.b)}}c=a.b.ka();null!=d&&c&&(e=T(a.b),a.g.clear(),a.g.ra(b),a.displayColorPicker=!0,b="GeometryCollection"===d.R()?d.I():d,Yn(e,b,c,{ub:16}));Bw(a)}
function Bw(a){a.clearButton||a.clear();a.blur()}function xw(){this.clearButton||Aw(this)}z.controller("GmfSearchController",pw);z.directive("gmfThemeselector",function(){return{restrict:"E",controller:"gmfThemeselectorController",scope:{filter:"=gmfThemeselectorFilter"},bindToController:!0,controllerAs:"tsCtrl",templateUrl:"gmf/themeselector.html"}});function Dw(a,b,c){this.b=b;this.g=c;this.currentTheme=this.b.tree;this.listenerKeys_=[];this.listenerKeys_.push(E(this.g,"change",this.f,this));a.$on("$destroy",this.c.bind(this))}u("gmf.ThemeselectorController",Dw);Dw.$inject=["$scope","gmfTreeManager","gmfThemes"];
Dw.prototype.f=function(){this.b.removeAll();this.g.Ob().then(function(a){this.themes=this.filter?a.filter(this.filter):a}.bind(this))};Dw.prototype.yp=function(a,b){a&&this.b.fe(a,b)};Dw.prototype.setTheme=Dw.prototype.yp;Dw.prototype.c=function(){this.listenerKeys_.forEach(B);this.listenerKeys_.length=0};z.controller("gmfThemeselectorController",Dw);function Ew(a){return{restrict:"A",scope:!1,link:function(b,c,d){function e(b){a.$c(f,b.coordinate)}var f=b.$eval(d.ngeoMapQueryMap),g=null;b.$watch(d.ngeoMapQueryActive,function(c){c?g=E(f,"click",e):(null!==g&&(B(g),g=null),!1!==b.$eval(d.ngeoMapQueryAutoclear)&&a.clear())})}}}Ew.$inject=["ngeoQuery"];w.directive("ngeoMapQuery",Ew);function Fw(a){return function(b){var c=a.navigator,c=c.languages||c.language||c.browserLanguage||c.systemLanguage||c.userLanguage;Array.isArray(c)||(c=[c]);c=c.map(function(a){return a.substring(0,2)});c=c.filter(function(a,b,c){return c.indexOf(a)==b});return c.filter(function(a){return-1!=b.indexOf(a)})[0]}}Fw.$inject=["$window"];w.factory("ngeoGetBrowserLanguage",Fw);function Gw(a,b){this.getActive=function(){return a[b]};this.setActive=function(c){a[b]=c}}u("ngeo.ToolActivate",Gw);w.value("ngeoToolActivate",Gw);function Hw(a){this.b={};this.ba=a}Hw.$inject=["$rootScope"];
Hw.prototype.Aa=function(a,b,c){var d=this.b[a];d||(d=this.b[a]=[]);var e=this.ba.$watch(b.getActive,function(c,d){if(c!==d)if(c)for(c=this.b[a],d=0;d<c.length;d++)b!=c[d].Td&&c[d].Td.setActive(!1);else{c=this.b[a];d=null;for(var e=!1,k=0;k<c.length;k++)e=e||c[k].Td.getActive(),c[k].hl&&(d=c[k].Td);e||null===d||d.setActive(!0)}}.bind(this));d.push({Td:b,hl:c||!1,hd:e})};Hw.prototype.registerTool=Hw.prototype.Aa;
Hw.prototype.eb=function(a,b){if(a=this.b[a])for(var c=0;c<a.length;c++)if(a[c].Td==b){a[c].hd();a.splice(c,1);break}};Hw.prototype.unregisterTool=Hw.prototype.eb;Hw.prototype.Up=function(a){var b=this.b[a];if(b){for(var c=0;c<b.length;c++)b[c].hd();delete this.b[a]}};Hw.prototype.unregisterGroup=Hw.prototype.Up;Hw.prototype.Tk=function(a){a.setActive(!0)};Hw.prototype.activateTool=Hw.prototype.Tk;Hw.prototype.fl=function(a){a.setActive(!1)};Hw.prototype.deactivateTool=Hw.prototype.fl;
w.service("ngeoToolActivateMgr",Hw);z.value("ngeoExportFeatureFormats",[bs,as]);z.value("ngeoPointfilter","ngeoNumberCoordinates:0:{x} E, {y} N");z.value("ngeoQueryOptions",{limit:20});
function Iw(a,b,c){this.c=c.get("ngeoLocation");this.c.ig("debug")&&(window.injector=c);c.get("ngeoFeatureHelper").Fb(T(this.map).da());this.s=c.get("gmfTreeManager");this.theme=this.s.tree;this.g=c.get("gmfThemes");this.O=c.get("defaultTheme");var d=c.get("gmfAuthentication"),e=function(a){var b=null!==a.Wj.username?a.Wj.role_id:void 0;Jw(this);"ready"!==a.type&&this.B(!0);this.g.Ji(b);this.H()}.bind(this);E(d,"ready",e);E(d,"login",e);E(d,"logout",e);this.searchDatasources=[{labelKey:"label",groupValues:c.get("gmfSearchGroups"),
groupActions:c.get("gmfSearchActions"),projection:"EPSG:"+(a.srid||21781),url:c.get("fulltextsearchUrl")}];this.dimensions={};var f=c.get("gmfPermalink");f.Ij(this.dimensions);if(c.has("gmfDefaultDimensions")){a=c.get("gmfDefaultDimensions");for(var g in a)void 0===this.dimensions[g]&&(this.dimensions[g]=a[g])}var h=c.get("ngeoBackgroundLayerMgr");b.$watchCollection(function(){return this.dimensions}.bind(this),function(){h.jd(this.map,this.dimensions)}.bind(this));this.rightNavVisible=this.leftNavVisible=
!1;c.get("gmfQueryManager");g=new mi({color:[255,170,0,.6]});a=new ri({color:[255,170,0,1],width:2});this.queryFeatureStyle=new U({fill:g,image:new ji({fill:g,radius:5,stroke:a}),stroke:a});this.queryAutoClear=this.queryActive=!0;this.printActive=this.printPanelActive=!1;this.T=c.get("ngeoQuery");b.$watch(function(){return this.printPanelActive}.bind(this),function(a){a||this.queryActive||this.T.clear();this.queryAutoClear=!a;this.printActive=a}.bind(this));this.drawProfilePanelActive=this.drawFeatureActive=
this.measureLengthActive=this.measurePointActive=!1;this.gmfUser=c.get("gmfUser");b.$watch(function(){return this.gmfUser.username}.bind(this),function(a){null!==a&&this.Qi&&(this.rightNavVisible=!1)}.bind(this));this.K=c.get("ngeoGetBrowserLanguage");this.o=c.get("ngeoStateManager");this.D=c.get("tmhDynamicLocale");this.u=b;this.v=c.get("defaultLang");this.f=c.get("langUrls");this.j=c.get("gettextCatalog");Kw(this);c.get("ngeoFeatureOverlayMgr").tb(this.map);c=c.get("ngeoToolActivateMgr");c.Aa("mapTools",
new Gw(this,"queryActive"),!0);c.Aa("mapTools",new Gw(this,"measurePointActive"),!1);c.Aa("mapTools",new Gw(this,"measureLengthActive"),!1);c.Aa("mapTools",new Gw(this,"drawFeatureActive"),!1);c.Aa("mapTools",new Gw(this,"drawProfilePanelActive"),!1);c.Aa("mapTools",new Gw(this,"printPanelActive"),!1);b.$watch(function(){return this.theme.name}.bind(this),function(a){Lw(this,a);var b=this.map;this.g.ni(a).then(function(a){if(a&&(a=a.functionalities.default_basemap)&&0<a.length){var c=a[0];vh(this.g,
this.dimensions).then(function(a){(a=Kc(a,function(a){return a.get("label")===c}))&&h.set(b,a)})}}.bind(this))}.bind(this));this.B=function(a){vh(this.g,this.dimensions).then(function(b){var c;a||(c=f.Wh(b));if(!c){var d=this.gmfUser.functionalities;if(d&&(d=d.default_basemap,0<d.length)){var e=d[0];c=Kc(b,function(a){return a.get("label")===e})}}!c&&b[1]&&(c=b[1]);c&&h.set(this.map,c)}.bind(this))}.bind(this);this.B(!1);this.hasEditableLayers=!1;this.H=function(){this.g.hasEditableLayers().then(function(a){this.hasEditableLayers=
a}.bind(this))}}u("gmf.AbstractController",Iw);Iw.$inject=["config","$scope","$injector"];Iw.prototype.ef=function(a){this.j.setCurrentLanguage(a);this.j.loadRemote(this.f[a]);this.D.set(a);this.lang=a};Iw.prototype.switchLanguage=Iw.prototype.ef;function Kw(a){a.u.$watch(function(){return this.lang}.bind(a),function(a){Rk(this.o,{lang:a})}.bind(a));var b=a.K(Object.keys(a.f)),c=a.o.b.lang;void 0!==c&&c in a.f?a.ef(c):void 0!==b&&b in a.f?a.ef(b):a.ef(a.v)}
function Jw(a){a.g.Ob().then(function(a){var c,d=this.c.ib().split("/");Mw(d)&&(c=d[d.length-1]);c||(c=this.o.b.theme);c||(d=this.gmfUser.functionalities)&&"default_theme"in d&&(d=d.default_theme,0<d.length&&(c=d[0]));c||(c=this.O);a=ph(a,c);this.s.fe(a,!0)}.bind(a))}function Mw(a){return 0<=a.indexOf("theme")&&a.indexOf("theme")==a.length-2}function Lw(a,b){if(b){var c=a.c.ib().split("/");""===c[c.length-1]&&c.splice(c.length-1);Mw(c)?c[c.length-1]=b:c.push("theme",b);a.c.Dc(c.join("/"))}}
z.controller("AbstractController",Iw);function Nw(a){return{restrict:"A",scope:!1,link:function(b,c,d){var e=b.$eval(d.ngeoBboxQueryMap),f=new wu({ua:ro});f.on("boxend",function(){var b=f.G().I();a.$c(e,b)});b.$watch(d.ngeoBboxQueryActive,function(c){c?e.f.push(f):(e.f.remove(f),!1!==b.$eval(d.ngeoBboxQueryAutoclear)&&a.clear())})}}}Nw.$inject=["ngeoQuery"];w.directive("ngeoBboxQuery",Nw);function Ow(a,b){this.ia=a;this.b=b}Ow.$inject=["$http","gmfRasterUrl"];Ow.prototype.vd=function(a,b){b=b||{};b.lon=a[0];b.lat=a[1];return this.ia.get(this.b,{params:b}).then(this.g.bind(this))};Ow.prototype.getAltitude=Ow.prototype.vd;Ow.prototype.g=function(a){return a.data};z.service("gmfAltitude",Ow);z.directive("gmfContextualdata",function(){return{restrict:"A",scope:!1,controller:"GmfContextualdataController",controllerAs:"cdCtrl",bindToController:{map:"<gmfContextualdataMap",projections:"<gmfContextualdataProjections",callback:"<gmfContextualdataCallback"},link:function(a,b,c,d){d.tb()}}});
function Pw(a,b,c){this.i=a;this.c=b;this.o=c;a=document.createElement("DIV");a.classList.add("popover","bottom","gmf-contextualdata");angular.element(a).css("position","relative");b=document.createElement("DIV");b.classList.add("arrow");a.appendChild(b);this.b=document.createElement("DIV");this.b.setAttribute("gmf-contextualdatacontent","");this.b.classList.add("popover-content");a.appendChild(this.b);this.g=new io({element:a,Rg:!0,ge:!0,th:{duration:250},dd:"top-center"});this.map.i.push(this.g);
angular.element("body").on("mousedown",this.f.bind(this))}Pw.$inject=["$compile","$scope","gmfAltitude"];Pw.prototype.tb=function(){var a=lo(this.map);As(a,"contextmenu",this.j,!1,this)};Pw.prototype.j=function(a){this.c.$apply(function(){var b=on(this.map,a),b=this.map.va(b);Qw(this,b);a.preventDefault();this.f();var c=jo(this.g);angular.element(c).css("display","block");this.g.setPosition(b)}.bind(this))};
function Qw(a,b){var c=a.c.$new(!0);a.i(a.b)(c);var d=T(a.map).da().b;a.projections.forEach(function(a){var e=hf(b,d,"EPSG:"+a);c["coord_"+a]=e;c["coord_"+a+"_eastern"]=e[0];c["coord_"+a+"_northern"]=e[1]});var e=function(a){Xa(c,a);this.callback&&Xa(c,this.callback.call(this,b,a))}.bind(a);a.o.vd(b).then(e,function(){console.error("Error on getting altitude.")})}Pw.prototype.f=function(){var a=jo(this.g);angular.element(a).css("display","none")};z.controller("GmfContextualdataController",Pw);
function Rw(a){return{restrict:"A",scope:!0,templateUrl:a}}Rw.$inject=["gmfContextualdatacontentTemplateUrl"];z.directive("gmfContextualdatacontent",Rw);function Sw(a,b){this.na=b;this.g=a.has("ngeoCsvEncoding")?a.get("ngeoCsvEncoding"):"utf-8";a.has("ngeoCsvExtension")&&a.get("ngeoCsvExtension");this.c=a.has("ngeoCsvIncludeHeader")?a.get("ngeoCsvIncludeHeader"):!0;this.b=a.has("ngeoCsvQuote")?a.get("ngeoCsvQuote"):'"';this.i=a.has("ngeoCsvSeparator")?a.get("ngeoCsvSeparator"):",";this.f=a.get("ngeoDownload")}Sw.$inject=["$injector","gettextCatalog"];
Sw.prototype.Uh=function(a,b){if(0==a.length||0==b.length)return"";var c=b.map(function(a){return this.na.getString(a.name)}.bind(this)),c=Tw(this,c);a=a.map(function(a){var c=b.map(function(b){return a[b.name]});return Tw(this,c)}.bind(this));return this.c?c+a.join(""):a.join("")};Sw.prototype.generateCsv=Sw.prototype.Uh;function Tw(a,b){var c=new RegExp(a.b,"g"),d=a.b+a.b;return b.map(function(a){return void 0!==a&&null!==a?this.b+(""+a).replace(c,d)+this.b:""}.bind(a)).join(a.i)+"\n"}
Sw.prototype.Lj=function(a,b,c){a=this.Uh(a,b);this.f(a,c,"attachment/csv;charset="+this.g)};Sw.prototype.startDownload=Sw.prototype.Lj;w.service("ngeoCsvDownload",Sw);w.value("ngeoGridTemplateUrl",function(a,b){a=b.ngeoGridTemplateurl;return void 0!==a?a:"ngeo/grid.html"});function Uw(a,b){this.data=a;this.columnDefs=b;this.selectedRows={}}u("ngeo.GridConfig",Uw);function Vw(a){return""+r(a)}Uw.getRowUid=Vw;Uw.prototype.Zc=function(a){return!!this.selectedRows[Vw(a)]};Uw.prototype.isRowSelected=Uw.prototype.Zc;Uw.prototype.Zf=function(){return Object.keys(this.selectedRows).length};Uw.prototype.getSelectedCount=Uw.prototype.Zf;Uw.prototype.li=function(){return this.data.filter(function(a){return this.Zc(a)}.bind(this))};
Uw.prototype.getSelectedRows=Uw.prototype.li;function Ww(a,b){var c=Vw(b);a.selectedRows[c]=b}function Xw(a,b){var c=Vw(b);a.Zc(b)?delete a.selectedRows[c]:a.selectedRows[c]=b}Uw.prototype.selectAll=function(){this.data.forEach(function(a){Ww(this,a)}.bind(this))};Uw.prototype.selectAll=Uw.prototype.selectAll;Uw.prototype.Ud=function(){for(var a in this.selectedRows)delete this.selectedRows[a]};Uw.prototype.unselectAll=Uw.prototype.Ud;
Uw.prototype.Ce=function(){this.data.forEach(function(a){Xw(this,a)}.bind(this))};Uw.prototype.invertSelection=Uw.prototype.Ce;function Yw(a){return{bindToController:!0,controller:"ngeoGridController",controllerAs:"ctrl",restrict:"E",scope:{configuration:"=ngeoGridConfiguration"},templateUrl:a}}Yw.$inject=["ngeoGridTemplateUrl"];w.directive("ngeoGrid",Yw);
function Zw(a){this.ba=a;this.selectedRows=this.configuration.selectedRows;this.sortAscending=!0;this.floatTheadConfig={scrollContainer:function(a){return a.closest(".ngeo-grid-table-container")}}}Zw.$inject=["$scope"];Zw.prototype.sort=function(a){this.sortAscending=this.sortedBy===a?!this.sortAscending:!0;this.sortedBy=a;var b=this.sortAscending?1:-1;this.configuration.data.sort(function(c,d){return c[a]?d[a]?c[a]>d[a]?b:-b:-1:1})};Zw.prototype.sort=Zw.prototype.sort;
Zw.prototype.al=function(a,b){var c=!b.altKey&&!(b.metaKey||b.ctrlKey)&&b.shiftKey;b=!b.altKey&&(Xh?b.metaKey:b.ctrlKey)&&!b.shiftKey;if(c&&!b){var d=Vw(a),c=this.configuration.data;if(!this.configuration.Zc(a)){b=void 0;for(var e=[],f=0;f<c.length;f++){var g=c[f],h=Vw(g);d===h?b=f:this.configuration.Zc(g)&&e.push(f)}0==e.length&&Ww(this.configuration,a);d=Infinity;a=e[0];for(f=0;f<e.length;f++)g=e[f],h=Math.abs(g-b),d>h&&(d=h,a=g);e=b>a?b:a;for(b=b<a?b:a;b<=e;b++)Ww(this.configuration,c[b])}}else!c&&
b?Xw(this.configuration,a):(c=this.configuration.Zc(a),this.configuration.Ud(),c||Ww(this.configuration,a))};Zw.prototype.clickRow=Zw.prototype.al;Zw.prototype.Ro=function(a){var b=!a.altKey&&(Xh?a.metaKey:a.ctrlKey)&&!a.shiftKey;(!a.altKey&&!a.metaKey&&!a.ctrlKey&&a.shiftKey||b)&&a.preventDefault()};Zw.prototype.preventTextSelection=Zw.prototype.Ro;w.controller("ngeoGridController",Zw);w.value("gmfDisplayquerygridTemplateUrl",function(a,b){a=b.gmfDisplayquerygridTemplateurl;return void 0!==a?a:"gmf/displayquerygrid.html"});
function $w(a){return{bindToController:!0,controller:"GmfDisplayquerygridController",controllerAs:"ctrl",templateUrl:a,replace:!0,restrict:"E",scope:{active:"=gmfDisplayquerygridActive",featuresStyleFn:"&gmfDisplayquerygridFeaturesstyle",selectedFeatureStyleFn:"&gmfDisplayquerygridSourceselectedfeaturestyle",getMapFn:"&gmfDisplayquerygridMap",removeEmptyColumnsFn:"&?gmfDisplayquerygridRemoveemptycolumns",maxResultsFn:"&?gmfDisplayquerygridMaxresults",maxRecenterZoomFn:"&?gmfDisplayquerygridMaxrecenterzoom",
mergeTabsFn:"&?gmfDisplayquerygridMergetabs"}}}$w.$inject=["gmfDisplayquerygridTemplateUrl"];z.directive("gmfDisplayquerygrid",$w);
function ax(a,b,c,d,e,f,g){this.o=a;this.$timeout_=d;this.ngeoQueryResult=b;this.u=e;this.B=g;this.maxResults=f.Ge;this.pending=this.active=!1;this.gridSources={};this.loadedGridSources=[];this.selectedTab=null;this.v=this.removeEmptyColumnsFn?!0===this.removeEmptyColumnsFn():!1;this.maxRecenterZoom=this.maxRecenterZoomFn?this.maxRecenterZoomFn():void 0;this.i=(a=this.mergeTabsFn?this.mergeTabsFn():{})?a:{};this.f={};this.c=new xc;a=c.gb();d=this.featuresStyleFn();void 0!==d&&a.setStyle(d);a.Cc(this.c);
this.j=c.gb();this.g=new xc;this.j.Cc(this.g);c=this.selectedFeatureStyleFn();void 0===c&&(c=new mi({color:[255,0,0,.6]}),a=new ri({color:[255,0,0,1],width:2}),c=new U({fill:c,image:new ji({fill:c,radius:5,stroke:a}),stroke:a,zIndex:10}));this.j.setStyle(c);c=null;(a=this.getMapFn)&&(c=a());this.s=c;this.o.$watchCollection(function(){return b},function(a,b){a!==b&&bx(this)}.bind(this));this.b=null}u("gmf.DisplayquerygridController",ax);ax.$inject="$scope ngeoQueryResult ngeoFeatureOverlayMgr $timeout ngeoCsvDownload ngeoQuery $element".split(" ");
ax.prototype.El=function(){return this.loadedGridSources.map(function(a){return this.gridSources[a]}.bind(this))};ax.prototype.getGridSources=ax.prototype.El;
function bx(a){if(0!==a.ngeoQueryResult.total||cx(a)){a.active=!0;a.pending=!1;var b=a.ngeoQueryResult.sources;0<Object.keys(a.i).length&&(b=dx(a,b));b.forEach(function(a){a.tooManyResults?ex(this,null,a):0<a.features.length&&fx(this,a)}.bind(a));0==a.loadedGridSources.length?a.active=!1:null!==a.selectedTab&&""+a.selectedTab in a.gridSources||a.$timeout_(function(){var a=this.loadedGridSources[0];this.Gj(this.gridSources[a]);gx(this,a)}.bind(a),0)}else b=a.active,a.clear(),b&&(a.active=a.ngeoQueryResult.pending,
a.pending=a.ngeoQueryResult.pending)}function cx(a){return a.ngeoQueryResult.sources.some(function(a){return a.tooManyResults})}ax.prototype.mn=function(a){return this.selectedTab===a.source.id};ax.prototype.isSelected=ax.prototype.mn;function dx(a,b){var c=[],d={};b.forEach(function(a){null===hx(this,a,d)&&c.push(a)}.bind(a));for(var e in d)c.push(d[e]);return c}
function hx(a,b,c){var d=null,e;for(e in a.i)if(a.i[e].some(function(a){return a==b.id})){d=e;break}if(null===d)return null;var f;d in c?f=c[d]:(f={features:[],id:d,label:d,pending:!1,queried:!0,tooManyResults:!1,totalFeatureCount:void 0},c[d]=f);b.features.forEach(function(a){f.features.push(a)});f.tooManyResults=f.tooManyResults||b.tooManyResults;f.tooManyResults&&(f.totalFeatureCount=void 0!==f.totalFeatureCount?f.totalFeatureCount+f.features.length:f.features.length,f.features=[]);void 0!==b.totalFeatureCount&&
(f.totalFeatureCount=void 0!==f.totalFeatureCount?f.totalFeatureCount+b.totalFeatureCount:b.totalFeatureCount);return f}function fx(a,b){var c=[],d=[],e={},f,g;b.features.forEach(function(a){f=wc(a);void 0!==f&&(g=a.mb,-1===d.indexOf(g)&&d.push(g),c.push(f),e[Vw(f)]=a)}.bind(a));ix(a,c,d);0<c.length&&ex(a,c,b)&&(a.f[""+b.id]=e)}function ix(a,b,c){b.forEach(function(a){c.forEach(function(b){delete a[b]});delete a.boundedBy});!0===a.v&&jx(b)}
function jx(a){var b=[],c,d;for(d in a[0])for(c=0;c<a.length;c++)if(void 0!==a[c][d]){b.push(d);break}var e;a.forEach(function(a){e=[];for(d in a)-1===b.indexOf(d)&&e.push(d);e.forEach(function(b){delete a[b]})})}function ex(a,b,c){var d=""+c.id,e=null;if(null!==b&&(e=kx(b),null===e))return!1;-1==a.loadedGridSources.indexOf(d)&&a.loadedGridSources.push(d);a.gridSources[d]={configuration:e,source:c};return!0}
function kx(a){var b=[];Object.keys(a[0]).forEach(function(a){0!==a.lastIndexOf("closure_uid_",0)&&b.push({name:a})});return 0<b.length?new Uw(a,b):null}ax.prototype.clear=function(){this.pending=this.active=!1;this.gridSources={};this.loadedGridSources=[];this.selectedTab=null;this.tooManyResults=!1;this.c.clear();this.g.clear();this.f={};this.b&&this.b()};ax.prototype.clear=ax.prototype.clear;
ax.prototype.Gj=function(a){this.selectedTab=a.source.id;this.b&&(this.b(),this.b=null);null!==a.configuration&&(this.b=this.o.$watchCollection(function(){return a.configuration.selectedRows},function(a,c){Object.keys(a)!==Object.keys(c)&&null!==this.selectedTab&&lx(this,this.gridSources[""+this.selectedTab])}.bind(this)));lx(this,a)};ax.prototype.selectTab=ax.prototype.Gj;
function gx(a,b){var c=a.B.find("div.tab-pane#"+b);c.removeClass("active").addClass("active");a.$timeout_(function(){c.find("div.ngeo-grid-table-container table").trigger("reflow")})}function lx(a,b){a.c.clear();a.g.clear();if(null!==b.configuration){var c=a.f[""+b.source.id];b=b.configuration.selectedRows;for(var d in c){var e=c[d];d in b?a.g.push(e):a.c.push(e)}}}ax.prototype.ac=function(){return null===this.selectedTab?null:this.gridSources[""+this.selectedTab]};
ax.prototype.getActiveGridSource=ax.prototype.ac;ax.prototype.ln=function(){var a=this.ac();return null===a||null===a.configuration?!1:0<a.configuration.Zf()};ax.prototype.isOneSelected=ax.prototype.ln;ax.prototype.Jl=function(){var a=this.ac();return null===a||null===a.configuration?0:a.configuration.Zf()};ax.prototype.getSelectedRowCount=ax.prototype.Jl;ax.prototype.selectAll=function(){var a=this.ac();null!==a&&a.configuration.selectAll()};ax.prototype.selectAll=ax.prototype.selectAll;
ax.prototype.Ud=function(){var a=this.ac();null!==a&&a.configuration.Ud()};ax.prototype.unselectAll=ax.prototype.Ud;ax.prototype.Ce=function(){var a=this.ac();null!==a&&a.configuration.Ce()};ax.prototype.invertSelection=ax.prototype.Ce;ax.prototype.nq=function(){if(null!==this.ac()){var a=Tc();this.g.forEach(function(b){ed(a,b.G().I())});var b=this.s.ka();Yn(T(this.s),a,b,{ub:this.maxRecenterZoom})}};ax.prototype.zoomToSelection=ax.prototype.nq;
ax.prototype.Mf=function(){var a=this.ac();if(null!==a){var b=a.configuration.columnDefs,a=a.configuration.li();this.u.Lj(a,b,"query-results")}};ax.prototype.downloadCsv=ax.prototype.Mf;z.controller("GmfDisplayquerygridController",ax);z.directive("gmfFeaturestyle",function(){return{controller:"GmfFeaturestyleController",scope:{feature:"=gmfFeaturestyleFeature"},bindToController:!0,controllerAs:"fsCtrl",templateUrl:"gmf/featurestyle.html"}});function mx(a,b){this.ba=a;this.b=b;this.measure=this.color=null;a.$watch(function(){return this.color}.bind(this),this.i.bind(this));this.c=[];a.$watch(function(){return this.feature}.bind(this),this.o.bind(this))}mx.$inject=["$scope","ngeoFeatureHelper"];
mx.prototype.o=function(a,b){var c=this.c;b&&(c.forEach(function(a){B(a)},this),this.measure=this.color=this.type=null);a&&("acnomsk".split("").forEach(function(b){c.push(E(a,I(b),this.g,this))},this),b=a.G(),c.push(E(b,"change",this.f,this)),this.type=this.b.R(a),this.color=this.b.Rf(a),this.measure=this.b.Vc(a))};mx.prototype.i=function(a){this.feature&&a&&this.feature.get("c")!==a&&this.feature.set("c",a)};mx.prototype.Ll=function(a){return nx(this,"a",a)};mx.prototype.getSetAngle=mx.prototype.Ll;
mx.prototype.Ml=function(a){return nx(this,"n",a)};mx.prototype.getSetName=mx.prototype.Ml;mx.prototype.Nl=function(a){return nx(this,"o",a)};mx.prototype.getSetOpacity=mx.prototype.Nl;mx.prototype.Ol=function(a){return nx(this,"m",a)};mx.prototype.getSetShowMeasure=mx.prototype.Ol;mx.prototype.Pl=function(a){return nx(this,"s",a)};mx.prototype.getSetSize=mx.prototype.Pl;mx.prototype.Ql=function(a){return nx(this,"k",a)};mx.prototype.getSetStroke=mx.prototype.Ql;
function nx(a,b,c){void 0!==c&&a.feature.set(b,c);return a.feature.get(b)}mx.prototype.g=function(){var a=this.feature;a&&this.b.setStyle(a,!0)};mx.prototype.f=function(){var a=this.feature;this.measure=this.b.Vc(a);this.b.Cd(a)&&this.g();this.ba.$apply()};z.controller("GmfFeaturestyleController",mx);function ox(a,b){Pb.call(this,a);this.action=b}A(ox,Pb);
function px(a,b){b=void 0!==b?b:{};b.dd="top-left";this.listenerKeys_=[];this.i=null;this.M=[];var c=$("<div/>",{"class":"panel panel-default"});this.B=void 0!==a.autoClose?a.autoClose:!0;if(a.title){var d=$("<div>",{"class":"panel-heading"}).appendTo(c);$("<span>",{text:a.title}).appendTo(d)}var e=$("<div>",{"class":"list-group"}).appendTo(c);this.s=[];a.actions.forEach(function(a){this.s.push($("<button>",{"class":"list-group-item","data-name":a.name,text:[" ",void 0!==a.label?a.label:a.name].join("")}).appendTo(e).prepend($("<span>",
{"class":void 0!==a.cls?a.cls:""})))},this);b.element=c[0];io.call(this,b)}A(px,io);px.prototype.setMap=function(a){var b=this.listenerKeys_,c=this.M;this.get("map")&&(b.forEach(function(a){cl(a)},this),b.length=0,c.forEach(function(a){B(a)},this),c.length=0);io.prototype.setMap.call(this,a);a&&(this.s.forEach(function(a){var c=a.data();b.push(As(a[0],"click",this.v.bind(this,c.name),!1,this))},this),c.push(E(a,zn,this.H,this)))};px.prototype.setMap=px.prototype.setMap;
px.prototype.open=function(a){this.setPosition(a);this.B&&(this.i=As(document.documentElement,"mousedown",this.D,!1,this))};px.prototype.open=px.prototype.open;px.prototype.close=function(){this.setPosition(void 0);null!==this.i&&cl(this.i)};px.prototype.close=px.prototype.close;px.prototype.v=function(a,b){F(this,new ox("actionclick",a));this.B&&this.close();b.stopPropagation()};px.prototype.D=function(a){var b=jo(this);b&&0===$(a.target).closest(b).length&&this.close()};
px.prototype.H=function(a){var b=a.originalEvent.target,c=jo(this);ym(c,b)&&(a.coordinate=[Infinity,Infinity],a.pixel=[Infinity,Infinity])};function qx(a){return{restrict:"A",controller:"ngeoBtnGroupController",link:function(b,c,d,e){var f=a(d.ngeoBtnGroupActive).assign;f&&b.$watch(function(){return e.ie.some(function(a){return!0===a(b)})},function(a){f(b,a)})}}}qx.$inject=["$parse"];w.directive("ngeoBtnGroup",qx);function rx(a){this.ie=[];this.ba=a}rx.$inject=["$scope"];function sx(a,b){a.ie.forEach(function(a,d){d!=b&&a.assign(this.ba,!1)},a)}function tx(a,b){a.ie.push(b);return a.ie.length-1}w.controller("ngeoBtnGroupController",rx);
function ux(a){return{require:["?^ngeoBtnGroup","ngModel"],restrict:"A",link:function(b,c,d,e){var f=e[0],g=e[1],h=-1;d=a(d.ngModel);e=d.assign;void 0===d(b)&&e(b,!1);f&&(h=tx(f,d));c.bind("click",function(){b.$apply(function(){g.$setViewValue(!g.$viewValue);g.$render()})});g.$render=function(){g.$viewValue&&f&&sx(f,h);c.toggleClass("active",g.$viewValue)}}}}ux.$inject=["$parse"];w.directive("ngeoBtn",ux);w.value("ngeoDecorateInteraction",function(a){Object.defineProperty(a,"active",{get:function(){return a.getActive()},set:function(b){a.setActive(b)}})});w.directive("ngeoDrawpoint",function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(a,b,c,d){a=new Go({type:"Point"});d.Ac(a);d.drawPoint=a;E(a,"drawend",d.vc.bind(d,"Point"),d);E(a,I("active"),d.uc,d)}}});w.directive("ngeoDrawrectangle",function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(a,b,c,d){a=new Go({type:"LineString",yl:function(a,b){b||(b=new wj(null));var c=a[0];a=a[1];b.fa([[c,[c[0],a[1]],a,[a[0],c[1]],c]]);return b},Ni:2});d.Ac(a);d.drawRectangle=a;E(a,"drawend",d.vc.bind(d,"Rectangle"),d);E(a,I("active"),d.uc,d)}}});w.directive("ngeoDrawtext",function(){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(a,b,c,d){a=new Go({type:"Point"});d.Ac(a);d.drawText=a;E(a,"drawend",d.vc.bind(d,"Text"),d);E(a,I("active"),d.uc,d)}}});function vx(a,b){b=void 0!==b?b:{};Yo.call(this,b);this.continueMsg=void 0!==b.continueMsg?b.continueMsg:sm("SPAN",{},"Click to continue drawing the polygon.",sm("BR"),"Double-click or click starting point to finish.");this.format=a}A(vx,Yo);u("ngeo.interaction.MeasureArea",vx);vx.prototype.j=function(a,b){return new Go({type:"Polygon",source:b,style:a})};vx.prototype.Ae=function(a){var b=this.o.G(),c=T(this.c).da(),c=$o(b,c,0,this.format),d=null;2<b.N()[0].length&&(d=(new oj(yj(b))).N());a(c,d)};function wx(a,b,c){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(d,e,f,g){e=b("Click to start drawing polygon");f=b("Click to continue drawing<br/>Double-click or click starting point to finish");d=new vx(c("ngeoUnitPrefix"),{style:new U,startMsg:a("<div translate>"+e+"</div>")(d)[0],continueMsg:a("<div translate>"+f+"</div>")(d)[0]});g.Ac(d);g.measureArea=d;E(d,"measureend",g.vc.bind(g,"Polygon"),g);E(d,I("active"),g.uc,g)}}}wx.$inject=["$compile","gettext","$filter"];
w.directive("ngeoMeasurearea",wx);function xx(a,b,c){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(d,e,f,g){e=b("Click to start drawing circle");f=b("Click to finish");d=new jp(c("ngeoUnitPrefix"),{style:new U,startMsg:a("<div translate>"+e+"</div>")(d)[0],continueMsg:a("<div translate>"+f+"</div>")(d)[0]});g.Ac(d);g.measureAzimut=d;E(d,"measureend",function(a){var b=a.feature.G(),c=hp(b.c)[1],c=Bj(c);a.feature=new yi(c);b=mp(hp(b.c)[0]);a.feature.set("azimut",b);g.vc("Circle",a)},g);E(d,I("active"),g.uc,g)}}}
xx.$inject=["$compile","gettext","$filter"];w.directive("ngeoMeasureazimut",xx);function yx(a,b){b=void 0!==b?b:{};Yo.call(this,b);this.continueMsg=void 0!==b.continueMsg?b.continueMsg:sm("SPAN",{},"Click to continue drawing the line.",sm("BR"),"Double-click or click last point to finish.");this.format=a}A(yx,Yo);u("ngeo.interaction.MeasureLength",yx);yx.prototype.j=function(a,b){return new Go({type:"LineString",source:b,style:a})};yx.prototype.Ae=function(a){var b=this.o.G(),c=T(this.c).da(),c=ap(b,c,0,this.format),b=Ji(b);a(c,b)};function zx(a,b,c){return{restrict:"A",require:"^^ngeoDrawfeature",link:function(d,e,f,g){e=b("Click to start drawing line");f=b("Click to continue drawing<br/>Double-click or click last point to finish");d=new yx(c("ngeoUnitPrefix"),{style:new U,startMsg:a("<div translate>"+e+"</div>")(d)[0],continueMsg:a("<div translate>"+f+"</div>")(d)[0]});g.Ac(d);g.measureLength=d;E(d,"measureend",g.vc.bind(g,"LineString"),g);E(d,I("active"),g.uc,g)}}}zx.$inject=["$compile","gettext","$filter"];
w.directive("ngeoMeasurelength",zx);w.directive("ngeoDrawfeature",function(){return{controller:"ngeoDrawfeatureController",scope:!0,bindToController:{active:"=ngeoDrawfeatureActive",map:"=ngeoDrawfeatureMap"},controllerAs:"dfCtrl"}});function Ax(a,b,c,d,e,f,g,h){void 0===this.active&&(this.active=!1);this.na=e;this.f=f;this.c=g;this.g=h;this.b=[];a.$watch(function(){return this.active}.bind(this),function(a){!1===a&&this.b.forEach(function(a){a.setActive(!1)},this)}.bind(this))}Ax.$inject="$scope $compile $sce gettext gettextCatalog ngeoDecorateInteraction ngeoFeatureHelper ngeoFeatures".split(" ");
Ax.prototype.Ac=function(a){this.b.push(a);a.setActive(!1);this.f(a);this.map.f.push(a)};Ax.prototype.registerInteraction=Ax.prototype.Ac;Ax.prototype.uc=function(){this.active=this.b.some(function(a){return a.getActive()},this)};Ax.prototype.handleActiveChange=Ax.prototype.uc;
Ax.prototype.vc=function(a,b){var c=new yi(b.feature.G());switch(a){case "Circle":c.set("l",!0);void 0!==b.feature.get("azimut")&&c.set("z",b.feature.get("azimut"));break;case "Text":c.set("t",!0);break;case "Rectangle":c.set("r",!0)}b=this.na.getString(a);c.set("n",b+" "+(zc(this.g)+1));c.set("c","Text"!==a?"#DB4436":"#000000");c.set("a",0);c.set("o",.2);c.set("m",!1);c.set("s",10);c.set("k",1);this.c.setStyle(c);this.g.push(c)};Ax.prototype.handleDrawEnd=Ax.prototype.vc;
w.controller("ngeoDrawfeatureController",Ax);w.directive("ngeoExportfeatures",function(){return{controller:"ngeoExportfeaturesController",scope:!0,bindToController:{features:"=ngeoExportfeaturesFeatures"},controllerAs:"efCtrl"}});
function Bx(a,b,c,d){this.i=a;var e=["ngeo-exportfeature",r(this)].join("-");this.o=e;this.c=d;var f;b.has("ngeoExportFeatureFormats")?f=b.get("ngeoExportFeatureFormats"):f=[bs];this.b=null;this.kb=[];if(1<f.length){a.attr("id",e);var g=$("<ul />",{"class":"dropdown-menu","aria-labelledby":e}).appendTo(a.parent()[0]);this.b=g;var h;f.forEach(function(a){h=$("<li />").appendTo(g).append($("<a />",{href:"#",text:a}).on(["click",e].join("."),this.Dm.bind(this,a)));this.kb.push(h)},this)}this.g=f;a.on(["click",
e].join("."),this.f.bind(this));c.$on("$destroy",this.j.bind(this))}Bx.$inject=["$element","$injector","$scope","ngeoFeatureHelper"];Bx.prototype.f=function(){var a=this.features.c;if(1===this.g.length)this.c.Nf(a,this.g[0]);else if(1===a.length){var b=a[0].G(),c;this.g.forEach(function(a,e){c=this.kb[e];a===as&&(b instanceof oj||b instanceof dj?c.removeClass("disabled"):c.addClass("disabled"))},this)}};
Bx.prototype.Dm=function(a,b){$(b.target.parentElement).hasClass("disabled")||this.c.Nf(this.features.c,a)};Bx.prototype.j=function(){var a=this.o;this.i.off(["click",a].join("."));this.b&&(this.b.remove(),this.kb.forEach(function(b){b.off(["click",a].join("."))},this),this.kb.length=0,this.b=null)};w.controller("ngeoExportfeaturesController",Bx);function Cx(a,b,c){Pb.call(this,a);this.features=b;this.mapBrowserEvent=c}A(Cx,Pb);
function Dx(a){Co.call(this,{ab:Ex,sb:Fx,handleEvent:Gx,bb:Hx});this.pb=a.ua?a.ua:vo;this.Ya=function(a){return qo(a)&&a.type==un};this.ob=a.il?a.il:this.Ya;this.Oa=this.i=null;this.ta=[0,0];this.v=this.J=!1;this.f=new ll;this.D=void 0!==a.Ub?a.Ub:10;this.s=this.Ca=!1;this.j=[];this.H=new fl({source:new rl({$b:!1,wrapX:!!a.wrapX}),style:a.style?a.style:Ix(),Yb:!0,Zb:!0});this.ja={Point:this.po,LineString:this.aj,LinearRing:this.aj,Polygon:this.qo,MultiPoint:this.no,MultiLineString:this.mo,MultiPolygon:this.oo,
GeometryCollection:this.lo};this.u=a.features;this.u.forEach(this.rg,this);E(this.u,Cc,this.jo,this);E(this.u,Ec,this.ko,this);this.M=null}A(Dx,Co);l=Dx.prototype;l.rg=function(a){var b=a.G();b&&b.R()in this.ja&&this.ja[b.R()].call(this,a,b);(b=this.c)&&Jx(this,this.ta,b);E(a,"change",this.$i,this)};function Kx(a,b){a.v||(a.v=!0,F(a,new Cx("modifystart",a.u,b)))}function Lx(a,b){Mx(a,b);a.i&&0===zc(a.u)&&(S(a.H).Ia(a.i),a.i=null);ec(b,"change",a.$i,a)}
function Mx(a,b){a=a.f;var c=[];a.forEach(function(a){b===a.feature&&c.push(a)});for(var d=c.length-1;0<=d;--d)a.remove(c[d])}l.setMap=function(a){this.H.setMap(a);Co.prototype.setMap.call(this,a)};l.jo=function(a){this.rg(a.element)};l.$i=function(a){this.s||(a=a.target,Lx(this,a),this.rg(a))};l.ko=function(a){Lx(this,a.element)};l.po=function(a,b){var c=b.N();a={feature:a,geometry:b,oa:[c,c]};this.f.insert(b.I(),a)};
l.no=function(a,b){var c=b.N(),d,e,f;e=0;for(f=c.length;e<f;++e)d=c[e],d={feature:a,geometry:b,depth:[e],index:e,oa:[d,d]},this.f.insert(b.I(),d)};l.aj=function(a,b){var c=b.N(),d,e,f,g;d=0;for(e=c.length-1;d<e;++d)f=c.slice(d,d+2),g={feature:a,geometry:b,index:d,oa:f},this.f.insert(Sc(f),g)};l.mo=function(a,b){var c=b.N(),d,e,f,g,h,k,m;g=0;for(h=c.length;g<h;++g)for(d=c[g],e=0,f=d.length-1;e<f;++e)k=d.slice(e,e+2),m={feature:a,geometry:b,depth:[g],index:e,oa:k},this.f.insert(Sc(k),m)};
l.qo=function(a,b){var c=b.N(),d,e,f,g,h,k,m;g=0;for(h=c.length;g<h;++g)for(d=c[g],e=0,f=d.length-1;e<f;++e)k=d.slice(e,e+2),m={feature:a,geometry:b,depth:[g],index:e,oa:k},this.f.insert(Sc(k),m)};l.oo=function(a,b){var c=b.N(),d,e,f,g,h,k,m,n,p,q;k=0;for(m=c.length;k<m;++k)for(n=c[k],g=0,h=n.length;g<h;++g)for(d=n[g],e=0,f=d.length-1;e<f;++e)p=d.slice(e,e+2),q={feature:a,geometry:b,depth:[g,k],index:e,oa:p},this.f.insert(Sc(p),q)};
l.lo=function(a,b){var c=b.c;for(b=0;b<c.length;++b)this.ja[c[b].R()].call(this,a,c[b])};function Nx(a,b){var c=a.i;c?c.G().fa(b):(c=new yi(new oj(b)),a.i=c,S(a.H).ra(c))}function Ox(a,b){return a.index-b.index}
function Ex(a){if(!this.pb(a))return!1;Jx(this,a.pixel,a.map);this.j.length=0;this.v=!1;var b=this.i;if(b){var c=[],b=b.G().N(),d=Sc([b]),d=ol(this.f,d),e={};d.sort(Ox);for(var f=0,g=d.length;f<g;++f){var h=d[f],k=h.oa,m=Sb(h.feature),n=h.depth;n&&(m+="-"+n.join("-"));e[m]||(e[m]=Array(2));if(Nn(k[0],b)&&!e[m][0])this.j.push([h,0]),e[m][0]=h;else if(Nn(k[1],b)&&!e[m][1]){if("LineString"!==h.geometry.R()&&"MultiLineString"!==h.geometry.R()||!e[m][0]||0!==e[m][0].index)this.j.push([h,1]),e[m][1]=h}else Sb(k)in
this.Oa&&!e[m][0]&&!e[m][1]&&c.push([h,b])}c.length&&Kx(this,a);for(a=c.length-1;0<=a;--a)this.en.apply(this,c[a])}return!!this.i}
function Fx(a){this.J=!1;Kx(this,a);a=a.coordinate;for(var b=0,c=this.j.length;b<c;++b){for(var d=this.j[b],e=d[0],f=e.depth,g=e.geometry,h=g.N(),k=e.oa,d=d[1];a.length<g.F;)a.push(0);switch(g.R()){case "Point":h=a;k[0]=k[1]=a;break;case "MultiPoint":h[e.index]=a;k[0]=k[1]=a;break;case "LineString":h[e.index+d]=a;k[d]=a;break;case "MultiLineString":h[f[0]][e.index+d]=a;k[d]=a;break;case "Polygon":h[f[0]][e.index+d]=a;k[d]=a;break;case "MultiPolygon":h[f[1]][f[0]][e.index+d]=a,k[d]=a}e=g;this.s=!0;
e.fa(h);this.s=!1}Nx(this,a)}function Hx(a){for(var b,c=this.j.length-1;0<=c;--c)b=this.j[c][0],ml(this.f,Sc(b.oa),b);this.v&&(F(this,new Cx("modifyend",this.u,a)),this.v=!1);return!1}
function Gx(a){if(!(a instanceof pn))return!0;this.M=a;var b;Tn(T(a.map))[1]||a.type!=zn||this.B||(this.ta=a.pixel,Jx(this,a.pixel,a.map));if(this.i&&this.ob(a)){var c;if(a.type==un&&this.J)c=!0;else{var d=!1;if(this.M&&this.M.type!=An){b=this.M;Kx(this,b);var e=this.j,d={},f=!1,g,h,k,m,n,p,q;for(m=e.length-1;0<=m;--m)k=e[m],q=k[0],c=Sb(q.feature),q.depth&&(c+="-"+q.depth.join("-")),c in d||(d[c]={}),0===k[1]?(d[c].right=q,d[c].index=q.index):1==k[1]&&(d[c].left=q,d[c].index=q.index+1);for(c in d){p=
d[c].right;m=d[c].left;k=d[c].index;n=k-1;q=void 0!==m?m:p;0>n&&(n=0);e=q.geometry;g=h=e.N();f=!1;switch(e.R()){case "MultiLineString":2<h[q.depth[0]].length&&(h[q.depth[0]].splice(k,1),f=!0);break;case "LineString":2<h.length&&(h.splice(k,1),f=!0);break;case "MultiPolygon":g=g[q.depth[1]];case "Polygon":g=g[q.depth[0]],4<g.length&&(k==g.length-1&&(k=0),g.splice(k,1),f=!0,0===k&&(g.pop(),g.push(g[0]),n=g.length-1))}f&&(g=e,this.s=!0,g.fa(h),this.s=!1,h=[],void 0!==m&&(this.f.remove(m),h.push(m.oa[0])),
void 0!==p&&(this.f.remove(p),h.push(p.oa[1])),void 0!==m&&void 0!==p&&(m={depth:q.depth,feature:q.feature,geometry:q.geometry,index:n,oa:h},this.f.insert(Sc(m.oa),m)),Px(this,e,k,q.depth,-1),this.i&&(S(this.H).Ia(this.i),this.i=null))}d=f;F(this,new Cx("modifyend",this.u,b));this.v=!1}c=d}b=c}a.type==un&&(this.J=!1);return Do.call(this,a)&&!b}
function Jx(a,b,c){function d(a,b){return Pn(e,Mn(e,a.oa))-Pn(e,Mn(e,b.oa))}var e=c.va(b),f=c.va([b[0]-a.D,b[1]+a.D]),g=c.va([b[0]+a.D,b[1]-a.D]),f=Sc([f,g]),f=ol(a.f,f);if(0<f.length){f.sort(d);var g=f[0].oa,h=Mn(e,g),k=no(c,h);if(Math.sqrt(Pn(b,k))<=a.D){b=no(c,g[0]);c=no(c,g[1]);b=Pn(k,b);c=Pn(k,c);a.Ca=Math.sqrt(Math.min(b,c))<=a.D;a.Ca&&(h=b>c?g[1]:g[0]);Nx(a,h);c={};c[Sb(g)]=!0;b=1;for(k=f.length;b<k;++b)if(h=f[b].oa,Nn(g[0],h[0])&&Nn(g[1],h[1])||Nn(g[0],h[1])&&Nn(g[1],h[0]))c[Sb(h)]=!0;else break;
a.Oa=c;return}}a.i&&(S(a.H).Ia(a.i),a.i=null)}
l.en=function(a,b){for(var c=a.oa,d=a.feature,e=a.geometry,f=a.depth,g=a.index,h;b.length<e.F;)b.push(0);switch(e.R()){case "MultiLineString":h=e.N();h[f[0]].splice(g+1,0,b);break;case "Polygon":h=e.N();h[f[0]].splice(g+1,0,b);break;case "MultiPolygon":h=e.N();h[f[1]][f[0]].splice(g+1,0,b);break;case "LineString":h=e.N();h.splice(g+1,0,b);break;default:return}this.s=!0;e.fa(h);this.s=!1;h=this.f;h.remove(a);Px(this,e,g,f,1);a={oa:[c[0],b],feature:d,geometry:e,depth:f,index:g};h.insert(Sc(a.oa),a);
this.j.push([a,1]);b={oa:[b,c[1]],feature:d,geometry:e,depth:f,index:g+1};h.insert(Sc(b.oa),b);this.j.push([b,0]);this.J=!0};function Px(a,b,c,d,e){ql(a.f,b.I(),function(a){a.geometry===b&&(void 0===d||void 0===a.depth||Lc(a.depth,d))&&a.index>c&&(a.index+=e)})}function Ix(){var a=xi();return function(){return a.Point}};function Qx(a){Co.call(this,{ab:Rx,sb:Sx,handleEvent:Tx,bb:Ux});this.f=null;this.H=[0,0];this.u=!1;this.v=new ll;this.s=void 0!==a.Ub?a.Ub:10;this.J=!1;this.j=null;this.D=new fl({source:new rl({$b:!1,wrapX:!!a.wrapX}),style:a.style?a.style:Vx(),Yb:!0,Zb:!0});this.i=a.features;this.i.forEach(this.M,this);E(this.i,Cc,this.ja,this);E(this.i,Ec,this.ta,this)}A(Qx,Co);u("ngeo.interaction.ModifyCircle",Qx);
Qx.prototype.M=function(a){if("Polygon"===a.G().R()&&a.get("l")){var b=a.G();Wx(this,a,b);(a=this.c)&&Xx(this,this.H,a)}};function Yx(a,b){a=a.v;var c=[];a.forEach(function(a){b===a.feature&&c.push(a)});for(var d=c.length-1;0<=d;--d)a.remove(c[d])}Qx.prototype.setMap=function(a){this.D.setMap(a);Co.prototype.setMap.call(this,a)};Qx.prototype.ja=function(a){this.M(a.element)};Qx.prototype.ta=function(a){Yx(this,a.element);this.f&&0===zc(this.i)&&(S(this.D).Ia(this.f),this.f=null)};
function Wx(a,b,c){var d=c.N(),e,f,g,h,k,m,n;h=0;for(k=d.length;h<k;++h)for(e=d[h],f=0,g=e.length-1;f<g;++f)m=e.slice(f,f+2),n={feature:b,geometry:c,depth:[h],index:f,oa:m},a.v.insert(Sc(m),n)}function Zx(a,b){var c=a.f;c?c.G().fa(b):(c=new yi(new oj(b)),a.f=c,S(a.D).ra(c))}function $x(a,b){return a.index-b.index}
function Rx(a){Xx(this,a.pixel,a.map);this.j=[];this.u=!1;if(a=this.f){a=a.G().N();var b=Sc([a]),b=ol(this.v,b),c={};b.sort($x);for(var d=0,e=b.length;d<e;++d){var f=b[d],g=f.oa,h=r(f.feature),k=f.depth;k&&(h+="-"+k.join("-"));c[h]||(c[h]=Array(2));Nn(g[0],a)&&!c[h][0]?(this.j.push([f,0]),c[h][0]=f):Nn(g[1],a)&&!c[h][1]&&(this.j.push([f,1]),c[h][1]=f)}}return!!this.f}
function Sx(a){this.u||(this.u=!0,F(this,new Cx("modifystart",this.i,a)));a=a.coordinate;var b=this.j[0][0].geometry,c=nd(b.I()),d=new dj([c,a]),c=new wo(c,gj(d)),c=Bj(c).N();b.fa(c);b=mp(d);this.i.c[0].set("z",b);Zx(this,a)}function Ux(a){this.v.clear();Wx(this,this.j[0][0].feature,this.j[0][0].geometry);this.u&&(F(this,new Cx("modifyend",this.i,a)),this.u=!1);return!1}
function Tx(a){if(!(a instanceof pn))return!0;Tn(T(a.map))[1]||a.type!=zn||this.B||(this.H=a.pixel,Xx(this,a.pixel,a.map));return Do.call(this,a)&&!0}
function Xx(a,b,c){function d(a,b){return Pn(e,Mn(e,a.oa))-Pn(e,Mn(e,b.oa))}var e=c.va(b),f=c.va([b[0]-a.s,b[1]+a.s]),g=c.va([b[0]+a.s,b[1]-a.s]),f=Sc([f,g]),f=ol(a.v,f);if(0<f.length){f.sort(d);var g=f[0].oa,h=Mn(e,g),h=no(c,h);if(Math.sqrt(Pn(b,h))<=a.s&&(b=no(c,g[0]),c=no(c,g[1]),b=Pn(h,b),c=Pn(h,c),a.J=Math.sqrt(Math.min(b,c))<=a.s,a.J)){h=b>c?g[1]:g[0];Zx(a,h);r(g);c=1;for(b=f.length;c<b;++c)if(a=f[c].oa,Nn(g[0],a[0])&&Nn(g[1],a[1])||Nn(g[0],a[1])&&Nn(g[1],a[0]))r(a);else break;return}}a.f&&
(S(a.D).Ia(a.f),a.f=null)}function Vx(){var a=xi();return function(){return a.Point}};function ay(a){Co.call(this,{ab:this.Jn,hg:this.Nn,sb:this.Kn,bb:this.On});this.s=!1;var b=a.style?a.style:Ix();this.f=new fl({source:new rl({wrapX:!!a.wrapX}),style:b,Yb:!0,Zb:!0});this.i=a.features;this.u=this.v=null;this.j={};E(this.i,Cc,this.Ln,this);E(this.i,Ec,this.Mn,this);this.i.forEach(this.Ri,this)}A(ay,Co);u("ngeo.interaction.ModifyRectangle",ay);l=ay.prototype;
l.Ri=function(a){var b=a.G();if(b instanceof wj){var c=r(a),d=this.j[c];if(!d){for(var e=S(this.f),b=b.N()[0];4<b.length;)b[0][0]<b[1][0]&&b[0][1]<=b[1][1]?b.pop():b.shift();var f=[],g,h;b.forEach(function(b){g=new oj(b);h=new yi({corner:!0,geometry:g,siblingX:null,siblingY:null,boxFeature:a});f.push(h)},this);d={el:f};this.j[c]=d;var k,m;f.forEach(function(a,b){(k=f[b-1])||(k=f[f.length-1]);(m=f[b+1])||(m=f[0]);0===b%2?(a.set("siblingX",m),a.set("siblingY",k)):(a.set("siblingX",k),a.set("siblingY",
m))},this);il(e,f)}}};l.setMap=function(a){this.f.setMap(a);this.f.Ja(!1);Co.prototype.setMap.call(this,a)};l.Ln=function(a){this.Ri(a.element)};l.Mn=function(a){a=r(a.element);for(var b=this.j[a].el,c=0;c<b.length;c++)S(this.f).Ia(b[c]);this.v=null;b.length=0;delete this.j[a]};l.Nn=function(a){var b;b=a.map;if(b.o){a=b.va(a.pixel);var c=b.J;b=void 0!==c.zb(a,b.o,Dh,c,Dh,null)}else b=!1;He(this.f)!=b&&this.f.b();this.f.Ja(b)};
l.Jn=function(a){var b=Zv(a.map,a.pixel,function(a){return a},void 0);return b&&b.G()instanceof oj&&b.get("siblingX")&&b.get("siblingY")?(this.u=a.coordinate,this.v=b,this.f.Ja(!0),!0):!1};
l.Kn=function(a){this.s||(this.s=!0,F(this,new Cx("modifystart",this.i,a)));var b=this.v,c=b.G();if(c instanceof oj){this.f.Ja(!0);c.fa(a.coordinate);var c=a.pixel,d=b.get("siblingX").G(),e=d.N(),f=no(this.c,e),g=b.get("siblingY"),e=g.G(),h=e.N(),h=no(this.c,h),k=g.get("siblingY");r(b)==r(k)&&(k=g.get("siblingX"));g=k.G().N();k=no(this.c,g);f=this.c.va(by(k,c,f));d.fa(f);c=this.c.va(by(k,c,h));e.fa(c);b.get("boxFeature").G().fa([[a.coordinate,f,g,c,a.coordinate]]);this.u[0]=a.coordinate[0];this.u[1]=
a.coordinate[1]}};function by(a,b,c){b=[b[0]-a[0],b[1]-a[1]];c=[c[0]-a[0],c[1]-a[1]];b=b[0]*c[0]+b[1]*c[1];var d=Math.pow(c[0],2)+Math.pow(c[1],2);c=[c[0]*b/d,c[1]*b/d];return[c[0]+a[0],c[1]+a[1]]}l.On=function(a){this.s&&(F(this,new Cx("modifyend",this.i,a)),this.s=!1);return!1};function cy(a){this.i=a.features;this.listenerKeys_=[];this.f=[];this.j=new xc;this.f.push(new Dx({features:this.j,Ub:a.Ub,style:a.style,wrapX:a.wrapX}));this.o=new xc;this.f.push(new Qx({features:this.o,Ub:a.Ub,style:a.style,wrapX:a.wrapX}));this.s=new xc;this.f.push(new ay({features:this.s,Ub:a.Ub,style:a.style,wrapX:a.wrapX}));yo.call(this,{handleEvent:bb})}A(cy,yo);u("ngeo.interaction.Modify",cy);cy.prototype.setActive=function(a){yo.prototype.setActive.call(this,a);dy(this)};
cy.prototype.setActive=cy.prototype.setActive;l=cy.prototype;l.setMap=function(a){var b=this.f,c=this.c;c&&b.forEach(function(a){c.f.remove(a)},this);yo.prototype.setMap.call(this,a);a&&b.forEach(function(b){a.f.push(b)},this);dy(this)};function dy(a){var b=a.c,c=a.getActive(),d=a.listenerKeys_;a.f.forEach(function(a){a.setActive(c&&!!b)},a);c&&b?(a.i.forEach(a.Si,a),d.push(E(a.i,Cc,a.Pn,a)),d.push(E(a.i,Ec,a.Qn,a))):(d.forEach(function(a){B(a)},a),a.i.forEach(a.Ti,a))}l.Pn=function(a){this.Si(a.element)};
l.Qn=function(a){this.Ti(a.element)};l.Si=function(a){ey(this,a).push(a)};l.Ti=function(a){ey(this,a).remove(a)};function ey(a,b){var c=b.get("l");b=b.get("r");return!0===c||"true"===c?a.o:!0===b||"true"===b?a.s:a.j};function fy(a,b){Pb.call(this,a);this.feature=b}A(fy,Pb);function gy(a){this.listenerKeys_=[];this.v=!1;this.u=null;this.f=a.features;this.D=this.i=this.j=null;var b=a.style?a.style:Ix();this.H=new fl({source:new rl({$b:!1,wrapX:!!a.wrapX}),style:b,Yb:!0,Zb:!0});this.s={};Co.call(this,{ab:this.Rn,sb:this.Sn,bb:this.Wn})}A(gy,Co);u("ngeo.interaction.Rotate",gy);
gy.prototype.setActive=function(a){this.u&&(cl(this.u),this.u=null);Co.prototype.setActive.call(this,a);a?(this.u=As(document,"keyup",this.Vn,!1,this),this.f.forEach(this.Ui,this),this.listenerKeys_.push(E(this.f,Cc,this.Tn,this)),this.listenerKeys_.push(E(this.f,Ec,this.Un,this))):(this.listenerKeys_.forEach(function(a){B(a)},this),this.f.forEach(this.Vi,this))};gy.prototype.setActive=gy.prototype.setActive;l=gy.prototype;
l.Ui=function(a){var b=a.G();a.set("angle",0);a=r(a);b=new oj(hy(b));b=new yi(b);this.s[a]=b;S(this.H).ra(b)};l.Vi=function(a){this.j=null;a&&(a=r(a),this.s[a]&&(S(this.H).Ia(this.s[a]),delete this.s[a]))};l.setMap=function(a){this.H.setMap(a);Co.prototype.setMap.call(this,a)};l.Tn=function(a){this.Ui(a.element)};l.Un=function(a){this.Vi(a.element)};
l.Rn=function(a){var b=Zv(a.map,a.pixel,function(a){return a},void 0);if(b){var c=!1;this.f.forEach(function(a){r(a)==r(b)&&(c=!0)});c||(b=null)}return b?(this.i=a.coordinate,this.j=b,a=this.j.G(),void 0!==a&&(this.D=hy(a)),!0):!1};function hy(a){a instanceof dj?a=hj(a):a instanceof wj?a=yj(a):(a=a.I(),a=nd(a));return a}
l.Sn=function(a){this.v||(this.v=!0,F(this,new Cx("modifystart",this.f,a)));var b=this.j.G(),c=this.D[0],d=this.D[1],e=this.i[0]-c,f=this.i[1]-d,g=a.coordinate[0]-c,h=a.coordinate[1]-d;this.i[0]=a.coordinate[0];this.i[1]=a.coordinate[1];b.rotate(-(Math.atan2(f,e)-Math.atan2(h,g)),[c,d])};l.Wn=function(){this.v&&(F(this,new fy("rotateend",this.j)),this.v=!1,this.setActive(!1));return!1};l.Vn=function(a){a.c===iy&&this.setActive(!1)};var iy=27;function jy(a,b,c){Pb.call(this,a);this.features=b;this.coordinate=c}A(jy,Pb);function ky(a){Co.call(this,{ab:ly,sb:my,hg:ny,bb:oy});this.D=void 0;this.f=null;this.i=void 0!==a.features?a.features:null;if(a.layers)if("function"===typeof a.layers)a=a.layers;else{var b=a.layers;a=function(a){return Gc(b,a)}}else a=Dh;this.ja=a;this.j=null}A(ky,Co);
function ly(a){this.j=py(this,a.pixel,a.map);return!this.f&&this.j?(this.f=a.coordinate,ny.call(this,a),F(this,new jy("translatestart",this.i,a.coordinate)),!0):!1}function oy(a){return this.f?(this.f=null,ny.call(this,a),F(this,new jy("translateend",this.i,a.coordinate)),!0):!1}
function my(a){if(this.f){a=a.coordinate;var b=a[0]-this.f[0],c=a[1]-this.f[1];if(this.i)this.i.forEach(function(a){var d=a.G();d.translate(b,c);zi(a,d)});else if(this.j){var d=this.j.G();d.translate(b,c);zi(this.j,d)}this.f=a;F(this,new jy("translating",this.i,a))}}function ny(a){var b=lo(a.map);py(this,a.pixel,a.map)?(this.D=b.style.cursor,b.style.cursor=this.f?"-webkit-grabbing":"-webkit-grab",b.style.cursor=this.f?"grabbing":"grab"):(b.style.cursor=void 0!==this.D?this.D:"",this.D=void 0)}
function py(a,b,c){var d=null;b=Zv(c,b,function(a){return a},a,a.ja);a.i&&Gc(a.i.c,b)&&(d=b);return d};function qy(a){this.listenerKeys_=[];this.u={};this.v=null;this.M=void 0!==a.features?a.features:null;this.H=new rl({$b:!1});this.J=new fl({source:this.H,style:a.style,Yb:!0,Zb:!0});this.s={};ky.call(this,a)}A(qy,ky);u("ngeo.interaction.Translate",qy);qy.prototype.setActive=function(a){this.v&&(cl(this.v),this.v=null);ky.prototype.setActive.call(this,a);a&&(this.v=As(document,"keyup",this.$n,!1,this));ry(this)};qy.prototype.setActive=qy.prototype.setActive;l=qy.prototype;
l.setMap=function(a){this.c&&this.J.setMap(null);ky.prototype.setMap.call(this,a);a&&this.J.setMap(a);ry(this)};function ry(a){var b=a.c,c=a.getActive(),d=a.M,e=a.listenerKeys_;b&&c&&d?(d.forEach(a.Wi,a),e.push(E(d,Cc,a.Xn,a)),e.push(E(d,Ec,a.Yn,a))):(b&&(lo(b).style.cursor="default"),e.forEach(function(a){B(a)},a),d.forEach(a.Xi,a))}l.Xn=function(a){this.Wi(a.element)};l.Yn=function(a){this.Xi(a.element)};
l.Wi=function(a){var b=r(a),c=a.G();this.u[b]=E(c,"change",this.Zn.bind(this,a),this);a=sy(c);a=new yi(a);this.s[b]=a;this.H.ra(a)};l.Xi=function(a){a=r(a);this.u[a]&&(B(this.u[a]),delete this.u[a],this.H.Ia(this.s[a]),delete this.s[a])};l.Zn=function(a,b){b=sy(b.target);a=r(a);zi(this.s[a],b)};function sy(a){var b,c;a instanceof wj?c=new oj(yj(a)):a instanceof dj?b=fj(a):(a=a.I(),b=nd(a));!c&&b&&(c=new oj(b));return c}l.$n=function(a){a.c===iy&&this.setActive(!1)};z.directive("gmfDrawfeature",function(){return{controller:"GmfDrawfeatureController",scope:{active:"=gmfDrawfeatureActive",map:"<gmfDrawfeatureMap"},bindToController:!0,controllerAs:"efCtrl",templateUrl:"gmf/drawfeature.html"}});
function ty(a,b,c,d,e,f,g){void 0===this.active&&(this.active=!1);this.drawActive=!1;this.drawToolActivate=new Gw(this,"drawActive");this.mapSelectActive=!0;this.s=null;this.mapSelectToolActivate=new Gw(this,"mapSelectActive");this.ba=a;this.v=b;this.B=d;this.o=e;this.features=f;this.u=g;this.selectedFeature=null;this.selectedFeatures=new xc;this.g=new xc;this.c=new cy({features:this.selectedFeatures,style:e.Hd(!1)});this.g.push(this.c);this.b=null;this.modifyToolActivate=new Gw(this.c,"active");
this.i=new qy({features:this.selectedFeatures,style:new U({text:new fq({text:"\uf047",font:"normal 18px FontAwesome",fill:new mi({color:"#7a7a7a"})})})});this.g.push(this.i);this.f=new gy({features:this.selectedFeatures,style:new U({text:new fq({text:"\uf01e",font:"normal 18px FontAwesome",fill:new mi({color:"#7a7a7a"})})})});this.g.push(this.f);uy(this);this.rotateToolActivate=new Gw(this.f,"active");this.translateToolActivate=new Gw(this.i,"active");this.listenerKeys_=[];this.j=!1;a.$watch(function(){return this.active}.bind(this),
this.O.bind(this));a.$watch(function(){return this.drawActive}.bind(this),function(a){a&&(this.selectedFeature=null)}.bind(this));a.$watch(function(){return this.selectedFeature}.bind(this),function(a,b){this.selectedFeatures.clear();b&&(this.o.setStyle(b),vy(this));a?(this.o.setStyle(a,!0),this.selectedFeatures.push(a),wy(this),this.j&&(this.o.kj(a,this.map),this.j=!1)):this.b&&(this.map.i.remove(this.b),this.b=null)}.bind(this));a.$watch(function(){return this.mapSelectActive}.bind(this),this.Wl.bind(this));
this.nameProperty="n";this.na=c}ty.$inject="$scope $timeout gettextCatalog ngeoDecorateInteraction ngeoFeatureHelper ngeoFeatures ngeoToolActivateMgr".split(" ");function uy(a){a.g.forEach(function(a){a.setActive(!1);this.B(a)},a)}function wy(a){a.g.forEach(function(a){this.map.f.push(a)},a)}function vy(a){a.g.forEach(function(a){this.map.f.remove(a)},a)}
ty.prototype.O=function(a){var b=this.listenerKeys_,c=["draw-",r(this)].join("-"),d=["other-",r(this)].join("-"),e=this.u;a?(b.push(E(this.features,Cc,this.Ul,this)),b.push(E(this.features,Ec,this.Vl,this)),b.push(E(this.i,"translateend",this.Zl,this)),b.push(E(this.f,"rotateend",this.Yl,this)),e.Aa(c,this.drawToolActivate,!1),e.Aa(c,this.mapSelectToolActivate,!0),e.Aa(d,this.drawToolActivate,!1),e.Aa(d,this.modifyToolActivate,!0),e.Aa(d,this.translateToolActivate,!1),e.Aa(d,this.rotateToolActivate,
!1),this.mapSelectActive=!0,this.c.setActive(!0)):(b.forEach(function(a){B(a)},this),e.eb(c,this.drawToolActivate),e.eb(c,this.mapSelectToolActivate),e.eb(d,this.drawToolActivate),e.eb(d,this.modifyToolActivate),e.eb(d,this.translateToolActivate),e.eb(d,this.rotateToolActivate),this.drawActive=!1,this.c.setActive(!1),this.mapSelectActive=!1,this.selectedFeature=null,this.b&&(this.map.i.remove(this.b),this.b=null))};ty.prototype.qp=function(a){this.j=!0;this.selectedFeature=a;this.drawActive=!1};
ty.prototype.selectFeatureFromList=ty.prototype.qp;ty.prototype.Bl=function(){return this.features.c};ty.prototype.getFeaturesArray=ty.prototype.Bl;ty.prototype.$k=function(){var a=this.na.getString("Do you really want to delete all the features?");confirm(a)&&this.features.clear()};ty.prototype.clearFeatures=ty.prototype.$k;ty.prototype.Ia=function(a){var b=this.na.getString("Do you really want to delete the selected feature?");confirm(b)&&this.features.remove(a)};ty.prototype.removeFeature=ty.prototype.Ia;
l=ty.prototype;l.Ul=function(a){this.v(function(){this.selectedFeature=a.element;this.drawActive=!1;this.ba.$apply()}.bind(this))};l.Vl=function(){this.selectedFeature=null};
l.Wl=function(a){var b=this.map.c;a?(E(this.map,sn,this.oi,this),As(b,"contextmenu",this.eg,!1,this),As(b,"touchstart",this.Ci,!1,this),As(b,"touchmove",this.ze,!1,this),As(b,"touchend",this.ze,!1,this)):(ec(this.map,sn,this.oi,this),Gs(b,"contextmenu",this.eg,!1,this),Gs(b,"touchstart",this.Ci,!1,this),Gs(b,"touchmove",this.ze,!1,this),Gs(b,"touchend",this.ze,!1,this))};
l.oi=function(a){a=(a=Zv(this.map,a.pixel,function(a){var c=!1;Gc(this.features.c,a)&&(c=a);return c}.bind(this),null))?a:null;a!==this.selectedFeature&&(this.selectedFeature=a,this.ba.$apply())};l.Ci=function(a){this.s=setTimeout(qa(this.eg.bind(this),a),500)};l.ze=function(){clearTimeout(this.s)};
l.eg=function(a){var b=on(this.map,a),c=this.map.va(b);if(b=(b=Zv(this.map,b,function(a){var b=!1;Gc(this.features.c,a)&&(b=a);return b}.bind(this),null))?b:null){var d=[],e=this.o.R(b);if("Circle"==e||"LineString"==e||"Polygon"==e||"Rectangle"==e)d=d.concat([{cls:"fa fa-arrows",label:this.na.getString("Move"),name:"move"},{cls:"fa fa-rotate-right",label:this.na.getString("Rotate"),name:"rotate"}]);d=d.concat([{cls:"fa fa-trash-o",label:this.na.getString("Delete"),name:"delete"}]);this.b=new px({actions:d});
E(this.b,"actionclick",this.Xl,this);this.map.i.push(this.b);this.b.open(c);a.preventDefault();a.stopPropagation()}b!==this.selectedFeature&&(this.c.setActive(!0),this.selectedFeature=b,this.ba.$apply())};l.Xl=function(a){a=a.action;switch(a){case "delete":this.Ia(this.selectedFeature);this.ba.$apply();break;case "move":this.i.setActive(!0);this.ba.$apply();break;case "rotate":this.f.setActive(!0);this.ba.$apply();break;default:console.log("FIXME - support: "+a)}};
l.Zl=function(){this.i.setActive(!1);this.ba.$apply()};l.Yl=function(){this.f.setActive(!1);this.ba.$apply()};z.controller("GmfDrawfeatureController",ty);function xy(a,b){this.g=a;this.b=b}xy.$inject=["$http","gmfLayersUrl"];xy.prototype.pc=function(a,b){a=ob(tb(this.b,a.join(",")),"bbox",b.join(","));return this.g.get(a).then(this.c.bind(this))};xy.prototype.getFeatures=xy.prototype.pc;xy.prototype.c=function(a){return(new hw).readFeatures(a.data)};xy.prototype.Hi=function(a,b){a=tb(this.b,a.toString());b=(new hw).writeFeatures(b);return this.g.post(a,b,{headers:{"Content-Type":"application/json"},withCredentials:!0})};
xy.prototype.insertFeatures=xy.prototype.Hi;xy.prototype.Tj=function(a,b){a=tb(this.b,a.toString()+"/"+b.Pa());b=(new hw).writeFeature(b);return this.g.put(a,b,{headers:{"Content-Type":"application/json"},withCredentials:!0})};xy.prototype.updateFeature=xy.prototype.Tj;xy.prototype.Kh=function(a,b){a=tb(this.b,a.toString()+"/"+b.Pa());return this.g.delete(a,{headers:{"Content-Type":"application/json"},withCredentials:!0})};xy.prototype.deleteFeature=xy.prototype.Kh;z.service("gmfEditFeature",xy);function yy(){}A(yy,Kd);u("ngeo.format.XSDAttribute",yy);yy.prototype.read=function(a){return Kd.prototype.read.call(this,a)};yy.prototype.g=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType)return this.b(a);return null};
yy.prototype.b=function(a){var b=a.getElementsByTagName("element");b.length||(b=a.getElementsByTagName("xsd:element"));a=[];for(var c,d=0,e=b.length;d<e;d++){a:{var f=b[d];c=f.getAttribute("name");var g=f.getAttribute("nillable");c={name:c,required:!(!0===g||"true"===g)};if(g=f.getAttribute("type"))if(/gml:((Multi)?(Point|Line|Polygon|Curve|Surface|Geometry)).*/.exec(g))c.type=zy,/^gml:Point/.exec(g)?c.geomType="Point":/^gml:LineString/.exec(g)?c.geomType="LineString":/^gml:Polygon/.exec(g)&&(c.geomType=
"Polygon");else if("xsd:string"===g)c.type=Ay;else if("xsd:date"===g)c.type=By;else if("xsd:dateTime"===g)c.type=Cy;else{c=null;break a}else if(g=f.getElementsByTagName("enumeration"),g.length||(g=f.getElementsByTagName("xsd:enumeration")),g.length){c.type=Dy;for(var f=[],h=0,k=g.length;h<k;h++)f.push(g[h].getAttribute("value"));c.choices=f}else{c=null;break a}}c&&a.push(c)}return a};function Ey(a){for(var b=null,c=0,d=a.length;c<d;c++)if(a[c].type===zy){b=a[c];break}return b}
yy.getGeometryAttribute=Ey;var By="date",Cy="datetime",zy="geometry",Dy="select",Ay="text";function Fy(a,b){this.c=a;this.g=b;this.b={}}Fy.$inject=["$http","gmfLayersUrl"];Fy.prototype.Vh=function(a){if(!this.b[a]){var b=tb(this.g,a.toString())+"/md.xsd";this.b[a]=this.c.get(b).then(this.Ai.bind(this))}return this.b[a]};Fy.prototype.getAttributes=Fy.prototype.Vh;Fy.prototype.Ai=function(a){return(new yy).read(a.data)};Fy.prototype.handleGetAttributes_=Fy.prototype.Ai;z.service("gmfXSDAttributes",Fy);w.directive("ngeoAttributes",function(){return{controller:"ngeoAttributesController",scope:!0,bindToController:{attributes:"=ngeoAttributesAttributes",disabled:"<ngeoAttributesDisabled",feature:"=ngeoAttributesFeature"},controllerAs:"attrCtrl",templateUrl:"ngeo/attributes.html"}});
function Gy(a,b){this.disabled=!0===this.disabled;this.properties=wc(this.feature);this.ba=a;this.g=b;this.dateOptions={changeMonth:!0,changeYear:!0};b=r(this);this.g.Jb(b,E(this.feature,"propertychange",this.f,this),!0);this.b=!1;a.$on("$destroy",this.c.bind(this))}Gy.$inject=["$scope","ngeoEventHelper"];Gy.prototype.wm=function(a){this.b=!0;this.feature.set(a,this.properties[a]);this.b=!1};Gy.prototype.handleInputChange=Gy.prototype.wm;Gy.prototype.c=function(){var a=r(this);this.g.Rc(a)};
Gy.prototype.f=function(a){this.b||(this.properties[a.key]=a.target.get(a.key),this.ba.$apply())};w.controller("ngeoAttributesController",Gy);w.directive("ngeoCreatefeature",function(){return{controller:"ngeoCreatefeatureController",bindToController:!0,scope:{active:"=ngeoCreatefeatureActive",features:"=ngeoCreatefeatureFeatures",geomType:"=ngeoCreatefeatureGeomType",map:"=ngeoCreatefeatureMap"},controllerAs:"cfCtrl"}});
function Hy(a,b,c,d,e,f){this.active=!0===this.active;this.c=e;this.g=f;var g;"Point"===this.geomType?g=new Go({type:"Point"}):"LineString"===this.geomType?(g=a("Click to start drawing length"),a=a("Click to continue drawing<br/>Double-click or click last point to finish"),g=new yx(c("ngeoUnitPrefix"),{style:new U,startMsg:b("<div translate>"+g+"</div>")(d)[0],continueMsg:b("<div translate>"+a+"</div>")(d)[0]})):"Polygon"===this.geomType&&(g=a("Click to start drawing area"),a=a("Click to continue drawing<br/>Double-click or click starting point to finish"),
g=new vx(c("ngeoUnitPrefix"),{style:new U,startMsg:b("<div translate>"+g+"</div>")(d)[0],continueMsg:b("<div translate>"+a+"</div>")(d)[0]}));g.setActive(this.active);this.map.f.push(g);this.b=g;d.$watch(function(){return this.active}.bind(this),function(a){this.b.setActive(a)}.bind(this));b=r(this);g instanceof Go?this.g.Jb(b,E(g,"drawend",this.gg,this),!0):(g instanceof yx||g instanceof vx)&&this.g.Jb(b,E(g,"measureend",this.gg,this),!0);d.$on("$destroy",this.f.bind(this))}Hy.$inject="gettext $compile $filter $scope $timeout ngeoEventHelper".split(" ");
Hy.prototype.gg=function(a){a=new yi(a.feature.G());this.features instanceof xc?this.features.push(a):this.features.ra(a)};Hy.prototype.handleDrawEnd_=Hy.prototype.gg;Hy.prototype.f=function(){this.c(function(){var a=r(this);this.g.Rc(a);this.b.setActive(!1);this.map.f.remove(this.b)}.bind(this),0)};w.controller("ngeoCreatefeatureController",Hy);z.directive("gmfEditfeature",function(){return{controller:"GmfEditfeatureController",scope:{dirty:"=gmfEditfeatureDirty",layer:"=gmfEditfeatureLayer",editableNode:"=gmfEditfeatureEditablenode",editableWMSLayer:"<gmfEditfeatureEditablewmslayer",map:"<gmfEditfeatureMap",state:"=gmfEditfeatureState",tolerance:"<?gmfEditfeatureTolerance",vectorLayer:"<gmfEditfeatureVector"},bindToController:!0,controllerAs:"efCtrl",templateUrl:"gmf/editfeature.html"}});
function Iy(a,b,c,d,e,f,g,h,k,m,n,p){this.dirty=!0===this.dirty;b.$watch(function(){return this.state}.bind(this),function(a){var b=Jy;a===b.Ck?this.Df().then(function(){this.state=b.Bk}.bind(this)):a===b.mk&&this.Df().then(function(){this.state=b.lk}.bind(this))}.bind(this));this.tolerance=void 0!==this.tolerance?this.tolerance:10;this.u=a;this.ba=b;this.j=c;this.T=d;this.na=e;this.i=f;this.O=h;this.B=k;this.v=m;this.K=p;this.b=null;this.unsavedModificationsModalShown=!1;b.$watch(function(){return this.unsavedModificationsModalShown}.bind(this),
function(a,b){b&&!a&&(this.state=Ky)}.bind(this));this.pending=!1;this.active=!0;this.createActive=!1;this.createToolActivate=new Gw(this,"createActive");this.mapSelectActive=!0;b.$watch(function(){return this.mapSelectActive}.bind(this),this.ui.bind(this));this.mapSelectToolActivate=new Gw(this,"mapSelectActive");this.feature=null;b.$watch(function(){return this.feature}.bind(this),this.pi.bind(this));this.featureId=null;this.features=S(this.vectorLayer).o;this.g=new xc;this.s=new Dx({features:this.features,
style:m.Hd(!1)});this.g.push(this.s);this.modifyToolActivate=new Gw(this.s,"active");this.o=new px({actions:[{cls:"fa fa-arrows",label:e.getString("Move"),name:Ly},{cls:"fa fa-rotate-right",label:e.getString("Rotate"),name:My}]});this.map.i.push(this.o);this.f=new qy({features:this.features,style:new U({text:new fq({text:"\uf047",font:"normal 18px FontAwesome",fill:new mi({color:"#7a7a7a"})})})});this.g.push(this.f);this.c=new gy({features:this.features,style:new U({text:new fq({text:"\uf01e",font:"normal 18px FontAwesome",
fill:new mi({color:"#7a7a7a"})})})});this.g.push(this.c);Ny(this);this.rotateToolActivate=new Gw(this.c,"active");this.translateToolActivate=new Gw(this.f,"active");this.listenerKeys_=[];this.geomType=this.attributes=null;g.Vh(this.editableNode.id).then(this.rp.bind(this));a=r(this);this.B.Jb(a,E(this.features,Cc,this.am,this));b.$on("$destroy",this.$l.bind(this));Oy(this,!0)}Iy.$inject="$element $scope $timeout $q gettextCatalog gmfEditFeature gmfXSDAttributes ngeoDecorateInteraction ngeoEventHelper ngeoFeatureHelper ngeoLayerHelper ngeoToolActivateMgr".split(" ");
var Ly="move",My="rotate";Iy.prototype.save=function(){var a=this.feature,b=this.featureId;this.dirty=!1;this.pending=!0;b?this.i.Tj(this.editableNode.id,a).then(this.yi.bind(this)):this.i.Hi(this.editableNode.id,[a]).then(this.yi.bind(this))};Iy.prototype.save=Iy.prototype.save;Iy.prototype.cancel=function(){this.dirty=!1;this.feature=null;this.features.clear();this.o.close();this.unsavedModificationsModalShown=!1};Iy.prototype.cancel=Iy.prototype.cancel;Iy.prototype.Df=function(){return Py(this).then(function(){this.cancel()}.bind(this))};
Iy.prototype.confirmCancel=Iy.prototype.Df;function Py(a,b){a.b=a.T.defer();a.feature&&a.dirty?(a.unsavedModificationsModalShown=!0,b&&a.ba.$apply()):a.b.resolve();return a.b.promise}Iy.prototype.dl=function(){this.cancel();this.b.resolve()};Iy.prototype.continueWithoutSaving=Iy.prototype.dl;
Iy.prototype.delete=function(){var a=this.na.getString("Do you really want to delete the selected feature?");confirm(a)&&(this.dirty=!1,this.pending=!0,this.i.Kh(this.editableNode.id,this.feature).then(this.nm.bind(this)),this.cancel())};Iy.prototype["delete"]=Iy.prototype.delete;Iy.prototype.submit=function(){this.j(function(){this.u.find('input[type="submit"]').click()}.bind(this),0)};Iy.prototype.submit=Iy.prototype.submit;l=Iy.prototype;
l.yi=function(a){this.pending=!1;a=(new hw).readFeatures(a.data);a.length&&(Ci(this.feature,a[0].Pa()),lh(this.editableWMSLayer));this.b&&this.b.resolve()};l.nm=function(){this.pending=!1;lh(this.editableWMSLayer)};l.rp=function(a){this.attributes=a;(a=Ey(this.attributes))&&a.geomType&&(this.geomType=a.geomType)};l.am=function(a){this.j(function(){var b=a.element;this.feature=b;this.createActive=!1;b.Pa()||(this.dirty=!0);this.ba.$apply()}.bind(this),0)};
function Oy(a,b){var c=a.listenerKeys_,d=["create-",r(a)].join("-"),e=["other-",r(a)].join("-"),f=a.K;b?(c.push(E(a.o,"actionclick",a.cm,a)),c.push(E(a.f,"translateend",a.em,a)),c.push(E(a.c,"rotateend",a.dm,a)),f.Aa(d,a.createToolActivate,!1),f.Aa(d,a.mapSelectToolActivate,!0),f.Aa(e,a.createToolActivate,!1),f.Aa(e,a.modifyToolActivate,!0),f.Aa(e,a.translateToolActivate,!1),f.Aa(e,a.rotateToolActivate,!1)):(c.forEach(function(a){B(a)},a),f.eb(d,a.createToolActivate),f.eb(d,a.mapSelectToolActivate),
f.eb(e,a.createToolActivate),f.eb(e,a.modifyToolActivate),f.eb(e,a.translateToolActivate),f.eb(e,a.rotateToolActivate),a.createActive=!1,a.cancel());a.s.setActive(b);a.mapSelectActive=b;a.editableNode.editing=b}l.ui=function(a){var b=this.map.c;a?(E(this.map,sn,this.si,this),As(b,"contextmenu",this.ti,!1,this)):(ec(this.map,sn,this.si,this),Gs(b,"contextmenu",this.ti,!1,this))};
l.si=function(a){var b=a.coordinate;Zv(this.map,a.pixel,function(a){var b=!1;Gc(this.features.c,a)&&(b=a);return b}.bind(this),null)||Py(this,!0).then(function(){var a=T(this.map).ca()*this.tolerance,a=Vc([b[0],b[1],b[0],b[1]],a);this.i.pc([this.editableNode.id],a).then(this.bm.bind(this));this.cancel();this.pending=!0}.bind(this))};
l.ti=function(a){var b=on(this.map,a),c=this.map.va(b);if(b=(b=Zv(this.map,b,function(a){var b=!1;Gc(this.features.c,a)&&(b=a);return b}.bind(this),null))?b:null)b=this.v.R(b),"Polygon"!==b&&"LineString"!==b||this.o.open(c),a.preventDefault(),a.stopPropagation()};l.bm=function(a){this.pending=!1;this.j(function(){if(a.length){var b=a[0];this.feature=b;this.features.push(b)}}.bind(this),0)};function Ny(a){a.g.forEach(function(a){a.setActive(!1);this.O(a)},a)}
function Qy(a){a.g.forEach(function(a){this.map.f.push(a)},a)}function Ry(a){a.g.forEach(function(a){this.map.f.remove(a)},a)}l.pi=function(a,b){b&&(ec(b,"propertychange",this.ri,this),b=b.G(),ec(b,"change",this.zi,this),Ry(this));a?(this.featureId=a.Pa()||null,E(a,"propertychange",this.ri,this),b=a.G(),E(b,"change",this.zi,this),Qy(this),this.featureId&&this.j(function(){this.dirty=!1;this.ba.$apply()}.bind(this),0)):this.featureId=null};l.ri=function(){this.dirty=!0};
l.zi=function(){this.dirty=!0;this.ba.$apply()};l.cm=function(a){switch(a.action){case Ly:this.f.setActive(!0);this.ba.$apply();break;case My:this.c.setActive(!0),this.ba.$apply()}};l.em=function(){this.f.setActive(!1);this.ba.$apply()};l.dm=function(){this.c.setActive(!1);this.ba.$apply()};l.$l=function(){this.features.clear();this.pi(null,this.feature);this.feature=null;var a=r(this);this.B.Rc(a);Oy(this,!1);this.ui(!1);Ry(this)};z.controller("GmfEditfeatureController",Iy);
var Ky="idle",Jy={IDLE:Ky,lk:"execute",mk:"pending",Bk:"execute",Ck:"pending"};z.directive("gmfEditfeatureselector",function(){return{controller:"GmfEditfeatureselectorController",scope:{active:"=gmfEditfeatureselectorActive",map:"<gmfEditfeatureselectorMap",tolerance:"<?gmfEditfeatureselectorTolerance",vectorLayer:"<gmfEditfeatureselectorVector"},bindToController:!0,controllerAs:"efsCtrl",templateUrl:"gmf/editfeatureselector.html"}});
function Sy(a,b,c,d,e){this.$timeout_=e;this.f=b;this.active=!0===this.active;a.$watch(function(){return this.active}.bind(this),this.fm.bind(this));this.g=c;this.dirty=!1;this.c=d.qc(this.map,"data");this.editableNodes=[];this.availableEditableNodes=[];this.b={};this.selectedEditableNode=null;a.$watch(function(){return this.selectedEditableNode}.bind(this),function(a){a?this.selectedEditableWMSLayer=a?this.b[a.id]:null:(this.selectedEditableWMSLayer=null,this.state=Ky);this.dirty=!1;this.state=Ky}.bind(this));
this.selectedEditableWMSLayer=null;this.state=Ky;a.$watch(function(){return this.state}.bind(this),function(a){if("execute"===a||"execute"===a)this.selectedEditableNode=null;"execute"===a&&(this.active=!1)}.bind(this));this.i=E(this.f,"change",this.wp,this);Ty(this,this.c);a.$on("$destroy",this.gm.bind(this))}Sy.$inject=["$scope","gmfThemes","ngeoEventHelper","ngeoLayerHelper","$timeout"];Sy.prototype.Mj=function(){this.state="pending"};Sy.prototype.stopEditing=Sy.prototype.Mj;
function Uy(a,b,c){var d,e=b.children;if(void 0!==e)for(d=0;d<e.length;d++)Uy(a,e[d],c);var f=!1;c.some(function(a){if(a.id===b.id)return f=!0});f||c.push(b)}l=Sy.prototype;l.fm=function(a){a||(this.dirty?this.$timeout_(function(){this.active=!0;this.Mj()}.bind(this)):this.selectedEditableNode=null)};
function Ty(a,b){var c=r(a)+"-"+r(b);if(b instanceof Cf)a.g.Jb(c,E(b.ha(),Cc,a.hm,a)),a.g.Jb(c,E(b.ha(),Ec,a.im,a)),b.ha().forEach(function(a){Ty(this,a)},a);else if((c=b.get("editableIds"))&&(b instanceof Ff||b instanceof Gf))for(var d=0,e=c.length;d<e;d++){a.b[c[d]]=b;for(var f=0,g=a.editableNodes.length;f<g;f++)if(a.editableNodes[f].id==c[d]){a.availableEditableNodes.push(a.editableNodes[f]);break}}}
l.fg=function(a){var b=r(this)+"-"+r(a);if(a instanceof Cf)this.g.Rc(b),a.ha().forEach(this.fg,this);else if(a=a.get("editableIds"))for(var b=0,c=a.length;b<c;b++){delete this.b[a[b]];for(var d,e=0,f=this.availableEditableNodes.length;e<f;e++)if(this.availableEditableNodes[e].id==a[b]){d=this.availableEditableNodes.splice(e,1)[0];break}d&&d===this.selectedEditableNode&&(this.selectedEditableNode=null)}};l.hm=function(a){Ty(this,a.element)};l.im=function(a){this.fg(a.element)};
l.gm=function(){this.fg(this.c);B(this.i)};l.wp=function(){this.editableNodes.length=0;this.availableEditableNodes.length=0;this.f.Ob().then(function(a){var b=[];a.forEach(function(a){a.children.forEach(function(a){Uy(this,a,b)},this)},this);b.forEach(function(a){void 0===a.children&&a.editable&&(this.editableNodes.push(a),this.b[a.id]&&this.availableEditableNodes.push(a))},this)}.bind(this))};z.controller("GmfEditfeatureselectorController",Sy);z.directive("gmfElevation",function(){return{restrict:"A",controller:"GmfElevationController",controllerAs:"ctrl",bindToController:!0,scope:{active:"<gmfElevationActive",elevation:"=gmfElevationElevation",loading:"=?gmfElevationLoading",layer:"<gmfElevationLayer",map:"=gmfElevationMap"},link:function(a){var b=a.ctrl;a.$watch(function(){return b.active},function(a){Vy(this,a)}.bind(b));a.$watch(function(){return b.layer},function(a){this.layer=a;this.elevation=null}.bind(b))}}});
function Wy(a,b,c){this.f=b;this.c=c;this.listenerKeys_=[];this.ba=a;this.loading=this.kg=!1}u("gmf.ElevationController",Wy);Wy.$inject=["$scope","ngeoDebounce","gmfAltitude"];
function Vy(a,b){a.elevation=void 0;if(b)a.listenerKeys_.push(E(a.map,"pointermove",function(){this.ba.$apply(function(){this.kg=!0;this.elevation=void 0;this.loading=!1}.bind(this))},a)),a.listenerKeys_.push(E(a.map,"pointermove",a.f(a.i.bind(a),500,!0))),a.listenerKeys_.push(E(a.map.c,"mouseout",function(){this.ba.$apply(function(){this.elevation=void 0;this.loading=this.kg=!1}.bind(this))},a));else{a.elevation=void 0;b=0;for(var c=a.listenerKeys_.length;b<c;++b)B(a.listenerKeys_[b])}}
Wy.prototype.i=function(a){this.kg&&(this.loading=!0,this.c.vd(a.coordinate,{layers:this.layer}).then(this.g.bind(this),this.b.bind(this)))};Wy.prototype.g=function(a){this.elevation=a[this.layer];this.loading=!1};Wy.prototype.b=function(){console.error("Error on getting altitude.");this.elevation=void 0;this.loading=!1};z.controller("GmfElevationController",Wy);
z.directive("gmfElevationwidget",function(){return{restrict:"E",scope:{map:"<gmfElevationwidgetMap",layers:"<gmfElevationwidgetLayers",active:"<gmfElevationwidgetActive"},controller:"gmfElevationwidgetController",controllerAs:"ctrl",bindToController:!0,templateUrl:"gmf/elevationwidget.html"}});function Xy(){this.selectedElevationLayer=this.layers[0]}u("gmf.ElevationwidgetController",Xy);z.controller("gmfElevationwidgetController",Xy);function Yy(a){a=a?a:{};var b=document.createElement("DIV");b.className=void 0!==a.className?a.className:"ol-mouse-position";$t.call(this,{element:b,render:a.render?a.render:Zy,target:a.target});E(this,I("projection"),this.io,this);a.Ch&&this.set("coordinateFormat",a.Ch);a.projection&&this.Fb(Te(a.projection));this.B=void 0!==a.Sj?a.Sj:"";this.s=b.innerHTML;this.o=this.f=this.c=null}A(Yy,$t);
function Zy(a){a=a.frameState;a?this.c!=a.Z.projection&&(this.c=a.Z.projection,this.f=null):this.c=null;$y(this,this.o)}l=Yy.prototype;l.io=function(){this.f=null};l.da=function(){return this.get("projection")};l.Em=function(a){this.o=on(this.i,a);$y(this,this.o)};l.Fm=function(){$y(this,null);this.o=null};l.setMap=function(a){$t.prototype.setMap.call(this,a);a&&(a=a.c,this.j.push(E(a,"mousemove",this.Em,this),E(a,"mouseout",this.Fm,this)))};l.Fb=function(a){this.set("projection",a)};
function $y(a,b){var c=a.B;if(b&&a.c){if(!a.f){var d=a.da();a.f=d?Ze(a.c,d):gf}if(b=a.i.va(b))a.f(b,b),c=(c=a.get("coordinateFormat"))?c(b):b.toString()}a.s&&c==a.s||(a.element.innerHTML=c,a.s=c)};z.directive("gmfMouseposition",function(){return{restrict:"E",controller:"gmfMousepositionController",scope:{map:"<gmfMousepositionMap",projections:"<gmfMousepositionProjections"},bindToController:!0,controllerAs:"ctrl",templateUrl:"gmf/mouseposition.html"}});
function az(a,b,c){this.control=new Yy({className:"gmf-mouseposition-control",Ch:function(a){var c=this.projection.filter.split(":"),f=b(c.shift());c.unshift(a);return f.apply(this,c)}.bind(this),target:angular.element(".gmf-mouseposition-control-target",a)[0],Sj:c("Coordinates")});this.Fb(this.projections[0]);this.map.s.push(this.control)}u("gmf.MousepositionController",az);az.$inject=["$element","$filter","gettext"];az.prototype.Fb=function(a){this.control.Fb(Te(a.code));this.projection=a};
az.prototype.setProjection=az.prototype.Fb;z.controller("gmfMousepositionController",az);function bz(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(cz.test(c))return b.jg=dz(c),b.type="hex",b;var d;a:{var e=a.match(ez);if(e){var c=Number(e[1]),f=Number(e[2]);d=Number(e[3]);e=Number(e[4]);if(0<=c&&255>=c&&0<=f&&255>=f&&0<=d&&255>=d&&0<=e&&1>=e){d=[c,f,d,e];break a}}d=[]}if(d.length){a=d[0];c=d[1];f=d[2];d=d[3];e=Math.floor(255*d);if(isNaN(e)||0>e||255<e)throw Error('"('+a+","+c+","+f+","+d+'") is not a valid RGBA color');d=Ms(e.toString(16));a=Ls(a,c,f)+d;b.jg=a;b.type="rgba";
return b}a:{if(e=a.match(fz))if(c=Number(e[1]),f=Number(e[2]),d=Number(e[3]),e=Number(e[4]),0<=c&&360>=c&&0<=f&&100>=f&&0<=d&&100>=d&&0<=e&&1>=e){e=[c,f,d,e];break a}e=[]}if(e.length){c=e[0];d=e[1];f=e[2];a=e[3];e=Math.floor(255*a);if(isNaN(e)||0>e||255<e)throw Error('"('+c+","+d+","+f+","+a+'") is not a valid HSLA color');a=Ms(e.toString(16));d/=100;f/=100;c/=360;if(0==d)f=d=c=255*f;else{var g,e=.5>f?f*(1+d):f+d-d*f;g=2*f-e;f=255*Os(g,e,c+1/3);d=255*Os(g,e,c);c=255*Os(g,e,c-1/3)}a=Ns([Math.round(f),
Math.round(d),Math.round(c)])+a;b.jg=a;b.type="hsla";return b}throw Error(a+" is not a valid color string");}var gz=/#(.)(.)(.)(.)/;function dz(a){if(!cz.test(a))throw Error("'"+a+"' is not a valid alpha hex color");5==a.length&&(a=a.replace(gz,"#$1$1$2$2$3$3$4$4"));return a.toLowerCase()}var cz=/^#(?:[0-9a-f]{4}){1,2}$/i,ez=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i,fz=/^(?:hsla)\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\%,\s?(0|[1-9]\d{0,2})\%,\s?(0|1|0\.\d{0,10})\)$/i;var hz={LineString:"LineString",Point:"Point",Polygon:"Polygon",MultiLineString:"LineString",MultiPoint:"Point",MultiPolygon:"Polygon"};function iz(a,b,c){this.b=a;this.ia=b;this.g=c}iz.prototype.cancel=function(a,b){return this.ia["delete"](this.b+"/cancel/"+a,void 0!==b?b:{})};iz.prototype.cancel=iz.prototype.cancel;iz.prototype.Gh=function(a,b,c,d,e,f){c={dpi:c,rotation:f.rotation};jz(this,a,b,c);a={map:c};Xa(a,f);return{attributes:a,format:e,layout:d}};iz.prototype.createSpec=iz.prototype.Gh;
function jz(a,b,c,d){var e=T(b),f=e.la(),g=e.da(),h=e.ca(),e=d.rotation||180*Vn(e)/Math.PI;d.center=f;d.projection=g.b;d.rotation=e;d.scale=c;d.layers=[];b=hh(b);b=a.g.yd(b);b=b.slice().reverse();b.forEach(function(a){He(a)&&kz(d.layers,a,h)},a)}
function kz(a,b,c){if(b instanceof Ff){if(S(b)instanceof yg){var d=S(b);c=d.Gd();if(void 0!==c){b=Ge(b);var d=d.Ha,e={TRANSPARENT:!0};Xa(e,d);delete e.LAYERS;delete e.FORMAT;delete e.SERVERTYPE;delete e.VERSION;b={baseURL:lz(c),imageFormat:"FORMAT"in d?d.FORMAT:"image/png",layers:d.LAYERS.split(","),customParams:e,serverType:d.SERVERTYPE,type:"wms",opacity:b,version:d.VERSION};a.push(b)}}}else if(b instanceof Gf){if(S(b)instanceof dh){c=S(b);for(var e=c.da(),f=c.Na,g=f.s,d=[],h=0,k=g.length;h<k;++h){var m=
f.b?f.b[h]:null;d.push({identifier:g[h],scaleDenominator:f.ca(h)*Xe(e)/2.8E-4,tileSize:Le(uf(f,h)),topLeftCorner:f.Ab(h),matrixSize:[m.Y-m.X,m.ea-m.aa]})}e=c.i;f=Object.keys(e);g=c.Hb[0];h=c.ya();0<=g.indexOf("{Layer}")&&(g=g.replace("{Layer}",h));b={baseURL:lz(g),dimensions:f,dimensionParams:e,imageFormat:c.D,layer:c.ya(),matrices:d,matrixSet:c.u,opacity:Ge(b),requestEncoding:c.V,style:c.tc(),type:"WMTS",version:c.M};a.push(b)}}else if(b instanceof fl){d=S(b).pc();e=new hw;f=[];g={version:2};h=0;
for(k=d.length;h<k;++h){var m=d[h],n=null,p=m.c;void 0!==p?n=p.call(m,c):(p=b.o,void 0!==p&&(n=p.call(b,m,c)));p=ew(e,m);if((n=null===n||Array.isArray(n)?n:[n])&&0<n.length)for(var q=!1,t=0,x=n.length;t<x;++t){var v=n[t],C=r(v).toString(),N=v.G(),J;if(N){var G=m.clone();zi(G,N);J=ew(e,G);N=G.G();f.push(J)}else{J=p;N=m.G();if(null==N)continue;q||(f.push(J),q=!0)}G=N.R();null===J.properties&&(J.properties={});N="_ngeo_style_"+t;if(G in hz){var D=hz[G],H="["+N+" = '"+C+"']";if(!(H in g)){G={symbolizers:[]};
g[H]=G;var y=v.Ea(),H=v.g,K=v.Fa(),v=v.Ga();if("Polygon"==D)null!==y&&(H=G.symbolizers,D={type:"polygon"},mz(D,y),null!==K&&nz(D,K),H.push(D));else if("LineString"==D)null!==K&&(H=G.symbolizers,y={type:"line"},nz(y,K),H.push(y));else if("Point"==D&&null!==H){K=G.symbolizers;y=void 0;if(H instanceof ji)y={type:"point"},y.pointRadius=H.i,D=H.Ea(),null!==D&&mz(y,D),H=H.Fa(),null!==H&&nz(y,H);else if(H instanceof eq){if(D=H.c.s,void 0!==D){y={type:"point",externalGraphic:D,graphicFormat:"image/png"};
D=H.O;null!==D&&(y.graphicOpacity=D);D=H.ka();if(null!==D){var X=H.$a();isNaN(X)&&(X=1);y.graphicWidth=D[0]*X;y.graphicHeight=D[1]*X}H=H.B;isNaN(H)&&(H=0);y.rotation=180*H/Math.PI}}else H instanceof Xr&&(D=H.b,null!==D&&(y={type:"point"},4===D?y.graphicName="square":3===D?y.graphicName="triangle":5===D?y.graphicName="star":8===D&&(y.graphicName="cross"),D=H.ka(),null!==D&&(y.graphicWidth=D[0],y.graphicHeight=D[1]),D=H.B,isNaN(D)||0===D||(y.rotation=180*D/Math.PI),D=H.O,null!==D&&(y.graphicOpacity=
D),D=H.Fa(),null!==D&&nz(y,D),H=H.Ea(),null!==H&&mz(y,H)));void 0!==y&&K.push(y)}null!==v&&(G=G.symbolizers,H={type:"Text"},K=v.Ga(),void 0!==K&&(H.label=K,K=v.i,void 0!==K&&(H.labelAlign=K),K=v.f,void 0!==K&&(H.labelRotation=(180*K/Math.PI).toString()),K=v.b,void 0!==K&&(K=K.split(" "),3<=K.length&&(H.fontWeight=K[0],H.fontSize=K[1],H.fontFamily=K.splice(2).join(" "))),K=v.Fa(),null!==K&&(y=Oh(K.qa()),H.haloColor=Ns(y),H.haloOpacity=y[3],K=K.b,void 0!==K&&(H.haloRadius=K)),K=v.Ea(),null!==K&&(K=
Oh(K.qa()),H.fontColor=Ns(K)),void 0!==H.labelAlign&&(H.b=v.g,H.g=-v.c),G.push(H)))}}J.properties[N]=C}}0<f.length&&(b={geoJson:{type:"FeatureCollection",features:f},opacity:Ge(b),style:g,type:"geojson"},a.push(b))}}function lz(a){var b=document.createElement("a");b.href=encodeURI(a);return decodeURI(b.href)}
function mz(a,b){b=b.qa();null!==b&&("string"===typeof b&&(b=bz(b).jg,b=dz(b),b=[parseInt(b.substr(1,2),16),parseInt(b.substr(3,2),16),parseInt(b.substr(5,2),16),parseInt(b.substr(7,2),16)/255]),a.fillColor=Ns(b),a.fillOpacity=b[3])}function nz(a,b){var c=b.qa();null!==c&&(c=Oh(c),a.strokeColor=Ns(c),a.strokeOpacity=c[3]);c=b.g;null!==c&&(a.strokeDashstyle=c.join(" "));b=b.b;void 0!==b&&(a.strokeWidth=b)}
iz.prototype.Fh=function(a,b){var c=this.b+"/report."+(a.format||"pdf"),d={headers:{"Content-Type":"application/json; charset=UTF-8"}};Xa(d,void 0!==b?b:{});return this.ia.post(c,a,d)};iz.prototype.createReport=iz.prototype.Fh;iz.prototype.mi=function(a,b){return this.ia.get(this.b+"/status/"+a+".json",void 0!==b?b:{})};iz.prototype.getStatus=iz.prototype.mi;iz.prototype.ki=function(a){return this.b+"/report/"+a};iz.prototype.getReportUrl=iz.prototype.ki;
function oz(a,b){return function(c){return new iz(c,a,b)}}oz.$inject=["$http","ngeoLayerHelper"];w.factory("ngeoCreatePrint",oz);function pz(){}
pz.prototype.Eh=function(a,b,c){var d=this;return function(e){var f=e.context,g=e.frameState,h=g.Z.resolution,k=g.size[0]*g.Qa,m=g.size[1]*g.Qa;e=[k/2,m/2];var n=a(),p=n[1]*Yh,q=n[0]*Yh,g=b(g),q=q/72/39.37*g/h/2;d.b=n[0]/72/39.37*g/2;h=p/72/39.37*g/h/2;d.g=n[1]/72/39.37*g/2;f.beginPath();f.moveTo(0,0);f.lineTo(k,0);f.lineTo(k,m);f.lineTo(0,m);f.lineTo(0,0);f.closePath();if(c){var n=Ce(c()),k=Math.sqrt(Math.pow(q,2)+Math.pow(h,2)),m=Math.atan(h/q)-n,t=Math.atan(q/h)-n,q=e[0]-Math.cos(m)*k,h=e[1]+Math.sin(m)*
k,n=e[0]+Math.sin(t)*k,p=e[1]+Math.cos(t)*k,g=e[0]+Math.cos(m)*k,m=e[1]-Math.sin(m)*k,x=e[0]-Math.sin(t)*k;e=e[1]-Math.cos(t)*k;f.moveTo(q,h);f.lineTo(n,p);f.lineTo(g,m);f.lineTo(x,e);f.lineTo(q,h)}else k=e[0]-q,m=e[1]-h,q=e[0]+q,e=e[1]+h,f.moveTo(k,m),f.lineTo(k,e),f.lineTo(q,e),f.lineTo(q,m),f.lineTo(k,m);f.closePath();f.fillStyle="rgba(0, 5, 25, 0.5)";f.fill()}};pz.prototype.createPrintMaskPostcompose=pz.prototype.Eh;
pz.prototype.ii=function(a,b,c,d){a=Math.min(a[0]*b*2834.64/c[0],a[1]*b*2834.64/c[1]);b=-1;c=0;for(var e=d.length;c<e;++c)a>d[c]&&(b=d[c]);return b};pz.prototype.getOptimalScale=pz.prototype.ii;pz.prototype.hi=function(a,b,c){return Math.max(b[0]*c/(2834.64*a[0]),b[1]*c/(2834.64*a[1]))};pz.prototype.getOptimalResolution=pz.prototype.hi;w.service("ngeoPrintUtils",pz);var qz={NOT_IN_USE:"notInUse",PRINTING:"printing",ERROR_ON_REPORT:"errorOnReport",CAPABILITIES_NOT_LOADED:"capabilitiesNotLoaded",ERROR_ON_GETCAPABILITIES:"errorOnGetCapabilities"};u("gmf.PrintState",qz);z.value("gmfPrintTemplateUrl",function(a,b){a=b.gmfPrintTemplateurl;return void 0!==a?a:"gmf/print.html"});
function rz(a){return{bindToController:!0,controller:"GmfPrintController",controllerAs:"ctrl",templateUrl:a,replace:!0,restrict:"E",scope:{map:"=gmfPrintMap",active:"=gmfPrintActive",rotateMask:"&?gmfPrintRotatemask"},link:function(a){var c=a.ctrl;a.$watch(function(){return c.active},function(a){sz(this,a)}.bind(c))}}}rz.$inject=["gmfPrintTemplateUrl"];z.directive("gmfPrint",rz);
function tz(a,b,c,d,e,f,g,h,k,m,n,p,q,t){this.J=t("translate");this.ngeoFeatureHelper_=q;this.O=this.rotateMask?this.rotateMask():!1;this.V=a;this.$timeout_=b;this.T=c;this.na=e;this.i=f;this.pa=g.ya();this.M=h;this.b=k(m);this.ta=p;this.D="0";d.has("cacheVersion")&&(this.D=d.get("cacheVersion"));this.s=this.o=this.K=this.c=null;this.B="";this.H=[];this.v=[];this.g={};this.j=[];this.fields={};this.rotation=0;this.printState="capabilitiesNotLoaded";b=function(){return this.j}.bind(this);c=function(a){return this.fields.scale=
uz(this,a.size,a.Z.resolution)}.bind(this);var x;this.O&&(x=function(){return this.rotation}.bind(this));this.Ya=h.Eh(b,c,x);a.$watch(function(){return n.b.role_id},function(){this.printState="capabilitiesNotLoaded";this.f=null}.bind(this))}u("gmf.PrintController",tz);tz.$inject="$scope $timeout $q $injector gettextCatalog ngeoLayerHelper ngeoFeatureOverlayMgr ngeoPrintUtils ngeoCreatePrint gmfPrintUrl gmfAuthentication ngeoQueryResult ngeoFeatureHelper $filter".split(" ");
function sz(a,b){b?(a.f||vz(a),a.f.then(function(a){this.active&&(this.printState="notInUse",wz(this,a),this.jc=this.map.on("postcompose",this.Ya),this.Oa=this.map.on("pointerdrag",this.Ca.bind(this)),this.map.render())}.bind(a),function(){this.printState="errorOnGetCapabilities";this.f=null}.bind(a))):(a.map.Rj(a.jc),a.map.Rj(a.Oa),a.$f(0),a.map.render())}
function vz(a){var b;b=a.b;var c={withCredentials:!0,params:{cache_version:a.D}};b=b.ia.get(b.b+"/capabilities.json",void 0!==c?c:{withCredentials:!0});a.f=b}function wz(a,b){b=b.data;a.H=b.formats||[];a.v=b.layouts;a.g=b.layouts[0];a.fields.layouts=[];a.v.forEach(function(a){this.fields.layouts.push(a.name)}.bind(a));xz(a)}
function xz(a){a.fields.layout=a.g.name;var b=yz(a,"map").clientInfo;a.j=[b.width,b.height];zz(a);var c=yz(a,"legend");a.fields.legend=null!==c?a.fields.legend||!0:void 0;a.fields.scales=b.scales||[];a.fields.dpis=b.dpiSuggestions||[];b=a.map.ka();c=T(a.map).ca();a.fields.scale=uz(a,b,c);a.fields.dpi=a.fields.dpi&&0<a.fields.dpis.indexOf(a.fields.dpi)?a.fields.dpi:a.fields.dpis[0];a.fields.formats={};a.H.forEach(function(a){this.fields.formats[a]=!0}.bind(a))}
function zz(a){var b,c,d,e;a.fields.customs||(a.fields.customs=[]);var f=a.fields.customs,g=f.splice(0,f.length);a.g.attributes.forEach(function(a){if(!a.clientParams){b=""+a.name;d=a.default;c=""+a.type;switch(c){case "String":e="comments"===b?"textarea":"text";break;case "Boolean":e="checkbox";break;case "Number":e="number";break;default:e=c}g.forEach(function(a){if(a.name===b&&a.type===e)return d=a.value});this.fields.customs.push({name:b,type:e,value:d})}}.bind(a))}
function yz(a,b){var c=null;a.g.attributes.forEach(function(a){if(a.name===b)return c=a});return c}tz.prototype.$f=function(a){void 0!==a&&(a=parseInt(a,10),180<a?a=-180:-180>a&&(a=180),this.rotation=a,this.O?this.map.render():T(this.map).Od(Ce(this.rotation)));return this.rotation};tz.prototype.getSetRotation=tz.prototype.$f;
tz.prototype.Ca=function(a){var b=a.originalEvent;if(this.active&&b.altKey&&b.shiftKey){var c=no(this.map,T(this.map).la());a=a.pixel;if(null===this.s)this.o=null;else{this.$timeout_.cancel(this.s);var b=this.o[0]-c[0],d=this.o[1]-c[1],e=a[0]-c[0],c=a[1]-c[1],f=Math.sqrt(Math.pow(e,2)+Math.pow(c,2)),g=(b*e+d*c)/(Math.sqrt(Math.pow(b,2)+Math.pow(d,2))*f),g=1>=g?(0<b*c-d*e?1:-1)*Math.acos(g):0;this.$f(this.rotation+Math.round(180*g/Math.PI*(f/200)));this.V.$digest()}this.s=this.$timeout_(function(){this.s=
null}.bind(this),500);this.o=a}};
tz.prototype.print=function(a){this.c=this.T.defer();this.printState="printing";var b=this.map.ka(),c=T(this.map).ca(),b=uz(this,b,c),d=this.O?-this.rotation:this.rotation,e={datasource:Az(this),lang:this.na.currentLanguage,rotation:d,scale:this.fields.scale};this.fields.customs&&this.fields.customs.forEach(function(a){e[a.name]=a.value});this.fields.legend&&null!==Bz(this,b)&&(e.legend=Bz(this,b));a=this.b.Gh(this.map,b,this.fields.dpi,this.fields.layout,a,e);b=[];kz(b,this.pa,c);0<b.length&&a.attributes.map.layers.unshift(b[0]);
this.b.Fh(a,{timeout:this.c.promise}).then(this.Ta.bind(this),this.u.bind(this))};tz.prototype.print=tz.prototype.print;tz.prototype.cancel=function(){this.c.resolve();null!==this.K&&this.$timeout_.cancel(this.K);this.b.cancel(this.B);Cz(this)};tz.prototype.cancel=tz.prototype.cancel;function Cz(a,b){a.printState=b||"notInUse";a.B=""}
function Az(a){var b,c,d,e=[];a.ta.sources.forEach(function(a){c=[];d=[];a.features.forEach(function(a,b){var e=this.ngeoFeatureHelper_.Sf(a);0===b&&(d=Object.keys(e).map(function(a){return this.J(a)},this));c.push(Object.keys(e).map(function(a){return e[a]}))},this);d.length&&(b={title:this.J(a.label),table:{columns:d,data:c}},e.push(b))},a);return e}function uz(a,b,c){var d=a.fields.scales.slice();return void 0!==b&&void 0!==c?a.M.ii(b,c,a.j,d.reverse()):a.fields.scales[0]}
tz.prototype.Ta=function(a){this.B=a=a.data.ref;Dz(this,a)};function Dz(a,b){a.c=a.T.defer();a.b.mi(b,{timeout:a.c.promise}).then(a.ja.bind(a,b),a.u.bind(a))}tz.prototype.ja=function(a,b){b=b.data;b.done?"error"!=b.status?(window.location.href=this.b.ki(a),Cz(this)):(console.error(b.error),this.u()):this.K=this.$timeout_(function(){Dz(this,a)}.bind(this),1E3,!1)};tz.prototype.u=function(){Cz(this,"errorOnReport")};
function Bz(a,b){var c={classes:[]},d,e,f,g,h=a.na,k=a.i.qc(a.map,"data");a.i.yd(k).reverse().forEach(function(a){d=[];var k=S(a);He(a)&&void 0!==k&&(a instanceof Gf?(f=a.get("layerNodeName"),g=this.i.dg(a),null!==g&&d.push({name:h.getString(""+f),icons:[g]})):(e=k.Ha.LAYERS.split(","),e.forEach(function(a){g=this.i.we(k.Gd(),a,b);null!==g&&0!==a.length&&d.push({name:h.getString(""+a),icons:[g]})}.bind(this))));0<d.length&&c.classes.push({classes:d})}.bind(a));return 0<c.classes.length?c:null}
tz.prototype.Eb=function(a){var b;this.v.forEach(function(c){if(c.name===a)return b=c,!0});this.g=b;xz(this)};tz.prototype.setLayout=tz.prototype.Eb;tz.prototype.Ng=function(a){var b=this.map.ka();this.fields.scale=a;a=this.M.hi(b,this.j,a);a=T(this.map).Za(a,0,1);T(this.map).set(Zl,a)};tz.prototype.setScale=tz.prototype.Ng;tz.prototype.tp=function(a){this.fields.dpi=a};tz.prototype.setDpi=tz.prototype.tp;tz.prototype.nn=function(a){return this.printState===qz[a]};tz.prototype.isState=tz.prototype.nn;
z.controller("GmfPrintController",tz);function Ez(a){function b(a){a.each(function(a){function e(){var a=d3.mouse(this)[0],a=G.invert(a);b.highlight(a)}function f(){b.zh()}d3.select(this).selectAll("svg").remove();if(void 0!==a){X=Math.max(this.clientWidth-d.right-d.left,0);G=d3.scale.linear().range([0,X]);K=Math.max(this.clientHeight-d.top-d.bottom,0);D=d3.scale.linear().range([K,0]);var m=d3.svg.axis().scale(G).orient("bottom"),n=d3.svg.axis().scale(D).orient("left"),q;1===k&&(q=d3.svg.area().x(function(a){return G(g(a))}).y0(K).y1(function(a){var b=
Object.keys(h)[0];return D(h[b].zExtractor(a))}));J=d3.select(this).selectAll("svg").data([a]);var t=J.enter().append("svg");void 0!==p&&t.append("defs").append("style").attr("type","text/css").text(p);t=t.append("g");b.Kj([]);t.style("font","11px Arial");1===k&&t.append("path").attr("class","area").style("fill","rgba(222, 222, 222, 0.5)");t.insert("g",":first-child").attr("class","grid-y");c||(t.append("g").attr("class","x axis").attr("transform","translate(0,"+K+")"),t.append("text").attr("class",
"x label").attr("text-anchor","end").attr("x",X-4).attr("y",K-4),t.append("g").attr("class","y axis"),t.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").style("fill","grey").text(v+" [m]"),t.append("g").attr("class","metas").attr("transform","translate("+(X+3)+", 0)"));t.append("g").attr("class","pois");var ka=t.append("g").attr("class","x grid-hover");ka.append("svg:line").attr("stroke-dasharray","5,5");ka.append("text");
t.append("rect").attr("class","overlay").attr("width",X).attr("height",K).style("fill","none").style("pointer-events","all");J.attr("width",X+d.left+d.right).attr("height",K+d.top+d.bottom);y=J.select("g").attr("transform","translate("+d.left+","+d.top+")");xa=d3.extent(a,function(a){return g(a)});G.domain(xa);ka=function(){var b=[],c,d;for(d in h)c=d3.extent(a,function(a){return h[d].zExtractor(a)}),b=b.concat(c);return[Math.min.apply(null,b),Math.max.apply(null,b)]}();D.domain(ka);if(void 0!==H)H(G,
D,X,K);else{var Ot=.1*(ka[1]-ka[0]);D.domain([ka[0]-Ot,ka[1]+Ot])}1===k&&y.select(".area").transition().attr("d",q);for(var Uh in h)t.append("path").attr("class","line "+Uh).style("stroke",h[Uh].color||"#F00").style("fill","none"),q=t.append("g").attr("class","y grid-hover "+Uh),q.append("svg:line").attr("stroke-dasharray","5,5"),q.append("text"),q=d3.svg.line().x(function(a){return G(g(a))}).y(function(a){return D(h[Uh].zExtractor(a))}),y.select(".line."+Uh).transition().attr("d",q);2E3<xa[1]?(Q=
1E3,W="km"):(Q=1,W="m");c||(m.tickFormat(function(a){return C.xtick(a/Q,W)}),N&&m.tickValues([0,G.domain()[1]]),n.tickFormat(function(a){return C.ytick(a,"m")}),y.select(".x.axis").transition().call(m),y.select(".x.label").text(x+" ["+W+"]").style("fill","grey").style("shape-rendering","crispEdges"),10>K/15&&n.ticks(K/15),y.select(".y.axis").transition().call(n));y.select(".grid-y").transition().call(n.tickSize(-X,0).tickFormat("")).selectAll(".tick line").style("stroke","#ccc").style("opacity",.7);
y.selectAll(".axis").selectAll("path, line").style("fill","none").style("stroke","#000").style("shape-rendering","crispEdges");y.selectAll(".grid-hover line").style("stroke","#222").style("opacity",.8);y.select(".overlay").on("mouseout",f).on("mousemove",e)}})}var c=void 0!==a.light?a.light:!1,d=c?{top:0,right:0,bottom:0,left:0}:{top:10,right:20,bottom:30,left:40},e=void 0!==a.hoverCallback?a.hoverCallback:ca,f=void 0!==a.outCallback?a.outCallback:ca,g=a.distanceExtractor,h=a.linesConfiguration,k=
Object.keys(h).length,m=d3.bisector(function(a){return g(a)}).left,n=a.poiExtractor,p=a.styleDefs,q=void 0!==a.poiLabelAngle?a.poiLabelAngle:-60,t=a.i18n||{},x=t.xAxis||"Distance",v=t.yAxis||"Elevation",C={xhover:function(a,b){return parseFloat(a.toPrecision(3))+" "+b},yhover:function(a){return Math.round(a)+" m"},xtick:function(a){return a},ytick:function(a){return a}};void 0!==a.formatter&&Xa(C,a.formatter);var N=void 0!==a.lightXAxis?a.lightXAxis:!1,J,G,D,H=a.scaleModifier,y,K,X,Q,W,xa;b.zh=function(){y.selectAll(".grid-hover").style("display",
"none");f.call(null)};b.highlight=function(a){var b=J.datum();a=m(b,a);if(!(a>=b.length)){b=b[a];a=g(b);var c,d=[],f={},n;for(n in h)c=h[n].zExtractor(b),d.push(c),f[n]=c,y.select(".y.grid-hover."+n).style("display","inline").select("line").attr("x1",G(0)).attr("y1",D(c)).attr("x2",X).attr("y2",D(c));y.select(".x.grid-hover").style("display","inline").select("line").attr("x1",G(a)).attr("y1",K).attr("x2",G(a)).attr("y2",D(Math.max.apply(null,d)));n=a>xa[1]/2;c=G(a);c+=n?-10:10;y.select(".x.grid-hover text").text(C.xhover(a/
Q,W)).style("text-anchor",n?"end":"start").attr("transform","translate("+c+","+(K-10)+")");1===k&&y.select(".y.grid-hover text").text(C.yhover(d[0],"m")).style("text-anchor",n?"end":"start").attr("transform","translate("+c+","+(D(d[0])-10)+")");e.call(null,b,a/Q,W,f,"m")}};b.Kj=function(a){a=void 0!==a?a:[];var b=J.select("g"),d=J.datum();a=b.select(".pois").selectAll(".poi").data(a,function(a){var b=m(d,Math.round(10*n.dist(a))/10,1);if(b=d[b]){var c,e=[];for(c in h)e.push(h[c].zExtractor(b));c=
Math.max.apply(null,e);n.z(a,c)}return n.id(a)});b=a.enter().append("g").attr("class","poi");b.append("text").attr("x",c?0:9).attr("dy",".35em").attr("text-anchor",c?"middle":"start");b.append("line").style("shape-rendering","crispEdges");a.style("opacity",0).transition().duration(1E3).delay(100).style("opacity",1);a.selectAll("text").attr("transform",function(a){return c?["translate(",G(n.dist(a)),",",D(n.z(a))-10,")"].join(""):["translate(",G(n.dist(a)),",",D(n.z(a))-20,") rotate(",q,")"].join("")}).text(function(a){return n.sort(a)+
(c?"":" - "+n.title(a))});a.selectAll("line").style("stroke","grey").attr("x1",function(a){return G(n.dist(a))}).attr("y1",function(){return D(D.domain()[0])}).attr("x2",function(a){return G(n.dist(a))}).attr("y2",function(a){return D(n.z(a))});a.exit().remove()};return b}u("ngeo.profile",Ez);function Fz(a){return{restrict:"A",link:function(b,c,d){function e(){void 0!==h&&(g.datum(k).call(h),void 0!==k&&h.Kj(m))}var f=d.ngeoProfileOptions,g=d3.select(c[0]),h,k,m;b.$watchCollection(f,function(a){if(a=Ua(a)){if(void 0!==a.hoverCallback){var c=a.hoverCallback;a.hoverCallback=function(){c.apply(null,arguments);b.$applyAsync()}}if(void 0!==a.outCallback){var d=a.outCallback;a.outCallback=function(){d();b.$applyAsync()}}h=Ez(a);e()}});b.$watch(d.ngeoProfile,function(a){k=a;e()});b.$watch(d.ngeoProfilePois,
function(a){m=a;e()});b.$watch(d.ngeoProfileHighlight,function(a){void 0!==a&&(0<a?h.highlight(a):h.zh())});As(window,"resize",a(e,50,!0),!1,this)}}}Fz.$inject=["ngeoDebounce"];w.directive("ngeoProfile",Fz);w.value("gmfProfileTemplateUrl",function(a,b){a=b.gmfProfileTemplateurl;return void 0!==a?a:"gmf/profile.html"});
function Gz(a){return{bindToController:!0,controller:"GmfProfileController",controllerAs:"ctrl",templateUrl:a,replace:!0,restrict:"E",scope:{active:"=gmfProfileActive",line:"=gmfProfileLine",getMapFn:"&?gmfProfileMap",getLinesConfigurationFn:"&gmfProfileLinesconfiguration",getHoverPointStyleFn:"&?gmfProfileHoverpointstyle",getNbPointsFn:"&?gmfProfileNumberofpoints",getOptionsFn:"&?gmfProfileOptions"}}}Gz.$inject=["gmfProfileTemplateUrl"];z.directive("gmfProfile",Gz);
function Hz(a,b,c,d,e,f,g,h){this.H=a;this.ia=b;this.$filter_=d;this.na=e;this.j=f.gb();this.D=g;this.T=h;b=null;(c=this.getMapFn)&&(b=c());this.b=b;this.g=this.getLinesConfigurationFn();this.c=[];for(var k in this.g)this.c.push(k),b=this.g[k],b.zExtractor||(this.g[k].zExtractor=Iz(k));k=100;(b=this.getNbPointsFn)&&(k=b());this.o=k;this.profileData=[];this.currentPoint={coordinate:void 0,distance:void 0,elevations:{},xUnits:void 0,yUnits:void 0};this.profileHighlight=-1;this.wa=this.f=null;this.i=
new yi;this.j.ra(this.i);var m;(k=this.getHoverPointStyleFn)?m=k():m=new U({image:new ji({fill:new mi({color:"#ffffff"}),radius:3})});this.s={xAxis:e.getString("Distance"),yAxis:e.getString("Elevation")};this.j.setStyle(m);this.profileOptions={linesConfiguration:this.g,distanceExtractor:this.v,hoverCallback:this.J.bind(this),outCallback:this.pa.bind(this),i18n:this.s};if(e=this.getOptionsFn)e=e(),Xa(this.profileOptions,e);this.active=!0===this.active;this.isErrored=!1;a.$watch(function(){return this.active}.bind(this),
function(a,b){b!==a&&Jz(this)}.bind(this));a.$watch(function(){return this.line}.bind(this),function(a,b){b!==a&&(this.isErrored=!1,this.line?(a={type:"LineString",coordinates:this.line.N()},a={layers:this.c.join(","),geom:JSON.stringify(a),nbPoints:this.o},this.ia({url:this.D,method:"POST",params:a,paramSerializer:"$httpParamSerializerJQLike",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(this.K.bind(this),this.O.bind(this))):this.profileData=[],this.active=!!this.line)}.bind(this));
Jz(this)}u("gmf.ProfileController",Hz);Hz.$inject="$scope $http $element $filter gettextCatalog ngeoFeatureOverlayMgr gmfProfileJsonUrl gmfProfileCsvUrl".split(" ");function Jz(a){a.active&&null!==a.b?a.V=E(a.b,"pointermove",a.M.bind(a)):qc(a.V)}Hz.prototype.M=function(a){if(!a.dragging&&this.line){var b=this.b;a=b.va(on(b,a.originalEvent));b=[NaN,NaN];this.line.wb(a[0],a[1],b,Infinity);16>gj(new dj([b,a]))/T(this.b).ca()?this.profileHighlight=Kz(this,b):this.profileHighlight=-1;this.H.$apply()}};
function Kz(a,b){var c,d=0,e=[b[0]-.5,b[1]-.5,b[0]+.5,b[1]+.5];ej(a.line,function(a,g){c=new dj([a,g]);if(c.Bb(e))return c.fa([a,b]),d+=gj(c);d+=gj(c)});return d}
Hz.prototype.J=function(a,b,c,d,e){var f;a=[a.x,a.y];for(f in d)this.currentPoint.elevations[f]=d[f];this.currentPoint.distance=b;this.currentPoint.xUnits=c;this.currentPoint.yUnits=e;this.currentPoint.coordinate=a;b=new oj(a);Lz(this);this.wa=document.createElement("div");this.wa.className+="tooltip ngeo-tooltip-measure";this.f=new io({element:this.wa,offset:[0,-15],dd:"bottom-center"});this.b.i.push(this.f);c=this.wa;var g;e=[];f=this.$filter_("number");e.push(this.s.xAxis+" : "+f(this.currentPoint.distance,
"m"===this.currentPoint.xUnits?0:2)+" "+this.currentPoint.xUnits);for(g in this.currentPoint.elevations)d=this.na.getString(g),e.push(d+" : "+f(this.currentPoint.elevations[g],0)+" "+this.currentPoint.yUnits);c.innerHTML=e.join("</br>");this.f.setPosition(a);zi(this.i,b)};Hz.prototype.pa=function(){this.currentPoint.coordinate=void 0;this.currentPoint.distance=void 0;this.currentPoint.elevations={};this.currentPoint.xUnits=void 0;this.currentPoint.yUnits=void 0;Lz(this);zi(this.i,null)};
function Lz(a){null!==a.wa&&(a.wa.parentNode.removeChild(a.wa),a.wa=null,a.b.i.remove(a.f))}Hz.prototype.qa=function(a){return(a=this.g[a])?a.color:void 0};Hz.prototype.getColor=Hz.prototype.qa;Hz.prototype.Fl=function(){return this.c.slice(0)};Hz.prototype.getLayersNames=Hz.prototype.Fl;function Iz(a){return function(b){return"values"in b&&a in b.values?parseFloat(b.values[a]):0}}Hz.prototype.v=function(a){return"dist"in a?a.dist:0};
Hz.prototype.K=function(a){a=a.data.profile;a instanceof Array&&(this.profileData=a)};Hz.prototype.O=function(){this.isErrored=!0;console.error("Can not get JSON profile.")};
Hz.prototype.Mf=function(){if(0!==this.profileData.length){var a={type:"LineString",coordinates:this.line.N()},a={layers:this.c.join(","),geom:JSON.stringify(a),nbPoints:this.o};this.ia({url:this.T,method:"POST",params:a,paramSerializer:"$httpParamSerializerJQLike",headers:{"Content-Type":"text/csv;"}}).then(this.u.bind(this),this.B.bind(this))}};Hz.prototype.downloadCsv=Hz.prototype.Mf;
Hz.prototype.u=function(a){var b=document.createElement("a");b.href="data:attachment/csv,"+encodeURI(a.data);b.target="_blank";b.download="profile.csv";b.click();b.remove()};Hz.prototype.B=function(){this.isErrored=!0;console.error("Can not get CSV profile.")};z.controller("GmfProfileController",Hz);z.directive("gmfDrawprofileline",function(){return{scope:!0,controller:"GmfDrawprofilelineController",controllerAs:"ctrl",restrict:"A",bindToController:{getMapFn:"&gmfDrawprofilelineMap",line:"=gmfDrawprofilelineLine",active:"=gmfDrawprofilelineActive",getStyleFn:"&?gmfDrawprofilelineStyle"}}});
function Mz(a,b,c,d,e){this.g=this.getMapFn();this.b=new xc;b=d.gb();b.Cc(this.b);var f;(d=this.getStyleFn)?f=d():f=new U({stroke:new ri({color:"#ffcc33",width:2})});b.setStyle(f);this.interaction=new Go({type:"LineString",features:this.b});this.g.f.push(this.interaction);e(this.interaction);this.interaction.on(I("active"),function(){this.interaction.getActive()&&Nz(this)},this);this.interaction.on("drawend",function(a){this.line=a.feature.G();c(function(){this.interaction.setActive(!1)}.bind(this),
0)},this);a.$watch(function(){return this.line}.bind(this),function(a){null===a&&Nz(this)}.bind(this));a.$watch(function(){return this.active}.bind(this),function(a){!1===a&&Nz(this);this.interaction.setActive(this.active)}.bind(this))}u("gmf.DrawprofilelineController",Mz);Mz.$inject=["$scope","$element","$timeout","ngeoFeatureOverlayMgr","ngeoDecorateInteraction"];function Nz(a){a.b.clear();a.line=null}z.controller("GmfDrawprofilelineController",Mz);w.value("ngeoDatePickerTemplateUrl",function(a,b){a=b.ngeoDatePickerTemplateUrl;return void 0!==a?a:"ngeo/datepicker.html"});
function Oz(a,b){return{scope:{onDateSelected:"&",time:"="},bindToController:!0,controller:"ngeoDatePickerController",controllerAs:"datepickerCtrl",restrict:"AE",templateUrl:a,link:function(a,d,e,f){a=f.na.getCurrentLanguage();$.datepicker.setDefaults($.datepicker.regional[a]);f.sdateOptions=angular.extend({},f.sdateOptions,{onClose:function(a){a&&$(d[0]).find('input[name="edate"]').datepicker("option","minDate",a)}});f.edateOptions=angular.extend({},f.edateOptions,{onClose:function(a){a&&$(d[0]).find('input[name="sdate"]').datepicker("option",
"maxDate",a)}});angular.element("body").on("hidden.bs.popover",function(){var a=angular.element("#ui-datepicker-div");a&&"block"===a.css("display")&&$(d[0]).find('input[name$="date"]').datepicker("hide")});b(function(){angular.element("#ui-datepicker-div").on("mousedown",function(a){a.stopPropagation()})})}}}Oz.$inject=["ngeoDatePickerTemplateUrl","$timeout"];w.directive("ngeoDatePicker",Oz);
function Pz(a,b,c){this.c=c;c=this.c.Ad(this.time);this.na=b.get("gettextCatalog");this.isModeRange="range"===this.time.mode;this.g=new Date(c.Pi);this.b=new Date(c.Mi);this.edateOptions={minDate:this.g,maxDate:this.b,changeMonth:!0,changeYear:!0};this.sdateOptions={minDate:this.g,maxDate:this.b,changeMonth:!0,changeYear:!0};this.isModeRange?(this.sdate=new Date(c.values[0]),this.edate=new Date(c.values[1])):this.sdate=new Date(c.values);a.$watchGroup(["datepickerCtrl.sdate","datepickerCtrl.edate"],
function(a){var b=a[0];a=a[1];if(angular.isDate(b)&&(!this.isModeRange||angular.isDate(a)))this.onDateSelected({time:{start:b.getTime(),end:a?a.getTime():null}})}.bind(this))}u("ngeo.DatePickerController",Pz);Pz.$inject=["$scope","$injector","ngeoTime"];w.controller("ngeoDatePickerController",Pz);function Qz(){return{scope:{onDateSelected:"&gmfTimeSliderOnDateSelected",time:"=gmfTimeSliderTime"},bindToController:!0,controller:"gmfTimeSliderController",controllerAs:"sliderCtrl",restrict:"AE",templateUrl:"gmf/timeslider.html",link:function(a,b,c,d){function e(b,c){c.values?(b=new Date(Rz(d,c.values[0])),c=new Date(Rz(d,c.values[1])),d.dates=[b,c],c={start:b.getTime(),end:c.getTime()}):(b=new Date(Rz(d,c.value)),d.dates=b,c={start:b.getTime()});a.$apply();return c}d.sliderOptions.stop=function(a,
b){d.onDateSelected({time:e(0,b)})};d.sliderOptions.slide=e}}}Qz.$inject=["$timeout","$filter"];function Sz(a,b){this.g=b;a=this.g.Ad(this.time);this.isModeRange="range"===this.time.mode;this.minValue=a.Pi;this.maxValue=a.Mi;this.b=Tz(this);this.sliderOptions={range:this.isModeRange,min:this.minValue,max:this.maxValue};this.dates=this.isModeRange?[a.values[0],a.values[1]]:a.values}u("gmf.TimeSliderController",Sz);Sz.$inject=["$scope","gmfWMSTime"];
function Tz(a){var b=a.time,c=null,d=new Date(a.minValue);a=new Date(a.maxValue);if(b.values)c=[],b.values.forEach(function(a){c.push((new Date(a)).getTime())});else{var e=new Date(d.getTime());e.setFullYear(d.getFullYear()+1024*b.interval[0]);e.setMonth(d.getMonth()+1024*b.interval[1],d.getDate()+1024*b.interval[2]);e.setSeconds(d.getSeconds()+1024*b.interval[3]);if(e>a)for(c=[],e=0;;e++){var f=new Date(d.getTime());f.setFullYear(d.getFullYear()+e*b.interval[0]);f.setMonth(d.getMonth()+e*b.interval[1],
d.getDate()+e*b.interval[2]);f.setSeconds(d.getSeconds()+e*b.interval[3]);if(f<=a)c.push(f.getTime());else break}}return c}
function Rz(a,b){if(b<=a.minValue)return a.minValue;if(b>=a.maxValue)return a.maxValue;if(a.b){for(var c,d=0,e=a.b.length-1;1<e-d;)c=Math.floor((d+e)/2),a.b[c]>=b?e=c:d=c;return a.b[Math.abs(a.b[d]-b)<Math.abs(a.b[e]-b)?d:e]}b=new Date(b);c=new Date(a.minValue);for(var d=new Date(a.minValue),e=new Date(a.maxValue),f=Math.abs(b-d),g=1;;g++){var h=new Date(c.getTime());h.setFullYear(c.getFullYear()+g*a.time.interval[0]);h.setMonth(c.getMonth()+g*a.time.interval[1],c.getDate()+g*a.time.interval[2]);
h.setSeconds(c.getSeconds()+g*a.time.interval[3]);if(h>e)break;var k=Math.abs(b-h);if(k<=f)d=h,f=k;else break}return d.getTime()}z.controller("gmfTimeSliderController",Sz);z.directive("gmfTimeSlider",Qz);function Uz(a,b){this.ia=a;this.b=b}u("gmf.ShareService",Uz);Uz.$inject=["$http","gmfShortenerCreateUrl"];Uz.prototype.ue=function(a){return this.b?Vz(this,{url:a}):{data:{short_url:a},status:200}};Uz.prototype.Kg=function(a,b,c){a={url:a,email:b};c&&(a.message=c);return Vz(this,a)};function Vz(a,b){return a.ia.post(a.b,$.param(b),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}z.service("gmfShareService",Uz);function Wz(a,b,c,d,e){this.c=a;this.b=c;this.g=d;this.enableEmail="true"===e.gmfShareEmail;this.permalink=b.Fd();this.showLenghtWarning=2083<this.permalink.length||2048<b.ib();this.errorOnsend=this.successfullySent=!1;this.ue()}u("gmf.ShareController",Wz);Wz.$inject=["$scope","ngeoLocation","gmfShareService","$q","$attrs"];
Wz.prototype.ue=function(){this.g.when(this.b.ue(this.permalink)).then(function(a){this.shortLink=a.data.short_url}.bind(this),function(){this.shortLink=this.permalink;this.errorOnGetShortUrl=!0}.bind(this))};Wz.prototype.getShortUrl=Wz.prototype.ue;Wz.prototype.Kg=function(){function a(){this.successfullySent=!0}function b(){}this.c.gmfShareForm.$valid&&this.g.when(this.b.Kg(this.permalink,this.email,this.message)).then(a.bind(this),b.bind(this))};Wz.prototype.sendShortUrl=Wz.prototype.Kg;
z.directive("gmfShare",function(){return{restrict:"E",controller:"GmfShareController",controllerAs:"shareCtrl",templateUrl:"gmf/share.html"}});z.controller("GmfShareController",Wz);function Xz(a,b,c){gs.call(this);this.b=null;this.f=!1;this.B=a;this.j=c;this.g=b||window;this.c=pa(this.i,this)}sa(Xz,gs);Xz.prototype.start=function(){Yz(this);this.f=!1;var a=Zz(this),b=$z(this);a&&!b&&this.g.mozRequestAnimationFrame?(this.b=As(this.g,"MozBeforePaint",this.c),this.g.mozRequestAnimationFrame(null),this.f=!0):this.b=a&&b?a.call(this.g,this.c):this.g.setTimeout(cb(this.c),20)};
function Yz(a){if(null!=a.b){var b=Zz(a),c=$z(a);b&&!c&&a.g.mozRequestAnimationFrame?cl(a.b):b&&c?c.call(a.g,a.b):a.g.clearTimeout(a.b)}a.b=null}Xz.prototype.i=function(){this.f&&this.b&&cl(this.b);this.b=null;this.B.call(this.j,ra())};Xz.prototype.rb=function(){Yz(this);Xz.Fc.rb.call(this)};function Zz(a){a=a.g;return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||null}
function $z(a){a=a.g;return a.cancelAnimationFrame||a.cancelRequestAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||null};function aA(a){return{restrict:"A",link:function(b,c,d){var e=b.$eval(d.ngeoResizemap);d=d.ngeoResizemapState;var f,g=new Xz(function(){e.hf();e.Kb&&Ub.cancelAnimationFrame(e.Kb);e.vf();1E3>ra()-f&&g.start()},a);c.bind("transitionend",function(){e.hf();e.Kb&&Ub.cancelAnimationFrame(e.Kb);e.vf()});b.$watch(d,function(a,b){a!=b&&(f=ra(),Yz(g),g.start())})}}}aA.$inject=["$window"];w.directive("ngeoResizemap",aA);w.value("ngeoScaleselectorTemplateUrl",function(a,b){a=b.ngeoScaleselectorTemplateurl;return void 0!==a?a:"ngeo/scaleselector.html"});function bA(a){return{restrict:"A",scope:!0,controller:"NgeoScaleselectorController",templateUrl:a}}bA.$inject=["ngeoScaleselectorTemplateUrl"];w.directive("ngeoScaleselector",bA);
function cA(a,b,c){this.scales=a.$eval(c.ngeoScaleselector);a.$watch(function(){return Object.keys(this.scales).length}.bind(this),function(){this.zoomLevels=Object.keys(this.scales).map(Number);this.zoomLevels.sort(Fc)}.bind(this));this.b=a.$eval(c.ngeoScaleselectorMap);b=a.$eval(c.ngeoScaleselectorOptions);this.options=dA(b);this.f=a;this.g=null;this.currentScale=void 0;null!==T(this.b)&&(b=Xn(T(this.b)),void 0!==b&&(this.currentScale=this.$a(b)));E(this.b,I("view"),this.i,this);eA(this);a.scaleselectorCtrl=
this}u("ngeo.ScaleselectorController",cA);cA.$inject=["$scope","$element","$attrs"];function dA(a){void 0===a?a={dropup:!1}:void 0===a.dropup&&(a.dropup=!1);return a}cA.prototype.$a=function(a){return this.scales[a]};cA.prototype.getScale=cA.prototype.$a;cA.prototype.Zk=function(a){ao(T(this.b),a)};cA.prototype.changeZoom=cA.prototype.Zk;cA.prototype.c=function(){var a=T(this.b),b=this.scales[Xn(a)];this.f.$applyAsync(function(){this.currentScale=b}.bind(this))};
cA.prototype.i=function(){eA(this);this.c()};function eA(a){null!==a.g&&B(a.g);var b=T(a.b);a.g=E(b,I("resolution"),a.c,a)}w.controller("NgeoScaleselectorController",cA);function fA(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-scale-line";this.s=document.createElement("DIV");this.s.className=b+"-inner";this.c=document.createElement("DIV");this.c.className=b+" ol-unselectable";this.c.appendChild(this.s);this.u=null;this.B=void 0!==a.minWidth?a.minWidth:64;this.o=!1;this.D=void 0;this.v="";$t.call(this,{element:this.c,render:a.render?a.render:gA,target:a.target});E(this,I(hA),this.H,this);this.set(hA,a.units||iA)}A(fA,$t);var jA=[1,2,5];fA.prototype.f=function(){return this.get(hA)};
function gA(a){(a=a.frameState)?this.u=a.Z:this.u=null;kA(this)}fA.prototype.H=function(){kA(this)};
function kA(a){var b=a.u;if(b){var c=b.projection,d=Xe(c),b=c.sc(b.resolution,b.center)*d,d=a.B*b,c="",e=a.f();e==lA?(c=Pe.degrees,b/=c,d<c/60?(c="\u2033",b*=3600):d<c?(c="\u2032",b*=60):c="\u00b0"):e==mA?.9144>d?(c="in",b/=.0254):1609.344>d?(c="ft",b/=.3048):(c="mi",b/=1609.344):e==nA?(b/=1852,c="nm"):e==iA?1>d?(c="mm",b*=1E3):1E3>d?c="m":(c="km",b/=1E3):e==oA?.9144>d?(c="in",b*=39.37):1609.344>d?(c="ft",b/=.30480061):(c="mi",b/=1609.3472):Rc(!1,33);for(var e=3*Math.floor(Math.log(a.B*b)/Math.log(10)),
f;;){f=jA[(e%3+3)%3]*Math.pow(10,Math.floor(e/3));d=Math.round(f/b);if(isNaN(d)){a.c.style.display="none";a.o=!1;return}if(d>=a.B)break;++e}b=f+" "+c;a.v!=b&&(a.s.innerHTML=b,a.v=b);a.D!=d&&(a.s.style.width=d+"px",a.D=d);a.o||(a.c.style.display="",a.o=!0)}else a.o&&(a.c.style.display="none",a.o=!1)}var hA="units",lA="degrees",mA="imperial",nA="nautical",iA="metric",oA="us";function pA(a){gs.call(this);this.g=a;this.b={}}sa(pA,gs);var qA=[];l=pA.prototype;l.lb=function(a,b,c,d){ea(b)||(b&&(qA[0]=b.toString()),b=qA);for(var e=0;e<b.length;e++){var f=As(a,b[e],c||this.handleEvent,d||!1,this.g||this);if(!f)break;this.b[f.key]=f}return this};
l.hd=function(a,b,c,d,e){if(ea(b))for(var f=0;f<b.length;f++)this.hd(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.g||this,c=Bs(c),d=!!d,b=a&&a[os]?vs(a.f,String(b),c,d,e):a?(a=Cs(a))?vs(a,b,c,d,e):null:null,b&&(cl(b),delete this.b[b.key]);return this};l.removeAll=function(){Ra(this.b,function(a,b){this.b.hasOwnProperty(b)&&cl(a)},this);this.b={}};l.rb=function(){pA.Fc.rb.call(this);this.removeAll()};l.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function rA(){gs.call(this);this.f=new ss(this);this.V=this;this.T=null}sa(rA,gs);rA.prototype[os]=!0;l=rA.prototype;l.addEventListener=function(a,b,c,d){As(this,a,b,c,d)};l.removeEventListener=function(a,b,c,d){Gs(this,a,b,c,d)};
function sA(a,b){var c,d=a.T;if(d)for(c=[];d;d=d.T)c.push(d);a=a.V;d=b.type||b;if(ga(b))b=new ks(b,a);else if(b instanceof ks)b.target=b.target||a;else{var e=b;b=new ks(d,a);Xa(b,e)}var e=!0,f;if(c)for(var g=c.length-1;!b.g&&0<=g;g--)f=b.currentTarget=c[g],e=tA(f,d,!0,b)&&e;b.g||(f=b.currentTarget=a,e=tA(f,d,!0,b)&&e,b.g||(e=tA(f,d,!1,b)&&e));if(c)for(g=0;!b.g&&g<c.length;g++)f=b.currentTarget=c[g],e=tA(f,d,!1,b)&&e;return e}
l.rb=function(){rA.Fc.rb.call(this);this.f&&this.f.removeAll(void 0);this.T=null};l.lb=function(a,b,c,d){return this.f.add(String(a),b,!1,c,d)};l.hd=function(a,b,c,d){return this.f.remove(String(a),b,c,d)};function tA(a,b,c,d){b=a.f.listeners[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.fd&&g.je==c){var h=g.listener,k=g.Be||g.src;g.mc&&us(a.f,g);e=!1!==h.call(k,d)&&e}}return e&&0!=d.Fj};function uA(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}l=uA.prototype;l.clone=function(){return new uA(this.left,this.top,this.width,this.height)};l.contains=function(a){return a instanceof im?a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height:this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height};
l.distance=function(a){var b=a.x<this.left?this.left-a.x:Math.max(a.x-(this.left+this.width),0);a=a.y<this.top?this.top-a.y:Math.max(a.y-(this.top+this.height),0);return Math.sqrt(b*b+a*a)};l.ka=function(){return new jm(this.width,this.height)};l.la=function(){return new im(this.left+this.width/2,this.top+this.height/2)};l.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
l.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};l.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};l.translate=function(a,b){a instanceof im?(this.left+=a.x,this.top+=a.y):(this.left+=a,ha(b)&&(this.top+=b));return this};
l.scale=function(a,b){b=ha(b)?b:a;this.left*=a;this.width*=a;this.top*=b;this.height*=b;return this};function vA(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}Pf&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}function wA(a){var b=mm(a),c=new im(0,0),d;d=b?mm(b):document;var e;(e=!Pf||9<=Number(bg))||(km(d),e=!0);if(a==(e?d.documentElement:d.body))return c;a=vA(a);b=rm(km(b).b);c.x=a.left+b.x;c.y=a.top+b.y;return c}
function xA(a){"number"==typeof a&&(a+="px");return a}
function yA(a){var b=zA,c;a:{c=mm(a);if(c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))){c=c.display||c.getPropertyValue("display")||"";break a}c=""}if("none"!=(c||(a.currentStyle?a.currentStyle.display:null)||a.style&&a.style.display))return b(a);c=a.style;var d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}
function zA(a){var b=a.offsetWidth,c=a.offsetHeight,d=Sf&&!b&&!c;return ba(b)&&!d||!a.getBoundingClientRect?new jm(b,c):(a=vA(a),new jm(a.right-a.left,a.bottom-a.top))}function AA(a){var b=wA(a);a=yA(a);return new uA(b.x,b.y,a.width,a.height)};function BA(a,b,c){rA.call(this);this.target=a;this.handle=b||a;this.u=c||new uA(NaN,NaN,NaN,NaN);this.j=mm(a);this.b=new pA(this);a=qa(js,this.b);this.s?a.call(void 0):(this.o||(this.o=[]),this.o.push(ba(void 0)?pa(a,void 0):a));this.i=this.g=this.K=this.O=this.screenY=this.screenX=this.clientY=this.clientX=0;this.c=!1;this.B=0;As(this.handle,["touchstart","mousedown"],this.Qg,!1,this)}sa(BA,rA);var CA=aa.document&&aa.document.documentElement&&!!aa.document.documentElement.setCapture;
function DA(a,b){a.u=b||new uA(NaN,NaN,NaN,NaN)}l=BA.prototype;l.rb=function(){BA.Fc.rb.call(this);Gs(this.handle,["touchstart","mousedown"],this.Qg,!1,this);this.b.removeAll();CA&&this.j.releaseCapture();this.handle=this.target=null};
l.Qg=function(a){var b="mousedown"==a.type;if(this.c||b&&(!(ds?0==a.b.button:"click"==a.type||a.b.button&ns[0])||Sf&&Tf&&a.f))sA(this,"earlycancel");else{if(0==this.B)if(sA(this,new EA("start",this,a.clientX,a.clientY)))this.c=!0,b&&a.preventDefault();else return;else b&&a.preventDefault();var b=this.j,c=b.documentElement,d=!CA;this.b.lb(b,["touchmove","mousemove"],this.km,d);this.b.lb(b,["touchend","mouseup"],this.oe,d);CA?(c.setCapture(!1),this.b.lb(c,"losecapture",this.oe)):this.b.lb(b?b.parentWindow||
b.defaultView:window,"blur",this.oe);this.D&&this.b.lb(this.D,"scroll",this.Do,d);this.clientX=this.O=a.clientX;this.clientY=this.K=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.g=this.target.offsetLeft;this.i=this.target.offsetTop;this.v=rm(km(this.j).b)}};l.oe=function(a){this.b.removeAll();CA&&this.j.releaseCapture();this.c?(this.c=!1,sA(this,new EA("end",this,a.clientX,a.clientY,0,FA(this,this.g),GA(this,this.i)))):sA(this,"earlycancel")};
l.km=function(a){var b=1*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.c){var d=this.O-this.clientX,e=this.K-this.clientY;if(d*d+e*e>this.B)if(sA(this,new EA("start",this,a.clientX,a.clientY)))this.c=!0;else{this.s||this.oe(a);return}}c=HA(this,b,c);b=c.x;c=c.y;this.c&&sA(this,new EA("beforedrag",this,a.clientX,a.clientY,0,b,c))&&(IA(this,a,b,c),a.preventDefault())};
function HA(a,b,c){var d=rm(km(a.j).b);b+=d.x-a.v.x;c+=d.y-a.v.y;a.v=d;a.g+=b;a.i+=c;return new im(FA(a,a.g),GA(a,a.i))}l.Do=function(a){var b=HA(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;IA(this,a,b.x,b.y)};function IA(a,b,c,d){a.Jf(c,d);sA(a,new EA("drag",a,b.clientX,b.clientY,0,c,d))}function FA(a,b){var c=a.u;a=isNaN(c.left)?null:c.left;c=isNaN(c.width)?0:c.width;return Math.min(null!=a?a+c:Infinity,Math.max(null!=a?a:-Infinity,b))}
function GA(a,b){var c=a.u;a=isNaN(c.top)?null:c.top;c=isNaN(c.height)?0:c.height;return Math.min(null!=a?a+c:Infinity,Math.max(null!=a?a:-Infinity,b))}l.Jf=function(a,b){this.target.style.left=a+"px";this.target.style.top=b+"px"};function EA(a,b,c,d,e,f,g){ks.call(this,a);this.clientX=c;this.clientY=d;this.left=ba(f)?f:b.g;this.top=ba(g)?g:b.i}sa(EA,ks);function JA(){rA.call(this);this.c=[];this.j=[];this.O={};this.B=new pA(this);this.M=!1}sa(JA,rA);function KA(a,b){b.g=0;b.b=void 0;a.c.push(b)}function LA(a,b){a.$h=b}l=JA.prototype;l.sp=function(a){this.u=Qa(arguments,0)};
l.tb=function(){if(!this.M){for(var a=0,b=this.c.length;a<b;a++)for(var c=wm(this.c[a]),d=0,e=c.length;d<e;++d){var f=c[d],g=this.$h(f),h=r(g);this.O[h]=f;this.H&&(this.B.lb(f,"mouseover",this.sm),this.B.lb(f,"mouseout",this.rm));this.D&&(this.B.lb(g,"mouseover",this.qm),this.B.lb(g,"mouseout",this.pm));this.j.push(f);this.B.lb(g,["mousedown","touchstart"],this.Nm)}this.M=!0}};
l.rb=function(){this.B.Va();for(var a=0,b=this.c.length;a<b;a++){var c=this.c[a];c.g=void 0;c.b=void 0}this.c.length=0;this.j.length=0;this.O=null;MA(this);JA.Fc.rb.call(this)};function NA(a,b){for(var c=0,d=a.c.length;c<d;c++){var e=a.c[c];e.Tc=AA(e)}c=0;for(d=a.j.length;c<d;c++)e=a.j[c],e!=b&&(e.Tc=AA(e))}
l.Nm=function(a){var b=r(a.currentTarget);this.b=this.O[b];a:{for(var b=this.b,c=b.cloneNode(!0),d=b.getElementsByTagName("TEXTAREA"),e=c.getElementsByTagName("TEXTAREA"),f=0;f<d.length;f++)e[f].value=d[f].value;switch(b.tagName){case "TR":b=sm("TABLE",null,sm("TBODY",null,c));break a;case "TD":case "TH":b=sm("TABLE",null,sm("TBODY",null,sm("TR",null,c)));break a;case "TEXTAREA":c.value=b.value;default:b=c}}this.g=b;this.J&&Cm(this.g,this.J||[]);this.g.style.margin="0";this.g.style.position="absolute";
this.g.style.visibility="hidden";mm(this.b).body.appendChild(this.g);var c=wA(this.b),b=this.g,d=c,g,c=wA(b);d instanceof im&&(g=d.y,d=d.x);e=b.offsetLeft+(d-c.x);e instanceof im?(d=e.x,g=e.y):(d=e,g=b.offsetTop+(Number(g)-c.y));b.style.left=xA(d);b.style.top=xA(g);this.i=new BA(this.g);this.i.B=Math.pow(0,2);As(this.i,"start",this.um,!1,this);As(this.i,"end",this.om,!1,this);As(this.i,"earlycancel",this.Af,!1,this);this.i.Qg(a)};
l.um=function(a){sA(this,new OA("beforedragstart",0,0,this.b,null))?(this.K=this.b.parentNode,this.pa=xm(this.b),this.v=this.K,this.u?Cm(this.b,this.u||[]):this.b.style.visibility="hidden",a=yA(this.g),this.g.i=a.width/2,this.g.c=a.height/2,this.g.style.visibility="",this.b.style.display="none",NA(this,this.b),this.b.style.display="",As(this.i,"drag",this.tm,!1,this),sA(this,new OA("dragstart",0,0,this.b,this.g))):(a.preventDefault(),this.Af())};
l.tm=function(){var a=wA(this.g),a=new im(a.x+this.g.i,a.y+this.g.c),b;a:{b=null;if("none"!=this.b.style.display){b=this.b.parentNode;var c=AA(b);if(PA(a,c))break a}for(var c=0,d=this.c.length;c<d;c++){var e=this.c[c];if(e!=b&&PA(a,e.Tc)){b=e;break a}}b=null}var f;if(b){if(!b)throw Error("getHoverNextItem_ called with null hoverList.");var g,h,c=!1,d=void 0;switch(b.g){case 0:f=a.y;g=QA;h=RA;break;case 4:c=!0;case 2:f=a.x;g=SA;h=RA;break;case 5:c=!0;case 3:f=a.x,g=TA,h=UA}for(var e=null,k,m=wm(b),
n=0,p=m.length;n<p;n++){var q=m[n];if(q!=this.b){var t=g(q.Tc);if(c){var x=VA(q,a);ba(d)||(d=x);h(f,t)&&(void 0==k||x<d||x==d&&(h(t,k)||t==k))&&(e=q,k=t);x<d&&(d=x)}else h(f,t)&&(void 0==k||h(t,k))&&(e=q,k=t)}}f=null!==e&&VA(e,a)>d?null:e}else f=null;if(!sA(this,new OA("beforedragmove",0,0,this.b,this.g,0,0,b,f)))return!1;if(b)this.b.parentNode==b&&xm(this.b)==f||b.insertBefore(this.b,f),this.b.style.display="",b.b&&Bm(b,b.b);else for(this.b.style.display="none",g=0,h=this.c.length;g<h;g++)k=this.c[g],
k.b&&Dm(k,k.b);b!=this.v&&(this.v=b,NA(this,this.b));sA(this,new OA("dragmove",0,0,this.b,this.g,0,0,b,f));return!1};l.Af=function(){MA(this);this.i=this.g=this.pa=this.K=this.v=this.b=null;for(var a=0,b=this.c.length;a<b;a++)this.c[a].Tc=null;a=0;for(b=this.j.length;a<b;a++)this.j[a].Tc=null};l.om=function(){if(!sA(this,new OA("beforedragend",0,0,this.b,this.g)))return!1;MA(this);sA(this,new OA("dragend",0,0,this.b,this.g));this.Af();return!0};
function MA(a){js(a.i);a.g&&vm(a.g);a.b&&"none"==a.b.style.display&&(a.K.insertBefore(a.b,a.pa),a.b.style.display="");a.u&&a.b?Em(a.b,a.u||[]):a.b&&(a.b.style.visibility="");for(var b=0,c=a.c.length;b<c;b++){var d=a.c[b];d.b&&Dm(d,d.b)}}l.$h=function(a){return a};l.sm=function(a){Cm(a.currentTarget,this.H||[])};l.rm=function(a){Em(a.currentTarget,this.H||[])};l.qm=function(a){Cm(a.currentTarget,this.D||[])};l.pm=function(a){Em(a.currentTarget,this.D||[])};
function PA(a,b){return a.x>b.left&&a.x<b.left+b.width&&a.y>b.top&&a.y<b.top+b.height}function VA(a,b){a=a.Tc;return Math.abs(b.y-(a.top+(a.height-1)/2))}function QA(a){return a.top+a.height-1}function SA(a){return a.left+a.width-1}function TA(a){return a.left||0}function RA(a,b){return a<b}function UA(a,b){return a>b}function OA(a,b,c,d,e,f,g,h,k){ks.call(this,a);this.Hh=d;this.ol=e;this.Ym=h;this.Zm=k}sa(OA,ks);function WA(a){return{restrict:"A",link:function(b,c,d){function e(){for(var a=c.contents(),d=c.children(),e=0;e<d.length;++e)angular.element(d[e]).data("idx",e);null!==h&&h.Va();h=new JA;KA(h,c[0]);LA(h,function(a){return nm(g.handleClassName,a)});void 0!==g.draggerClassName&&(h.J=va(g.draggerClassName).split(" "));void 0!==g.currDragItemClassName&&h.sp(g.currDragItemClassName);var p=-1,q=null;As(h,"dragstart",function(a){p=-1;q=null;angular.element(a.ol).css("width",a.Hh.offsetWidth)});As(h,"dragmove",
function(a){var b=a.Zm;p=null===b?-1:angular.element(b).data("idx");q=a.Ym});As(h,"dragend",function(d){var e=angular.element(d.Hh).data("idx");null===q||p==e+1||-1==p&&e==c.children().length-1?c.append(a):-1!=p?p!=e&&(p>e&&p--,b.$apply(function(){f.splice(p,0,f.splice(e,1)[0])})):b.$apply(function(){f.push(f.splice(e,1)[0])})});h.tb()}var f=b.$eval(d.ngeoSortable)||[],g=function(a){void 0===a?a={handleClassName:"ngeo-sortable-handle"}:void 0===a.handleClassName&&(a.handleClassName="ngeo-sortable-handle");
return a}(b.$eval(d.ngeoSortableOptions)),h=null;b.$watchCollection(function(){return f},function(){f.length&&a(e,0)})}}}WA.$inject=["$timeout"];w.directive("ngeoSortable",WA);z.value("isDesktop",!0);
function XA(a,b,c){var d={projection:Te("epsg:"+(a.srid||21781))};Xa(d,a.mapViewConfig||{});this.map=new Xv({layers:[],view:new Qn(d),controls:a.mapControls||[new fA({target:document.getElementById("scaleline")}),new fu({ah:"",oq:""})],dc:a.mapInteractions||Qu({vg:!1,sh:!1}),Ki:!0,Li:!0});this.editFeatureActive=this.modalShareShown=this.toolsActive=this.loginActive=!1;$("body").tooltip({container:"body",trigger:"hover",selector:'[data-toggle="tooltip"]'});d=c.get("ngeoFeatures");this.drawFeatureLayer=
c.get("ngeoFeatureOverlayMgr").gb();this.drawFeatureLayer.Cc(d);var e=c.get("ngeoFeatureHelper");this.editFeatureVectorLayer=new fl({source:new rl({wrapX:!1,features:new xc}),style:function(a){return e.Dh(a)}});this.editFeatureVectorLayer.setMap(this.map);c.get("ngeoToolActivateMgr").Aa("mapTools",new Gw(this,"editFeatureActive"),!1);this.scaleSelectorOptions={dropup:!0};this.profileLine=null;Iw.call(this,a,b,c);b.$watch(function(){return this.gmfUser.username}.bind(this),function(a){null!==a&&this.loginActive&&
(this.loginActive=!1)}.bind(this))}A(XA,Iw);u("gmf.AbstractDesktopController",XA);XA.$inject=["config","$scope","$injector"];z.controller("AbstractDesktopController",XA);if("function"==typeof proj4){var YA=[242E4,103E4,29E5,135E4];proj4.defs("epsg:2056","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs");proj4.defs("EPSG:2056","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs");Ye(Te("epsg:2056"),YA);Ye(Te("EPSG:2056"),YA)};if("function"==typeof proj4){var ZA=[42E4,3E4,9E5,35E4];proj4.defs("epsg:21781","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs");proj4.defs("EPSG:21781","+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs");Ye(Te("epsg:21781"),ZA);Ye(Te("EPSG:21781"),ZA)};z.value("ngeoQueryOptions",{limit:20,queryCountFirst:!0});
function $A(a,b){XA.call(this,{srid:21781,mapViewConfig:{center:[632464,185457],zoom:3,Ra:[250,100,50,20,10,5,2,1,.5,.25,.1,.05]}},a,b);this.searchCoordinatesProjections=["EPSG:21781","EPSG:2056","EPSG:4326"];this.showInfobar=!0;this.scaleSelectorValues=[25E4,1E5,5E4,2E4,1E4,5E3,2E3,1E3,500,250,100,50];this.elevationLayers=["srtm"];this.profileLinesconfiguration={srtm:{}};this.mousePositionProjections=[{code:"EPSG:2056",label:"CH1903+ / LV03",filter:"ngeoNumberCoordinates::{x}, {y} m"},{code:"EPSG:21781",
label:"CH1903 / LV03",filter:"ngeoNumberCoordinates::{x}, {y} m"},{code:"EPSG:4326",label:"WGS84",filter:"ngeoDMSCoordinates:2"}];this.gridMergeTabs={merged_osm_times:["110","126","147"]};a=b.get("gettextCatalog");a.getString("merged_osm_times");a.getString("Add a theme");a.getString("Add a sub theme");a.getString("Add a layer")}A($A,XA);u("app.AlternativeDesktopController",$A);$A.$inject=["$scope","$injector"];Ob.controller("AlternativeDesktopController",$A);function aB(a,b){XA.call(this,{srid:21781,mapViewConfig:{center:[632464,185457],zoom:3,Ra:[250,100,50,20,10,5,2,1,.5,.25,.1,.05]}},a,b);this.searchCoordinatesProjections=["EPSG:21781","EPSG:2056","EPSG:4326"];this.scaleSelectorValues=[25E4,1E5,5E4,2E4,1E4,5E3,2E3,1E3,500,250,100,50];this.elevationLayers=["aster","srtm"];this.selectedElevationLayer=this.elevationLayers[0];this.profileLinesconfiguration={aster:{color:"#0000A0"},srtm:{color:"#00A000"}};this.mousePositionProjections=[{code:"EPSG:2056",
label:"CH1903+ / LV03",filter:"ngeoNumberCoordinates::{x}, {y} m"},{code:"EPSG:21781",label:"CH1903 / LV03",filter:"ngeoNumberCoordinates::{x}, {y} m"},{code:"EPSG:4326",label:"WGS84",filter:"ngeoDMSCoordinates:2"}];a=b.get("gettextCatalog");a.getString("Add a theme");a.getString("Add a sub theme");a.getString("Add a layer")}A(aB,XA);u("app.DesktopController",aB);aB.$inject=["$scope","$injector"];Ob.controller("DesktopController",aB);function bB(a){yo.call(this,{handleEvent:bb});this.s=null;this.o=a.type;this.D=a.minPoints?a.minPoints:"Polygon"===this.o?3:2;this.f=null;this.j=[];this.i=null;this.B=new fl({source:new rl({$b:!1,wrapX:a.wrapX?a.wrapX:!1}),style:a.style?a.style:Oo(),Yb:!0,Zb:!0});E(this,I("active"),this.u,this);this.set("dirty",!1);this.set("drawing",!1);this.set("valid",!1)}A(bB,yo);u("ngeo.interaction.MobileDraw",bB);
bB.prototype.setMap=function(a){this.c&&this.s&&B(this.s);yo.prototype.setMap.call(this,a);a&&(this.s=E(T(a),I(Rn),this.v,this));this.u()};bB.prototype.qe=function(){return this.get("dirty")};bB.prototype.getDirty=bB.prototype.qe;bB.prototype.xd=function(){return this.get("drawing")};bB.prototype.getDrawing=bB.prototype.xd;bB.prototype.cg=function(){return this.get("valid")};bB.prototype.getValid=bB.prototype.cg;bB.prototype.getFeature=function(){return this.f};bB.prototype.getFeature=bB.prototype.getFeature;
bB.prototype.md=function(){var a=this.getActive(),b=this.xd();if(a&&b){var b=this.i.G().N(),c;"Point"===this.o?(this.f||(this.f=new yi(new oj(b)),F(this,new Fo("drawstart",this.f))),a=this.f.G(),a.fa(b)):("LineString"===this.o&&(this.j.push(this.i),this.f?(a=this.f.G(),c=a.N(),c.push(b.slice()),a.fa(c)):(c=[b.slice(),b.slice()],this.f=new yi(new dj(c)),F(this,new Fo("drawstart",this.f)))),this.qe()&&this.set("dirty",!1),a=this.cg(),"LineString"===this.o&&(c.length>=this.D?a||this.set("valid",!0):
a&&this.set("valid",!1)),this.i=null,cB(this))}};bB.prototype.addToDrawing=bB.prototype.md;bB.prototype.yh=function(){this.setActive(!1);this.setActive(!0)};bB.prototype.clearDrawing=bB.prototype.yh;bB.prototype.oc=function(){var a=this.getActive(),b=this.xd();a&&b&&(this.i&&this.md(),this.set("drawing",!1),F(this,new Fo("drawend",this.f)))};bB.prototype.finishDrawing=bB.prototype.oc;
bB.prototype.u=function(){var a=this.c,b=this.getActive();if(a&&b)this.set("drawing",!0),dB(this),cB(this),"Point"===this.o&&this.md();else{if(this.f||0<this.j.length)this.i=this.f=null,S(this.B).clear(!0);this.j=[];this.set("dirty",!1);this.set("drawing",!1);this.set("valid",!1)}this.B.setMap(b?a:null)};
bB.prototype.v=function(){var a=this.getActive(),b=this.xd();if(a&&b)if(dB(this),"Point"===this.o)this.md();else{if(this.f){a=T(this.c).la();if("LineString"===this.o){var b=this.f.G(),c=b.N();c.pop();c.push(a);b.fa(c)}this.qe()||this.set("dirty",!0)}cB(this)}};function dB(a){var b=T(a.c).la();a.i?a.i.G().fa(b):a.i=new yi(new oj(b))}function cB(a){var b=[];a.f&&b.push(a.f);a.i&&b.push(a.i);var c=S(a.B);c.clear(!0);il(c,b);il(c,a.j)};function eB(a,b){b=void 0!==b?b:{};Xa(b,{Lf:!1});yx.call(this,a,b)}A(eB,yx);u("ngeo.interaction.MeasureLengthMobile",eB);eB.prototype.j=function(a,b){return new bB({type:"LineString",style:a,source:b})};z.value("gmfMobileMeasureLengthTemplateUrl",function(a,b){a=b.gmfMobileMeasureLengthTemplateurl;return void 0!==a?a:"gmf/mobilemeasurelength.html"});function fB(a){return{restrict:"A",scope:{active:"=gmfMobileMeasurelengthActive",decimals:"<?gmfMobileMeasurelengthDecimals",map:"=gmfMobileMeasurelengthMap",sketchStyle:"=?gmfMobileMeasureLengthSketchstyle"},controller:"GmfMobileMeasureLengthController",controllerAs:"ctrl",bindToController:!0,templateUrl:a}}fB.$inject=["gmfMobileMeasureLengthTemplateUrl"];
z.directive("gmfMobileMeasurelength",fB);
function gB(a,b,c){a.$watch(function(){return this.active}.bind(this),function(a){this.measure.setActive(a)}.bind(this));void 0===this.sketchStyle&&(this.sketchStyle=new U({fill:new mi({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ri({color:"rgba(0, 0, 0, 0.5)",W:[10,10],width:2}),image:new Xr({stroke:new ri({color:"rgba(0, 0, 0, 0.7)",width:2}),points:4,radius:8,ed:0,angle:0})}));this.measure=new eB(c("ngeoUnitPrefix"),{decimals:this.decimals,sketchStyle:this.sketchStyle});this.measure.setActive(this.active);
b(this.measure);this.map.f.push(this.measure);var d=this.drawInteraction=this.measure.f;b(d);Object.defineProperty(this,"hasPoints",{get:function(){return null!==this.drawInteraction.getFeature()}});this.dirty=!1;E(d,I("dirty"),function(){(this.dirty=d.qe())&&a.$apply()},this);this.drawing=!1;E(d,I("drawing"),function(){this.drawing=d.xd()},this);this.valid=!1;E(d,I("valid"),function(){this.valid=d.cg()},this)}gB.$inject=["$scope","ngeoDecorateInteraction","$filter"];gB.prototype.Uk=function(){this.drawInteraction.md()};
gB.prototype.addPoint=gB.prototype.Uk;gB.prototype.clear=function(){this.drawInteraction.yh()};gB.prototype.clear=gB.prototype.clear;gB.prototype.finish=function(){this.drawInteraction.oc()};gB.prototype.finish=gB.prototype.finish;gB.prototype.If=function(){this.active=!1};gB.prototype.deactivate=gB.prototype.If;z.controller("GmfMobileMeasureLengthController",gB);function hB(a){a=void 0!==a?a:{};Xa(a,{Lf:!1});Yo.call(this,a)}A(hB,Yo);u("ngeo.interaction.MeasurePointMobile",hB);hB.prototype.j=function(a,b){return new bB({type:"Point",style:a,source:b})};hB.prototype.Ae=function(a){var b=this.o.G();T(this.c).da();var c=bp(b,this.decimals),b=Ji(b);a(c,b)};z.value("gmfMobileMeasurePointTemplateUrl",function(a,b){a=b.gmfMobileMeasurePointTemplateurl;return void 0!==a?a:"gmf/mobilemeasurepoint.html"});function iB(a){return{restrict:"A",scope:{active:"=gmfMobileMeasurepointActive",decimals:"<?gmfMobileMeasurepointDecimals",getLayersFn:"&gmfMobileMeasurepointLayers",map:"=gmfMobileMeasurepointMap",sketchStyle:"=?gmfMobileMeasurepointSketchstyle"},controller:"GmfMobileMeasurePointController",controllerAs:"ctrl",bindToController:!0,templateUrl:a}}
iB.$inject=["gmfMobileMeasurePointTemplateUrl"];z.directive("gmfMobileMeasurepoint",iB);
function jB(a,b,c,d,e){this.c=c;this.f=d;this.na=a;b.$watch(function(){return this.active}.bind(this),function(a){this.measure.setActive(a);this.measure.getActive()?(a=T(this.map),this.b=E(a,"propertychange",this.f(this.g.bind(this),300,!0),this),this.g()):this.b&&(B(this.b),this.b=null)}.bind(this));this.layers=this.getLayersFn();void 0===this.sketchStyle&&(this.sketchStyle=new U({fill:new mi({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ri({color:"rgba(0, 0, 0, 0.5)",W:[10,10],width:2}),image:new Xr({stroke:new ri({color:"rgba(0, 0, 0, 0.7)",
width:2}),points:4,radius:8,ed:0,angle:0})}));this.measure=new hB({decimals:this.decimals,sketchStyle:this.sketchStyle});this.measure.setActive(this.active);e(this.measure);this.map.f.push(this.measure);this.drawInteraction=this.measure.f;e(this.drawInteraction);this.b=null}jB.$inject=["gettextCatalog","$scope","gmfAltitude","ngeoDebounce","ngeoDecorateInteraction"];jB.prototype.If=function(){this.active=!1};jB.prototype.deactivate=jB.prototype.If;jB.prototype.translate=function(a){return this.na.getString(a)};
jB.prototype.translate=jB.prototype.translate;
jB.prototype.g=function(){var a=T(this.map).la();this.c.vd(a,{layers:this.layers.join(",")}).then(function(a){var c=this.measure.wa,d=document.createElement("div");d.className="gmf-mobile-measure-point-altitude";Ra(a,function(a,b){if(null!==a){var c=document.createElement("div");c.className="gmf-mobile-measure-altitude";a=1E3<a?parseFloat((a/1E3).toPrecision(3))+" km":parseFloat(a.toPrecision(3))+" m";c.innerHTML=[this.translate(b),": ",a].join("");d.appendChild(c)}},this);(a=nm("gmf-mobile-measure-point-altitude",
c))&&a.remove();c.appendChild(d)}.bind(this))};z.controller("GmfMobileMeasurePointController",jB);z.directive("gmfMobileNav",function(){return{restrict:"A",controller:"gmfMobileNavController",bindToController:!0,controllerAs:"navCtrl",scope:!0,link:function(a,b,c,d){d.tb(b)}}});function kB(){this.c=[];this.f=this.g=this.b=null;this.back=this.i.bind(this)}u("gmf.MobileNavController",kB);z.controller("gmfMobileNavController",kB);
kB.prototype.tb=function(a){var b=lB;this.b=$(a.find("."+b.Ib+"."+b.dh));this.g=$(a.find("> header"));this.f=$(a.find("header > ."+b.pk));a.find("[data-toggle=slide-in]").on("click",function(a){var b=lB,e=$(a.currentTarget).parents("."+b.dh);this.c.push(e);e.addClass(b.nf).removeClass(b.Ib);a=$($(a.currentTarget).attr("data-target"));a.addClass(b.Ib);mB(this,a,!1);this.b=a}.bind(this));this.f.click(this.back.bind(this))};
function mB(a,b,c){var d=lB;a.g.toggleClass(d.BACK,c);a.g.find("nav:not(."+d.Ib+" +)").remove();a.g.find("nav."+d.Ib).removeClass(d.Ib).addClass(d.nf);a.f.toggleClass(d.Ib,0<a.c.length);var e=$("<nav>");e.append($("<span>",{text:b.attr("data-header-title")}));a.g.append(e);window.setTimeout(function(){e.css("display","none");e.offset();e.css("display","");window.setTimeout(function(){e.position();e.addClass(nB)},0)},0)}z.controller("gmfMobileNavController",kB);
kB.prototype.i=function(){if(!(0>=this.c.length)){var a=lB;this.b.removeClass(a.Ib);var b=this.c.pop();b.addClass(a.Ib).removeClass(a.nf);mB(this,b,!0);this.b=b}};var nB="gmf-mobile-nav-active",lB={Ib:nB,BACK:"gmf-mobile-nav-go-back",pk:"gmf-mobile-nav-go-back",dh:"gmf-mobile-nav-slide",nf:"gmf-mobile-nav-slide-out"};
z.directive("gmfMobileNavBack",function(){return{require:"^^gmfMobileNav",restrict:"A",scope:!1,link:function(a,b,c,d){a.$watch(c.gmfMobileNavBack,function(a){!0===a&&null!==d.b&&d.b.is(b[0])&&d.i()})}}});z.directive("gmfMobileNavBackOnClick",function(){return{require:"^^gmfMobileNav",restrict:"A",scope:!1,link:function(a,b,c,d){b.on("click",function(){null!==d.b&&d.b.is(b[0])&&d.i()})}}});function oB(a){Object.defineProperty(a,"tracking",{get:function(){return a.get("tracking")},set:function(b){pB(a,b)}})}oB.$inject=["geolocation"];w.value("ngeoDecorateGeolocation",oB);function qB(a){uc.call(this);a=a||{};this.c=null;this.i=gf;this.f=void 0;E(this,I("projection"),this.bo,this);E(this,I("tracking"),this.co,this);void 0!==a.projection&&this.Fb(Te(a.projection));void 0!==a.Tp&&this.set("trackingOptions",a.Tp);pB(this,void 0!==a.Sp?a.Sp:!1)}A(qB,uc);l=qB.prototype;l.sa=function(){pB(this,!1);uc.prototype.sa.call(this)};l.bo=function(){var a=this.da();a&&(this.i=Ze(Te("EPSG:4326"),a),this.c&&this.set("position",this.i(this.c)))};
l.co=function(){if(ai){var a=this.get("tracking");a&&void 0===this.f?this.f=Ub.navigator.geolocation.watchPosition(this.Po.bind(this),this.Qo.bind(this),this.get("trackingOptions")):a||void 0===this.f||(Ub.navigator.geolocation.clearWatch(this.f),this.f=void 0)}};
l.Po=function(a){var b=a.coords;this.set("accuracy",b.accuracy);this.set("altitude",null===b.altitude?void 0:b.altitude);this.set("altitudeAccuracy",null===b.altitudeAccuracy?void 0:b.altitudeAccuracy);this.set("heading",null===b.heading?void 0:Ce(b.heading));this.c?(this.c[0]=b.longitude,this.c[1]=b.latitude):this.c=[b.longitude,b.latitude];a=this.i(this.c);this.set("position",a);this.set("speed",null===b.speed?void 0:b.speed);a=this.c;var c=b.accuracy,b=[],d;for(d=0;32>d;++d)Ic(b,Wo.offset(a,c,
2*Math.PI*d/32));b.push(b[0],b[1]);a=new wj(null);a.S("XY",b,[b.length]);a.od(this.i);this.set("accuracyGeometry",a);this.b()};l.Qo=function(a){a.type="error";pB(this,!1);F(this,a)};l.vd=function(){return this.get("altitude")};l.da=function(){return this.get("projection")};l.Fb=function(a){this.set("projection",a)};function pB(a,b){a.set("tracking",b)};u("ngeo.MobileGeolocationEventType",{ERROR:"mobile-geolocation-error"});w.directive("ngeoMobileGeolocation",function(){return{restrict:"A",scope:{getMobileMapFn:"&ngeoMobileGeolocationMap",getMobileGeolocationOptionsFn:"&ngeoMobileGeolocationOptions"},controller:"NgeoMobileGeolocationController",controllerAs:"ctrl"}});
function rB(a,b,c,d,e){b.on("click",this.Qj.bind(this));b=a.getMobileMapFn();this.s=a;this.c=b;var f=a.getMobileGeolocationOptionsFn()||{};this.Sb=e;this.g=d.gb();this.Da=new qB({projection:T(b).da()});this.Da.on("error",function(b){sB(this);this.Sb.error(b.message);a.$emit("mobile-geolocation-error",b)},this);this.f=new yi;f.positionFeatureStyle&&this.f.setStyle(f.positionFeatureStyle);this.lc=new yi;f.accuracyFeatureStyle&&this.lc.setStyle(f.accuracyFeatureStyle);this.j=f.zoom;this.o=this.b=!1;
E(this.Da,I("accuracyGeometry"),function(){zi(this.lc,this.Da.get("accuracyGeometry")||null)},this);E(this.Da,I("position"),function(a){this.Mg(a)},this);d=T(b);E(d,I(Rn),this.i,this);E(d,I(Zl),this.i,this);E(d,I(Sn),this.i,this);c(this.Da)}u("ngeo.MobileGeolocationController",rB);rB.$inject=["$scope","$element","ngeoDecorateGeolocation","ngeoFeatureOverlayMgr","ngeoNotification"];
rB.prototype.Qj=function(){if(this.Da.get("tracking")){var a=this.Da.get("position");if(void 0===a)sB(this),this.s.$emit("mobile-geolocation-error",null);else{var b=T(this.c).la();a[0]===b[0]&&a[1]===b[1]?sB(this):(sB(this),tB(this))}}else tB(this)};rB.prototype.toggleTracking=rB.prototype.Qj;function tB(a){a.g.ra(a.f);a.g.ra(a.lc);a.b=!0;pB(a.Da,!0)}function sB(a){a.g.clear();a.b=!1;pB(a.Da,!1);a.Sb.clear()}
rB.prototype.Mg=function(){var a=this.Da.get("position"),b=new oj(a);zi(this.f,b);this.b&&(this.o=!0,Zn(T(this.c),a),void 0!==this.j&&ao(T(this.c),this.j),this.o=!1)};rB.prototype.i=function(){this.b&&!this.o&&(this.b=!1)};w.controller("NgeoMobileGeolocationController",rB);z.value("isMobile",!0);z.value("gmfRasterUrl","https://geomapfish-demo.camptocamp.net/2.1/wsgi/raster");
function uB(a,b,c){this.searchOverlayVisible=this.rightNavVisible=this.leftNavVisible=!1;this.searchListeners={open:function(){this.searchOverlayVisible=!0}.bind(this),close:function(){this.searchOverlayVisible=!1}.bind(this)};this.mobileGeolocationOptions={positionFeatureStyle:a.positionFeatureStyle||new U({image:new ji({radius:6,fill:new mi({color:"rgba(230, 100, 100, 1)"}),stroke:new ri({color:"rgba(230, 40, 40, 1)",width:2})})}),accuracyFeatureStyle:a.accuracyFeatureStyle||new U({fill:new mi({color:"rgba(100, 100, 230, 0.3)"}),
stroke:new ri({color:"rgba(40, 40, 230, 1)",width:2})}),zoom:a.geolocationZoom||9};var d={projection:Te("epsg:"+(a.srid||21781))};Xa(d,a.mapViewConfig||{});this.map=new Xv({layers:[],view:new Qn(d),controls:a.mapControls||[new fA,new fu({ah:"",oq:""})],dc:a.mapInteractions||Qu({vg:!1})});Iw.call(this,a,b,c);var e=document.querySelector("main");this.b=new BA(e,document.querySelector("main .overlay"));As(this.b,"start",function(){angular.element(e).addClass("dragging")});this.i=angular.element(document.querySelector(".gmf-mobile-nav-left")).width();
As(this.b,"end",function(a){angular.element(e).removeClass("dragging");angular.element(a.target.target).css("transform","");Math.abs(FA(this.b,this.b.g))>this.i/2&&b.$apply(function(){this.Fi()}.bind(this))}.bind(this))}A(uB,Iw);u("gmf.AbstractMobileController",uB);uB.$inject=["config","$scope","$injector"];uB.prototype.Lp=function(){if(this.leftNavVisible=!this.leftNavVisible){var a=this.i;this.b.Jf=function(b){this.target.style.transform="translateX("+(a+b)+"px)"};DA(this.b,new uA(-a,0,a,0))}};
uB.prototype.toggleLeftNavVisibility=uB.prototype.Lp;uB.prototype.Np=function(){if(this.rightNavVisible=!this.rightNavVisible){var a=this.i;this.b.Jf=function(b){this.target.style.transform="translateX("+(-a+b)+"px)"};DA(this.b,new uA(0,0,a,0))}};uB.prototype.toggleRightNavVisibility=uB.prototype.Np;uB.prototype.Fi=function(){this.leftNavVisible=this.rightNavVisible=!1};uB.prototype.hideNav=uB.prototype.Fi;uB.prototype.Qi=function(){return this.leftNavVisible||this.rightNavVisible};
uB.prototype.navIsVisible=uB.prototype.Qi;uB.prototype.Wm=function(){this.searchOverlayVisible=!1};uB.prototype.hideSearchOverlay=uB.prototype.Wm;uB.prototype.rn=function(){return this.leftNavVisible};uB.prototype.leftNavIsVisible=uB.prototype.rn;uB.prototype.pp=function(){return this.rightNavVisible};uB.prototype.rightNavIsVisible=uB.prototype.pp;z.controller("AbstractMobileController",uB);function vB(a,b){uB.call(this,{srid:21781,mapViewConfig:{center:[632464,185457],zoom:3,Ra:[250,100,50,20,10,5,2,1,.5,.25,.1,.05]}},a,b);this.elevationLayers=["aster","srtm"];this.searchCoordinatesProjections=["EPSG:21781","EPSG:2056","EPSG:4326"]}A(vB,uB);u("app.MobileController",vB);vB.$inject=["$scope","$injector"];Ob.controller("MobileController",vB);function wB(a,b){var c=b.exportgpxkml;return function(b,e,f){e=$("<input>").attr({type:"hidden",name:"format",value:e});f=$("<input>").attr({type:"hidden",name:"name",value:f});b=$("<input>").attr({type:"hidden",name:"doc",value:b});var g=$("<form>").attr({method:"POST",action:c});g.append(e,f,b);angular.element(a[0].body).append(g);g[0].submit();g.remove()}}wB.$inject=["$document","gmfServiceUrls"];z.factory("gmfExportFeatures",wB);var xB=[4E3,3750,3500,3250,3E3,2750,2500,2250,2E3,1750,1500,1250,1E3,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,.5],yB=new bh({extent:[42E4,3E4,9E5,35E4],Ra:xB,og:xB.map(function(a,b){return String(b)})});function zB(a){dh.call(this,{xa:[AB],url:"https://ows{1-4}.asitvd.ch/wmts/1.0.0/{Layer}/default/default/0/21781/{TileMatrix}/{TileRow}/{TileCol}.png",projection:"EPSG:21781",requestEncoding:"REST",layer:a.layer,style:"default",matrixSet:"21781",format:"image/png",Na:yB})}A(zB,dh);
u("gmf.source.AsitVD",zB);var AB=new zf({html:"g\u00e9odonn\u00e9es &copy; Etat de Vaud & &copy; contributeurs OpenStreetMap"});var BB=[4E3,3750,3500,3250,3E3,2750,2500,2250,2E3,1750,1500,1250,1E3,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,.5],CB=new bh({extent:[42E4,3E4,9E5,35E4],Ra:BB,og:BB.map(function(a,b){return String(b)})});
function DB(a){var b=a.format?a.format:"png";dh.call(this,{xa:[EB],url:"https://wmts{5-9}.geo.admin.ch/1.0.0/{Layer}/default/{Time}/21781/{TileMatrix}/{TileRow}/{TileCol}."+b,dimensions:{Time:a.timestamp},projection:"EPSG:21781",requestEncoding:"REST",layer:a.layer,style:"default",matrixSet:"21781",format:"image/"+b,Na:CB})}A(DB,dh);u("gmf.source.Swisstopo",DB);var EB=new zf({html:'&copy; <a href="http://www.swisstopo.admin.ch">swisstopo</a>'});(function(){function a(a){a.put("ngeo/popup.html",'<h4 class="popover-title ngeo-popup-title"> <span ng-bind-html=title></span> <button type=button class=close ng-click="open = false"> &times;</button> </h4> <div class=popover-content ng-bind-html=content></div> ');a.put("ngeo/datepicker.html","<div class=ngeo-datepicker> <form name=dateForm class=ngeo-datepicker-form novalidate> <div ng-if=\"::datepickerCtrl.time.widget === 'datepicker'\"> <div class=ngeo-datepicker-start-date> <span ng-if=\"::datepickerCtrl.time.mode === 'range'\" translate>From:</span> <span ng-if=\"::datepickerCtrl.time.mode !== 'range'\" translate>Date:</span> <input name=sdate ui-date=datepickerCtrl.sdateOptions ng-model=datepickerCtrl.sdate required> </div> <div class=ngeo-datepicker-end-date ng-if=\"::datepickerCtrl.time.mode === 'range'\"> <span translate>To:</span> <input name=edate ui-date=datepickerCtrl.edateOptions ng-model=datepickerCtrl.edate required> </div> </div> </form> </div> ");
a.put("gmf/drawfeature.html",'<ngeo-drawfeature ngeo-btn-group class=btn-group ngeo-drawfeature-active=efCtrl.drawActive ngeo-drawfeature-map=efCtrl.map> <a data-toggle=tooltip title="{{\'Draw a point on the map\' | translate}}" href ngeo-btn ngeo-drawpoint class="btn btn-default ngeo-drawfeature-point" ng-class="{active: dfCtrl.drawPoint.active}" ng-model=dfCtrl.drawPoint.active> <span class="gmf-icon gmf-icon-point"></span> </a> <a data-toggle=tooltip title="{{\'Draw a line on the map\' | translate}}" href ngeo-btn ngeo-measurelength class="btn btn-default ngeo-drawfeature-linestring" ng-class="{active: dfCtrl.measureLength.active}" ng-model=dfCtrl.measureLength.active> <span class="gmf-icon gmf-icon-line"></span> </a> <a data-toggle=tooltip title="{{\'Draw a polygon on the map\' | translate}}" href ngeo-btn ngeo-measurearea class="btn btn-default ngeo-drawfeature-polygon" ng-class="{active: dfCtrl.measureArea.active}" ng-model=dfCtrl.measureArea.active> <span class="gmf-icon gmf-icon-polygon"></span> </a> <a data-toggle=tooltip title="{{\'Draw a circle on the map\' | translate}}" href ngeo-btn ngeo-measureazimut class="btn btn-default ngeo-drawfeature-circle" ng-class="{active: dfCtrl.measureAzimut.active}" ng-model=dfCtrl.measureAzimut.active> <span class="gmf-icon gmf-icon-circle"></span> </a> <a data-toggle=tooltip title="{{\'Draw a rectangle on the map\' | translate}}" href ngeo-btn ngeo-drawrectangle class="btn btn-default ngeo-drawfeature-rectangle" ng-class="{active: dfCtrl.drawRectangle.active}" ng-model=dfCtrl.drawRectangle.active> <span class="gmf-icon gmf-icon-rectangle"></span> </a> <a data-toggle=tooltip title="{{\'Draw a text label on the map\' | translate}}" href ngeo-btn ngeo-drawtext class="btn btn-default ngeo-drawfeature-text" ng-class="{active: dfCtrl.drawText.active}" ng-model=dfCtrl.drawText.active> <span class="gmf-icon gmf-icon-text"></span> </a> </ngeo-drawfeature> <div ng-switch=efCtrl.selectedFeature class=gmf-drawfeature-featurelistctn> <div ng-switch-when=null> <div ng-show="efCtrl.getFeaturesArray().length > 0"> <div class=ngeo-drawfeature-actionbuttons> <button type=button data-toggle=dropdown aria-haspopup=true aria-expanded=false ngeo-exportfeatures ngeo-exportfeatures-features=efCtrl.features class="btn btn-link btn-sm"> <span class="fa fa-mail-forward"></span> {{\'Export\' | translate}} <span class=caret></span> </button> <button ng-click=efCtrl.clearFeatures() class="btn btn-link btn-xs"> <span class="fa fa-trash"></span> {{\'Delete All\' | translate}} </button> </div> <div class=gmf-eol></div> <div class="gmf-drawfeature-featurelist list-group list-group-sm"> <button role=button class=list-group-item ng-repeat="feature in efCtrl.getFeaturesArray()" ng-click=efCtrl.selectFeatureFromList(feature);> {{ feature.get(efCtrl.nameProperty) }} </button> </div> </div> </div> <div ng-switch-default> <button ng-click="efCtrl.selectedFeature = null;" class="btn btn-link btn-xs"> <span class="fa fa-arrow-left"></span> {{\'List\' | translate}} </button> <div class=ngeo-drawfeature-actionbuttons> <button type=button data-toggle=dropdown aria-haspopup=true aria-expanded=false ngeo-exportfeatures ngeo-exportfeatures-features=efCtrl.selectedFeatures class="btn btn-link btn-xs"> <span class="fa fa-mail-forward"></span> {{\'Export\' | translate}} <span class=caret></span> </button> <button ng-click=efCtrl.removeFeature(efCtrl.selectedFeature); class="btn btn-link btn-xs"> <span class="fa fa-trash"></span> {{\'Delete\' | translate}} </button> </div> <div class=gmf-eol></div> <gmf-featurestyle gmf-featurestyle-feature=efCtrl.selectedFeature> </gmf-featurestyle> </div> </div> ');
a.put("gmf/authentication.html",'<div ng-if=authCtrl.gmfUser.username> <div class=form-group> <span>{{\'Logged in as\' | translate}}</span> <strong>{{ ::authCtrl.gmfUser.username }}</strong>. </div> <form name=logoutForm role=form ng-submit=authCtrl.logout() ng-controller=GmfAuthenticationController ng-class="{\'has-error\': authCtrl.error}" ng-if=!authCtrl.changingPassword> <div class=form-group> <input type=submit class="form-control btn btn-primary" value="{{\'Logout\' | translate}}"> </div> <span ng-show=authCtrl.error class="gmf-authentication-error help-block"></span> <div class=form-group> <input type=button class="form-control btn btn-default" value="{{\'Change password\' | translate}}" ng-click="authCtrl.changingPassword = true"> </div> </form> <form name=changePasswordForm role=form ng-submit=authCtrl.changePassword() ng-controller=GmfAuthenticationController ng-class="{\'has-error\': authCtrl.error}" ng-if=authCtrl.changingPassword> <div class=form-group> <input type=password class=form-control name=oldpassword ng-model=authCtrl.oldPwdVal placeholder="{{\'Old password\' | translate}}"> </div> <div class=form-group> <input type=password class=form-control name=newpassword ng-model=authCtrl.newPwdVal placeholder="{{\'New password\' | translate}}"> </div> <div class=form-group> <input type=password class=form-control name=newpasswordconfirm ng-model=authCtrl.newPwdConfVal placeholder="{{\'Confirm new password\' | translate}}"> </div> <div class=form-group> <input type=submit class="form-control btn btn-primary" value="{{\'Change password\' | translate}}"> </div> <div class=form-group> <span ng-show=authCtrl.error class="gmf-authentication-error help-block"></span> <input type=button class="form-control btn btn-default" value="{{\'Cancel\' | translate}}" ng-click=authCtrl.changePasswordReset()> </div> </form> <ngeo-modal ng-model=authCtrl.changePasswordModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{\'Password Changed\' | translate}} </h4> </div> <div class=modal-body> {{\'Your password has succesfully been changed.\' | translate}} </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal>{{\'OK\' | translate}}</button> </div> </ngeo-modal> </div> <div ng-if=!authCtrl.gmfUser.username> <form name=loginForm role=form ng-submit=authCtrl.login() ng-controller=GmfAuthenticationController ng-class="{\'has-error\': authCtrl.error}"> <div class=form-group> <input type=text class=form-control name=login ng-model=authCtrl.loginVal placeholder="{{\'Username\' | translate}}"> </div> <div class=form-group> <input type=password class=form-control name=password ng-model=authCtrl.pwdVal placeholder="{{\'Password\' | translate}}"> </div> <div class=form-group> <input type=submit class="form-control btn btn-primary" value="{{\'Connect\' | translate}}"> </div> <span ng-show=authCtrl.error class="gmf-authentication-error help-block"></span> <div class=form-group> <a ng-click=authCtrl.resetPassword() href>{{\'Password forgotten?\' | translate}}</a> </div> </form> <ngeo-modal ng-model=authCtrl.resetPasswordModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{\'Password forgotten?\' | translate}} </h4> </div> <div class=modal-body> {{ ::authCtrl.translate( \'A new password has just been sent to you by e-mail.\') }} </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal>{{\'OK\' | translate}}</button> </div> </ngeo-modal> </div> ');
a.put("gmf/editfeature.html",'<div> <div ng-switch=efCtrl.feature> <a ng-switch-when=null ng-if=efCtrl.geomType href ngeo-btn ngeo-createfeature ngeo-createfeature-active=efCtrl.createActive ngeo-createfeature-features=::efCtrl.features ngeo-createfeature-geom-type=::efCtrl.geomType ngeo-createfeature-map=::efCtrl.map class="btn btn-default" ng-class="{active: efCtrl.createActive}" ng-model=efCtrl.createActive> <span ng-switch=::efCtrl.geomType> <span ng-switch-when=Point> <span class="gmf-icon gmf-icon-point"></span> {{\'Draw new point\' | translate}} </span> <span ng-switch-when=LineString> <span class="gmf-icon gmf-icon-line"></span> {{\'Draw new linestring\' | translate}} </span> <span ng-switch-when=Polygon> <span class="gmf-icon gmf-icon-polygon"></span> {{\'Draw new polygon\' | translate}} </span> </span> </a> <div ng-switch-default> <ngeo-modal ng-model=efCtrl.unsavedModificationsModalShown> <div class=modal-header> <button type=button class=close data-dismiss=modal aria-label="{{\'Close\' | translate}}"> <span aria-hidden=true>&times;</span> </button> <h4 class=modal-title> {{\'Unsaved modifications!\' | translate}} </h4> </div> <div class=modal-body> {{\'There are unsaved changes.\' | translate}} </div> <div class=modal-footer> <button type=button class="btn btn-default" data-dismiss=modal ng-click=efCtrl.continueWithoutSaving()> {{\'Continue without saving\' | translate}} </button> <button type=button class="btn btn-primary" data-dismiss=modal> {{\'Cancel\' | translate}} </button> <button type=button class="btn btn-default" data-dismiss=modal ng-click=efCtrl.submit()> {{\'Save\' | translate}} </button> </div> </ngeo-modal> <form novalidate name=form class="form gmf-editfeature-attributes-container" ng-if=efCtrl.attributes> <div class=row> <div class=col-sm-12> <a class=close ng-click=efCtrl.cancel() ng-disabled=efCtrl.pending title="{{\'Cancel modifications | translate\'}}" href>&times;</a> </div> </div> <ngeo-attributes ngeo-attributes-attributes=::efCtrl.attributes ngeo-attributes-disabled=efCtrl.pending ngeo-attributes-feature=::efCtrl.feature> </ngeo-attributes> <input type=submit value="{{\'Save\' | translate}}" class="btn btn-sm btn-default gmf-editfeature-btn-save" ng-click="form.$valid && efCtrl.save()" ng-disabled=!efCtrl.dirty title="{{\'Save modifications | translate\'}}"> <a class="btn btn-sm btn-default gmf-editfeature-btn-cancel" ng-click=efCtrl.confirmCancel() ng-disabled=efCtrl.pending title="{{\'Cancel modifications | translate\'}}" href>{{\'Cancel\' | translate}}</a> <button class="btn btn-sm btn-link gmf-editfeature-btn-delete" ng-click=efCtrl.delete() ng-disabled=efCtrl.pending ng-show=efCtrl.featureId title="{{\'Delete this feature | translate\'}}"> <span class="fa fa-trash"></span> {{\'Delete\' | translate}} </button> </form> </div> </div> </div> ');
a.put("gmf/layertree.html",'<div ng-if=::!layertreeCtrl.isRoot id=gmf-layertree-node-{{::layertreeCtrl.uid}} ng-class="[layertreeCtrl.node.children ? \'gmf-layertree-group\' : \'gmf-layertree-leaf\', \'gmf-layertree-depth-\' + layertreeCtrl.depth, gmfLayertreeCtrl.getResolutionStyle(layertreeCtrl.node), gmfLayertreeCtrl.getNodeState(layertreeCtrl)]"> <div class=ngeo-sortable-handle ng-show="layertreeCtrl.depth === 1 && gmfLayertreeCtrl.layers.length > 1"> <i class="gmf-layertree-sortable-handle-icon fa fa-ellipsis-v"></i> </div> <a ng-if=::layertreeCtrl.node.children data-toggle=collapse href=#gmf-layertree-layer-group-{{::layertreeCtrl.uid}} aria-expanded={{::layertreeCtrl.node.metadata.isExpanded}} class="fa gmf-layertree-expand-node fa-fw"> </a> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl) ng-if=::!layertreeCtrl.node.children ng-class="::{\'gmf-layertree-no-layer-icon\' : !gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)}" class=gmf-layertree-layer-icon> <img ng-if=::(legendIconUrl=gmfLayertreeCtrl.getLegendIconURL(layertreeCtrl)) ng-src={{::legendIconUrl}}> </a> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl) ng-if=::layertreeCtrl.node.children ng-class="[\'fa fa-fw\', layertreeCtrl.node.children && !layertreeCtrl.layer.loading ? \'gmf-layertree-state\' : \'fa-refresh fa-spin\']"> </a> <a href ng-click=::gmfLayertreeCtrl.toggleActive(layertreeCtrl) class=gmf-layertree-name title="{{layertreeCtrl.node.name | translate}}"> {{layertreeCtrl.node.name | translate}} <i class="gmf-icon gmf-icon-search-go gmf-layertree-zoom" data-toggle=tooltip data-title="{{\'Not visible at current scale. Click to zoom.\'|translate}}" ng-click="::gmfLayertreeCtrl.zoomToResolution(layertreeCtrl); $event.preventDefault(); $event.stopPropagation();" ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) == \'on\'"> </i> <span ngeo-popover ngeo-popover-dismiss=.content ng-if="gmfLayertreeCtrl.getNodeState(layertreeCtrl) !== \'off\' && layertreeCtrl.node.time && layertreeCtrl.node.time.mode !== \'disabled\'"> <span ngeo-popover-anchor class="fa fa-clock-o" ng-click="$event.preventDefault(); $event.stopPropagation()"> </span> <div ngeo-popover-content> <ngeo-date-picker ng-if="::layertreeCtrl.node.time.widget === \'datepicker\'" time=layertreeCtrl.node.time on-date-selected="gmfLayertreeCtrl.updateWMSTimeLayerState(layertreeCtrl, time)"> </ngeo-date-picker> <gmf-time-slider ng-if="::layertreeCtrl.node.time.widget === \'slider\'" gmf-time-slider-time=layertreeCtrl.node.time gmf-time-slider-on-date-selected="gmfLayertreeCtrl.updateWMSTimeLayerState(layertreeCtrl, time)"> </gmf-time-slider> </div> </span> <span class="fa fa-pencil" title="{{\'Currently editing this layer\'|translate}}" ng-if=layertreeCtrl.node.editing> </span> </a> <span class=gmf-layertree-right-buttons> <a href ng-if="::layertreeCtrl.depth == 1" ng-click=gmfLayertreeCtrl.removeNode(layertreeCtrl.node)> <span class="fa fa-trash"></span> </a> <span ngeo-popover ng-if="::(layertreeCtrl.depth === 1 && !layertreeCtrl.node.mixed) || (layertreeCtrl.depth > 1 && layertreeCtrl.parent.node.mixed && !layertreeCtrl.node.children) || (gmfLayertreeCtrl.getLegendURL(layertreeCtrl) && layertreeCtrl.node.metadata.legend)" ngeo-popover-dismiss=.content> <span ngeo-popover-anchor class="extra-actions fa fa-cog"> </span> <div ngeo-popover-content> <ul> <li ng-if="::(layertreeCtrl.depth === 1 && !layertreeCtrl.node.mixed) || (layertreeCtrl.depth > 1 && layertreeCtrl.parent.node.mixed)"> <i class="fa fa-tint fa-fw"></i> <span for=layer-opactity>{{\'Opacity\'|translate}}</span> <input class=input-action name=layer-opactity type=range min=0 max=1 step=0.01 ng-model=layertreeCtrl.layer.opacity> </li> <li ng-if="::gmfLayertreeCtrl.getLegendURL(layertreeCtrl) && layertreeCtrl.node.metadata.legend"> <i class="fa fa-th-list fa-fw"></i> <a title="{{\'Show/hide legend\'|translate}}" ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\'); popoverCtrl.dismissPopover()" data-toggle=collapse href> {{\'Show/hide legend\'|translate}} </a> </li> </ul> </div> </span> <span class=gmf-layertree-metadata ng-if=::layertreeCtrl.node.metadata.metadataUrl> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow === true"> <a title="{{\'More informations\'|translate}}" href={{::layertreeCtrl.node.metadata.metadataUrl}} target=blank_> </a> </span> <span ng-if="::gmfLayertreeCtrl.openLinksInNewWindow !== true"> <a title="{{\'More informations\'|translate}}" href ng-click=gmfLayertreeCtrl.displayMetadata(layertreeCtrl)> </a> </span> </span> <a class="fa fa-align-left gmf-layertree-legend-button" ng-if="::gmfLayertreeCtrl.getLegendURL(layertreeCtrl) && layertreeCtrl.node.metadata.legend" title="{{\'Show/hide legend\'|translate}}" data-toggle=collapse href=#gmf-layertree-node-{{::layertreeCtrl.uid}}-legend> </a> </span> </div> <div ng-if="::!layertreeCtrl.isRoot && gmfLayertreeCtrl.getLegendURL(layertreeCtrl) && layertreeCtrl.node.metadata.legend" id=gmf-layertree-node-{{::layertreeCtrl.uid}}-legend class="collapse gmf-layertree-legend" ng-class="::[layertreeCtrl.node.metadata.isLegendExpanded ? \'in\' : \'\']"> <a title="{{\'Hide legend\'|translate}}" data-toggle=collapse ng-click="::gmfLayertreeCtrl.toggleNodeLegend(\'#gmf-layertree-node-\' + layertreeCtrl.uid + \'-legend\')" href> {{\'Hide legend\'|translate}} </a> <img ng-src={{gmfLayertreeCtrl.getLegendURL(layertreeCtrl)}}> </div> <ul id=gmf-layertree-layer-group-{{::layertreeCtrl.uid}} ng-if=::layertreeCtrl.node.children ng-class="{collapse: !layertreeCtrl.isRoot, in : layertreeCtrl.node.metadata.isExpanded}" ngeo-sortable="::layertreeCtrl.isRoot && gmfLayertreeCtrl.layers" ngeo-sortable-options="{handleClassName: \'ngeo-sortable-handle\', draggerClassName: \'gmf-layertree-dragger\', currDragItemClassName : \'gmf-layertree-curr-drag-item\'}"> <li class=gmf-layertree-node ng-repeat="node in layertreeCtrl.node.children" ng-class="\'gmf-layertree-depth-\' + layertreeCtrl.depth" ngeo-layertree=node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> ');
a.put("gmf/mobilemeasurepoint.html",'<a class="btn btn-default" ng-if=ctrl.active ng-click=ctrl.deactivate()> <span class="fa fa-times"></span> {{\'Close\' | translate}} </a> ');a.put("gmf/print.html",'<div class=gmf-print> <div ng-show="ctrl.isState(\'CAPABILITIES_NOT_LOADED\') !== true && ctrl.isState(\'ERROR_ON_GETCAPABILITIES\') !== true"> <div ng-repeat="customField in ctrl.fields.customs" class=form-group> <input ng-if="customField.type === \'number\'" ng-model=customField.value class=form-control type=number placeholder="{{customField.name | translate}}"> <input ng-if="customField.type === \'text\'" ng-model=customField.value class=form-control type=text placeholder="{{customField.name | translate}}"> <textarea ng-if="customField.type === \'textarea\'" ng-model=customField.value class=form-control row=3 placeholder="{{customField.name | translate}}"></textarea> <div ng-if="customField.type === \'checkbox\'" class=checkbox> <label> <input ng-model=customField.value type=checkbox> <span>{{customField.name | translate}}</span> </label> </div> </div> <div ng-show="ctrl.fields.legend !== undefined" class=checkbox> <label> <input ng-model=ctrl.fields.legend type=checkbox> <span translate>Legend</span> </label> </div> <div class=form-horizontal> <div ng-show="ctrl.fields.layouts.length !== 1" class=form-group> <label class="control-label col-md-5" translate>Layout</label> <div class=col-md-7> <div class="btn-group btn-block"> <button type=button class="btn btn-default form-control" data-toggle=dropdown> <span>{{ctrl.fields.layout | translate}}&nbsp;</span> <i class="fa fa-caret-down"></i> </button> <ul class="dropdown-menu dropdown-menu-right btn-block" role=menu> <li ng-repeat="layout in ctrl.fields.layouts"> <a ng-click=ctrl.setLayout(layout) href>{{layout | translate}}</a> </li> </ul> </div> </div> </div> <div ng-show="ctrl.fields.scales.length !== 1" class=form-group> <label class="control-label col-md-5" translate>Scale</label> <div class=col-md-7> <div class="btn-group btn-block"> <button type=button class="btn btn-default form-control" data-toggle=dropdown aria-expanded=false> <span>{{ctrl.fields.scale | ngeoScalify}}&nbsp;</span> <i class="fa fa-caret-down"></i> </button> <ul class="dropdown-menu btn-block" role=menu> <li ng-repeat="scale in ctrl.fields.scales"> <a ng-click=ctrl.setScale(scale) href>{{scale | ngeoScalify}}</a> </li> </ul> </div> </div> </div> <div ng-show="ctrl.fields.dpis.length !== 1" class=form-group> <label class="control-label col-md-3" translate>DPI</label> <div class=col-md-5> <div class="btn-group btn-block"> <button type=button class="btn btn-default form-control" data-toggle=dropdown aria-expanded=false> <span>{{ctrl.fields.dpi}}&nbsp;</span> <i class="fa fa-caret-down"></i> </button> <ul class="dropdown-menu btn-block" role=menu> <li ng-repeat="dpi in ctrl.fields.dpis"> <a href ng-click=ctrl.setDpi(dpi)>{{dpi}}</a> </li> </ul> </div> </div> </div> <div class=form-group> <label class="control-label col-md-3" translate>Rotation</label> <div class=col-md-5> <input class=form-control type=range ng-model=ctrl.getSetRotation ng-model-options="{getterSetter: true}" min=-180 max=180 data-toggle=tooltip title="{{\'You can also use Alt+Shift on the map\' | translate}}"> </div> <div class=col-md-4> <input class=form-control type=number ng-model=ctrl.getSetRotation ng-model-options="{getterSetter: true}"> </div> </div> </div> <div class="form-group pull-right"> <span ng-show="ctrl.isState(\'PRINTING\')"> <i class="fa fa-refresh fa-spin"></i> </span> <a ng-show="ctrl.isState(\'PRINTING\')" class="btn btn-link" href ng-click=ctrl.cancel() translate>Abort</a> <button ng-show=ctrl.fields.formats.png class="btn btn-primary" ng-click="ctrl.print(\'png\')">Image</button> <button ng-show=ctrl.fields.formats.pdf class="btn btn-primary" ng-click="ctrl.print(\'pdf\')">PDF</button> </div> <div ng-show="ctrl.isState(\'ERROR_ON_REPORT\')" class="form-group pull-left text-danger"> <p>{{\'Error during the print, please try again.\' | translate}}</p> </div> </div> <div ng-show="ctrl.isState(\'CAPABILITIES_NOT_LOADED\')" class="form-group pull-left"> <p>{{\'Connecting to the print server, please wait.\' | translate}}</p> </div> <div ng-show="ctrl.isState(\'ERROR_ON_GETCAPABILITIES\')" class="form-group pull-left text-danger"> <p>{{\'The print server is unavailable. Please, try later.\' | translate}}</p> </div> </div> ');
a.put("ngeo/attributes.html",'<fieldset ng-disabled=attrCtrl.disabled> <div class=form-group ng-repeat="attribute in ::attrCtrl.attributes"> <div ng-if="attribute.type !== \'geometry\'"> <label class=control-label>{{ ::attribute.name | translate }} <span class=text-muted>{{::attribute.required ? "*" : ""}}</span></label> <div ng-switch=attribute.type> <select name={{::attribute.name}} ng-required=attribute.required ng-switch-when=select ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <option ng-repeat="attribute in ::attribute.choices" value="{{ ::attribute }}"> {{ ::attribute }} </option> </select> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=date ui-date=attrCtrl.dateOptions ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-when=datetime ui-date=attrCtrl.dateOptions ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <input name={{::attribute.name}} ng-required=attribute.required ng-switch-default ng-model=attrCtrl.properties[attribute.name] ng-change=attrCtrl.handleInputChange(attribute.name); class=form-control type=text> <div ng-show="form.$submitted || form[attribute.name].$touched"> <p class=text-danger ng-show=form[attribute.name].$error.required> {{\'This field is required\' | translate}} </p> </div> </div> </div> </div> </fieldset> ');
a.put("gmf/share.html",'<div class=modal-header> <button type=button class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button> <h4 class=modal-title translate>Share this map</h4> </div> <div class=modal-body> <form role=form name=gmfShareForm novalidate> <div class=form-group> <label for=gmfShareInputShortLink translate>Permalink</label> <input type=text class=form-control id=gmfShareInputShortLink onclick=this.select() ng-model=shareCtrl.shortLink readonly=True> <p class=help-block translate>Copy this link to share it.</p> <p class=text-danger ng-if=shareCtrl.showLenghtWarning> <span class="fa fa-exclamation-triangle"></span> {{\'You have a lot of drawn elements in this map. The above link may not be correctly supported by some browsers.\' | translate}} </p> <p class=text-danger ng-if=::shareCtrl.errorOnGetShortUrl> <span class="fa fa-exclamation"></span> {{\'Error, cannot get the shortened URL.\' | translate}} </p> </div> <hr> <div class=gmf-share-email ng-if=::shareCtrl.enableEmail> <div class=form-group> <label for=gmfShareInputEmail translate>Send this link to</label> <input type=email class=form-control name=inputEmail id=gmfShareInputEmail placeholder=Email ng-model=shareCtrl.email required> <span ng-show="gmfShareForm.$submitted || gmfShareForm.inputEmail.$touched"> <span class=text-danger ng-show="gmfShareForm.inputEmail.$error.email || gmfShareForm.inputEmail.$error.required"> <i class="fa fa-exclamation-triangle" aria-hidden=true></i> {{\'Invalid email.\' | translate}}</span> </span> </div> <div class=form-group> <textarea class=form-control placeholder="{{\'Message (optional)\' |\u00a0translate }}" ng-model=shareCtrl.message></textarea> </div> <span class=text-success ng-if=shareCtrl.successfullySent> <i class="fa fa-check" aria-hidden=true></i> {{ \'Link successfully sent.\' | translate }} </span> <span class=text-danger ng-if=shareCtrl.errorOnsend> <i class="fa fa-exclamation" aria-hidden=true></i> {{ \'Error, the link has not been sent.\' | translate }} </span> </div> <div class=text-right> <button type=button class="btn btn-default" data-dismiss=modal translate>Close</button> <button ng-if=::shareCtrl.enableEmail type=submit class="btn btn-default btn-primary" ng-click=shareCtrl.sendShortUrl() ng-disabled=!gmfShareForm.$valid translate>Send </button> </div> </form> </div> ');
a.put("ngeo/grid.html",'<div class=ngeo-grid-table-container> <table float-thead=ctrl.floatTheadConfig ng-model=ctrl.configuration.data class="table table-bordered table-striped table-hover"> <thead class=table-header> <tr> <th ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-click=ctrl.sort(columnDefs.name)>{{columnDefs.name | translate}} <i ng-show="ctrl.sortedBy !== columnDefs.name" class="fa fa-fw"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === true" class="fa fa-caret-up"></i> <i ng-show="ctrl.sortedBy === columnDefs.name && ctrl.sortAscending === false" class="fa fa-caret-down"></i> </th> </tr> </thead> <tbody> <tr ng-repeat="attributes in ctrl.configuration.data" ng-class="[\'row-\' + ctrl.configuration.getRowUid(attributes), ctrl.configuration.isRowSelected(attributes) ? \'ngeo-grid-active\': \'\']" ng-click="ctrl.clickRow(attributes, $event)" ng-mousedown=ctrl.preventTextSelection($event)> <td ng-repeat="columnDefs in ctrl.configuration.columnDefs" ng-bind-html="attributes[columnDefs.name] | ngeoTrustHtml"></td> </tr> </tbody> </table> </div> ');
a.put("ngeo/scaleselector.html",'<div class="btn-group btn-block" ng-class="::{\'dropup\': scaleselectorCtrl.options.dropup}"> <button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span ng-bind-html=scaleselectorCtrl.currentScale|ngeoScalify></span>&nbsp;<i class=caret></i> </button> <ul class="dropdown-menu btn-block" role=menu> <li ng-repeat="zoomLevel in ::scaleselectorCtrl.zoomLevels"> <a href ng-click=scaleselectorCtrl.changeZoom(zoomLevel) ng-bind-html=::scaleselectorCtrl.getScale(zoomLevel)|ngeoScalify> </a> </li> </ul> </div> ');
a.put("gmf/mobilemeasurelength.html",'<a class="btn btn-default" ng-if="ctrl.drawing && (!ctrl.valid)" ng-click=ctrl.addPoint()> <span class="fa fa-check"></span> {{\'Set as starting point\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.dirty ng-click=ctrl.addPoint()> <span class="fa fa-plus"></span> {{\'Add new point\' | translate}} </a> <a class="btn btn-default" ng-if="ctrl.drawing && ctrl.valid && !ctrl.dirty" ng-click=ctrl.finish()> <span class="fa fa-check"></span> {{\'Terminate\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.valid ng-click=ctrl.clear()> <span class="fa fa-repeat"></span> {{\'Clear\' | translate}} </a> <a class="btn btn-default" ng-if=ctrl.active ng-click=ctrl.deactivate()> <span class="fa fa-times"></span> {{\'Close\' | translate}} </a> ');
a.put("gmf/profile.html",'<div class="gmf-profile-container panel" ng-show=ctrl.active> <div class=ngeo-profile ng-show=!ctrl.isErrored ngeo-profile=ctrl.profileData ngeo-profile-highlight=ctrl.profileHighlight ngeo-profile-options=::ctrl.profileOptions> </div> <ul class=gmf-profile-legend ng-show=!ctrl.isErrored> <li ng-repeat="name in ::ctrl.getLayersNames()"> <i class="fa fa-minus" style=color:{{::ctrl.getColor(name)}};></i> &nbsp;{{name | translate}}&nbsp;{{ctrl.currentPoint.elevations[name]}}&nbsp;{{ctrl.currentPoint.yUnits}} </li> </ul> <div class="gmf-profile-export btn-group dropup" ng-show=!ctrl.isErrored> <a class=dropdown-toggle href ng-show="ctrl.profileData.length !== 0" data-toggle=dropdown aria-expanded=false> {{\'Export\' | translate}}&nbsp;<i class="fa fa-caret-up"></i> </a> <ul class="dropdown-menu dropdown-menu-right" role=menu> <li> <a href ng-click=::ctrl.downloadCsv()> <i class="fa fa-table"></i>&nbsp;{{\'Download CSV\' | translate}}</a> </li> </ul> </div> <div class=gmf-profile-error ng-show=ctrl.isErrored> <p>{{\'The profile service does not respond, please try later.\' | translate}}</p> </div> <div class=close ng-click="ctrl.line = null">&times;</div> </div> ');
a.put("gmf/featurestyle.html",'<div ng-if="fsCtrl.feature && fsCtrl.type"> <div class=form-group> <input ng-model=fsCtrl.getSetName ng-model-options="{getterSetter: true}" placeholder="{{\'Name\' | translate}}" class=form-control> </div> </div> <div ng-if="fsCtrl.feature && fsCtrl.type" class=form-horizontal> <div class=form-group> <div ngeo-colorpicker ngeo-colorpicker-color=fsCtrl.color class=col-md-12> </div> </div> <div ng-if="fsCtrl.type === \'Point\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Size\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=3 max=20 step=1 ng-model=fsCtrl.getSetSize ng-model-options="{getterSetter: true}"> </div> </div> <div ng-if="fsCtrl.type === \'Text\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Size\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=8 max=30 step=1 ng-model=fsCtrl.getSetSize ng-model-options="{getterSetter: true}"> </div> </div> <div ng-if="fsCtrl.type === \'Circle\' || fsCtrl.type === \'LineString\' || fsCtrl.type === \'Polygon\' || fsCtrl.type === \'Rectangle\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Stroke\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=0.5 max=5 step=0.5 ng-model=fsCtrl.getSetStroke ng-model-options="{getterSetter: true}"> </div> </div> <div ng-if="fsCtrl.type === \'Circle\' || fsCtrl.type === \'Polygon\' || fsCtrl.type === \'Rectangle\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Opacity\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=0 max=1 step=0.05 ng-model=fsCtrl.getSetOpacity ng-model-options="{getterSetter: true}"> </div> </div> <div ng-if="fsCtrl.type === \'Text\'" class="form-group form-group-nomargin"> <label class="control-label col-md-4">{{\'Angle\' | translate}}</label> <div class=col-md-8> <input type=range class=form-control min=-180 max=180 step=22.5 ng-model=fsCtrl.getSetAngle ng-model-options="{getterSetter: true}"> </div> </div> <div ng-if="fsCtrl.type !== \'Text\'" class=form-group> <div class=col-md-12> <input id=gmf-featurestyle-showmeasure type=checkbox ng-model=fsCtrl.getSetShowMeasure ng-model-options="{getterSetter: true}"> <label ng-switch=fsCtrl.type for=gmf-featurestyle-showmeasure class=control-label> <span ng-switch-when=Circle> {{\'Display azimuth and radius\' | translate}} </span> <span ng-switch-when=Polygon> {{\'Display surface\' | translate}} </span> <span ng-switch-when=Rectangle> {{\'Display surface\' | translate}} </span> <span ng-switch-when=LineString> {{\'Display length\' | translate}} </span> <span ng-switch-when=Point> {{\'Display coordinates\' | translate}} </span> </label> <em class=text-muted> ({{ fsCtrl.measure }}) </em> </div> </div> </div> ');
a.put("gmf/search.html",'<div class=gmf-search> <input type=text placeholder={{ctrl.placeholder}} class=form-control ng-model=ctrl.inputValue ngeo-search=ctrl.options ngeo-search-datasets=ctrl.datasets ngeo-search-listeners=ctrl.listeners> <span class="gmf-clear-button ng-hide" ng-hide="!ctrl.clearButton || ctrl.inputValue == \'\'" ng-click=ctrl.onClearButton()> </span> </div> <span ng-show="ctrl.colorchooser && ctrl.displayColorPicker" ngeo-popover ngeo-popover-placement=bottom> <button class="gmf-color-button fa fa-tint" ngeo-popover-anchor data-original-title="{{\'Change the color of the search result\'|translate}}"></button> <div ngeo-popover-content> <div ngeo-colorpicker ngeo-colorpicker-color=ctrl.color></div> </div> </span> ');
a.put("gmf/displayquerygrid.html",'<div class="gmf-displayquerygrid panel"> <div class=close ng-click=ctrl.clear()> &times; </div> <ul class="nav nav-pills small" role=tablist> <li ng-repeat="gridSource in ctrl.getGridSources() track by gridSource.source.id" role=presentation ng-class="{\'active\' : ctrl.isSelected(gridSource)}" ng-click=ctrl.selectTab(gridSource)> <a href=#{{gridSource.source.id}} data-target=#{{gridSource.source.id}} aria-controls={{gridSource.source.id}} role=tab data-toggle=tab> <span ng-if="gridSource.source.tooManyResults !== true"> {{gridSource.source.label | translate}} ({{gridSource.source.features.length}}) </span> <span ng-if="gridSource.source.tooManyResults === true"> {{gridSource.source.label | translate}} ({{gridSource.source.totalFeatureCount}}*) </span> </a> </li> </ul> <div class=tab-content> <div ng-repeat="gridSource in ctrl.getGridSources() track by gridSource.source.id" role=tabpanel class=tab-pane ng-class="{\'active\' : ctrl.isSelected(gridSource)}" id={{gridSource.source.id}}> <ngeo-grid ngeo-grid-configuration=gridSource.configuration ng-if="gridSource.source.tooManyResults !== true"> </ngeo-grid> <div ng-if="gridSource.source.tooManyResults === true"> <div class="gmf-displayquerygrid-message alert alert-warning"> <p><span translate>The results can not be displayed because the maximum number has been reached</span> ({{ctrl.maxResults}}).</p> <p translate>Please refine your query.</p> </div> </div> </div> </div> <div class=navbar ng-show="!ctrl.pending && ctrl.getActiveGridSource() && ctrl.getActiveGridSource().configuration !== null"> <ul class="nav navbar-nav navbar-right"> <li class="small ng-hide" ng-show=ctrl.isOneSelected()> <p class="navbar-text ng-binding"> {{ctrl.getSelectedRowCount()}} <span translate>selected element(s)</span> </p> </li> <li ng-show=ctrl.isOneSelected() class=ng-hide> <button class="btn btn-link btn-xs" title="{{\'Zoom to selection\' | translate}}" ng-click=ctrl.zoomToSelection()> <i class="fa fa-search-plus"></i> <span translate>Zoom to</span> </button> </li> <li ng-show=ctrl.isOneSelected() class=ng-hide> <button class="btn btn-link btn-xs" title="{{\'Export selection as CSV\' | translate}}" ng-click=ctrl.downloadCsv()> <i class="fa fa-download"></i> <span translate>Export as CSV</span> </button> </li> <li class="dropdown navbar-link dropup"> <button type=button class="dropup btn btn-default btn-xs" data-toggle=dropdown aria-haspopup=true aria-expanded=false> <span translate>Select</span> <span class=caret></span> </button> <ul class=dropdown-menu aria-labelledby=dLabel> <li> <a href ng-click=ctrl.selectAll() translate>All</a> </li> <li> <a href ng-click=ctrl.unselectAll() translate>None</a> </li> <li> <a href ng-click=ctrl.invertSelection() translate>Reverse selection</a> </li> </ul> </li> </ul> </div> <div ng-show=ctrl.pending class=gmf-displayquerygrid-pending> <span class="fa fa-spinner fa-spin"></span> </div> </div> ');
a.put("gmf/mouseposition.html",'<div class="btn-group dropup"> <a type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span class=gmf-mouseposition-control-target></span> <span class=caret></span> </a> <ul class="dropdown-menu dropdown-menu-right" role=menu> <li class=dropdown-header translate>Coordinate systems</li> <li ng-repeat="projitem in ::ctrl.projections"> <a href ng-click=ctrl.setProjection(projitem)> <span class="fa fa-fw" ng-class="{\'fa-check\': ctrl.projection == projitem}"></span> {{::projitem.label}} </a> </li> </ul> </div> ');
a.put("gmf/editfeatureselector.html",'<div ng-switch=efsCtrl.selectedEditableNode> <div ng-switch-when=null> <select class=form-control ng-model=efsCtrl.selectedEditableNode ng-show="efsCtrl.availableEditableNodes.length > 0" ng-options="layer.name | translate for layer in efsCtrl.availableEditableNodes"> <option value translate>-- Choose a layer --</option> </select> <span ng-show="efsCtrl.availableEditableNodes.length == 0" translate>No editable layer available!</span> </div> <div ng-switch-default> <div class=row> <div class=col-sm-12> <span translate>Currently editing: </span> <b>{{ efsCtrl.selectedEditableNode.name | translate }}</b> <span class="fa fa-pencil"></span> <br> <button ng-click=efsCtrl.stopEditing() class="btn btn-link btn-xs pull-right"> <span class="fa fa-times"></span> {{\'Stop editing\' | translate}} </button> </div> </div> <gmf-editfeature gmf-editfeature-dirty=efsCtrl.dirty gmf-editfeature-editablenode=::efsCtrl.selectedEditableNode gmf-editfeature-editablewmslayer=::efsCtrl.selectedEditableWMSLayer gmf-editfeature-map=::efsCtrl.map gmf-editfeature-state=efsCtrl.state gmf-editfeature-tolerance=::efsCtrl.tolerance gmf-editfeature-vector=::efsCtrl.vectorLayer> </gmf-editfeature> </div> </div> ');
a.put("gmf/displayquerywindow.html",'<div class=gmf-displayquerywindow ng-class="{\'gmf-displayquerywindow-desktop\': ctrl.desktop, \'gmf-displayquerywindow-mobile\': !ctrl.desktop}" ng-show=ctrl.open ng-swipe-disable-mouse ng-swipe-left=ctrl.next() ng-swipe-right=ctrl.previous()> <button class=gmf-displayquerywindow-collapse-button type=button ng-show=::!ctrl.desktop ng-click="ctrl.collapsed = !ctrl.collapsed" ng-class="[ctrl.collapsed ? \'gmf-displayquerywindow-collapse-button-up\' : \'gmf-displayquerywindow-collapse-button-down\']"> </button> <div class=gmf-displayquerywindow-container> <button type=button class="btn fa-close close" ng-click=ctrl.close()> </button> <div class=gmf-displayquerywindow-animation-container ng-class="[ctrl.collapsed ? \'\' : \'gmf-displayquerywindow-animation-container-detailed\', ctrl.isNext ? \'gmf-displayquerywindow-next\' : \'gmf-displayquerywindow-previous\']"> <div ng-animate-swap=ctrl.animate class=gmf-displayquerywindow-slide-animation> <div class=gmf-displayquerywindow-header> <p class=gmf-displayquerywindow-title>{{ctrl.source.label | translate}}</p> <p class=gmf-displayquerywindow-subtitle>{{ctrl.getFeatureValues()[ctrl.source.identifierAttributeField]}}</p> </div> <div class=gmf-displayquerywindow-details> <table> <tr ng-repeat="(key, value) in ctrl.getFeatureValues()" ng-if="value !== undefined"> <td class=gmf-displayquerywindow-details-key title="{{key | translate}}">{{key | translate}}</td> <td class=gmf-displayquerywindow-details-value title={{value}} ng-bind-html=value></td> </tr> </table> </div> </div> </div> <div class=gmf-displayquerywindow-navigate> <div class=gmf-displayquerywindow-placeholder> <button type=button class="gmf-displayquerywindow-previous btn" ng-disabled=ctrl.isFirst() ng-show="ctrl.getResultLength() > 1" ng-click=ctrl.previous()> <span ng-show=::ctrl.desktop>{{\'Prev.\' | translate}}</span> </button> </div> <div class=gmf-displayquerywindow-results> <span ng-show=::!ctrl.desktop>{{\'Result\' | translate}}</span> <span>{{ctrl.currentResult + 1}}</span> <span>/</span> <span>{{ctrl.getResultLength()}}</span> <div ng-show=::ctrl.desktop class=dropup> <button type=button class="btn btn-default dropdown-toggle" data-toggle=dropdown aria-expanded=false> <span class="fa fa-filter"></span> <span class="fa fa-caret-up"></span> </button> <ul class="dropdown-menu dropdown-menu-right" role=menu> <li> <a href=# ng-click=ctrl.setSelectedSource(null)> <i class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedSource === null}"> </i> <span>{{\'All layers\' | translate}} ({{ctrl.ngeoQueryResult.total}})</span> </a> </li> <li role=separator class=divider> </li> <li ng-repeat-start="source in ctrl.ngeoQueryResult.sources | filter: ctrl.sourcesFilter" ng-repeat-end ng-class="{\'disabled\': source.features.length <= 0}"> <a href=# ng-click=ctrl.setSelectedSource(source)> <i class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedSource === source}"> </i> <span>{{source.label | translate}} ({{source.features.length}})</span> </a> </li> </ul> </div> </div> <div class=gmf-displayquerywindow-placeholder> <button type=button class="gmf-displayquerywindow-next btn" ng-disabled=ctrl.isLast() ng-show="ctrl.getResultLength() > 1" ng-click=ctrl.next()> <span ng-show=::ctrl.desktop>{{\'Next\' | translate}}</span> </button> </div> </div> </div> </div> ');
a.put("gmf/elevationwidget.html",'<div class="text-center btn-group dropup" gmf-elevation gmf-elevation-active=ctrl.active gmf-elevation-elevation=ctrl.elevationValue gmf-elevation-loading=ctrl.elevationLoading gmf-elevation-layer=ctrl.selectedElevationLayer gmf-elevation-map=::ctrl.map> <a type=button class="btn btn-default" aria-expanded=false ng-class="::{\'dropdown-toggle\': ctrl.layers.length > 1}" ng-attr-data-toggle="{{::(ctrl.layers.length > 1) ? \'dropdown\' : \'\'}}"> <span class=gmf-elevationwidget-value> {{ctrl.elevationValue | number}}<span ng-show=ctrl.elevationValue> m</span> <span ng-show=ctrl.elevationLoading class="fa fa-spinner"></span> <span ng-show="!ctrl.elevationValue && !ctrl.elevationLoading" translate>Elevation\u2026</span> </span><span class=caret ng-if="::ctrl.layers.length > 1"></span> </a> <ul class="dropdown-menu dropdown-menu-right" role=menu ng-if="::ctrl.layers.length > 1"> <li class=dropdown-header translate>Elevation data sources</li> <li ng-repeat="elevationItem in ::ctrl.layers"> <a href ng-click="ctrl.selectedElevationLayer = elevationItem"> <span class="fa fa-fw" ng-class="{\'fa-check\': ctrl.selectedElevationLayer === elevationItem}"></span> {{::elevationItem}} </a> </li> </ul> </div> ');
a.put("gmf/timeslider.html","<div class=gmf-time-slider> <div ui-slider=sliderCtrl.sliderOptions ng-model=sliderCtrl.dates> <span class=\"ui-slider-handle ui-state-default ui-corner-all\" tabindex=0 data-toggle=tooltip title> </span> </div> <div class=gmf-time-slider-displayed-dates> <div class=start-date ng-if=\"::sliderCtrl.time.mode === 'range'\"> <span>{{sliderCtrl.dates[0] | date : 'shortDate'}}</span> </div> <div class=gmf-time-slider-start-date ng-if=\"::sliderCtrl.time.mode === 'value'\"> <span>{{sliderCtrl.dates |\u00a0date : 'shortDate'}}</span> </div> <div class=gmf-time-slider-end-date ng-if=\"::sliderCtrl.time.mode === 'range'\"> <span>{{sliderCtrl.dates[1] |\u00a0date : 'shortDate'}}</span> </div> </div> </div> ");
a.put("gmf/backgroundlayerselector.html",'<ul class=gmf-backgroundlayerselector> <li ng-repeat="layer in ::ctrl.bgLayers" ng-click=ctrl.setLayer(layer) ng-class="{\'gmf-backgroundlayerselector-active\': ctrl.bgLayer == layer}"> <img class=gmf-thumb ng-src="{{::layer.get(\'metadata\')[\'thumbnail\']}}"> <span class=gmf-text>{{layer.get("label") | translate}}</span> </li> </ul> ');a.put("gmf/themeselector.html","<ul class=gmf-theme-selector> <li ng-repeat=\"theme in tsCtrl.themes\" ng-click=tsCtrl.setTheme(theme) ng-class=\"{'gmf-theme-selector-active': tsCtrl.currentTheme['name'] == theme.name}\"> <img class=gmf-thumb ng-src={{::theme.icon}}> <span class=gmf-text>{{theme.name | translate}}</span> </li> </ul> ");
a.put("ngeo/layertree.html",'<span ng-if=::!layertreeCtrl.isRoot>{{::layertreeCtrl.node.name}}</span> <input type=checkbox ng-if="::layertreeCtrl.node && !layertreeCtrl.node.children" ng-model=layertreeCtrl.getSetActive ng-model-options="{getterSetter: true}"> <ul ng-if=::layertreeCtrl.node.children> <li ng-repeat="node in ::layertreeCtrl.node.children" ngeo-layertree=::node ngeo-layertree-notroot ngeo-layertree-map=layertreeCtrl.map ngeo-layertree-nodelayerexpr=layertreeCtrl.nodelayerExpr ngeo-layertree-listenersexpr=layertreeCtrl.listenersExpr> </li> </ul> ');
a.put("ngeo/colorpicker.html",'<table class=ngeo-colorpicker-palette> <tr ng-repeat="colors in ::ctrl.colors"> <td ng-repeat="color in ::colors" ng-click=ctrl.setColor(color) ng-class="{\'ngeo-colorpicker-selected\': color == ctrl.color}"> <div ng-style="::{\'background-color\': color}"></div> </td> </tr> </table> ')}a.$inject=["$templateCache"];z.run(a)})();(function(){var a={},b={ga:a};(function(c){if("object"===typeof a&&"undefined"!==typeof b)b.ga=c();else{var d;"undefined"!==typeof window?d=window:"undefined"!==typeof global?d=global:"undefined"!==typeof self?d=self:d=this;d.Kq=c()}})(function(){return function d(a,b,g){function h(m,p){if(!b[m]){if(!a[m]){var q="function"==typeof require&&require;if(!p&&q)return q(m,!0);if(k)return k(m,!0);p=Error("Cannot find module '"+m+"'");throw p.code="MODULE_NOT_FOUND",p;}p=b[m]={ga:{}};a[m][0].call(p.ga,function(b){var d=
a[m][1][b];return h(d?d:b)},p,p.ga,d,a,b,g)}return b[m].ga}for(var k="function"==typeof require&&require,m=0;m<g.length;m++)h(g[m]);return h}({1:[function(a,b){function f(a){var b;a&&a.length&&(b=a,a=b.length);a=new Uint8Array(a||0);b&&a.set(b);a.zj=k.zj;a.Yg=k.Yg;a.sj=k.sj;a.ak=k.ak;a.Cg=k.Cg;a.$j=k.$j;a.yg=k.yg;a.Zj=k.Zj;a.toString=k.toString;a.write=k.write;a.slice=k.slice;a.copy=k.copy;a.Ok=!0;return a}function g(a){for(var b=a.length,d=[],e=0,f,g;e<b;e++){f=a.charCodeAt(e);if(55295<f&&57344>
f)if(g)if(56320>f){d.push(239,191,189);g=f;continue}else f=g-55296<<10|f-56320|65536,g=null;else{56319<f||e+1===b?d.push(239,191,189):g=f;continue}else g&&(d.push(239,191,189),g=null);128>f?d.push(f):2048>f?d.push(f>>6|192,f&63|128):65536>f?d.push(f>>12|224,f>>6&63|128,f&63|128):d.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}return d}b.ga=f;var h=a("ieee754"),k,m,n;k={zj:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},Yg:function(a,b){this[b]=a;this[b+1]=a>>>8;this[b+
2]=a>>>16;this[b+3]=a>>>24},sj:function(a){return(this[a]|this[a+1]<<8|this[a+2]<<16)+(this[a+3]<<24)},Cg:function(a){return h.read(this,a,!0,23,4)},yg:function(a){return h.read(this,a,!0,52,8)},$j:function(a,b){return h.write(this,a,b,!0,23,4)},Zj:function(a,b){return h.write(this,a,b,!0,52,8)},toString:function(a,b,d){var e=a="";d=Math.min(this.length,d||this.length);for(b=b||0;b<d;b++){var f=this[b];127>=f?(a+=decodeURIComponent(e)+String.fromCharCode(f),e=""):e+="%"+f.toString(16)}return a+=decodeURIComponent(e)},
write:function(a,b){a=a===m?n:g(a);for(var d=0;d<a.length;d++)this[b+d]=a[d]},slice:function(a,b){return this.subarray(a,b)},copy:function(a,b){b=b||0;for(var d=0;d<this.length;d++)a[b+d]=this[d]}};k.ak=k.Yg;f.byteLength=function(a){m=a;n=g(a);return n.length};f.isBuffer=function(a){return!(!a||!a.Ok)}},{ieee754:3}],2:[function(a,b){(function(f){function g(a){this.qb=k.isBuffer(a)?a:new k(a||0);this.U=0;this.length=this.qb.length}function h(a,b){var d=b.qb,e;e=d[b.U++];a+=268435456*(e&127);if(128>
e)return a;e=d[b.U++];a+=34359738368*(e&127);if(128>e)return a;e=d[b.U++];a+=4398046511104*(e&127);if(128>e)return a;e=d[b.U++];a+=562949953421312*(e&127);if(128>e)return a;e=d[b.U++];a+=72057594037927936*(e&127);if(128>e)return a;e=d[b.U++];if(128>e)return a+0x7fffffffffffffff*(e&127);throw Error("Expected varint not more than 10 bytes");}b.ga=g;var k=f.pq||a("./buffer");g.f=0;g.c=1;g.b=2;g.g=5;var m=Math.pow(2,63);g.prototype={destroy:function(){this.qb=null},Ag:function(a,b,d){for(d=d||this.length;this.U<
d;){var e=this.za(),f=this.U;a(e>>3,b,this);this.U===f&&this.Cp(e)}return b},$o:function(){var a=this.qb.Cg(this.U);this.U+=4;return a},Wo:function(){var a=this.qb.yg(this.U);this.U+=8;return a},za:function(){var a=this.qb,b,d;d=a[this.U++];b=d&127;if(128>d)return b;d=a[this.U++];b|=(d&127)<<7;if(128>d)return b;d=a[this.U++];b|=(d&127)<<14;if(128>d)return b;d=a[this.U++];b|=(d&127)<<21;return 128>d?b:h(b,this)},jp:function(){var a=this.U,b=this.za();if(b<m)return b;for(var d=this.U-2;255===this.qb[d];)d--;
d<a&&(d=a);for(var e=b=0;e<d-a+1;e++)var f=~this.qb[a+e]&127,b=b+(4>e?f<<7*e:f*Math.pow(2,7*e));return-b-1},Fg:function(){var a=this.za();return 1===a%2?(a+1)/-2:a/2},Uo:function(){return!!this.za()},Gg:function(){var a=this.za()+this.U,b=this.qb.toString("utf8",this.U,a);this.U=a;return b},Cp:function(a){a&=7;if(a===g.f)for(;127<this.qb[this.U++];);else if(a===g.b)this.U=this.za()+this.U;else if(a===g.g)this.U+=4;else if(a===g.c)this.U+=8;else throw Error("Unimplemented type: "+a);},finish:function(){this.length=
this.U;this.U=0;return this.qb.slice(0,this.length)}}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./buffer":1}],3:[function(a,b,f){f.read=function(a,b,d,e,f){var p;p=8*f-e-1;var q=(1<<p)-1,t=q>>1,x=-7;f=d?f-1:0;var v=d?-1:1,C=a[b+f];f+=v;d=C&(1<<-x)-1;C>>=-x;for(x+=p;0<x;d=256*d+a[b+f],f+=v,x-=8);p=d&(1<<-x)-1;d>>=-x;for(x+=e;0<x;p=256*p+a[b+f],f+=v,x-=8);if(0===d)d=1-t;else{if(d===q)return p?NaN:Infinity*(C?-1:1);p+=Math.pow(2,
e);d-=t}return(C?-1:1)*p*Math.pow(2,d-e)};f.write=function(a,b,d,e,f,p){var q,t=8*p-f-1,x=(1<<t)-1,v=x>>1,C=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;p=e?0:p-1;var N=e?1:-1,J=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,e=x):(e=Math.floor(Math.log(b)/Math.LN2),1>b*(q=Math.pow(2,-e))&&(e--,q*=2),b=1<=e+v?b+C/q:b+C*Math.pow(2,1-v),2<=b*q&&(e++,q/=2),e+v>=x?(b=0,e=x):1<=e+v?(b=(b*q-1)*Math.pow(2,f),e+=v):(b=b*Math.pow(2,v-1)*Math.pow(2,f),e=0));for(;8<=f;a[d+p]=b&255,p+=
N,b/=256,f-=8);e=e<<f|b;for(t+=f;0<t;a[d+p]=e&255,p+=N,e/=256,t-=8);a[d+p-N]|=128*J}},{}]},{},[2])(2)})})();(function(){var a={},b={ga:a};(function(c){if("object"===typeof a&&"undefined"!==typeof b)b.ga=c();else{var d;"undefined"!==typeof window?d=window:"undefined"!==typeof global?d=global:"undefined"!==typeof self?d=self:d=this;d.Qq=c()}})(function(){return function d(a,b,g){function h(m,p){if(!b[m]){if(!a[m]){var q="function"==typeof require&&require;if(!p&&q)return q(m,!0);if(k)return k(m,!0);p=Error("Cannot find module '"+m+"'");throw p.code="MODULE_NOT_FOUND",p;}p=b[m]={ga:{}};a[m][0].call(p.ga,function(b){var d=
a[m][1][b];return h(d?d:b)},p,p.ga,d,a,b,g)}return b[m].ga}for(var k="function"==typeof require&&require,m=0;m<g.length;m++)h(g[m]);return h}({1:[function(a,b){b.ga.Dq=a("./lib/vectortile.js");b.ga.Eq=a("./lib/vectortilefeature.js");b.ga.Fq=a("./lib/vectortilelayer.js")},{"./lib/vectortile.js":2,"./lib/vectortilefeature.js":3,"./lib/vectortilelayer.js":4}],2:[function(a,b){function f(a,b,d){3===a&&(a=new g(d,d.za()+d.U),a.length&&(b[a.name]=a))}var g=a("./vectortilelayer");b.ga=function(a,b){this.layers=
a.Ag(f,{},b)}},{"./vectortilelayer":4}],3:[function(a,b){function f(a,b,d,e,f){this.properties={};this.extent=d;this.type=0;this.Nc=a;this.hh=-1;this.$d=e;this.be=f;a.Ag(g,this,b)}function g(a,b,d){if(1==a)b.id=d.za();else if(2==a)for(a=d.za()+d.U;d.U<a;){var e=b.$d[d.za()],f=b.be[d.za()];b.properties[e]=f}else 3==a?b.type=d.za():4==a&&(b.hh=d.U)}a("point-geometry");b.ga=f;f.b=["Unknown","Point","LineString","Polygon"];f.prototype.bbox=function(){var a=this.Nc;a.U=this.hh;for(var b=a.za()+a.U,d=1,
e=0,f=0,g=0,t=Infinity,x=-Infinity,v=Infinity,C=-Infinity;a.U<b;)if(e||(e=a.za(),d=e&7,e>>=3),e--,1===d||2===d)f+=a.Fg(),g+=a.Fg(),f<t&&(t=f),f>x&&(x=f),g<v&&(v=g),g>C&&(C=g);else if(7!==d)throw Error("unknown command "+d);return[t,v,x,C]}},{"point-geometry":5}],4:[function(a,b){function f(a,b){this.version=1;this.name=null;this.extent=4096;this.length=0;this.Nc=a;this.$d=[];this.be=[];this.Zd=[];a.Ag(g,this,b);this.length=this.Zd.length}function g(a,b,d){15===a?b.version=d.za():1===a?b.name=d.Gg():
5===a?b.extent=d.za():2===a?b.Zd.push(d.U):3===a?b.$d.push(d.Gg()):4===a&&b.be.push(h(d))}function h(a){for(var b=null,d=a.za()+a.U;a.U<d;)b=a.za()>>3,b=1===b?a.Gg():2===b?a.$o():3===b?a.Wo():4===b?a.jp():5===b?a.za():6===b?a.Fg():7===b?a.Uo():null;return b}var k=a("./vectortilefeature.js");b.ga=f;f.prototype.feature=function(a){if(0>a||a>=this.Zd.length)throw Error("feature index out of bounds");this.Nc.U=this.Zd[a];a=this.Nc.za()+this.Nc.U;return new k(this.Nc,a,this.extent,this.$d,this.be)}},{"./vectortilefeature.js":3}],
5:[function(a,b){function f(a,b){this.x=a;this.y=b}b.ga=f;f.prototype={clone:function(){return new f(this.x,this.y)},add:function(a){return this.clone().Fk(a)},rotate:function(a){return this.clone().Qk(a)},round:function(){return this.clone().Rk()},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.ll(a))},ll:function(a){var b=a.x-this.x;a=a.y-this.y;return b*b+a*a},angle:function(){return Math.atan2(this.y,this.x)},Fk:function(a){this.x+=a.x;this.y+=a.y;
return this},Qk:function(a){var b=Math.cos(a);a=Math.sin(a);var d=a*this.x+b*this.y;this.x=b*this.x-a*this.y;this.y=d;return this},Rk:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}};f.b=function(a){return a instanceof f?a:Array.isArray(a)?new f(a[0],a[1]):a}},{}]},{},[1])(1)})})();function FB(a,b){b[b.length-1].Rd[a.getAttribute("k")]=a.getAttribute("v")}var GB=[null],HB=O(GB,{nd:function(a,b){b[b.length-1].bd.push(a.getAttribute("ref"))},tag:FB});
O(GB,{node:function(a,b){var c=b[0],d=b[b.length-1],e=a.getAttribute("id"),f=[parseFloat(a.getAttribute("lon")),parseFloat(a.getAttribute("lat"))];d.nodes[e]=f;a=P({Rd:{}},IB,a,b);Zb(a.Rd)||(f=new oj(f),Jh(f,!1,c),c=new yi(f),Ci(c,e),c.Ma(a.Rd),d.features.push(c))},way:function(a,b){var c=b[0],d=a.getAttribute("id");a=P({bd:[],Rd:{}},HB,a,b);b=b[b.length-1];for(var e=[],f=0,g=a.bd.length;f<g;f++)Ic(e,b.nodes[a.bd[f]]);a.bd[0]==a.bd[a.bd.length-1]?(f=new wj(null),f.S("XY",e,[e.length])):(f=new dj(null),
f.S("XY",e));Jh(f,!1,c);c=new yi(f);Ci(c,d);c.Ma(a.Rd);b.features.push(c)}});var IB=O(GB,{tag:FB});function JB(a,b){return P({},KB,a,b)}function LB(a,b){return P({},MB,a,b)}function NB(a,b){if(b=JB(a,b))return a=[Sd(a.getAttribute("width")),Sd(a.getAttribute("height"))],b.size=a,b}function OB(a,b){return P([],PB,a,b)}var QB=[null,"http://www.opengis.net/wms"];O(QB,{Service:L(function(a,b){return P({},RB,a,b)}),Capability:L(function(a,b){return P({},SB,a,b)})});
var SB=O(QB,{Request:L(function(a,b){return P({},TB,a,b)}),Exception:L(function(a,b){return P([],UB,a,b)}),Layer:L(function(a,b){return P({},VB,a,b)})}),RB=O(QB,{Name:L(R),Title:L(R),Abstract:L(R),KeywordList:L(OB),OnlineResource:L(rd),ContactInformation:L(function(a,b){return P({},WB,a,b)}),Fees:L(R),AccessConstraints:L(R),LayerLimit:L(Rd),MaxWidth:L(Rd),MaxHeight:L(Rd)}),WB=O(QB,{ContactPersonPrimary:L(function(a,b){return P({},XB,a,b)}),ContactPosition:L(R),ContactAddress:L(function(a,b){return P({},
YB,a,b)}),ContactVoiceTelephone:L(R),ContactFacsimileTelephone:L(R),ContactElectronicMailAddress:L(R)}),XB=O(QB,{ContactPerson:L(R),ContactOrganization:L(R)}),YB=O(QB,{AddressType:L(R),Address:L(R),City:L(R),StateOrProvince:L(R),PostCode:L(R),Country:L(R)}),UB=O(QB,{Format:Ad(R)}),VB=O(QB,{Name:L(R),Title:L(R),Abstract:L(R),KeywordList:L(OB),CRS:Cd(R),EX_GeographicBoundingBox:L(function(a,b){var c=P({},ZB,a,b);if(c){a=c.westBoundLongitude;b=c.southBoundLatitude;var d=c.eastBoundLongitude,c=c.northBoundLatitude;
return void 0===a||void 0===b||void 0===d||void 0===c?void 0:[a,b,d,c]}}),BoundingBox:Cd(function(a){var b=[Qd(a.getAttribute("minx")),Qd(a.getAttribute("miny")),Qd(a.getAttribute("maxx")),Qd(a.getAttribute("maxy"))],c=[Qd(a.getAttribute("resx")),Qd(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),extent:b,res:c}}),Dimension:Cd(function(a){return{name:a.getAttribute("name"),units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:Nd(a.getAttribute("multipleValues")),
nearestValue:Nd(a.getAttribute("nearestValue")),current:Nd(a.getAttribute("current")),values:R(a)}}),Attribution:L(function(a,b){return P({},$B,a,b)}),AuthorityURL:Cd(function(a,b){if(b=JB(a,b))return b.name=a.getAttribute("name"),b}),Identifier:Cd(R),MetadataURL:Cd(function(a,b){if(b=JB(a,b))return b.type=a.getAttribute("type"),b}),DataURL:Cd(JB),FeatureListURL:Cd(JB),Style:Cd(function(a,b){return P({},aC,a,b)}),MinScaleDenominator:L(Pd),MaxScaleDenominator:L(Pd),Layer:Cd(function(a,b){var c=b[b.length-
1],d=P({},VB,a,b);if(d)return b=Nd(a.getAttribute("queryable")),void 0===b&&(b=c.queryable),d.queryable=void 0!==b?b:!1,b=Sd(a.getAttribute("cascaded")),void 0===b&&(b=c.cascaded),d.cascaded=b,b=Nd(a.getAttribute("opaque")),void 0===b&&(b=c.opaque),d.opaque=void 0!==b?b:!1,b=Nd(a.getAttribute("noSubsets")),void 0===b&&(b=c.noSubsets),d.noSubsets=void 0!==b?b:!1,(b=Qd(a.getAttribute("fixedWidth")))||(b=c.fixedWidth),d.fixedWidth=b,(a=Qd(a.getAttribute("fixedHeight")))||(a=c.fixedHeight),d.fixedHeight=
a,["Style","CRS","AuthorityURL"].forEach(function(a){a in c&&(d[a]=(d[a]||[]).concat(c[a]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(a){a in d||(d[a]=c[a])}),d})}),$B=O(QB,{Title:L(R),OnlineResource:L(rd),LogoURL:L(NB)}),ZB=O(QB,{westBoundLongitude:L(Pd),eastBoundLongitude:L(Pd),southBoundLatitude:L(Pd),northBoundLatitude:L(Pd)}),TB=O(QB,{GetCapabilities:L(LB),GetMap:L(LB),GetFeatureInfo:L(LB)}),MB=O(QB,{Format:Cd(R),
DCPType:Cd(function(a,b){return P({},bC,a,b)})}),bC=O(QB,{HTTP:L(function(a,b){return P({},cC,a,b)})}),cC=O(QB,{Get:L(JB),Post:L(JB)}),aC=O(QB,{Name:L(R),Title:L(R),Abstract:L(R),LegendURL:Cd(NB),StyleSheetURL:L(JB),StyleURL:L(JB)}),KB=O(QB,{Format:L(R),OnlineResource:L(rd)}),PB=O(QB,{Keyword:Ad(R)});(function(){var a={},b={ga:a};(function(c){if("object"===typeof a&&"undefined"!==typeof b)b.ga=c();else{var d;"undefined"!==typeof window?d=window:"undefined"!==typeof global?d=global:"undefined"!==typeof self?d=self:d=this;d.Lq=c()}})(function(){return function d(a,b,g){function h(m,p){if(!b[m]){if(!a[m]){var q="function"==typeof require&&require;if(!p&&q)return q(m,!0);if(k)return k(m,!0);p=Error("Cannot find module '"+m+"'");throw p.code="MODULE_NOT_FOUND",p;}p=b[m]={ga:{}};a[m][0].call(p.ga,function(b){var d=
a[m][1][b];return h(d?d:b)},p,p.ga,d,a,b,g)}return b[m].ga}for(var k="function"==typeof require&&require,m=0;m<g.length;m++)h(g[m]);return h}({1:[function(a,b,f){a=a("./processor");f.Bq=a},{"./processor":2}],2:[function(a,b){function f(a){var b=!0;try{new ImageData(10,10)}catch(d){b=!1}return function(d){var e=d.buffers,f=d.meta,g=d.width,h=d.height,k=e.length,m=e[0].byteLength;if(d.imageOps){m=Array(k);for(d=0;d<k;++d){var G=m,D=d,H;H=new Uint8ClampedArray(e[d]);var y=g,K=h;H=b?new ImageData(H,y,
K):{data:H,width:y,height:K};G[D]=H}g=a(m,f).data}else{g=new Uint8ClampedArray(m);h=Array(k);G=Array(k);for(d=0;d<k;++d)h[d]=new Uint8ClampedArray(e[d]),G[d]=[0,0,0,0];for(e=0;e<m;e+=4){for(d=0;d<k;++d)D=h[d],G[d][0]=D[e],G[d][1]=D[e+1],G[d][2]=D[e+2],G[d][3]=D[e+3];d=a(G,f);g[e]=d[0];g[e+1]=d[1];g[e+2]=d[2];g[e+3]=d[3]}}return g.buffer}}function g(a,b){var d=Object.keys(a.sn||{}).map(function(b){return"var "+b+" = "+a.sn[b].toString()+";"}).concat(["var __minion__ = ("+f.toString()+")(",a.Eo.toString(),
");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),d=URL.createObjectURL(new Blob(d,{type:"text/javascript"})),d=new Worker(d);d.addEventListener("message",b);return d}function h(a,b){var d=f(a.Eo);return{postMessage:function(a){setTimeout(function(){b({data:{buffer:d(a),meta:a.meta}})},0)}}}function k(a){this.pf=!!a.Jq;var b;0===a.Hp?b=0:this.pf?b=1:b=a.Hp||1;var d=[];
if(b)for(var e=0;e<b;++e)d[e]=g(a,this.kh.bind(this,e));else d[0]=h(a,this.kh.bind(this,0));this.ce=d;this.lh=[];this.ae=0;this.Mc={};this.qf=null}var m=a("./util").Hn;k.prototype.destroy=function(){for(var a in this)this[a]=null;this.Lk=!0};k.prototype.Mk=function(){if(0===this.ae&&0<this.lh.length){var a=this.qf=this.lh.shift(),b=a.Yc[0].width,d=a.Yc[0].height,e=a.Yc.map(function(a){return a.data.buffer}),f=this.ce.length;this.ae=f;if(1===f)this.ce[0].postMessage({buffers:e,meta:a.vn,imageOps:this.pf,
width:b,height:d},e);else for(var g=4*Math.ceil(a.Yc[0].data.length/4/f),h=0;h<f;++h){for(var k=h*g,m=[],G=0,D=e.length;G<D;++G)m.push(e[h].slice(k,k+g));this.ce[h].postMessage({buffers:m,meta:a.vn,imageOps:this.pf,width:b,height:d},m)}}};k.prototype.kh=function(a,b){this.Lk||(this.Mc[a]=b.data,--this.ae,0===this.ae&&this.Pk())};k.prototype.Pk=function(){var a=this.qf,b=this.ce.length,d,e;if(1===b)d=new Uint8ClampedArray(this.Mc[0].buffer),e=this.Mc[0].meta;else{var f=a.Yc[0].data.length;d=new Uint8ClampedArray(f);
e=Array(f);for(var f=4*Math.ceil(f/4/b),g=0;g<b;++g){var h=g*f;d.set(new Uint8ClampedArray(this.Mc[g].buffer),h);e[g]=this.Mc[g].meta}}this.qf=null;this.Mc={};a.callback(null,m(d,a.Yc[0].width,a.Yc[0].height),e);this.Mk()};b.ga=k},{"./util":3}],3:[function(a,b,f){var g=!0;try{new ImageData(10,10)}catch(k){g=!1}var h=document.createElement("canvas").getContext("2d");f.Hn=function(a,b,d){if(g)return new ImageData(a,b,d);b=h.createImageData(b,d);b.data.set(a);return b}},{}]},{},[1])(1)})})();w.directive("ngeoControl",function(){return{restrict:"A",link:function(a,b,c){var d=a.$eval(c.ngeoControl);a=a.$eval(c.ngeoControlMap);au(d,b[0]);a.s.push(d)}}});u("ngeo.DesktopGeolocationEventType",{ERROR:"desktop-geolocation-error"});w.directive("ngeoDesktopGeolocation",function(){return{restrict:"A",scope:{getDesktopMapFn:"&ngeoDesktopGeolocationMap",getDesktopGeolocationOptionsFn:"&ngeoDesktopGeolocationOptions"},controller:"NgeoDesktopGeolocationController",controllerAs:"ctrl"}});
function dC(a,b,c,d,e){b.on("click",this.toggle.bind(this));this.g=b=a.getDesktopMapFn();var f=a.getDesktopGeolocationOptionsFn()||{};this.Sb=e;this.Ke=d.gb();this.Da=new qB({projection:T(b).da()});this.Da.on("error",function(b){this.Ke.clear();this.Je=!1;this.Sb.clear();this.Sb.error(b.message);a.$emit("desktop-geolocation-error",b)},this);this.b=new yi;f.positionFeatureStyle&&this.b.setStyle(f.positionFeatureStyle);this.lc=new yi;f.accuracyFeatureStyle&&this.lc.setStyle(f.accuracyFeatureStyle);
this.c=f.zoom;this.Je=!1;E(this.Da,I("accuracyGeometry"),function(){zi(this.lc,this.Da.get("accuracyGeometry")||null)},this);E(this.Da,I("position"),function(a){this.Mg(a)},this);c(this.Da)}u("ngeo.DesktopGeolocationController",dC);dC.$inject=["$scope","$element","ngeoDecorateGeolocation","ngeoFeatureOverlayMgr","ngeoNotification"];dC.prototype.toggle=function(){this.Je?(this.Ke.clear(),this.Je=!1,this.Sb.clear()):(this.Ke.ra(this.b),this.Ke.ra(this.lc),pB(this.Da,!0),this.Je=!0)};
dC.prototype.toggle=dC.prototype.toggle;dC.prototype.Mg=function(){var a=this.Da.get("position"),b=new oj(a);zi(this.b,b);Zn(T(this.g),a);void 0!==this.c&&ao(T(this.g),this.c);pB(this.Da,!1)};w.controller("NgeoDesktopGeolocationController",dC);function eC(a){return{restrict:"A",scope:{fileContent:"=ngeoFilereader",supported:"=?ngeoFilereaderSupported"},link:function(b,c){var d="FileReader"in a;(b.supported=d)&&c.bind("change",function(c){var d=new a.FileReader;d.onload=function(a){b.$apply(function(){b.fileContent=a.target.result})};d.readAsText(c.target.files[0])})}}}eC.$inject=["$window"];w.directive("ngeoFilereader",eC);w.directive("ngeoRecenter",function(){return{restrict:"A",link:function(a,b,c){function d(b){var c=b.attr("ngeo-extent");if(void 0!==c){var d=e.ka();Yn(T(e),a.$eval(c),d)}b=b.attr("ngeo-zoom");void 0!==b&&ao(T(e),a.$eval(b))}var e=a.$eval(c.ngeoRecenterMap);b.on("click","*",function(){d(angular.element($(this)))});b.on("change",function(a){d(angular.element(a.target.options[a.target.selectedIndex]))})}}});if("function"==typeof proj4){var fC=[166021.44,0,534994.66,9329005.18];proj4.defs("epsg:32631","+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs");proj4.defs("EPSG:32631","+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs");Ye(Te("epsg:32631"),fC);Ye(Te("EPSG:32631"),fC)};}).call(window);
//# sourceMappingURL=mobile.js.map
